你好，我是于航，欢迎来到我的 WebAssembly 入门课！

提起 WebAssembly，你可能对它的印象只是一个看上去比较“抽象”的新技术。它不像一个新推出的框架或者库，功能定位十分清晰，并且可以直观地通过代码来展示。

如果别人问我：“什么是 WebAssembly？”从一个十分严谨的角度来看，我可能会回答说：**“WebAssembly是基于栈式虚拟机的虚拟二进制指令集（V-ISA），它被设计为高级编程语言的可移植编译目标”。**

不知道你听到这样一段对 “WebAssembly是什么？” 这个问题的解答之后，会有怎样的感想。可能大多数人的第一直觉会感到疑惑，这跟它名字中的 “Web” 一词有什么关系？还有人可能会觉得，所谓指令集是属于 CPU 那一层次的，跟我的实际工作应该没有什么关系吧。

没错，所有这些真实的顾虑和疑惑，实际上都成为了阻碍 WebAssembly 这项技术被社区开发者广泛接纳的“绊脚石”。

**那为何我想要开设这样一门课程，来专门给你讲解这门技术呢？为什么我会如此痴迷这门技术？它到底有什么值得我们开发者去学习和使用的呢？**

## 我和 WebAssembly 那些事儿

说起来，WebAssembly（为了方便书写，后面我们简称为 Wasm）这门新技术，自 2015 年诞生至今，已经过去了将近 5 年的时间。而自 2017 年，我开始接触这门技术以来，便一直不断地在为它投入热情。2018年，我出版了国内第一本介绍该技术的书籍《深入浅出 WebAssembly》。
<div><strong>精选留言（22）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/13/44/ae/dccd3412.jpg" width="30px"><span>冷石然</span> 👍（7） 💬（4）<div>看完这篇，老师您总结里的那三个问题，我一个也没搞明白。只有我一个人这样么？所以，老师，wasm到底是什么？有什么用，或者说，我们为什么要用它，场景是什么呢？</div>2020-09-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg" width="30px"><span>giteebravo</span> 👍（6） 💬（1）<div>
就像 node.js 源于 web 但又不止 web 么？
</div>2020-09-08</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/lE1u95C1WYCQGbOtvGDECakur3O5V178eBL7FxeuZ0EUHlL20SFFPjSv4t1yzRbjT1zRlTefySbtkqyxjFFUibA/132" width="30px"><span>Geek_q2r6ep</span> 👍（6） 💬（1）<div>终于有相关教程了，开心! 好好学习，加油</div>2020-09-07</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erGrpGBdbyARRrdpeBRrBSfecct9V1s5zcyAeZgbQVonoL9WkeegVgWEhCIqexoibE4Y7MPcWzichmg/132" width="30px"><span>凢凢</span> 👍（1） 💬（1）<div>老师，前端一枚，对这方面完全不了解，是不是得去打卡C++再来？</div>2020-11-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2a/07/68/80923b0c.jpg" width="30px"><span>Joshua丿0o弌</span> 👍（0） 💬（1）<div>WebAssembly对前端人员来讲可能很难普及，因为要学一门系统级编程语言。由此，我想到了Unity是最早支持WebAssembly的开发引擎，可以直接发布成Web网页，Unity使用的是C#，从Unity2021.2版开始内置了Visual Scripting这种可视化开发方式，也就是不需要懂得编程，Visual Scripting是给设计师用的，所以前端人员用起来自然也没问题。所以我的想法是前端人员是不是可以用Unity做开发工具，轻松使用WebAssembly。但Unity最早是游戏引擎，发布的Web网页虽然运行很快，但启动有点慢，如果是一个简单网页不值得，做大型应用时有优势。于老师对这方面有没有想法？</div>2021-09-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/0f/70/cdef7a3d.jpg" width="30px"><span>Joe Black</span> 👍（0） 💬（1）<div>看起来用node.js可以运行wasm啊</div>2021-04-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/41/59/78042964.jpg" width="30px"><span>Cryhard</span> 👍（0） 💬（1）<div>上车！
（之前看过每日一课里面的分享，感觉于航老师应该靠谱）</div>2020-09-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg" width="30px"><span>qinsi</span> 👍（40） 💬（2）<div>目前看到的浏览器外的客户端应用似乎大多还只是把wasm当成一种“更好的Lua“来用，因为都是可以在一个内嵌的虚拟机中运行可更新的代码，所以常被用来实现代码逻辑的热更新。但要在封闭的花园中使用本身就有阻力（比如iOS版的微信小程序，如果允许热更新，应用审核就形同虚设）。

服务端方面，传统的组件大都提供了脚本扩展的功能（比如Nginx官方支持JavaScript，OpenResty和Redis等支持lua），同时也都可以编写原生组件来扩展功能（如Node.js的N-API）。wasm相比原生代码在可移植性上更好，同时性能上优于脚本，应该可以在一些新的场景中找到自己的位置。但从标准化的系统接口这个角度来说，这是以JVM为代表的一众生态一直在解决的问题，所以wasi更像是在另一个生态中重新发明一遍轮子。

当前有很多语言都号称支持wasm，但实现方式各不相同，性能也不一样。需要手工内存管理的语言通常都支持直接编译为wasm；带gc的语言可能就需要额外输出一个wasm实现的gc；脚本语言最省事，用wasm实现一个解释脚本的虚拟机就可以跑起来了。

对于web前端开发人员来讲，为了极致的运行性能而去重新学习和使用一门支持wasm的系统级编程语言，开发效率不升反降。所以wasm可能并不会为前端开发带来多少新的机会，相反应该是为系统级开发人员提供了一个进入前端的窗口。

以上是我当前的看法，希望学完之后能有新的认识。</div>2020-09-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/76/93/2e9bf8ab.jpg" width="30px"><span>arch</span> 👍（8） 💬（0）<div>绝大多数service mesh框架已支持wasm。Istio 1.5 回归单体架构，并抛却原有的 out-of-process 的数据面（Envoy）扩展方式，转而拥抱基于 WASM 的 in-proxy 扩展，以期获得更好的性能。</div>2020-09-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/9b/e6/4ca554f7.jpg" width="30px"><span>海德格尔r</span> 👍（6） 💬（0）<div>封面选的好，订阅少不了(doge)</div>2020-09-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/20/6e/46/a612177a.jpg" width="30px"><span>Jupiter</span> 👍（5） 💬（0）<div>从8月份就期待于航老师的这门WebAssembly的课程。 第一次接触WebAssembly是开发DApp, decentralized app, 因为现在工作的公司是一个做基于substrate 的blockchain的, 语言用的是Rust. 第二次听说WebAssembly是一个做C++的朋友，他有次特别开心的说我可以用C++写web application了，我当时还挺惊讶，因为我以为WebAssembly是Rust的附属品。希望能跟着老师的课入门，也很期待WebAssembly会有个什么样子的未来。</div>2020-09-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/fd/9d/1e54de40.jpg" width="30px"><span>David</span> 👍（2） 💬（0）<div>清晰的课程总览，赞！ 
期望讲C&#47;C++ 的优秀的代码库，同时期待多介绍些Rust与Wasm之间的协同与业界最佳实践。
一起成长������</div>2020-09-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/f6/80/85ec2c2a.jpg" width="30px"><span>连瑞龙</span> 👍（2） 💬（0）<div>作为一名嵌入式浏览器开发者，Wasm似乎是一个不错的进阶方向。</div>2020-09-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/61/f6/40731f37.jpg" width="30px"><span>德育处主任</span> 👍（2） 💬（0）<div>第一次听这门技术，学起来哈哈哈哈</div>2020-09-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/6b/de/686585ee.jpg" width="30px"><span>小C</span> 👍（2） 💬（0）<div>看到新出的不懂技术就想了解</div>2020-09-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/c3/08/74807039.jpg" width="30px"><span>Katherine</span> 👍（1） 💬（0）<div>期待课程内容～</div>2020-09-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/33/7d/d90e2e81.jpg" width="30px"><span>fa</span> 👍（1） 💬（0）<div>开始学习</div>2020-09-07</li><br/><li><img src="" width="30px"><span>Geek_82d6d7</span> 👍（0） 💬（0）<div>老师。这个Demo有下载地址吗&#xff1f;
</div>2024-12-06</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erkCVlic6jKywgiaicnicFckna9aT2PejjWBSkdjl8AARwB5x3RdMN1R1TEJcicwwNAsI5pVia2xNVBfQqg/132" width="30px"><span>小菜向神冲</span> 👍（0） 💬（0）<div>老师，最近准备在项目中使用ffmpeg.wasm实现对媒体流的一些操作，但在项目内会报一个sharedArrayBuffer is not defined的错误，我调研了一下原因，由于幽灵漏洞的原因现在主流的浏览器限制了对其使用，通过调研解决方法，在开发环境的vue.config.js中进行了same-origin和require-corp的配置，但依旧会报错，浏览器使用的是chrome97版本，不知道老师有没有什么好的解决方案？</div>2023-12-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f8/ba/d28174a9.jpg" width="30px"><span>Geek_zbvt62</span> 👍（0） 💬（0）<div>说实话看了第一节，还是糊涂的。我们最希望了解的是：到底wasm能干些什么什么</div>2023-08-19</li><br/><li><img src="" width="30px"><span>Geek_b232f0</span> 👍（0） 💬（0）<div>终于有相关教程了，开心! 好好学习，加油</div>2020-10-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/14/66/57b04294.jpg" width="30px"><span>Cailven</span> 👍（0） 💬（1）<div>ios 基于wkwebview开发，因此不兼容WebAssembly</div>2020-09-10</li><br/>
</ul>