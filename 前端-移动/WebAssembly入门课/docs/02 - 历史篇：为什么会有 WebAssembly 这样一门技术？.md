你好，我是于航。

在开始真正学习 Wasm 这门技术之前，我想先来问你一个问题：你有没有思考过，在 Web 技术的历史发展长河中，为什么会出现 Wasm 这样一门技术？现有的这些 Web 技术，又存在着哪些无法解决的问题？

要知道，所有新兴技术的诞生都一定有它存在的意义，或者要去解决的问题。比如 jQuery 之于浏览器的兼容性、Vue.js / React.js 之于 Web 应用的构建模式。

虽然用前端框架和库来类比 Wasm 不算十分合适，但我想阐述的是，Wasm 的出现也并非偶然。在这节课的内容中，我们就来一起看看 Wasm 诞生背后的那些故事。相信在学习完本课程后，你会对 Wasm 有了一些新的了解。而这些了解有时可能比一项技术本身更加重要。

## JavaScript 的发展和困境

1995 年末，Brendan Eich 仅用了 10 天时间便发明出了 JavaScript 编程语言，而在随后的二十多年中，JavaScript 已经成为了不可动摇的，用于开发 Web 前端应用的必备编程语言之一。

不仅如此，随着后来诸如 React Native、Electron 以及 Vue.js 等各类框架的不断涌现，JavaScript 曾经一度成为 GitHub 语言排行榜的年度冠军。JavaScript 也因此被广泛应用到了各行各业、各个领域的各类项目中。
<div><strong>精选留言（15）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/18/41/59/78042964.jpg" width="30px"><span>Cryhard</span> 👍（11） 💬（1）<div>ES6等后续版本如果解决了浏览器兼容性问题，后续不再需要“编译”回老版脚本语言，从而获得了性能保障。这样的情况是否会成为wasm的重大阻碍呢？</div>2020-09-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/20/6e/46/a612177a.jpg" width="30px"><span>Jupiter</span> 👍（9） 💬（1）<div>老师好，Typescript 可以设置参数类型，现在的项目中也经常使用，但是最后Typescript的代码也会被解释成Javascript, 所以Typescripts是不是只是规范程序员写代码，对于应用的性能其实没有什么帮助？</div>2020-09-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/ea/7a/d857723d.jpg" width="30px"><span>Vfeelit</span> 👍（4） 💬（1）<div>JS虽然动态，在TS把持下，jit 不进行或几乎不进行反优化，性能已经相当不错了吧。wasm不也通过vm转一圈最终产生机器码?</div>2021-01-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/ea/7a/d857723d.jpg" width="30px"><span>Vfeelit</span> 👍（1） 💬（1）<div>实现wasm的是虚拟机，任何语言，编译为某个中间语言并不是很困难的事。类似基于jvm, 它之上除了java还有其他语言，虽然都是基于jvm，但生态各不同。wasm 相比下不过就是一套vm规范，没有那么大想象力啊</div>2021-01-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/01/44/3a9b2b69.jpg" width="30px"><span>地球外地人</span> 👍（1） 💬（1）<div>老师好，感觉ts代码虽然被编译成了js，但是转换后的js代码内部也避免了很多类型转换的问题，js引擎对于这一部分没有什么正反馈吗</div>2020-09-17</li><br/><li><img src="" width="30px"><span>donglin</span> 👍（0） 💬（1）<div>文中说ASM.js会被编译成机器码保存，下次再次执行时便会直接使用已保存的机器码，从而提高性能。

这个不就是JIT机制嘛，但在iOS上是禁止的啊，所以ASM.js在iOS上也无法提高性能？</div>2022-10-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/29/bd/b4/7598663b.jpg" width="30px"><span>Carpe</span> 👍（0） 💬（1）<div>“据相关数据统计，截止 2019 年底，全世界一共有约 16 亿个可索引网页，而其中的 95% 都在使用 JavaScript。”数据来源于哪？</div>2022-09-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/0e/d9/e61ce097.jpg" width="30px"><span>郭纯</span> 👍（0） 💬（1）<div>在 web vr 领域下  场景中会设计到很多模型和特效如果大规模进行平移 旋转 缩放我感觉很适合 wasm 场景.</div>2020-09-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/04/8e/e75ecc5e.jpg" width="30px"><span>浩明啦</span> 👍（0） 💬（1）<div>评论里老师说AssemblyScript这个，我刚刚扫了一眼，我们现在ts的项目也能用这个来编译用到生产环境上么？ 不过很多的那些react 和vue框架打包后为啥不直接编译wasm呢？</div>2020-09-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/2f/1f/f95bd8c9.jpg" width="30px"><span>余文郁</span> 👍（0） 💬（1）<div>老师，ecma标准文档和Chrome官方文档地址可以分享一下吗</div>2020-09-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/76/93/2e9bf8ab.jpg" width="30px"><span>arch</span> 👍（4） 💬（1）<div>wasm纯cpu计算和native差别不大，但是一旦涉及到访存就麻烦了，因为wavm只能访问vm内的内存。这就和应用逻辑非常相关了。典型就是protobuf message操作导致读写放大。</div>2020-09-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/33/7d/d90e2e81.jpg" width="30px"><span>fa</span> 👍（2） 💬（0）<div>阻碍在于苹果允不允许我在iOS上使用，目前有人在做基于wasm的热更新，别像jspatch一样给封了</div>2020-09-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/ee/28/c04a0c83.jpg" width="30px"><span>小炭</span> 👍（1） 💬（0）<div>我靠，既然没看懂，看来要多读几遍。</div>2020-10-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/68/d7/29025f1f.jpg" width="30px"><span>前方的灯有点弱</span> 👍（1） 💬（0）<div>这个技术足以改变世界＋＋＋</div>2020-09-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2a/07/c3/0582c81b.jpg" width="30px"><span>汤圆喝两碗</span> 👍（0） 💬（0）<div>你好，关于使用Babel将新版预发转换成ES5这里我有点疑问。我的理解是Babel对代码进行翻译降级后，会在浏览器中运行ES5的代码，而不是新旧共存的状态，如果理解正确的话，产生的各类 Polyfill 代码会对Web应用体积产生影响的意思是指低版本的(ES5)的代码相对于高版本本身就比较冗余吗？</div>2024-01-07</li><br/>
</ul>