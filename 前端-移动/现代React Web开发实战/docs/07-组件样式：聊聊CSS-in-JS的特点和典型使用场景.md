你好，我是宋一玮，欢迎回到React组件的学习。

上节课我们稍微深入了解了React组件的渲染机制，讲到虚拟DOM是真实DOM的抽象，React开发者通过JSX等API声明组件树，React内部则会生成对应的虚拟DOM；组件props、state、context有变化时会触发协调过程，通过Diffing算法比对新旧虚拟DOM，最终只针对差异部分调用DOM API改变页面。

这节课我们来学习一项比较轻松的内容：**组件样式**。Web前端需要CSS来定义样式，应用拆分成组件后，CSS也需要组件化。

在 `oh-my-kanban` 项目中，你已经见识到了在JS（JSX）文件中导入CSS文件，你可能会好奇，一个JSX文件对应一个CSS文件，这不就是CSS的组件化了吗？其实这还远不够。CSS与JS天生就是异构的，对于React的组件层次结构，CSS很难做到一一对应。此外，不同组件中样式的隔离也是必须的。

那么我们就有下面这些问题需要解决：

- 如何为React组件定义样式，才能做到样式与组件的共生？
- 如何防止不同组件的CSS互相影响？
- 如何在CSS里使用props或state值？

前端尤其是React社区，先后推出了许多CSS-in-JS框架来解决这些问题。在这节课我会以流行度较高的 `emotion` 为例，介绍CSS-in-JS的特点和使用中的注意事项。
<div><strong>精选留言（14）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/21/69/79/b4132042.jpg" width="30px"><span>🐑</span> 👍（0） 💬（0）<div>你好，我是《现代React Web开发实战》的编辑辰洋，这是👇项目的源代码链接，供你学习与参考：https:&#47;&#47;gitee.com&#47;evisong&#47;geektime-column-oh-my-kanban&#47;releases&#47;tag&#47;v0.7.1</div>2022-09-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/47/e6/67b0b711.jpg" width="30px"><span>大海</span> 👍（15） 💬（1）<div>【原有KanbanBoard和KanbanColumn之间插入了一层名为 EmotionCssPropInternal 的组件，与 KanbanColumn 平级还插入了一个 Insertion 组件】这样会导致Developer Tools 几乎无法使用吧。因为页面有大量多余的组件，影响调试，特别是大型页面</div>2022-09-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/8d/96/c09eedfc.jpg" width="30px"><span>Custom_DOM</span> 👍（8） 💬（1）<div>为什么要做css in js啊，我觉得我可能有点难以接受，我觉得预编译scss 和less分离开单独做一个文件，更好维护样式呀，而且一个页面存js突然混入写css，让我看本js文件代码特别难受，会多出一些代码，比如可能是强迫症，我甚至通常情况下不愿意写style，我通常终是优先选择使用className，结合各种类选择器的合理规划，一个组件，我通常也写不了几个css类的感觉，更好维护与修改，可以说一下css In js可以具体解决开发中哪些痛点吗？</div>2022-10-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/54/b3/1a317ab0.jpg" width="30px"><span>右耳漏风</span> 👍（5） 💬（1）<div>宋老师，您可以展开说一下选择 emotion 而不是 styled-components 的原因吗？谢谢</div>2022-09-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2a/fa/90/cfba2d42.jpg" width="30px"><span>.</span> 👍（5） 💬（2）<div>老师可以在下一节课的开头，讲讲上一节课留下的思考题吗？</div>2022-09-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/ac/62/37912d51.jpg" width="30px"><span>东方奇骥</span> 👍（3） 💬（1）<div>感觉还是更喜欢Svelte、Vue这类前端框架。 React把html, js, css都合在一起了，感觉更像在写后端代码，不知道React作者是不是后端出身转前端的。</div>2022-09-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/96/87/bbdeb4ee.jpg" width="30px"><span>杨永安</span> 👍（2） 💬（2）<div>Styled-components的例子中，没太明白srtled.button是如何应用到Button组件的</div>2022-09-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/47/e6/67b0b711.jpg" width="30px"><span>大海</span> 👍（1） 💬（1）<div>在 jsx 里边写 css 样式，可读性变差了</div>2022-09-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/14/e2/e7e13e39.jpg" width="30px"><span>超级读书郎</span> 👍（0） 💬（1）<div>这一节整理的真好，包含了几种方案，并且深入讲解了emotion方案的几种开发中常见的case。另外稳文中的各种外链也很有用处。受益匪浅。</div>2022-11-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/47/e6/67b0b711.jpg" width="30px"><span>大海</span> 👍（0） 💬（2）<div>【你可能对 cssargs 这样的函数写法感到陌生】文中代码并没有这个函数啊</div>2022-09-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/30/dd/a6/4d0c9ee6.jpg" width="30px"><span>程序员一土</span> 👍（2） 💬（0）<div>对比于最近的原子 CSS，Tailwind 等，老师是什么看法，目前公司项目有应用吗</div>2023-02-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/b9/d8/92c2b3ab.jpg" width="30px"><span>海华呀</span> 👍（1） 💬（0）<div>1、Vue中的scoped ，</div>2022-10-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/ee/e5/c38dddf1.jpg" width="30px"><span>零度冷咖啡</span> 👍（0） 💬（0）<div>不考虑学习原子化样式命名的成本的话，我觉得 tailwind+style 内联样式还是很香的</div>2023-12-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/32/0e/5024c2dd.jpg" width="30px"><span>星空</span> 👍（0） 💬（0）<div>老师，我平时都是用less的className定义，当然有时候定义的层级有些多，class名称会很长。如果只是对单个元素定义样式，我会用style。请问在什么情况下使用css-in-js?</div>2023-11-12</li><br/>
</ul>