你好，我是石川。

对于大多Web应用来说，我们的程序所提供的功能是对外公开的，这给我们带来了流量的同时，也给我们的系统带来了风险。而且越是关注度高的应用，就越有可能遭到攻击，所以安全是任何应用都要重视的一个话题。

那么今天，我们来看一下在JavaScript中需要做的安全考虑。这里就包含了跨站脚本攻击（XSS）、跨站请求伪造（CSRF）和XXE漏洞。下面，我们来一一看一下这些问题，总结下相关的安全解决方法。

## 跨站脚本攻击

跨站脚本攻击是一种非常常见的攻击。顾名思义，它指的就是通过来自跨网站的脚本发起的攻击。为了降低出现XSS漏洞的可能性，有一条重要的开发原则是我们**应该禁止任何用户创建的未经过处理的数据传递到DOM中**。而当用户创建的数据必须传递到DOM中时，应该尽量以字符串的形式传递。

### 类字符串检查

我们可以通过多种方式在客户端和服务器上对数据进行检查。其中一种方法是利用JavaScript中的内置函数 `JSON.parse()`，它可以将文本转换为JSON对象，因此将数字和字符串与转换后的内容做对比。如果一致，就可以通过检查，但函数等复杂的数据类型的对比是会失败的，因为它们不符合与JSON兼容的格式。
<div><strong>精选留言（1）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/1c/f4/73/8079d3fd.jpg" width="30px"><span>郭慧娟</span> 👍（1） 💬（1）<div>&quot;因为在这种情况下，DOM 的结构和标签名称的控制权会在开发者自己手中，而负载只负责内容。&quot; 这句话有问题吧</div>2022-12-04</li><br/>
</ul>