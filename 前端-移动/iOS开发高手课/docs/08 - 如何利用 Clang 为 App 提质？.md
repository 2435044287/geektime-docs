你好，我是戴铭。

以前在工作中，有段时间连续发生了多次线上事故，在复盘时大家都提出是因为代码不规范、代码规范执行不到位，从而导致代码质量过差，无法监管，我们才被动处理线上事故。会上牢骚发完，会后应该怎么执行呢？

我们都知道，监管手段是需要自己动手建设的，第三方工具无法满足所有的业务技术规范监控。在上篇文章“Clang、Infer 和 OCLint ，我们应该使用谁来做静态分析？”中，我们提到通过 Clang 提供的丰富接口功能就可以开发出静态分析工具，进而管控代码质量。

除此之外，基于 Clang 还可以开发出用于代码增量分析、代码可视化、代码质量报告来保障 App 质量的系统平台，比如[CodeChecker](https://github.com/Ericsson/CodeChecker)。

比如，当周末发现线上问题时，你会发现很多时候分析问题的人都不在电脑边，无法及时处理问题。这时，我们就需要一款在线网页代码导航工具，比如 Mozilla 开发的 [DXR](https://github.com/mozilla/dxr#dxr)，方便在便携设备上去操作、分析问题，这样的工具都是基于 Clang 开发的。

Clang的功能如此强大，那么它到底是什么呢？Clang 做了哪些事情？Clang 还提供了什么能力可以为 App 提质呢？今天，我们就一起来看看这几个问题吧。

## 什么是 Clang？

关于Clang是什么，你可以先看一下如下所示的iOS开发的完整编译流程图。
<div><strong>精选留言（21）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/15/56/5f/b3f3d82e.jpg" width="30px"><span>Roger</span> 👍（59） 💬（1）<div>喂完奶来评论下，最近摸索出了学习这套教程的方法：先看文章，配合着音频防止走神。然后在github和google上搜索相关知识进行系统学习，比如之前讲到的启动优化，github上就有非常好的启动优化总结。再比如LLVM相关知识，腾讯课堂里小码哥就讲得非常仔细。所以将文章作为引子，然后系统的学习吧！</div>2019-03-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/4b/f4/de7809c1.jpg" width="30px"><span>tomcat</span> 👍（8） 💬（2）<div>我这里有一个利用clang libtooling进行方法名替换的应用，大家可以看看加深理解，https:&#47;&#47;www.jianshu.com&#47;p&#47;3a8fb6f7c55f</div>2019-03-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/44/11/37ec1136.jpg" width="30px"><span>鹏哥</span> 👍（8） 💬（1）<div>老师，前面的课程中你提到对某一领域要做到精而不是都只是了解，那你这里有这么多内容，我应该怎么选择需要去深入研究的内容呢？还是说所有的都需要去深入研究？</div>2019-03-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/75/60/e0adab56.jpg" width="30px"><span>LaiYoung_</span> 👍（4） 💬（2）<div>我写了两篇入门文章 https:&#47;&#47;github.com&#47;CYBoys&#47;Blogs&#47;blob&#47;master&#47;LLVM_Clang&#47;LLVM%20%26%20Clang%20%E5%85%A5%E9%97%A8.md 和 https:&#47;&#47;github.com&#47;CYBoys&#47;Blogs&#47;blob&#47;master&#47;LLVM_Clang&#47;Clang%20Plugin%20%E4%B9%8B%20Debug.md 还有一个关于代码规范的插件，没有戴老师写得好</div>2019-04-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/3b/05/b2776d73.jpg" width="30px"><span>Geek</span> 👍（2） 💬（1）<div>每天学一课都能感觉到自己的进步，课程很好，就靠学习来打发无聊的时间了</div>2019-03-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/91/fa/2416b166.jpg" width="30px"><span>cc</span> 👍（2） 💬（1）<div>都不懂 我该何去何从呢</div>2019-03-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/2f/cf/fb214a2c.jpg" width="30px"><span>Guarantee</span> 👍（1） 💬（1）<div>老师，图片上的中间代码 IR，是不是汇编代码？</div>2019-07-20</li><br/><li><img src="" width="30px"><span>drunkenMouse</span> 👍（0） 💬（1）<div>当我准备就绪打算开始写的时候，发现自己好像。。都不会Lisp语言 今天的作业够呛了。。</div>2019-03-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/14/9d/459bdda9.jpg" width="30px"><span>lion</span> 👍（0） 💬（1）<div>对于Clang这一块确实了解和接触的比较少，看了老师的文章，觉得似乎打开了一条新的通道，但是又感觉老师讲的东西有点多，不知道该从哪开始，所以想请教下如果想接触这块知识的话，从哪里着手比较好呢？</div>2019-03-28</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLpULTXKVEdpcic3J8yzZRMlAkHzuII8ap6cNqnPuviaxVunhkoOb60KIQSMmFH6Z65s3iaJb6H7Qbng/132" width="30px"><span>里奇</span> 👍（9） 💬（0）<div>老师可以写一点单元测试和持续集成相关的知识吗？</div>2019-03-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/39/86/8828805f.jpg" width="30px"><span>孟勃宇</span> 👍（8） 💬（0）<div>提个建议， 页面的跳转链接可以选择在新标签页打开。</div>2019-03-28</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/BgHpE3jibeSchicoGSyBibtACtdibsXDwC3uBhWw04DHw7ePDliaBhJj2mq0WZCbmf1VctJia1kBGnT0aIzh0M4ibfM4Q/132" width="30px"><span>Geek_8bbcd0</span> 👍（3） 💬（0）<div>本人也有写基于llvm clang 的libtooling 模块开发的系列文章《基于llvm clang 的objective-c代码混淆》系列，以及总结了开发中遇到的问题。并实现了一个完整的混淆工具，包括源码读取，编译参数生成，混淆代码等！特来留下痕迹：www.banmalu.top</div>2020-09-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/44/88/69580101.jpg" width="30px"><span>长方体混凝土移动工程师</span> 👍（2） 💬（0）<div>学习clang一段时间来整理的资料与详细注释
提供了完整的plugin与libtooling 开发的最简单的代码
https:&#47;&#47;github.com&#47;czqasngit&#47;iOS_senior
- _ -</div>2019-05-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/3e/80/31782d05.jpg" width="30px"><span>Crazy_cc</span> 👍（1） 💬（0）<div>别问，学就是了！</div>2019-03-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/52/9d/097598cb.jpg" width="30px"><span>平淡得像一只猫</span> 👍（0） 💬（0）<div>libtooling目前网上的方案都没有办法很好的落地，大型工程中根本无法应用，会有很多报错，找不到符号定义等等等问题</div>2021-11-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/3b/70/09eb8dba.jpg" width="30px"><span>素问</span> 👍（0） 💬（0）<div>A Memory Model for Static Analysis of C Programs 这篇文章的链接失效了</div>2021-04-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/36/66/8fc1c54b.jpg" width="30px"><span>涛</span> 👍（0） 💬（0）<div>看了文章才知道有这些东西 ，我是不是太菜了，还有救吗</div>2021-04-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/b6/58/f0cb60be.jpg" width="30px"><span>zhonglaoban</span> 👍（0） 💬（0）<div>用过clang-format，配合mac的automator，还挺方便的。</div>2020-08-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/30/53/01a6c4da.jpg" width="30px"><span>GODV</span> 👍（0） 💬（0）<div>老师的课程，看过以后还需要以后复习啊，总有种后知后觉感觉</div>2019-05-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/f3/63/07f51a40.jpg" width="30px"><span>SuperChao</span> 👍（0） 💬（0）<div>质量很高！</div>2019-03-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/8f/75/c653d505.jpg" width="30px"><span>梅永盛</span> 👍（0） 💬（0）<div>非常优秀，打算准备展开这方面的学习，</div>2019-03-28</li><br/>
</ul>