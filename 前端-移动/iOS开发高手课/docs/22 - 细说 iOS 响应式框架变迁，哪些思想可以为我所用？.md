你好，我是戴铭。

说到iOS 响应式框架，最开始被大家知道的是 ReactiveCocoa（简称RAC），后来比较流行的是 RxSwift。但据我了解，iOS原生开发使用 ReactiveCocoa框架的团队并不多，而前端在推出React.js 后，响应式思路遍地开花。

那么，**响应式框架到底是什么，为什么在iOS原生开发中没被广泛采用，却能在前端领域得到推广呢？**

我们先来看看响应式框架，它指的是能够支持响应式编程范式的框架。使用了响应式框架，你在编程时就可以使用数据流传播数据的变化，响应这个数据流的计算模型会自动计算出新的值，将新的值通过数据流传给下一个响应的计算模型，如此反复下去，直到没有响应者为止。

React.js框架的底层有个 Virtual DOM（虚拟文档对象模型），页面组件状态会和 Virtual DOM 绑定，用来和 DOM（文档对象模型）做映射与转换。当组件状态更新时，Virtual DOM 就会进行 Diff 计算，最终只将需要渲染的节点进行实际 DOM 的渲染。

JavaScript 每次操作 DOM 都会全部重新渲染，而Virtual DOM 相当于 JavaScript 和 DOM 之间的一个缓存，JavaScript 每次都是操作这个缓存，对其进行 Diff 和变更，最后才将整体变化对应到 DOM 进行最后的渲染，从而减少没必要的渲染。
<div><strong>精选留言（24）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/16/2f/50/b46a9b6a.jpg" width="30px"><span>哈</span> 👍（1） 💬（1）<div>在我的理解中，Masonry也属于响应式编程，框架的作者最初貌似是写JAVA的，Masonry的响应式貌似比RAC的要轻量级…RAC用到了很多运行时方法替换，调试起来比较麻烦</div>2019-04-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8c/67/e91fe8d3.jpg" width="30px"><span>景天儿</span> 👍（27） 💬（1）<div>1 普通的函数式编程，就是函数可以作为参数、返回值。这使得:
1.1 链式编程成为可能，Masonry就是一个特别好的例子。
1.2 异步调用，函数式编程的结果很像观察者模式。
1.3 同步调用，函数式编程的结果有点像模板模式。

2. 稍纯一些的函数式编程，则强调只用常量，不用变量，也就是可以赋值，不能修改删除，机器学习里面基本都是这么搞。强调输入一样时，输出也一样。

3. monad，以及连赋值都不允许的函数式，之前只听过，没有研究。看了这篇文章中推荐的王垠的博文，感觉理解加深了不少，尤其是参数、局部变量、全局变量与“状态”、数据传输关系的理解上。真的是坑…

4. swift里面支持的高阶函数，有点儿像上面第二种函数式编程。

5. 我理解的响应式编程，就是分离事件的发起者和接受者。其实target-action，block，delegate，kvo，通知，都是可以看作响应式编程。

6. 从设计模式的角度来说，响应式编程与观察者模式、状态模式的思想最接近。</div>2019-06-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/39/6b/5fcc65ad.jpg" width="30px"><span>bo</span> 👍（7） 💬（0）<div>RAC宏确实牛逼。看了源码学到了很多东西。现在公司项目中虽然没有引入 rac。但是把 rac 的宏提取出来用。自定义参数个数并依次处理，非常的方便。</div>2019-04-30</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJTOicFdCW2hgUwgfiaR9qSGabPvgLorp1Xcd7uLquXibWmKZxJibMsSeqibEpuHoSwusj2kOr86uLAzng/132" width="30px"><span>Geek_45fc02</span> 👍（6） 💬（0）<div>引入后RAC调试实在是太痛苦了，线程栈里嵌套了太多RAC内部的调用，很难追溯到用户真正使用的代码。</div>2019-05-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/7d/a0/323dea01.jpg" width="30px"><span>Donkeyman</span> 👍（1） 💬（1）<div>真正逻辑复杂的业务逻辑中不适合使用这些花里胡哨的东西，老老实实按照可读性最高的方式去写，哪怕代码丑一点也无所谓，可读性稳定性最重要</div>2021-08-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/33/a8/a5a00407.jpg" width="30px"><span>isaced</span> 👍（1） 💬（0）<div>React 时代相比传统 Web 开发除了 Virtual DOM 带来 UI 操作性能的提升，另一个更重要的点是引入单向数据流的思想配合响应式UI更新机制，降低业务开发复杂度，提升研发效率。</div>2021-06-02</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJVegfjqa0gM4hcRrBhZkIf7Uc5oeTMYsg6o5pd76IQlUoIIh2ic6P22xVEFtRnAzjyLtiaPVstkKug/132" width="30px"><span>xilie</span> 👍（1） 💬（0）<div>我觉得函数响应式编程其实是简化了程序的逻辑并解耦，就拿传值来说，对象 A 将属性 a 传给对象 B，B再传给 C, C 修改 a，A 再针对 a 的修改做响应，传统的赋值，整个数据和逻辑会随着传递越多越复杂，而响应式，则很简单啊，说不清楚，反正实际开发中，确实简单了很多</div>2019-05-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/53/71/4cf1b380.jpg" width="30px"><span>烘哄轰、</span> 👍（1） 💬（0）<div>React.js的Virtual DOM其实类似于JavaScript和Dom之间的一个缓存。JavaScript每次都是操作这个缓存，之后进行Diff计算和变更，最后才将整体变化对应到DOM进行最后的渲染。</div>2019-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/25/2b/079d321e.jpg" width="30px"><span>何乐乐</span> 👍（1） 💬（1）<div>我觉得React还有一个很重要的点是：React框架帮我们处理 UI 和状态同步，我们不需要用命令式的方式去操作 UI，我们只需要关注状态层数据的正确性。DOM diff 只是为了性能更好的更新 UI，最小化操作 DOM。
而 iOS 和 Android 原生都缺少比较好的声明式 UI 布局方式，当UI 视图改变时，没有太好的方式避免视图的重复创建和渲染。我们操作 UI 大部分时候还是使用命令式的方式。</div>2019-05-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/e8/40/a7fa1530.jpg" width="30px"><span>SZ</span> 👍（1） 💬（0）<div>KVO采用了isa swizzle，所以KVO过的class不能再次使用isa swizzle，这点会有限制，而且只能在objc runtime下使用，所以KVO的使用也越来越少了。</div>2019-05-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/fe/73/7c56ed19.jpg" width="30px"><span>家有萌柴fries</span> 👍（1） 💬（0）<div>ComponentKit老师有了解么？想问问看ComponentKit里面是怎么做到对state变化的监听呢？</div>2019-05-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/f5/4b/67495ca4.jpg" width="30px"><span>贰叁</span> 👍（1） 💬（0）<div>我的理解，观察者是实现响应式的关键，monad是实现函数式的关键。

函数式提供了  X –&gt; [X] ， –&gt; 的直观操作</div>2019-04-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/eb/4f/6a97b1cd.jpg" width="30px"><span>猪小擎</span> 👍（0） 💬（0）<div>DOM读盗墓，一节课的杜牧</div>2023-03-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/aa/26/911065ac.jpg" width="30px"><span>奈何桥上看流水</span> 👍（0） 💬（0）<div>kvo如果通过keypath获取改变的，例如self.model.namedemo.name</div>2021-05-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/39/f2/23506d84.jpg" width="30px"><span>kenshin</span> 👍（0） 💬（0）<div>个人感觉RAC在MVVM下的贡献会有一些，但是在定位问题，调试的时候会比较困难。</div>2021-02-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/a4/af/25976c4d.jpg" width="30px"><span>GL</span> 👍（0） 💬（0）<div>作者的demo使用了ReactiveCocoa，如果不使用ReactiveCocoa而只用响应式的思想怎么实现这个demo呢？</div>2021-01-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/48/d8/51ab657d.jpg" width="30px"><span>Sun0010</span> 👍（0） 💬（0）<div>我总感觉 响应式 其实是 数据改变能够马上响应到页面； 前端的Vue 就是通过get、set方法来知道数据的改变，然后去响应页面</div>2020-01-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/6c/56/07920099.jpg" width="30px"><span>微笑美男😄</span> 👍（0） 💬（0）<div>那篇宏的 没有看懂。有点难理解
</div>2019-09-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/36/be/f68a19b1.jpg" width="30px"><span>木木彡</span> 👍（0） 💬（0）<div>使用RAC挺多的吧</div>2019-04-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/71/45/ae5bb741.jpg" width="30px"><span>springxiao</span> 👍（0） 💬（0）<div>1、RN指的是React Native，而不是ReactiveCocoa，两个不同的框架
2、RN前两年火了一阵，貌似现在大厂用的也很少</div>2019-04-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/33/dc/5197a6b2.jpg" width="30px"><span>change</span> 👍（0） 💬（0）<div>大厂采用RN的理由是热跟新吗</div>2019-04-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/df/03/6613bd63.jpg" width="30px"><span>姜浩远</span> 👍（0） 💬（1）<div>既然看上去存在的好处不多，但为什么一些大厂还在使用 ReactiveCocoa 呢？</div>2019-04-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4c/98/9845e6b5.jpg" width="30px"><span>彭序猿</span> 👍（0） 💬（2）<div>有朋友能解释下：命令式、响应式、函数式、链式这几个的区别联系吗？</div>2019-04-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/57/2c/b0793828.jpg" width="30px"><span>ssala</span> 👍（0） 💬（0）<div>我的理解是，逻辑复杂以后，程序的内在复杂度提升，无论采用何种编程范式，无论是面向对象还是函数式编程，都不会降低程序本身的复杂度。而至于可读性，决定因素在编写代码的人，和使用的框架，语言关系不大。</div>2019-04-30</li><br/>
</ul>