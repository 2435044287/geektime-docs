你好，我是李江。今天我们一起来聊一聊图像的颜色空间。

图像的颜色空间是图像和视频技术里面的一个非常重要的知识点，在图像处理、视频编码等技术中你会经常遇到这个概念。

而至于它为什么重要，其实也很好理解。在现实世界中，我们的眼睛每天看到的颜色是千变万化的。为了能够更方便地表示和处理这些颜色，不同应用领域就建立了多种不同的颜色空间，主要包括RGB 、YUV、CMYK 、 HSI等（后面两种和这门课程没有关系，因此这里我们不再介绍）。

在视频技术中，我们经常碰到的颜色空间有两种：RGB和YUV，接下来我们就逐一看一看。

## RGB

RGB相对比较简单。顾名思义，它就是指图像的每一个像素都有R、G、B三个值。RGB是我们平常遇到最多的一种图像颜色空间，比如摄像头采集的原始图像就是RGB图像，且显示器显示的图像也是RGB图像。

一般来说，**我们的RGB图像，每一个像素都是分别存储R、G、B三个值，且三个值依次排列存储**。比如对于一张8bit位深的RGB图，每个值占用一个字节。但是，需要注意的是RGB图像像素中R、G、B三个值并不一定是按R、G、B顺序排列的，也有可能是B、G、R顺序排列。

比如OpenCV就经常使用BGR的排列方式来存储图像。所以在存储和读取RGB图像的时候需要稍微注意一下。RGB和BGR的存储方式如下图所示：
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/11/58/fc/c3be5d8b.jpg" width="30px"><span>yg</span> 👍（32） 💬（1）<div>这是因为 R、G、B 三个颜色是有相关性的，所以不太方便做图像压缩编码。 
老师，您这里说的rgb是有相关性的，这个相关性怎么理解呢？</div>2021-12-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/2e/8b/e53e1b98.jpg" width="30px"><span>阿金🥭</span> 👍（10） 💬（2）<div>感觉对U和V的介绍有点少，不利于理解为什么可以用422或420的采样来保证图片不失真</div>2021-11-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/23/88/de/04784f86.jpg" width="30px"><span>ForwardsHao</span> 👍（9） 💬（3）<div>江哥，那Limited Range的作用是什么，为什么一定要知道这个值，是需要做放缩吗？
假如做RGB和YUV的转换的时候，原来的色彩空间是limited，那么转换后以及最后恢复为原RGB的时候也是limited的值，那知道这个range的作用是啥。</div>2021-11-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/88/bb/8dfc4628.jpg" width="30px"><span>杨益祥</span> 👍（7） 💬（1）<div>请问江哥，nv21&#47;nv12以及yu12&#47;yv12怎样记住，这几个概念总是混淆了，每次用的时候都要翻出笔记看一下😂</div>2021-11-29</li><br/><li><img src="https://wx.qlogo.cn/mmopen/vi_32/yBBhL9I6vian2PMOo7xnibKp8EibiaCrqfXibk5YOQSfzyjfZPGnUqHy1x1ibVIVYddMnibFJlpJibutAicXsZibwqskFoibw/132" width="30px"><span>余健辉</span> 👍（3） 💬（1）<div>我现在是计算机研一学生，最近开始接触视频技术这方面的知识，想请问下江哥视频技术里有什么好的研究方向，然后是结合AI技术的</div>2021-11-24</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJV27QOK57cdpdh3E4hbArCOlccdtjCyWooF9fhjeSKAMo9SN1v9RODkrZUZD4RejjbdsqU2FIeMA/132" width="30px"><span>西钾钾</span> 👍（3） 💬（1）<div>YUV比RGB更适合的原因：
1、大部分的YUV格式数据量小
2、YUV将亮度(Y分量)和彩色分量分开，人眼对Y分量比较敏感，在做压缩时可以将UV分量压缩的多些，Y分量压缩的少些。


老师，还有一个问题YUV是浮点类型的，RGB是整型的，他们两个直接相互转换应该会导致图像不清晰吧。</div>2021-11-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/84/db/ef93601d.jpg" width="30px"><span>ShawnL</span> 👍（3） 💬（1）<div>YUV编码的时候使用的空间小，便于传输。那问题来了，使用422或者420的话，图像相对于原来的RGB会有损失么？</div>2021-11-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/24/d0/54/9230c283.jpg" width="30px"><span>琥 珀</span> 👍（3） 💬（2）<div>请问，花屏除了Stride，还有别的可能原因吗？</div>2021-11-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8d/1e/1b142ec2.jpg" width="30px"><span>codeAL</span> 👍（2） 💬（2）<div>江哥，YUV 4:2:0 为啥不命名为 YUV 4:1:1 感觉更容易理解，只是好奇</div>2022-07-14</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKGKnRsqeCd7VOIOrcA1eh9Vu5ky7t2C0elTt8S1T8efsXicNox0GMvbfVtb6B93VW3pLZtlhpl0Hw/132" width="30px"><span>蛮小满</span> 👍（1） 💬（1）<div>RGB转YUV420时，相当于每4个RGB才会产生一个UV？UV取的是哪个RGB转过来的有讲究吗？</div>2022-11-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/1b/74/9943957c.jpg" width="30px"><span>轩😊</span> 👍（1） 💬（2）<div>如果是 5*2像素的图片， 那YUV4:2:0 占用的16个字节吗？ 10 像素里前面的8个Y 对应两对U,V  剩下2个Y虽然不足4个 ，但也得用一对UV描述色彩，对吧？ 因此在5*2像素下，YUV4:2:0每个像素占用 16&#47;10 = 1.6个字节。我这么理解没错吧？江哥</div>2021-12-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg" width="30px"><span>qinsi</span> 👍（1） 💬（1）<div>很多图像处理算法灰度图就能跑，yuv的话只要读y分量就可以，rgb的话要全部读出来还要转换</div>2021-12-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/36/88/20b6a6ee.jpg" width="30px"><span>Simon</span> 👍（1） 💬（2）<div>装换公式是怎么推导出来的</div>2021-11-27</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJTqcBC6lVDsQE7f1Tr5elKibRfJv7v3RRok4Q6DyBxjFvlPNngWgWyVqZHLD60ibzicMtTxLZjZy2tw/132" width="30px"><span>Geek_ce0dd6</span> 👍（0） 💬（1）<div>我认为编码时候保存yuv：
1.节省空间
2.业内提供了yuv与其他色彩空间转换标准</div>2023-08-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/3c/a3/fe653f2d.jpg" width="30px"><span>河边的熊</span> 👍（0） 💬（1）<div>轮廓在信息就在，这里我想到yuv的分辨率，其实就是y分量的横向个数和纵向个数，老师概念梳理很清晰</div>2023-03-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/03/27/3a179672.jpg" width="30px"><span>未来</span> 👍（0） 💬（2）<div>YU16（或者称为 I422、YUV422P）
YV16（YUV422P）
老师，讲解中有几组这样的格式命名不太理解，YU16和YV16都可以称作YUV422P，那如果有人跟我说YUV422P我是不是应该跟他确认一下是YU16还是YV16？这个称呼如果不确认好，在解码的时候是否会有问题？</div>2022-10-13</li><br/><li><img src="" width="30px"><span>Geek_80bfb8</span> 👍（0） 💬（1）<div>江哥：花屏是什么意思，为什么读数据错了会花屏</div>2022-09-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/91/3d/0a639c56.jpg" width="30px"><span>志</span> 👍（0） 💬（2）<div>为啥不说下cmyk？因为只在图像处理中用得多？</div>2022-01-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/19/a6/4529cdfa.jpg" width="30px"><span>功夫熊猫</span> 👍（0） 💬（1）<div>老师您好，我这里有个小问题没想明白。在RGB转YUV的公式里面，每个像素的R,G,B值都会转换为对应的Y,U,V值，那yuv420这种他是如何做到四个像素点共用一个Y分量的呢，按我的理解应该每个像素点会转换出4个Y分量。谢谢老师</div>2021-12-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/6b/2c/b27eefc5.jpg" width="30px"><span>Abcd</span> 👍（0） 💬（1）<div>老师忘记讲YUV411了</div>2021-12-04</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKicQ5Jyv6xKyINPhC4ZLqgSBV3k54sW0Rk3XCczNWibCAO9om893fmKkEybvPzXckqZ6akewhTwUXw/132" width="30px"><span>huozhu0603</span> 👍（0） 💬（2）<div>请问大佬rgb像素格式倒转yuv有走gpu的好法子吗，ffmpeg啥的那cpu大循环看着难受啊</div>2021-12-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/db/64/f9628492.jpg" width="30px"><span>七号叽</span> 👍（0） 💬（1）<div>BT601 和 BT709 不同标准会影响什么吗？比如视频的清晰度会受到影响吗？</div>2021-11-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/5b/7e/b6b6a741.jpg" width="30px"><span>魏新勇</span> 👍（0） 💬（1）<div>摄像头解码出来的422或者420，在转成RGB显示的情况，二者有区别吗？有衡量方法吗？理论来说422出的图UV多些，应该更好。</div>2021-11-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/ec/f4/3c569056.jpg" width="30px"><span>西格玛</span> 👍（0） 💬（1）<div>正如上面例子说的，1283，stride后是1296，我读取到1283后，每次都跳过13个字节不就不花了吗？
花屏问题希望多讲讲，比较有意思</div>2021-11-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/5f/d5/2fec2911.jpg" width="30px"><span>yu</span> 👍（0） 💬（1）<div>请问老师，为什么BT601和BT709转换系数不同，就会影响清晰度呢，一个是标清、一个即使高清</div>2021-11-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/29/3e/65/897f9dfb.jpg" width="30px"><span>Rick</span> 👍（1） 💬（0）<div>这里的packed不太对吧，packed是YUV交错的，文章中的packed,其实应该是 Semi-Planar</div>2023-09-17</li><br/><li><img src="" width="30px"><span>Geek_9c9938</span> 👍（0） 💬（0）<div>文中 &quot;如果是系统采集出来给到用户的图像就是 YUV 的话，你也需要获取这个 YUV 的存储格式、转换标准和 Color Range。这样才能保证正确地处理 YUV 和 RGB 之间的转换。&quot;

意思是说转换还与 YUV 的存储格式（即 Planar 或 Packed ）有关系 ？</div>2023-12-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/3e/3c/fc3ad983.jpg" width="30px"><span>佳伦</span> 👍（0） 💬（0）<div>看了老师的课程更加理解相机参数背后的原理了，有的相机能拍420，好一点的能拍422，电影机能拍444，色度信息越多后期调色空间更大</div>2023-11-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/1b/74/9943957c.jpg" width="30px"><span>轩😊</span> 👍（0） 💬（0）<div>老师，如果 YUV 4:2:0 在存储某些分辩率图像时，不能刚好做到 4个Y分量 对应 1组 U,V分量 这种情况时怎么处理？    是剩下不足的4个Y分量对应一组UV?</div>2022-04-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/20/2d/dfa5bec8.jpg" width="30px"><span>Han</span> 👍（0） 💬（0）<div>老师，怎么感觉yuv里面的y分量的个数就代表了像素个数？每个像素一定有一个y，然后和其他y共享uv，是这样吧？</div>2022-04-09</li><br/>
</ul>