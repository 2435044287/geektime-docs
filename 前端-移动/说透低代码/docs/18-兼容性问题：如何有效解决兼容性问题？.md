你好，我是陈旭。

上一讲我们提到，在软件的演进过程中，特别是在低代码平台这样的庞大软件工程中，兼容性问题，也就是破坏性变更是无法避免的。只要软件的代码有改动，就有可能引入破坏性，因此破坏性变更与软件的演进之间如影随形、不可分割。

破坏性变更所造成的后果，有可能微乎其微，也有可能是致命的。会造成严重后果的破坏性变更往往会受到重点“照顾”从而被妥善解决，那些没那么大破坏力的破坏性变更，一旦泄露到线上，不仅会造成体验问题，还有可能造成小范围功能不可用。

这一讲我们就承接上一讲的内容，重点讲讲如何妥善处理兼容性问题。当然，发现破坏性变更是解决它的第一步，具体我已经在上一讲中详细介绍了，所以我建议你在继续这一讲的学习之前，先回顾一下上一讲的内容。在讲具体如何解决之前，我们先来分析下低代码平台中一般会有哪些类型的破坏性变更。

## 有哪些类型的破坏性变更？

**Schema数据结构的变更是低代码平台演进过程中最常见的破坏性变更。**

我们都知道，低代码平台往往会采用结构化的数据来保存开发者在平台上所作的配置，这些配置数据就是Schema数据。Schema的数据结构往往是随着低代码平台的功能迭代同步发生变化的，典型如某个字段一开始只要一个简单值类型就够用，后来扩展为一个包含多个属性的对象以适应日益复杂的功能；又如从一个单值扩展为一个数组，或者反之，从一个数组简化为一个单值；再如多个复杂字段的各个属性的拆分与再组合。
<div><strong>精选留言（5）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/1c/39/85/c6110f83.jpg" width="30px"><span>黄骏</span> 👍（0） 💬（0）<div>老师对分布式系统的兼容性问题有研究吗？能推荐一些文章或者论文吗</div>2023-12-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/87/04/bf279da8.jpg" width="30px"><span>mm</span> 👍（0） 💬（0）<div>我们的低代码平台提供一些开放api供外部系统扩展调用，由于数据结构的变化导致传参和返回值会有改动，这和本节讲的正好相反，是相反方向的不兼容，会因为低代码平台的升级导致外部系统受到影响。目前采取的方式是提供新的api，原有的api不动，并且在发布文档告知用户将在未来的XX版本去掉此api。针对此类问题，老师是否有其他更好的建议？</div>2023-02-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/b9/ae/1962e54f.jpg" width="30px"><span>造梦者</span> 👍（0） 💬（0）<div>基本也是数据结构的breakchange导致的错误，我一般的处理方式就是在数据初始化绑定的时候将所有缺失或者不合规的结构统一进行转换，也会在一开始尽量避免同字段的数据结构的变化，有也是新增一个字段，之后新字段的默认值通过旧字段来匹配。好处是不需要版本控制，看哪个值没有按逻辑补上就好了，坏处是旧数据会有一定程度的冗余。</div>2022-11-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/83/52/d67f276d.jpg" width="30px"><span>轩爷</span> 👍（0） 💬（0）<div>两种项目生成方案：
1、低代码生成的项目代码构建于低代码平台之上，支持热部署运行；
2、低代码生成的项目代码与低代码平台分离，支持独立运行。
老师是否可考虑对这两种方式，尤其第二种进行一次讲解，谢谢！</div>2022-10-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/83/52/d67f276d.jpg" width="30px"><span>轩爷</span> 👍（0） 💬（0）<div>印象最深的莫过于跑了N年的angular4，要升级到angular8，连依赖包都不支持了，当初也没有一点点随着angular版本更新而更新，以至于最后只能将就用，要再改也是重新开发一套了。
还有就是element plus的版本更新，导致某些样式效果失效，没办法只能手工改一波。
处理器的确是很好的想法，不过处理器的开发和维护需要长期有人坚持，否则一旦放个几年，就是毁灭性打击，尤其是大版本更新。</div>2022-09-07</li><br/>
</ul>