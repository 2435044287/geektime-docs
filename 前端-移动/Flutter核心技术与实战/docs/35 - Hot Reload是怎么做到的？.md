你好，我是陈航。

在上一篇文章中，我与你分享了Flutter的Debug与Release编译模式，以及如何通过断言与编译常数来精准识别当前代码所运行的编译模式，从而写出只在Debug或Release模式下生效的代码。

另外，对于在开发期与发布期分别使用不同的配置环境，Flutter也提供了支持。我们可以将应用中可配置的部分进行封装抽象，使用配置多入口的方式，通过InheritedWidget来为应用的启动注入环境配置。

如果你有过原生应用的开发经历，那你一定知道在原生应用开发时，如果我们想要在硬件设备上看到调整后的运行效果，在完成了代码修改后，必须要经过漫长的重新编译，才能同步到设备上。

而Flutter则不然，由于Debug模式支持JIT，并且为开发期的运行和调试提供了大量优化，因此代码修改后，我们可以通过亚秒级的热重载（Hot Reload）进行增量代码的快速刷新，而无需经过全量的代码编译，从而大大缩短了从代码修改到看到修改产生的变化之间所需要的时间。

比如，在开发页面的过程中，当我们点击按钮出现一个弹窗的时候，发现弹窗标题没有对齐，这时候只要修改标题的对齐样式，然后保存，在代码并没有重新编译的情况下，标题样式就发生了改变，感觉就像是在UI编辑面板中直接修改元素样式一样，非常方便。
<div><strong>精选留言（12）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/11/2e/3e/5ae876fd.jpg" width="30px"><span>GL</span> 👍（8） 💬（2）<div>React Native 采用脚本语言编写，脚本语言即读即运行，不需要编译，在读之前替换成新版本的脚本，运行时执行的便是新的逻辑；RN打包时会将RN源代码、第三方库及自己编写的js代码都打包成一个bundle文件(Android是index.android.bundle，ios是index.ios.bundle),App启动时会加载bundle文件，所以替换掉这个bundle文件就能实现热重载了，RN中提供了修改读取bundle路径的方法，可以将最新的bundle更新到读取bundle的指定路径进而实现热重载。</div>2019-09-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg" width="30px"><span>许童童</span> 👍（4） 💬（1）<div>Webpack的热重载原理大致是：初始化注入一段js脚本，里面与webpack开发服务器建立一个WebSocket连接，当文件有改动的时间，通过WebSocket将文件下发，随后浏览器重新执行新的代码。状态管理则是在内存中，依赖Redux之类的库，所以UI和状态是分离的，可以比较容易的实现热重载。</div>2019-09-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg" width="30px"><span>菜头</span> 👍（0） 💬（1）<div>Flutter 支持热更吗</div>2019-11-20</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132" width="30px"><span>Geek_e7jq8k</span> 👍（0） 💬（2）<div>对于现有 iOS 工程集成的 flutter_module 类型，支持 hot reload 的原理是什么呢？可以理解为代码改变后，重新生成了app.framework，之后flutter.framework中的Dart VM 和 Kernel 来实现 app.framework的重新加载，以及对应的Widget重建么？</div>2019-10-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/55/28/66bf4bc4.jpg" width="30px"><span>荷兰小猪8813</span> 👍（1） 💬（0）<div>记录：
React Native 采用脚本语言编写，脚本语言即读即运行，不需要编译，在读之前替换成新版本的脚本，运行时执行的便是新的逻辑；RN 打包时会将 RN 源代码、第三方库及自己编写的 js 代码都打包成一个 bundle 文件 (Android 是 index.android.bundle，ios 是 index.ios.bundle),App 启动时会加载 bundle 文件，所以替换掉这个 bundle 文件就能实现热重载了，RN 中提供了修改读取 bundle 路径的方法，可以将最新的 bundle 更新到读取 bundle 的指定路径进而实现热重载。</div>2023-04-08</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLIdTsqPhlVH3TFElzic8422uBDelRjYiaktCJRmIRpLrgBBfBKnSO9PlbHibnHAc9cQEmLHes3fayEw/132" width="30px"><span>张训博-forrest</span> 👍（1） 💬（1）<div>Release模式是AOT模式，android编译成so文件，那么运行时是不是不需要Dart VM。图2的Dart VM是不是不需要？</div>2021-01-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/92/0b/2ccf7908.jpg" width="30px"><span>...</span> 👍（1） 💬（3）<div>Android原生也是支持JIT和AOT的  所以是不是按道理原生也可以Hotreload</div>2020-03-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/3c/d0/224e5f22.jpg" width="30px"><span>Lothar</span> 👍（0） 💬（0）<div>ios不支持运行时写内存和执行内存，那从这个角度hot reload是如何实现的呢？</div>2021-12-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/b2/5c/239825e4.jpg" width="30px"><span>szWest</span> 👍（0） 💬（1）<div>这里编译模式Script Snapshot是不是错了（太旧了？），实际上现在是Kernel Snapshot模式吧</div>2021-03-30</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLIdTsqPhlVH3TFElzic8422uBDelRjYiaktCJRmIRpLrgBBfBKnSO9PlbHibnHAc9cQEmLHes3fayEw/132" width="30px"><span>张训博-forrest</span> 👍（0） 💬（2）<div>@作者
确认下release模式在运行时是不是不需要dart VM 看源码都是so文件了</div>2021-01-19</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eor3yhoBAvuFDgRVLzXsLhhIOiaRPPdwnVwibC39bRuSYXZ5M1AyJRGrEtkVBjbpXuf63l0EsPbGfPw/132" width="30px"><span>unicen_pgzh</span> 👍（0） 💬（0）<div>目前flutter的动态化或者说插件化有什么好的方案吗？求老师指教，谢谢。</div>2020-10-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/0c/05/3e2b8688.jpg" width="30px"><span>时光念你</span> 👍（0） 💬（1）<div>混合开发下，如何进行hotreload，希望老师能解答一下。</div>2019-12-25</li><br/>
</ul>