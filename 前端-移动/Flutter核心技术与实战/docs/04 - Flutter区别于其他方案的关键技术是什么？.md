你好，我是陈航。

Flutter是什么？它出现的动机是什么，解决了哪些痛点？相比其他跨平台技术，Flutter的优势在哪里？……相信很多人在第一眼看到Flutter时，都会有类似的疑问。

别急，在今天的这篇文章中，我会与你介绍Flutter的历史背景和运行机制，并以界面渲染过程为例与你讲述其实现原理，让你对Flutter能够有一个全方位的认知和感受。在对Flutter有了全面了解后，这些疑问自然也就迎刃而解了。

接下来，我们就从Flutter出现的历史背景开始谈起吧。

## Flutter出现的历史背景

为不同的操作系统开发拥有相同功能的应用程序，开发人员只有两个选择：

1. 使用原生开发语言（即Java和Objective-C），针对不同平台分别进行开发。
2. 使用跨平台解决方案，对不同平台进行统一开发。

原生开发方式的体验最好，但研发效率和研发成本相对较高；而跨平台开发方式研发虽然效率高，但为了抹平多端平台差异，各类解决方案暴露的组件和API较原生开发相比少很多，因此研发体验和产品功能并不完美。

所以，最成功的跨平台开发方案其实是依托于浏览器控件的Web。浏览器保证了99%的概率下Web的需求都是可以实现的，不需要业务将就“技术”。不过，Web最大的问题在于它的性能和体验与原生开发存在肉眼可感知的差异，因此并不适用于对体验要求较高的场景。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/18/55/61/ac1729d3.jpg" width="30px"><span>Mkl</span> 👍（48） 💬（1）<div>我有个疑问，
“以下图为例：节点 1 在绘制完自身后，会再绘制子节点 2 和 6，最后绘制子节点 5、3 和 4。”
这难道不是广度优先吗？深度优先不是先绘制1，然后2,3,5,4,6吗？</div>2019-07-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/6d/4e/347c3e8f.jpg" width="30px"><span>楚小奕</span> 👍（26） 💬（1）<div>『Skia 已然是 Android 官方的图像渲染引擎了，因此 Flutter Android SDK 无需内嵌 Skia...』
据我所知，Android上Flutter也自己打了一个skia，并不是用的OS的skia。</div>2019-07-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/92/cd/d39e568c.jpg" width="30px"><span>felix</span> 👍（12） 💬（1）<div>老师能不能谈谈flutter的局限，或是跨平台的局限 ，flutter也没能（或是还没有）很好解决的问题。</div>2019-07-10</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLYWMicQlOPY0zty1wr01TDy62NCsfKbwnhzzKnjYuapibyXuklQmfC1DaSGGuPeKtLvcAoC8AzNawA/132" width="30px"><span>jjlanbupt</span> 👍（11） 💬（1）<div>总感觉讲的还不是特别透彻，可能受限于篇幅原因吧，比如渲染的过程顺序这些相对于其他平台或者原生来说，为了避免重复绘制，到底做了哪些优化？深度优先遍历等应该是普遍的思想，另外希望老师多放一些相关知识点的链接，比如涉及到GPU的放一些讲解原理的优质文章链接，期待老师后面的讲解</div>2019-07-06</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI22CZTicOPDboNxbAQU8YnOANMR9BYJYdOoyk7ALS6I042ezGr7tSL5fZjnu73l8qYVcSBzFzpebA/132" width="30px"><span>xyl</span> 👍（8） 💬（1）<div>webgl是基于opengl的，skia也是基于opengl的，这两者有什么区别呢？</div>2019-07-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/6c/56/07920099.jpg" width="30px"><span>微笑美男😄</span> 👍（7） 💬（2）<div>深度优先 广度优先 不是很理解</div>2019-09-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/1d/25/c4cc1e9f.jpg" width="30px"><span>巫山老妖</span> 👍（6） 💬（1）<div>跨平台（一套代码可以同时运行在iOS和Android平台）
高保真（一整套包括底层渲染逻辑和上层开发语言的完整解决方案）
高性能（代码执行效率和渲染性能媲美原生App的体验）

学习这个专栏最好不让自己陷阱细节，而是从整体去理解Flutter的核心技术，通过实战，比如做一些小Demo来体会新的开发模式，再逐步深入，这样会更加扎实。
</div>2019-09-27</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJrgpv3Kia5IwyaLGGzmXCJDK5AIUYq0KRPZf7Sul2otJ5BabNuGLPujmwww3uUAmn4B90Vic6RCqCQ/132" width="30px"><span>Geek_yy</span> 👍（4） 💬（2）<div>Skia 引擎加工成 GPU 数据， 为什么不直接提供给 GPU 渲染，而又opengl最终提供给gpu渲染</div>2019-07-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/db/ab/981ca927.jpg" width="30px"><span>雷声大</span> 👍（2） 💬（1）<div>那张节点树还是没有看明白，既然 5 是 2 的子节点，为啥和 2 挤在一个圆里面，而不是像 3 和 4 一样作为子节点？</div>2019-10-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/7a/90/dc3537e7.jpg" width="30px"><span>神经蛙</span> 👍（2） 💬（1）<div>合成那一部分不太理解。
“大量渲染内容的重复绘制”，这里的重复指的是什么，比如绘制Text(&#39;A&#39;)和Text(&#39;B&#39;)属于重复绘制吗？
“根据图层大小、层级......将相同的图层归类合并”，什么情况下属于相同元素？
归类合并怎么理解？是像photoshop中的图层合并一样吗？</div>2019-07-21</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoLw2qjwoaVCDq8BqCcXOibyTG3rxiaJlDy2lt62IkiaDrrHeVwq4Pe8RpBbYJTIiadyicZ7InBCLCjJtQ/132" width="30px"><span>Bojack</span> 👍（2） 💬（1）<div>从原理上来说flutter在两个原生端渲染应该是一致的，但是实际中发现还是有些区别的，比如下拉刷新这个组件，作者知道导致这个差异性的原因吗？</div>2019-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/68/ac/6339d6f1.jpg" width="30px"><span>回眸~</span> 👍（2） 💬（1）<div>热更新方案有没有啊老师</div>2019-07-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/04/97/80740db0.jpg" width="30px"><span>JW</span> 👍（0） 💬（1）<div>安卓系统下，sika引擎包含在apk中了吗？</div>2019-12-12</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erxoYtcWAPicF4XU82VKzzEEhLfXDF96yLCjJ1ZI2UiadqAm95kiaibTcEnxc7m0gWE9kqJfrPeRqF3vg/132" width="30px"><span>Geek_way7xj</span> 👍（0） 💬（1）<div>老师，最近公司在考虑用flutter完成一个交通类的APP，里面有很多地图，要调用高德API，flutter能够胜任吗？</div>2019-10-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/db/ab/981ca927.jpg" width="30px"><span>雷声大</span> 👍（0） 💬（1）<div>openGL 不是也是一个绘图引擎么？ 他和 skia 的分工是什么样子的啊？
</div>2019-10-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/6b/52/3fef0761.jpg" width="30px"><span>达摩院扫地僧♠</span> 👍（0） 💬（1）<div>老师，重回边界是系统自动帮我们完成得吗，可以手动设置吗</div>2019-09-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/6a/01/d9cb531d.jpg" width="30px"><span>这得从我捡到一个鼠标垫开始说起</span> 👍（0） 💬（1）<div>还是有点不明白跨平台的原理，skia可以和gpu交互(不论是ios还是Android)，也就是说操作系统是有统一的标准可以和skia这个引擎直接交互吗？
</div>2019-08-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/13/fe/0f2f9cc4.jpg" width="30px"><span>杨润泽</span> 👍（0） 💬（3）<div>公司新发展了移动端业务，老板选择了使用Flutter开发，允许我们自学两个月，但是因为公司有网络管控，想要搭建Flutter私服，现在可以用搭建maven私服的方式搭建吗?</div>2019-08-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/83/b2/e83dd93c.jpg" width="30px"><span>🌙</span> 👍（0） 💬（1）<div>5为什么是2的子节点，是不是少了幅图？</div>2019-08-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/5b/dd/96cf8a45.jpg" width="30px"><span>逸群</span> 👍（0） 💬（1）<div>你好，请教一下，Flutter 使用Dart绘制UI，在Android 侧，多CPU架构的适配性如何？NativeUI绘制是否有很多诡异的问题，特别是VO&amp;小米？</div>2019-07-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/c4/b0/0fc1cfbd.jpg" width="30px"><span>申岩</span> 👍（0） 💬（1）<div>老师请问下，在Android端用的是Skia渲染的，那在iOS端也是用Skia渲染了么？</div>2019-07-25</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTICEQAWKVWd9QOr5ahUInws1mzckjccLnQ09fk6HGOJgEKDGEjz1TicwThCibMKCQxKSneIX5c3KhOQ/132" width="30px"><span>Geek_536e9d</span> 👍（0） 💬（1）<div>老师我这边想问，如果用flutter开发聊天室，有什么好的建议么？</div>2019-07-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/56/d1/8981f6ac.jpg" width="30px"><span>Y.K</span> 👍（0） 💬（2）<div>老师我想问下状态管理用什么比较好？provider?redux?</div>2019-07-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/5d/5a/152d792e.jpg" width="30px"><span>茄菲</span> 👍（0） 💬（1）<div>重绘边界。是Flutter在框架层内部实现的吗？怎样能看到实现的机理呢？</div>2019-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/5d/5a/152d792e.jpg" width="30px"><span>茄菲</span> 👍（0） 💬（1）<div>请问，iOS里Quartz2D的作用是什么呢？Quartz2D应该比CoreGraphics和CoreAnimation更底层吗？</div>2019-07-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/73/aa/442e9eb1.jpg" width="30px"><span>李大江</span> 👍（0） 💬（1）<div>问一个小白问题:
Material与Cupertino都能应用于android 和iOS 吗？还是只是风格的差异？能否自己实现一套设计风格？</div>2019-07-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/2b/03/2ea29390.jpg" width="30px"><span>周宣</span> 👍（0） 💬（2）<div>音频直播类的怎么办呢？不像推送将推送收到的普通数据转发给flutter就行了，将解码后的流转给flutter吗</div>2019-07-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/3e/e1/699f6fec.jpg" width="30px"><span>graphic</span> 👍（0） 💬（2）<div>老师好，鉴于flutter的需要很多的其他功能sdk兼容，混合开发，还是纯粹的flutter开发好呢，两者怎么抉择</div>2019-07-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/83/e8/f726c635.jpg" width="30px"><span>加温后的啤酒</span> 👍（0） 💬（2）<div>flutter界面渲染过程中的 布局边界、和渲染边界 这部分有点抽象。不是太能理解</div>2019-07-08</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eriaIgoPa8abNTaUm7o6oa6mvL9iagRTdD1vhovWPyfiaS82f409Sz3kMFzYLNa4ibnHagA7M33l8XnIQ/132" width="30px"><span>Bufan</span> 👍（0） 💬（1）<div>老师，flutter除了ios和android 其它终端可以用吗，桌面和浏览器端未来前景怎么样</div>2019-07-07</li><br/>
</ul>