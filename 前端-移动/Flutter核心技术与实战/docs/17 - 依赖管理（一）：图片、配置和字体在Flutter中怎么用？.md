你好，我是陈航。

在上一篇文章中，我与你介绍了Flutter的主题设置，也就是将视觉资源与视觉配置进行集中管理的机制。

Flutter提供了遵循Material Design规范的ThemeData，可以对样式进行定制化：既可以初始化App时实现全局整体视觉风格统一，也可以在使用单子Widget容器Theme实现局部主题的覆盖，还可以在自定义组件时取出主题对应的属性值，实现视觉风格的复用。

一个应用程序主要由两部分内容组成：代码和资源。代码关注逻辑功能，而如图片、字符串、字体、配置文件等资源则关注视觉功能。如果说上一次文章更多的是从逻辑层面分享应该如何管理资源的配置，那今天的分享则会从物理存储入手与你介绍Flutter整体的资源管理机制。

资源外部化，即把代码与资源分离，是现代UI框架的主流设计理念。因为这样不仅有利于单独维护资源，还可以对特定设备提供更准确的兼容性支持，使得我们的应用程序可以自动根据实际运行环境来组织视觉功能，适应不同的屏幕大小和密度等。

随着各类配置各异的终端设备越来越多，资源管理也越来越重要。那么今天，我们就先看看Flutter中的图片、配置和字体的管理机制吧。

## 资源管理

在移动开发中，常见的资源类型包括JSON文件、配置文件、图标、图片以及字体文件等。它们都会被打包到App安装包中，而App中的代码可以在运行时访问这些资源。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/a5/7e/c9b87385.jpg" width="30px"><span>3327</span> 👍（12） 💬（1）<div>1. 使用2.0x图片，优先使用和当前像素密度相近的资源
2.找2.0x图片，按分辨率由低到高找</div>2019-08-06</li><br/><li><img src="" width="30px"><span>Geek_45a2f1</span> 👍（7） 💬（3）<div>老师，我发现直接在drawable里面设置启动图，限制太大，于是就声明了一个widget，但是在APP启动的时候还是有白屏，请问有什么方法解决呢</div>2019-08-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/bb/dd/5d473145.jpg" width="30px"><span>亡命之徒</span> 👍（5） 💬（1）<div>对于像素密度3.0x的会找到2.0x的图片，对于2.0x的像素密度，1.0会自动压缩处理</div>2019-08-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/c3/b8/892ab974.jpg" width="30px"><span>Geek_6zjb9f</span> 👍（2） 💬（1）<div>老师，启动icon为什么不在flutter本工程内增加一个配置，运行前编译到原生工程内？</div>2019-11-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/59/ed/15465917.jpg" width="30px"><span>Captain</span> 👍（0） 💬（1）<div>目录批量指定并不递归，只有在该目录下的文件才可以被包括，如果下面还有子目录的话，需要单独声明子目录下的文件。  这句话 能举例说明么？</div>2019-11-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/9c/5c/4f35bdfe.jpg" width="30px"><span>巫</span> 👍（0） 💬（1）<div>以为 Android 和 iOS 的都是生成的，可以加到 gitignore 中，看来不行啊。那哪些可以忽略呢？</div>2019-10-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/1e/e0/238fda97.jpg" width="30px"><span>🌝</span> 👍（0） 💬（2）<div>目录批量指定的话，需不需要把2.0x、3.0x的目录再指定一遍？</div>2019-10-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/c2/9b/75ba46ad.jpg" width="30px"><span>jerry</span> 👍（0） 💬（1）<div>3.0像素密度的机器，使用1.0密度的图片，会放大吗</div>2019-10-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/b5/c6/d39d31b0.jpg" width="30px"><span>zjhuang</span> 👍（0） 💬（1）<div>pubspec.yaml 可以直接将图片资源文件指定到 Android 的 mipmap-xhdpi 中吗？此时该目录下的资源 Flutter 会当成是 1.0x 的还是 2.0x 的</div>2019-10-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/9f/06/287d77dd.jpg" width="30px"><span>承香墨影</span> 👍（0） 💬（1）<div>老师，您好。有 2 个疑问，希望您能解答。
1. Flutter 中加载图片，会对图片的尺寸做优化吗？例如同一张 50x50 的图片，显示在两个不同尺寸的 Image 上，例如 20x20 和 40x40 的 Image，它们在内存中是一份还是两份数据？ 然后在内存中占用的内存尺寸，是如何计算的？是按照原图的尺寸和它所存放的位置来计算的，还是依赖加载 Widget 的尺寸？
2. 如果是网络图片，又是如何处理的？会和 Android 的 Glide 之类的图片库一样，对其进行采样率的压缩吗？</div>2019-10-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/04/37/aa04f997.jpg" width="30px"><span>和小胖</span> 👍（0） 💬（1）<div>老师好，请问下关于字体那块，本质上还是配了 3 种字体是吧？如果只用一种字体是不是也可以进行加粗倾斜的设置呢？</div>2019-09-04</li><br/><li><img src="" width="30px"><span>Geek_neterM</span> 👍（0） 💬（2）<div>对于android的启动图，设置之后，就在当前目录放置图片嘛？ 那么格式是什么？另外，启动图，是不是也要像 启动图标那样，设置 mdpi,hdpi,xhdpi,xxhdpi,xxxhdpi?
</div>2019-08-30</li><br/><li><img src="" width="30px"><span>Norman</span> 👍（0） 💬（1）<div>老师您好，我在加载网络图片的时候，网络图片一直加载不出来，并且报这样的错误信息OS Error: nodename nor servname provided, or not known,
errno = 8
请问这是为什么呀？</div>2019-08-29</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK95MP7iatc1WcDdusl6mWibiaGXQebI2WFbfTjANfH2eaQX07u7nTnQ6JGOaYKibXYOjPwXDT2FBhUXg/132" width="30px"><span>Geek_614299</span> 👍（0） 💬（1）<div>1.0x、2.0x、3.0x分别对应多大的分辨率？有标准吗？</div>2019-08-27</li><br/><li><img src="" width="30px"><span>Norman</span> 👍（0） 💬（1）<div>所以，思考题的答案是什么呢老师？文章中有一句话，如果主资源缺少某个分辨率资源，那么会在剩余资源中寻找最低的分辨率资源去加载，按照这个说法，第一个问题的答案是1.0x。但是我又总感觉这不符合常理，按道理如果找不到3.0x，难道不应该是加载2.0x吗？</div>2019-08-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/e7/5c/38afffa2.jpg" width="30px"><span>day day up</span> 👍（0） 💬（2）<div>老师，批量声明报错 是什么原因啊？</div>2019-08-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/55/e4/7061abd5.jpg" width="30px"><span>Mr.J</span> 👍（0） 💬（1）<div>1、1.0x，因为3.0x的资源不存在，所以在存在的资源中查找分别率最低的资源，即1.0x；
2、2.0x，因为1.0x的资源不存在，找剩下的分辨率最低的，只有2.0x，所以选择2.0x；</div>2019-08-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/31/c6/238570f9.jpg" width="30px"><span>獸丶</span> 👍（0） 💬（1）<div>Flutter这种资源声明跟引用感觉比Android要麻烦复杂很多</div>2019-08-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg" width="30px"><span>许童童</span> 👍（0） 💬（1）<div>老师你好，做项目的时候图片目录结构应该怎么设计？是根据组件新建文件夹，还是统一放在一个目录下？</div>2019-08-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg" width="30px"><span>许童童</span> 👍（0） 💬（1）<div>两个答案都是2.0x</div>2019-08-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/8d/a6/a511c0d3.jpg" width="30px"><span>徐宏伟</span> 👍（2） 💬（1）<div>航哥你好，想请教下flutter中如何复用原生资源中的内嵌字体文件？</div>2021-04-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2d/21/ce/47812aa5.jpg" width="30px"><span>ZYQ</span> 👍（0） 💬（0）<div>老师我想问一下，我将启动图放进去了，并且更改了图片的路径。为什么启动的时候还是显示的是logo,而不是我更改后的图片</div>2023-04-19</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/wibYwE23Fa0OZCatU1zrahbY3oxR6v18UJDWeKNhqKAdPyKVUWnj4dPrMicZdlichUwMiaG4UvcOVwhWmichwSSStXA/132" width="30px"><span>Zsc</span> 👍（0） 💬（0）<div>老师，安卓怎么使用系统字体，因为每个厂商的字体不一致，fontwidget等级也不一致。有没有思路</div>2020-11-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/20/21/c7/814675ac.jpg" width="30px"><span>椒盐皮皮曦🍉</span> 👍（0） 💬（0）<div>老师，ios的启动页的图片大小应该为多少呢？一直没有查到</div>2020-08-18</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI7qto0CCztcWE5A2cpKOYyvkCyyMMjjMoZ3Pz8h2GMKynUthxqCs0hk0pONXk198yKibHH4Jxrjgw/132" width="30px"><span>andy</span> 👍（0） 💬（0）<div>补充一下上条问题，刚才写的指定方式可能写错了，我是这么批量指定的：- assets&#47;images&#47;mine&#47;  但找不到文件</div>2020-07-08</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI7qto0CCztcWE5A2cpKOYyvkCyyMMjjMoZ3Pz8h2GMKynUthxqCs0hk0pONXk198yKibHH4Jxrjgw/132" width="30px"><span>andy</span> 👍（0） 💬（1）<div>老师，资源目录中如果只有2.0x和3.0x，没有1.0x，此时怎么批量指定资源？
例如：assets&#47;images&#47;mine中有2.0x和3.0x文件夹（mine根目录没有1.0x文件），此时我用- assets&#47;images&#47;mine&#47; 批量声明，代码中找不到图片</div>2020-07-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/aa/76/37c27871.jpg" width="30px"><span>木木京尤</span> 👍（0） 💬（0）<div>老师，请问发布后的apk如何获取手机系统默认字体。例如我的手机默认字体是其他很好看的字体，这个时候如果想要apk字体也变成手机默认字体，这个应该怎么获取到手机默认字体。</div>2020-05-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/fc/cb/5e79c6ed.jpg" width="30px"><span>(Jet)黄仲平</span> 👍（0） 💬（2）<div>“如果我们的 App 包只包括了 2.0x 资源，对于屏幕像素比为 3.0 的设备，则会自动降级读取 2.0x 的资源”
问一个小白的问题，就是我们如何判断Flutter 使用是1倍图，还是2倍图，还是3倍图，感觉肉眼很难看清</div>2020-02-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/9e/3c/0e2a08b1.jpg" width="30px"><span>杨闯</span> 👍（0） 💬（0）<div>如果我做的是一个插件，我要访问获取插件下的bundle，我需要怎么获取</div>2020-01-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/de/c7/26485903.jpg" width="30px"><span>Yolo七夜</span> 👍（0） 💬（0）<div>get到批量声明的技能，嘿嘿</div>2019-08-13</li><br/>
</ul>