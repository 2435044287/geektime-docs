你好，我是李兵。这是我们专栏的第二讲，我们来看下“函数是一等公民”背后的含义。

如果你熟悉了一门其他流行语言，再来使用JavaScript，那么JavaScript中的函数可能会给你造成一些误解，比如在JavaScript中，你可以将一个函数赋值给一个变量，还可以将函数作为一个参数传递给另外一个函数，甚至可以使得一个函数返回另外一个函数，这在一些主流语言中都很难实现。

JavaScript中的函数非常灵活，其根本原因在于**JavaScript中的函数就是一种特殊的对象**，我们把JavaScript中的函数称为**一等公民(First Class Function)。**

基于函数是一等公民的设计，使得JavaScript非常容易实现一些特性，比如闭包，还有函数式编程等，而其他语言要实现这些特性就显得比较困难，比如要在C++中实现闭包需要实现大量复杂的代码，而且使用起来也异常复杂。

函数式编程和闭包在实际的项目中会经常遇到，如果不了解这些特性，那么在你使用第三方代码时就会非常吃力，同时自己也很难使用这些特性写出优雅的代码，因此我们很有必要了解这些特性的底层机制。

另外，在我们后续课程介绍V8工作机制时，会学习V8是怎么实现闭包的，还会学习V8是如何将JavaScript的动态特性静态化以加快代码的执行速度，这些内容都涉及到JavaScript中的函数底层特性。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg" width="30px"><span>pedro</span> 👍（35） 💬（2）<div>基本上近些年出现的编程语言，函数都是一等公民，比如谷歌强推的kotlin和go，大数据语言scala，还有rust，当然还有老牌的经典函数语言Haskell等等。顺带问一下，老师的画图很好看，请问是什么软件画的😃</div>2020-03-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/b0/1c/2e30eeb8.jpg" width="30px"><span>旺旺</span> 👍（24） 💬（6）<div>如果在函数对象上再用代码foo.name=&quot;aaaa&quot;，这会覆盖函数的名称吗？</div>2020-04-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/84/18/0ea2b8a6.jpg" width="30px"><span>我爱学习</span> 👍（13） 💬（1）<div>请问文中的原始值是指规范中 “primitive value” 吗？如果是，我有以下疑问：
首先，在规范中 “primitive value” 的定义如下：
“4.3.2 primitive value
member of one of the types Undefined, Null, Boolean, Number, BigInt, Symbol, or String”
上述并没有包含文中提到的 object，或者是 object 作为原始值应该如何理解？然后原始值和基本数据类型的值有什么区别？</div>2020-03-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/be/22/8bb1640f.jpg" width="30px"><span>oillie</span> 👍（10） 💬（2）<div>在函数内使用了某个变量，却没有在这个函数中声明，这种变量叫free variable，比如上面的number变量</div>2020-03-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/31/bc/c4f31fa5.jpg" width="30px"><span>杨越</span> 👍（9） 💬（3）<div>小米面试题：
1.闭包
2.作用域链
3.原型链
4.两个链之间的区别</div>2020-03-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/8e/18/ad43ef1f.jpg" width="30px"><span>Gray</span> 👍（7） 💬（1）<div>在js中，函数是一种特殊的对象，理解了这一点，今天我就没白学</div>2020-03-16</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7lTQQeIDIXrU4u1wsydv5tWaaz4JDwVmHeibOWpw05QDSk57rBJFEQRPiavywZjiafSdYTjk0hFWUGw/132" width="30px"><span>可可</span> 👍（7） 💬（2）<div>第一次，简单和清晰明白了JavaScript中的闭包和一个函数在那些方面是一个特殊的对象，👍。
解释的果然深入浅出。

另一个函数是一等公民的，知道的有Python</div>2020-03-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/7b/3b/a54cb4e5.jpg" width="30px"><span>法正</span> 👍（6） 💬（2）<div>老师，是不是可以这样说，正是因为函数在JS中是一等公民，所以才有了闭包。闭包的出现就是为了实现函数可以赋值给一个变量、也可以作为函数的参数、还可以作为函数的返回值这些特性。</div>2020-06-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/cc/49/4fba1938.jpg" width="30px"><span>芳华年月</span> 👍（6） 💬（1）<div>老师，code属性打印不出来，code属性可以查看吗</div>2020-04-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/72/18/d9e2fcf9.jpg" width="30px"><span>我来人间一趟</span> 👍（5） 💬（1）<div>有个问题想请教下老师，生成ast语法树是一次性将所有代码都结构化成ast吗 还是部分结构化呀 </div>2020-04-29</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/EJZoM46wR6QqTeibhPZsO5wJTeUia4RndGicWfDZLw153WibjsnJXqEtGZICxAa8icb36pDkficTic3FViaySd1z9HmQBw/132" width="30px"><span>翰弟</span> 👍（3） 💬（1）<div>老师说js不是面向对象”因为后者天然支持封装继承和多态“，这个是原因么 js对象不是也原型继承，也可以封装属性么，还是您想说js的这些实现其实和java这种差异巨大和这种面向对象的语言有别，甚至也不能叫”继承“ 只是当年蹭热点</div>2020-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/5b/13/6db9ba58.jpg" width="30px"><span>Kevin</span> 👍（2） 💬（1）<div>Python是“函数是一等公民”的语言，Dart好像也是不过不确定。</div>2020-06-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/5d/74/2762a847.jpg" width="30px"><span>流乔</span> 👍（1） 💬（1）<div>虚拟机还需要处理函数引用的外部变量，这就是闭包存在的原因。</div>2020-03-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/01/58/0eac367a.jpg" width="30px"><span>一飞同学</span> 👍（0） 💬（1）<div>老师的讲解非常易于理解，赞！</div>2020-04-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/39/4d/89d80206.jpg" width="30px"><span>nulife</span> 👍（0） 💬（1）<div>源码易懂，赞👍</div>2020-03-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/f7/2f/10cbed82.jpg" width="30px"><span>pcxpccccx_</span> 👍（0） 💬（1）<div>言简意赅，看的会上瘾</div>2020-03-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/69/0a/04e3a2aa.jpg" width="30px"><span>鬼谷子xl</span> 👍（0） 💬（2）<div>为什么我在google里.code没有拿到任何东西啊</div>2020-03-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/44/0e/ce14b7d3.jpg" width="30px"><span>-_-|||</span> 👍（0） 💬（1）<div>&quot;函数除了可以拥有常用类型的属性值之外，还拥有两个隐藏属性，分别是 name 属性和 code 属性。&quot;在浏览器试了下有name属性，但没有code属性。</div>2020-03-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/a4/24/0f4a9157.jpg" width="30px"><span>伪装</span> 👍（0） 💬（1）<div>不带一些v8源码吗</div>2020-03-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/44/0e/ce14b7d3.jpg" width="30px"><span>-_-|||</span> 👍（0） 💬（1）<div>画得图特别卡哇伊</div>2020-03-17</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoaxy8ibvXITdMcXFfd5O5E7Epq8MG5z1OBhO7MQXTfbcpA0fpcsIxkCHyUZ5ZSrj3spZpAQxEC9GA/132" width="30px"><span>非洲大地我最凶</span> 👍（0） 💬（1）<div>为什么对象的属性值有三种类型啊，复杂数据类型不是包含函数类型吗</div>2020-03-17</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtBwSeHSkf6W5iaYIDrxt8DgldgL8gx6eQwicSI4MxguVEMXbicvB5qfZpeSFNVZswu8M5TiaqEYwRiag/132" width="30px"><span>小熊</span> 👍（4） 💬（5）<div>老师，我打印了下函数的隐藏属性name和code，发现没有code这个属性啊
</div>2021-05-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/c8/e9/c7c5cbf5.jpg" width="30px"><span>l1shu</span> 👍（4） 💬（4）<div>Number在底层实现貌似还是在堆里的吧

比如 v8::Number::New 的实现，代码在 src&#47;api&#47;api.cc，里面最终调用了 NewNumber

NewNumber 这个函数在 src&#47;heap&#47;factory-base-inl.h 中，里面最终调用了 NewHeapNumber

所以基础类型在 c++层面依然是存储在堆中的？只是我们在 JS 层可以按栈去理解对吗？？求老师解答！</div>2021-02-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/aa/a3/ccb6a2fc.jpg" width="30px"><span>fhasghrge</span> 👍（2） 💬（0）<div>上一篇专栏从执行上下文角度给出闭包的理解，这一次又从函数是第一公民 理解了 闭包的</div>2020-10-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/28/d9/78dfd983.jpg" width="30px"><span>sky</span> 👍（2） 💬（0）<div>Python  swift  go  dart  都是吧</div>2020-04-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/4e/80/faa89499.jpg" width="30px"><span>周振</span> 👍（1） 💬（1）<div>请问箭头函数和普通函数的声明和运行机制的区别，比如为啥箭头函数的this是声明时候确定，没有arguments和不能做构造函数是怎么实现的</div>2021-07-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/23/9e/71/3b548202.jpg" width="30px"><span>小白菜</span> 👍（1） 💬（0）<div>所以Vue2.0是想要每个组件都是一个完整的对象实例化。Vue3.0想要每个组件是组合对象（函数，对象），减弱了this的存在。</div>2021-03-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/50/2b/2344cdaa.jpg" width="30px"><span>第一装甲集群司令克莱斯特</span> 👍（1） 💬（0）<div>js函数内声明函数，即使外部函数超出作用域，如果他的变量被内部函数引用，那么这个变量也不能被回收释放和销毁，这就是闭包，请神容易送神难。</div>2020-03-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>学习打卡</div>2024-06-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/35/79/14/75208870.jpg" width="30px"><span>Geek_fbc2c0</span> 👍（0） 💬（0）<div>原始类型不可以被改变，对于number类型，这里的不可被改变是怎么理解？</div>2023-03-21</li><br/>
</ul>