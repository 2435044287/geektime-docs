你好，我是郭东白。上节课我们讲了统一语义和需求确认，这是架构规划的前两个环节。至此，多数的问题域都应该有且仅有一个执行域了。那么接下来，我们就来讲更细粒度的任务边界划分，这也是架构规划的第三个环节。

上节课我们讲到了从问题域到执行域的映射，是个粗粒度的映射关系。不过有些任务无法在粗粒度的划分下完成需求到执行的映射，比如我们上节课提到的边界冲突的情况。

总的来说，这种粗粒度的映射会面临三方面的挑战。如下：

1. 粒度划分是基于现有执行域的，这种划分导致我们的架构设计会受到执行团队组织结构的约束。也就是康威定律对架构设计的干扰。
2. 无论我们怎么努力，依然会在架构活动中碰到执行域划分没有执行团队，或者有多个执行团队的情况。
3. 执行域是非常粗粒度的任务划分，但部分有边界冲突的跨领域任务，需要在更细粒度的任务层面上做执行边界的划分。

那么如何应对这三方面的挑战呢？答案是**进行任务边界的划分**。

我们可以把这些需求拆分成研发任务，并分配给执行者。而这些任务的组合和边界，最终会决定长期的技术架构。因而这个步骤，可能是架构师能对长期架构设计产生最大影响的一个环节了。所以深度理解从需求到任务到承接的关系，以及学会如何分配自己的注意力，就是你这节课要掌握的重要技能。
<div><strong>精选留言（15）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg" width="30px"><span>李二木</span> 👍（9） 💬（1）<div>说一个最近在团队内部任务划分的坑。当时任务划分不够细粒度，可以理解为稍微有点抽象，任务划分时没有异议，但是等到找对方要接口时，双方就开始各抒己见说是该功能点是对方的。事后反思了下。还是任务划分不够细致。任务应该要划分到不可分割，然后指定责任人。免得事后扯皮。</div>2022-03-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/22/16/a94ea4da.jpg" width="30px"><span>预测师</span> 👍（2） 💬（1）<div>郭老师，信条和原则的区别是什么，那么多指导架构的名词，如何理解其抽象层次？</div>2022-05-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/55/4a/8a841200.jpg" width="30px"><span>ACK</span> 👍（1） 💬（1）<div>1. 信条二：任务边界划分有确定的决策优先级。
2. 信条四：任务边界划分时要最大化隔离。
3. 信条一：任务边界可以打破现有的执行边界。
4. 信条三：最小化架构目标之外的抽象。

完成大于完美，完成是 1，完美和隔离，打破边界是后面的 0. 没有 1，后面的 0 也没意义了。</div>2022-11-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/f6/27/c27599ae.jpg" width="30px"><span>术子米德</span> 👍（1） 💬（2）<div>🤔☕️🤔☕️🤔
* 📖：需求转化为任务，实现从问题域到执行域的映射。如果遇到粒度划分问题的挑战，解决之道是进行任务边界的划分。这几个信条该具备：可打破现有执行边界、有确定的决策优先级、最小化架构目标之外的抽象、最大化隔离、面向未来最优。
    * 🤔：这个需求大家是否都清楚，跟这个需求是否大家都认可，这中间可能是个巨大的裂缝。我自己的经验，这个裂缝里刚开始可能只有空气，后面会有水灌进去，最终会变成酱缸。产生这样的情况，一方面可能来自历史的缘故，导致各种不信任，另一方面更可能是利益无关或利益冲突。这些问题，看似非技术问题，是否可以通过架构来解决，或者架构能对此改善？以我现在的认知，如果此时的架构，仅指技术架构，这顶多解决在如何，即How层面做到最优。如果把组织架构和业务架构放进来，前者，组织架构去解决我们是什么，即What层面认清自己到底要什么，后者，业务架构去解决我们如何能赚钱，即Why层面认清为何能赚到当下和未来的钱。前提条件，那就是大家都能有这样的共识，或者，大家都认可某人的领导力，由他来带领大家跨过裂缝，这样就有机会打破现有的执行边界。只要执行边界能打破，后面的共识建立起来，就是大家都坐在圆桌上讨论，而不再是在每个峡谷对面呼喊，还假装没听到的样子。
    * 🤔：增加信条：“粒度划分越难的地方，越可能是最有潜力的地方”，所谓的越难过越得过。某个点的粒度难划分，可能是这个点本身我们不熟悉，这次下来弄明白，我们的能力就增长，还可能是我们的组织结构不合理，这次行动下来，可以优化组织。
    * 🤔：去掉抽象，不会妨碍太多，过渡关注抽象，反而绊手绊脚。如果一个业务持续有发展，持续有新需求和变化，那么在这个过程里去抽象还来得及。最担心的就是，刚开始抽象得特别完美，然后就没有然后。
</div>2022-04-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/a0/50/390187f3.jpg" width="30px"><span>罗均</span> 👍（1） 💬（1）<div>东白老师的课程实在太精彩了！学生没有在互联网行业待过，从传统制造业的经验看，四个信条的顺序应该是：
1. 信条四：任务边界划分时要最大化隔离。
2. 信条二：任务边界划分有确定的决策优先级。
3. 信条一：任务边界可以打破现有的执行边界。
4. 信条三：最小化架构目标之外的抽象。

关于老师总结的五个信条，学生反复思量，也无法对此增加或减少。期待有大神与老师碰出思想的火花。

在实践过程中，学生觉得隔离和决策优先级最重要。没有清晰的隔离分析，就很难做判断决策的优先级。</div>2022-03-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/a1/87/6805cb85.jpg" width="30px"><span>潜水的鲸</span> 👍（0） 💬（1）<div>2、4、3、1
线确定目标和优先级，然后做重点隔离和影响隔离，加少不必要的工作降低工作的复杂度，最后打破组织结构。最后一项是最困难的，有很多执行层面之外的阻力。不是有很大收益和关键性作用，不要触碰。</div>2022-06-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/f7/eb/e7127bb8.jpg" width="30px"><span>，</span> 👍（0） 💬（1）<div>老师的这几个信条,在我看来是从不同的角度出发考虑的问题。
   譬如
       信条一,任务边界可以打破现有的执行边界,这条是从项目经理跟产品经理的角度出发,对开发任务的合理划分和分配;
      
      信条二,任务边界划分有确定的决策优先级,是从CTO的角度出发,遵循之前定下的架构目标;

       信条三,最小化架构目标之外的抽象;信条四,任务边界划分时要最大化隔离;信条五：任务边界划分要面向未来最优,则与Robert C. Martin在&lt;&lt;架构整洁之道&gt;&gt;里提出的SOLID架构原则暗合。其实就是我们老生常谈的架构师,从产出合理的解决方案的视角出发得到的结论,做架构要符合单一职责(一套代码面向一类人的需求)和接口隔离(面向不同人群需求的代码需要彻底隔离开),依赖倒置等原则(为未来留出抽象空间)。

       如果从这个角度来看,思考题1说的是,研发资源有限性,架构目标合理性跟解决方案合理性之间取舍,三者并不是有你就没有我的关系,而是你中有我,我中有你的关系,因此三者不应该是稳定不变的状态,而是不停地在变,有一个动态平衡的过程,资源紧缺那就先优先级高的事情,感觉目标不合理了,不断地纠正目标,解决方案则一定要按照架构原则,围绕着架构目标来做,不然的话即便短期有收益,长远来看还是会给系统留下坏味道。</div>2022-05-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/8e/16/7d97a36f.jpg" width="30px"><span>小兵</span> 👍（0） 💬（1）<div>小小杠一下，按照这个信条，在落地执行层面还需要思考很多。有没有那种更具备执行信性的方法论，来指导我们划分各个边界。当然事实上我在其他书也没看到非常清晰的方法论，所以最后还是更多基于对业务的认知逐步修正</div>2022-04-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/09/fb/52a662b2.jpg" width="30px"><span>spark</span> 👍（0） 💬（2）<div>郭老师，take away~~~做不好这件事情的“阻力”：2个重点，思维方式的完整性、格局见识。1个能力，抽象能力~~~逆向思维，不具备这些能力一定做不好这个工作，我有一个领导，总是纠结边界划分和抽象的层次，把我“恶心”离职。1万小时技术，积累不超过5000小时的技术，就做不好这个事情，需要成为半个专家才行~~~
</div>2022-03-29</li><br/><li><img src="" width="30px"><span>BIZ_UI_3</span> 👍（0） 💬（0）<div>“信条一：任务边界可以打破现有的执行边界。” —— 这是否意味着某种团队职责不明确的情况？是否需要执行反康威定律的工作。。。</div>2022-03-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/23/e1/84/580c52a4.jpg" width="30px"><span>本一</span> 👍（4） 💬（1）<div>如果是我，应该是按2 4 1 3这样，先规划决策优先级的原则，然后做内聚性设计，再考虑打破现有组织结构，然后考虑是不是过度设计的问题</div>2022-04-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/96/f9/3f976c91.jpg" width="30px"><span>james.d</span> 👍（0） 💬（0）<div>“很多架构师在不了解细节时就做抽象，那么效率提升最终只能停留在假设阶段”，这个观点太正确了，尤其是在大公司，身边不少TL、架构师说到业务系统建设，一定会说平台化&#47;中台化，甚至是在系统建设初期。
抽象一定是建立在具象上面的，了解的细节越多&amp;&amp;业务越稳定，抽象的东西越靠谱；不稳定的抽象简直就是开发者的灾难，过于抽象的东西对架构&#47;开发毫无价值；要做好抽象一定要把手弄“脏”，亲自下场去了解业务的现状和未来。</div>2023-11-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg" width="30px"><span>亚林</span> 👍（0） 💬（0）<div>很多架构师在不了解细节时就做抽象，那么效率提升最终只能停留在假设阶段。你可能没有意识到，抽象会提升系统的复杂度，自动削弱系统的迭代效率和稳定性。因此，我非常反对没有任何数据支撑和可度量目标驱动的架构抽象。

这个经常遇到。</div>2022-07-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg" width="30px"><span>Steven</span> 👍（0） 💬（0）<div>问题1，我觉得是要区分产品阶段的：
如果是启动和成长阶段，则二、四、三、一。
如果成长阶段中后期到成熟阶段，信条一的优先级要提高了，可以二、一、四、三。</div>2022-03-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/07/78/6e4e06ba.jpg" width="30px"><span>陈桐</span> 👍（0） 💬（0）<div>讲得太好了，郭老师，已经拜读完，及时更新😀</div>2022-03-29</li><br/>
</ul>