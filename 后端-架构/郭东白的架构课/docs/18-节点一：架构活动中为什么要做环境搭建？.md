你好，我是郭东白。在第16、17讲，我们讲解了架构师在架构活动中要起的作用，主要有达成共识、控制风险、保障交付和沉淀知识这四个方面。这是从架构师创造价值的维度来拆解的。

那么从这节课开始，我将从架构活动生命周期的维度上，去深度挖掘架构师要做哪些工作，才能保障架构活动的顺利进行。我们先从架构活动的第一步，也就是环境搭建讲起。

## 为什么要做环境搭建？

架构活动的第一步，就是为活动搭建一个架构环境。不过这个重要环节在多数架构活动中被完全忽略了，甚至有些做了多年架构师的人，都不明白这个环节的价值所在。

什么是架构环境呢？打个比方，架构环境是用来执行一个架构活动的虚拟机。这个虚拟机运行在现实的物理环境之中，包括企业的文化环境、商业环境和技术环境等。而架构活动呢，则会在这个虚拟机中执行。所以我们架构师要确保虚拟机上的进程有稳定可靠的运行环境，不受物理环境变化的影响。

基于此，我们可以给出**架构环境**的完整定义：指的是**在企业的商业、技术和文化环境中，架构师为架构活动所搭建的虚拟的工作环境，包括决策环境、激励环境、资源环境、团队构成、物理和虚拟的工作空间等**。

在搭建架构环境的过程中，我们最需要的关注就是搭建一个安全高效的决策环境，来保障整个架构活动的顺利进行。这是行王道的做法。如果不靠决策环境，而是靠超乎寻常的激励环境、资源环境、团队和工作空间，那就是行霸道了。
<div><strong>精选留言（23）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/2b/a7/4c/a158cb5f.jpg" width="30px"><span>咏晨桃</span> 👍（15） 💬（1）<div>闲谈：之前我的老板问我想在一个什么样的环境下工作？我说我希望在一个有家庭氛围感，相互信任，有责任感，追求技术的团队；他紧接着问，如果构建这样一个环境呢？
后来悟到也做到了，一个好的团队需要自己创建，需要集合大家的智慧创建，特别是一个新团队成立，或者一个新人来的时候我都会问他们同样的问题，最后形成团队共识；
遗憾的是没有文字化</div>2022-03-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/a0/50/390187f3.jpg" width="30px"><span>罗均</span> 👍（6） 💬（1）<div>上一节课向老师提的问题，这一节课，马上有了指导的方向，实在是太感恩老师的课程了。

决策环境、激励环境、资源环境、人员构成和工作空间，五个维度出发才能全面考察架构活动乃至任何技术活动的环境。特别是决策环境，太要命了！如果早些接受过老师的课程，就不会碰那么多壁了。

关于老师的第二个问题，学生觉得没有绝对的物质激励或精神激励。正如小平同志说:“贫穷不是社会主义！”在物质激励暂时缺乏的情况下，精神激励往往是“更高层次的物质激励”，例如革命先烈不惜牺牲生命，就是为了我们这样的后代乃至未来的后代有更好的物质环境。工程师选择架构师的方案，更多会考虑这个架构师可以帮助他带了更好的技术成长，而技术成长会为工程师将来带来更好的待遇。</div>2022-03-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/9f/5c/a1195d23.jpg" width="30px"><span>kq yang</span> 👍（6） 💬（3）<div>在部落团体间的进化对抗中，我们人类进化出了回报本能，以及惩罚不公的本能。诸如可口可乐在中国的慈善行为，都大大降低了员工的离职率。facebook的泄密则大大增加了员工离职率。不管是对内行善，还是对外公益，都增加了员工的回报愿望和惩罚不公的愿望。王道的确是管用的，霸道的确是有害的。这讲的意义非常深刻，涉及主观能动的根本动因。</div>2022-03-03</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK851QaPcicgpbzxtEqEErHKtO4V3N27W7gicVTBibtOZCDSg8MxIV9cYcib4Vts3icYibrNGLPy2DqTPRg/132" width="30px"><span>戴亮晖</span> 👍（5） 💬（1）<div>我以前在一家人数很少的初创公司工作过，老板曾经是一个大公司的CEO。因为人数很少，我的经理和下属的个人关系都很好，经常一起吃饭聊天，但老板不认同这种方式，他认为团队的凝聚靠的是使命而不是个人关系。但我并不太认同这种观点：在一家初创公司，工作强度很大，而物质激励往往不尽如人意，公司的使命也不可能短期内达成，而且也不能触达到每个人的心底，所以融洽的工作环境并不失为一个好的方式，大家工作心态轻松、沟通简单顺畅，也是可以达到目标的，至少在当时的阶段，是可以的。</div>2022-09-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/8c/e1/63adf36f.jpg" width="30px"><span>欧阳绍聪</span> 👍（5） 💬（1）<div>物质激励有边际效应，无论从时效还是成本上都不是可持续性的，用在短期冲刺阶段却非常适用，那个时候时间成本太高，生死存亡。
精神激励在我的理解就是要做到小确幸，一点一滴，既确定也冒险的幸福感，成就感。很考究规划，分解能力，对结果现状要明确，规划的路径要有阶段性的目标导向，每一个小目标的完成，都是一次精神激励。</div>2022-03-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/f6/27/c27599ae.jpg" width="30px"><span>术子米德</span> 👍（3） 💬（2）<div>🤔☕️🤔☕️🤔
* 📖：架构环境 = 架构师为架构活动所搭建的虚拟工作环境，尤其关注搭建一个安全高效的决策环境，其它还包括激励环境、资源环境、团队构成、物理和虚拟工作空间等等
    * 🤔：这个之前从来没意识到，更别说仔细想过。可是在实践中也有感触，那就是营造一个适合架构活动开展的环境，比所谓架构师该咋地在地更有效果。最近在读架构类书籍，很多地方都会提到“模板（Template）”，为此我也把这些模板梳理出来，尝试在架构活动里推荐使用，刚开始没啥反应。我自己也尝试用模板来撰写ASR和ADR，最大的感触就是，填写模板还真不容易，尤其不明白模板部分内容的意图。但是还有个感触就是，当硬着头皮去思考每个部分的内容，也能想出点东西来填写进去。并且慢慢体会到，模板的第一价值是，告诉我哪些方面别遗漏，得去认真思考。模板的第二价值是，理解模板是整理方曾经经验的积累，放到我的当下，这些经验大部分依然有用，尤其是容易遗漏的思考维度。我还得提醒自己，我自己的经验也要积累到模板里，才能让模板产生持续的价值。
* 📖：架构师要行正道
    * 🤔：是否正道我说不上，但是有一点我比较肯定，那就是我不会拿技术去寻租，就是所谓靠现在掌握和积累的技术混饭吃。我在持续学习技术，自己领域的深度内容，其它领域里的新鲜有趣内容，也持续学习些其它通识类的课程，东学西学也不少，不见的立刻有用，但是会让自己谦逊起来，知道自己不知道的远比知道得要多得多。我这样的习惯，影响到我身边很多技术人，大家都会习惯性有的没的持续学习，这算不算技术人的正道嘛。
</div>2022-03-08</li><br/><li><img src="" width="30px"><span>BIZ_UI_3</span> 👍（3） 💬（1）<div>从架构透析为人处世之道，妙！</div>2022-03-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/3f/9a/bcf12ebe.jpg" width="30px"><span>Leo</span> 👍（2） 💬（3）<div>关于思考题1，简单讲一下思路。
如果我来做风控，在定义团队信条的时候，仍然需要对齐到公司的信条。
做风控本身不仅是为了保障公司的利益，同样也是为了保障绝大部分客户利益上的公平性，所以这仍然是“客户第一”，因此信条可以是类似“为了保障客户享受到企业权益的公平性，致力于从人性的弱点出发堵住规则的漏洞”。</div>2022-03-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg" width="30px"><span>peter</span> 👍（2） 💬（3）<div>老师的课很好，层次高。从高往低讲。我受益很多。
我有一个具体的问题请教一下老师：
Q1：一台机器部署一个微服务吗？
一般服务数量比较多，而且为了可靠性还需要有备份。比如有一百个服务，加上备份则有两百个服务实例。如果一台机器部署一个服务实例，则需要两百台机器。硬件成本很高。请问：实际部署的时候，一台机器会部署多个实例吗？</div>2022-03-03</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzmDBZy47RRMibBNiaQU4Alnl2XkeYgjGlteVHUlU7gAxSiaJFVBjWQWuzJo8nIOv45OwkYUC0UZ7zA/132" width="30px"><span>Geek_4e0da4</span> 👍（2） 💬（1）<div>太理论了，没有前10讲质量高</div>2022-03-01</li><br/><li><img src="" width="30px"><span>Geek_42abae</span> 👍（1） 💬（1）<div>第二个问题，物资激励有时不如精神激励。这个我还是以马斯诺理论来看。如果一个人吃穿不愁且给个物资激励不痛不痒，那么精神激励的需求更强，性价比更高。但凡物资激励足够大，让你的生活有改变那么精神激励的诱惑就不大了。反过来，你已经财富自由，那么更多的是精神需求了。

有点商人思维观点，利益最大化，性价比</div>2022-10-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/ce/cb/8f9cb975.jpg" width="30px"><span>刀疯剑狂</span> 👍（1） 💬（1）<div>老师说的有一个线下交流会，忘记了在哪篇文章提到的了，哪位好心人提醒下</div>2022-03-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/09/fb/52a662b2.jpg" width="30px"><span>spark</span> 👍（1） 💬（1）<div>郭老师，take away~~~
这篇有点难，架构师首先要通过计算机思维的面试，递归思维和分治思维；三个层次，现实问题和计算机问题的等价、全局最优(类似操作系统)、分治和递归(cache、tradeoff、索引、状态与流程等)~~~
王道的门槛首先是自身计算机文化和计算机思维要过关，类似百度这样的公司，计算机文化国内算可以~~~</div>2022-03-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/9f/2d/63fc2724.jpg" width="30px"><span>汤山猴</span> 👍（1） 💬（1）<div>老师，您讲得很好，但是在一个唯领导是从的环境，架构师可能是建立了一个求真的架构，但是，可能一遇到人，就“变形”了，这种时候，架构师应该怎么考虑呢？</div>2022-03-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/a7/4c/a158cb5f.jpg" width="30px"><span>咏晨桃</span> 👍（3） 💬（0）<div>之前带过一个外包，在一个项目里面带久了，也有很强的归属感，会主动承担事及做事</div>2022-03-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg" width="30px"><span>李二木</span> 👍（2） 💬（0）<div>看了标题还以为是搭建开发环境。^_^</div>2022-04-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/3f/39/a4c2154b.jpg" width="30px"><span>小昭</span> 👍（0） 💬（0）<div>这篇文章里又看到了老师板正的三观。

即使环境不美好，我们依旧可以选择坚持自己的初心，而不是选择不美好。可能很难，可能很苦，但坚持下去也能见到彩虹。</div>2023-05-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/3c/b0/4d57c469.jpg" width="30px"><span>zhaipeng</span> 👍（0） 💬（1）<div>尊重规则，兼顾权威。</div>2022-10-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/84/56/b6187140.jpg" width="30px"><span>Geek_sa2mt4</span> 👍（0） 💬（0）<div>思考题1
风控部门的“客户第一”，我理解应该是保障游戏环境的公平性。比如防止刷单干扰消费者判断，防止用户使用外挂秒杀。但这样势必要承担恶意用户带来的损失。这时需要量化损失和收益，如果损失小于收益也无妨，还会吸引更多用户。根据我的个人经验，我相信还是好人多的。

思考题2
从个人体验来说，激励的边际效应递减很明显，当然公司也可以逐渐增加激励，有钱任性；但相比之下精神激励则不会这样，这是人性，人本能里面喜欢被人夸，或者说是满足马斯诺理论中的自我实现。</div>2022-09-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/4f/d8/2183560d.jpg" width="30px"><span>海鱼美味</span> 👍（0） 💬（0）<div>1.数据决定信任</div>2022-08-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/83/8d/03cac826.jpg" width="30px"><span>徐李</span> 👍（0） 💬（0）<div>环境：行王道的环境和行霸道的环境
使命，愿景，价值观</div>2022-06-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/07/78/6e4e06ba.jpg" width="30px"><span>陈桐</span> 👍（0） 💬（0）<div>说服决策者要诉诸于利益，
做好事情要诉诸于专业。
长期发展要看公司环境，
搭建环境，要看公司基因
文中的王道，应该指搭建保证科学正确决策的环境，付出和回报成正比的正向反馈
霸道，就是依靠权力，人情世故，骚操作，来获得与之不匹配的回报，指一群人围绕一个领导小圈子文化，其他人正常努力也进入不了，成为公司毒瘤
</div>2022-03-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8a/6f/3d4f7e31.jpg" width="30px"><span>娄江国</span> 👍（0） 💬（2）<div>“让白云之下都成为蒙古人牧马的地方！”
用这个举例，政治不正确吧？</div>2022-03-02</li><br/>
</ul>