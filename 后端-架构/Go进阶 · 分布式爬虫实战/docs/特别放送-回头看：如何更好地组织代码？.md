你好，我是郑建勋。

在利用Go语言进行系统开发时，相信你或早或晚都会思考这样一个问题：如何更好地组织代码？或者说如何更好地构建项目的目录结构？

这并不是一个容易回答的问题，因为这通常不会有标准的答案。开发者对Go语言和软件开发的理解不同、面临的业务场景不同，代码的组织方式也会截然不同。

然而，如果我们对这个问题不管不顾，会发现代码书写起来越来越别扭。代码越来越难做大的调整了。因此，在完成对爬虫系统的开发后，让我们重新来思考一下如何更好地组织代码。

## 按照功能划分组织代码

我们之前设计的爬虫系统有对代码进行组织吗？

当然是有的，依靠我们软件开发的经验，代码中有很多增加代码扩展性的设计。包括Option模式、大量使用接口解耦依赖、在main函数中统一注入依赖等等。从整体上来看，我们也使用了扁平化的目录结构，没有嵌套太深的层次结构。同时，为了便于对代码进行管理，我们根据功能对代码结构进行了划分。例如，auth负责权限验证，collect包用于网络爬取，storage用于数据的存储。上面的这些设计保证了我们对这个爬虫系统仍然有较强的控制力。

通过功能对代码结构进行划分是一种比较常见的也比较容易想到的模式。但是在开发过程中，我们会遇到不少的难题，这些问题也存在于我们开发爬虫系统的过程中，**比较严重的两个就是命名问题和循环依赖问题。**
<div><strong>精选留言（1）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/7f/d3/b5896293.jpg" width="30px"><span>Realm</span> 👍（6） 💬（0）<div>文章中提供本项目的系统架构图，以及各模块之间的逻辑关联图，会让阅读代码体验更好.</div>2023-02-14</li><br/>
</ul>