你好，我是志东，欢迎和我一起从零打造秒杀系统。

今天这节课我们主要是聊一聊和Java相关的一些技术点的优化方向，包括Tomcat、RPC框架、JVM以及CDN等。但在开始之前呢，我们先来说个基本知识点，那就是关于程序代码的两种运行模式，即 **CPU密集型与IO密集型**。

CPU密集型操作，顾名思义就是需要持续依赖CPU资源来执行的操作，比如各种逻辑计算、解析、判断等等。在这种情况下，我们的优化方向是尽可能地利用多核CPU资源，并且避免让CPU做无效的切换，因为CPU已经在不停地工作了，谁来干都一样，同时切换CPU还浪费资源。所以这个时候，我们最好让任务线程数和CPU核数保持一致，从而最大限度地利用CPU资源。

和CPU密集型操作相对的，就是IO密集型操作了，比如磁盘IO或者网络IO，这个过程操作系统会挂起任务线程，让出CPU资源。此时如果任务线程较少，同时IO时间相对较长，那可能会出现所有线程都被挂起，然后CPU资源都在闲着的情况，所以此时我们需要适当地增加任务线程数量，来提高吞吐量，同时将CPU资源利用起来。

那为什么要说这个呢？因为这是做程序优化的基本原则。通过前面课程的学习，我们知道，秒杀系统里有提供两种类型的服务，一个是Web服务，一个是RPC服务，前者一般提供HTTP接口，后者提供RPC接口。当然这两种服务我们一般都是通过Tomcat来启动发布，但它们两者之间还是有些不同的。Web服务接受和处理请求走的是Tomcat那套线程模型，而RPC服务则是根据选择的RPC框架的不同而有所变化，所以这节课我们首先来了解一下Tomcat相关的知识。
<div><strong>精选留言（2）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/17/87/be/7466bf26.jpg" width="30px"><span>清风</span> 👍（11） 💬（1）<div>可以部署两个服务，将http服务和RPC服务分开，http服务使用独立的域名对外服务，Rpc使用独立的group对外服务</div>2021-10-26</li><br/><li><img src="" width="30px"><span>胡桐祥</span> 👍（1） 💬（0）<div>JVM 内存模型那里标错了，-Xms应该是堆区的初始化内存吧，不是最小内存，</div>2024-01-09</li><br/>
</ul>