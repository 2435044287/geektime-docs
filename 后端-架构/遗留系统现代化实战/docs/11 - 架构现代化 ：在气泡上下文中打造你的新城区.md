你好，我是姚琪琳。

前面三节课，我们学习了代码现代化的多种模式。从这节课开始，我们继续学习如何实现架构现代化。

需要说明的是，这四个现代化并不是层层递进的关系，而是既可以同时进行，也可以颠倒顺序。

比如，你既可以先重构代码，再拆分架构，也可以先拆分架构，再重构代码。同时，也可以重组团队结构，专门拉出一个平台团队去搭建DevOps平台。

我在第二节课和你探讨架构现代化时，曾经用“建设新城区”和“改造老城区”做了一个类比，今天我们就来详细讲讲在“建设新城区”时，都有哪些模式。

## 绞杀植物模式

我选择把绞杀植物模式作为架构现代化的第一个模式，因为它的思想影响了很多其他模式，包括气泡上下文、扩张-收缩、修缮者等等。

[绞杀植物模式](https://martinfowler.com/bliki/StranglerFigApplication.html)**（Strangler Fig）**，这是Martin Fowler在2004年左右提出的，它是一种用新系统替换旧系统的模式。我们在[第七节课](https://time.geekbang.org/column/article/511924)学习的遗留系统现代化的五种策略，其中就有Rebuild/Replace策略，绞杀植物模式就是针对这种策略的。

很多团队在选择了Rebuild/Replace策略后，往往希望一股脑地构建出新的系统或服务，然后直接替换，而忽略了增量演进这个原则。这样做的后果就是，新构建的系统或服务，与原系统有很大差异，甚至根本不可用。
<div><strong>精选留言（4）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/7d/b6/abdebdeb.jpg" width="30px"><span>Michael</span> 👍（3） 💬（1）<div>老师能再讲一下什么是限界上下文么？我看一些书里面写的是限界上下文其实可以拆分成微服务，但是看八叉老师的课，说的是把限界上下文想成一个筐，解决不了的都往里扔，有点不太理解，老师能不能再讲讲</div>2022-05-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg" width="30px"><span>aoe</span> 👍（2） 💬（1）<div>1、遗留系统中在对接第三方接口（支付、发短信、图片存储等）的时候会有一个防腐层，将不同供应商的接口统一转换成我们系统定义的格式
2、新建了一个项目，专门对遗留系统的核心业务添加功能测试，有一个气泡上下文和遗留系统的数据库、Redis交互，隔离了望而生畏的逻辑。新的查询逻辑尝试使用 DDD，感觉效果还不错。虽然 DDD 也是一知半解，但用起来确实比单纯的 CRUD 更爽，就是开发起来难度比 CRUD 大，最大的难点是发挥想象力创建领域模型</div>2022-05-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/cb/49/0b9ffc8e.jpg" width="30px"><span>刘大明</span> 👍（1） 💬（1）<div>在上家公司，我们经常会对接很多第三方的机票供应商。
我们对接的时候，是将每个不同的机票供应商的数据，统一转换成系统中我们自定义的格式和字段，包括枚举类也是，都必须匹配我们自己的格式。
当时我并没有理解为是防腐层，而是理解为适配器模式或者说是外观模式，当时总觉得这样理解有点问题，现在知道了属于一种防腐层。

但是防腐层增加了额外的代码以及维护成本，还要考虑扩展问题，当时采用策略模式，去执行不同的三方接口。

</div>2022-05-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/77/b3/991f3f9b.jpg" width="30px"><span>公号-技术夜未眠</span> 👍（0） 💬（0）<div>很接地气</div>2022-05-08</li><br/>
</ul>