你好，我是姚琪琳。

在上一节课中，我们学习了如何重构遗留系统的前端，一共分成了八个步骤，其中最后一个步骤是API治理。这其实就是去重构遗留系统的后端。

在第九、十节课，我们已经从代码层面讲解了如何重构和分层。而这节课，我们主要会从架构层面，带你看看在面对一个新需求或技术改进的时候，如何更好地重构和组织后端代码。

如果说在气泡上下文中开发新的需求，类似于老城区旁边建设一个新城区，那么在遗留系统中开发新的需求，就类似于在老城区内部开发新的楼盘。这就必然要涉及到拆迁的问题。

拆迁终归是一个声势浩大的工程，居民要先搬到别的地方，再拆除旧的建筑，盖起新的楼宇，一番折腾之后，老居民才能搬进新家。不过软件的好处就在于它是“软”的，不需要这么费劲儿。你可以很容易地复制、删除和添加新的代码，轻松地实现一个架构的变迁。

## 修缮者

绞杀植物模式适合于用新的系统和服务，替换旧的系统或旧系统中的一个模块。在旧系统内部，也可以使用类似的思想来替换一个模块，只不过这个模块仍然位于旧系统中，而不是外部。我们把这种方式叫做**修缮者模式**。

![图片](https://static001.geekbang.org/resource/image/4e/4a/4efdb7aa98481f6096a665cfd514484a.jpg?wh=1920x584)  
在修缮时，我们通过开关隔离旧系统待修缮的部分，并采用新的方式修改。在修缮的过程中，模块仍然能通过开关对外提供完整功能。
<div><strong>精选留言（3）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg" width="30px"><span>aoe</span> 👍（6） 💬（0）<div>博客《如何优雅地替换一个实现》中电风扇实现接口隔离的例子很生动形象</div>2022-05-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/bf/3e/cdc36608.jpg" width="30px"><span>子夜枯灯</span> 👍（1） 💬（0）<div>很接地气的文章，希望场景实例多一些。感谢作者大大的分享</div>2022-05-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/77/b3/991f3f9b.jpg" width="30px"><span>公号-技术夜未眠</span> 👍（1） 💬（0）<div>十八般武艺，招招精彩</div>2022-05-11</li><br/>
</ul>