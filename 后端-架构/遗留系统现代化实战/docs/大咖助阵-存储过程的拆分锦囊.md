> 你好，我是姚琪琳。我在课程[第二十三节课](https://time.geekbang.org/column/article/523851)讲到了一些存储过程拆分的通用方法。你读后一定意犹未尽吧。那些方法、技巧可能与你的系统接近，但就是差那么一点儿无法解决实际的问题。比如存储过程过于复杂，根本不可能替换成API调用。那今天我就邀请我的同事黄炳洪，为你分享一下存储过程拆分的高阶技巧，希望对你有所帮助。

你好，我是黄炳洪（如果你愿意，可以叫我大饼）。

作为 Thoughtworks 中国区的一名技术顾问，我近年来专注于敏捷软件开发、团队赋能、遗留系统现代化等领域。很高兴受邀和你分享我和团队的一些经验。

在我们帮助客户对遗留系统做微服务化改造的过程中，存储过程是大伙儿最为头疼的一个问题。

这是因为在一些遗留系统里，存储过程是其重要的组成部分，大量的业务逻辑写在存储过程中。而存储过程的拆分，跟上层代码的拆分有着诸多不同，难度甚至高好几个等级。

为什么说它难以拆分呢？原因有以下四个方面：

1.存储过程中的 SQL 直接读写多个业务的表，表与表之间耦合紧密，不易拆分。  
2.存储过程的业务逻辑分布在 SQL 语句的 select、join、where 部分中，分析工作量大。  
3.主流 IDE 对存储过程的重构、调试、自动化测试的支持非常有限，因此开发工作大量依赖手工修改，出错风险大。  
4.熟悉存储过程的开发人员数量比熟悉高级开发语言的少，导致人手不足、开发进度缓慢。
<div><strong>精选留言（1）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg" width="30px"><span>aoe</span> 👍（3） 💬（0）<div>还好，面试的时候不问存储过程，工作中大家也不写存储过程。庆幸没遇到有很多存储过程的系统</div>2022-06-23</li><br/>
</ul>