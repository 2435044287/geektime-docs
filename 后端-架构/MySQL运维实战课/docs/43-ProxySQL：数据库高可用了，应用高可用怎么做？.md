你好，我是俊达。

通过前面几讲，我们知道了怎么使用MySQL的数据复制技术，来实现数据库层面的高可用。但是对于应用系统，当后端的MySQL发生高可用切换时，应该怎么处理？

这里有几种可选的方案。

1. 应用通过域名访问数据库。域名指向主库，当后端数据库发生主备切换后，将域名指向新的主库。使用域名存在几个问题，包括域名缓存的问题，以及端口的问题。因为域名只能解析到IP，如果主库和备库的端口不一样，就无法直接通过切换域名来解决。
2. 在客户端解决。将MySQL集群中的实例信息都配置到应用程序中，在应用程序中自动检测主库和备库信息。也可以引入一些客户端的SDK来实现高可用。使用客户端的方案，会给应用开发带来额外的编码工作，或者对程序的开发语言有要求。
3. 引入Proxy，应用程序只访问Proxy。Proxy内部自动识别主库，将应用的请求转发给正确的后端数据库。这里Proxy的作用，和在web高可用架构中的负载均衡器作用类似。使用Proxy的好处，一是对客户端的限制少，你可以使用熟悉的方式访问数据库。而且有的Proxy可以通过一些策略，实现读写分离、SQL黑名单和白名单、SQL改写等功能。

业界MySQL Proxy的产品比较多。这一讲中，我们就以开源的ProxySQL为例，来看一下数据库高可用的一种实现方式。
<div><strong>精选留言（1）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg" width="30px"><span>美妙的代码</span> 👍（0） 💬（1）<div>MySQLproxy，MySQL router 都是这个功能吧</div>2024-12-03</li><br/>
</ul>