你好，我是俊达。

MySQL运行在具体的操作系统环境中，因此运行效率受限于底层操作系统和硬件环境。在分析数据库的问题时，我们需要同时关注操作系统整体运行情况。在操作系统层面，我们需要关注CPU、内存、IO、文件系统、网络这几大资源的使用情况，分析这些资源是否繁忙、是否有报错、是否有其它异常现象。这节课我们就来看一下如何分析这几种资源的使用情况。

## CPU资源

Linux中有很多查看CPU使用率的工具，top就是其中比较常用的一个工具。使用top可以实时查看系统的整体负载和CPU使用率，还能同时展示CPU使用率最高的那些进程。

你可以看一下top命令的输出。

![图片](https://static001.geekbang.org/resource/image/80/d9/80a25ff51dd2c42fd166860c33df18d9.png?wh=1148x480)

我们主要关注几点：

- 系统整体CPU使用率，包括us，sy，id，wa等指标。

us是用户态的CPU使用率，sy是内核的CPU使用率，id是CPU空闲率，wa是进程等待IO操作完成的时间占比。上面的输出中，用户态CPU 79.1%，系统CPU 19.8%，空闲CPU 0.8%。系统处于CPU繁忙状态。

- 各状态进程数量，包括运行中（running）的进程数、睡眠（sleep）进程数、停止（stopped）的进程数、僵尸（zombie）进程数。
- 按CPU使用率排序的进程列表。显示了进程号（PID）、占用内存（RSS），进程状态（S），进程CPU使用率，进程的内存使用率，执行的命令（command）。
<div><strong>精选留言（1）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/46/4d/161f3779.jpg" width="30px"><span>ls</span> 👍（1） 💬（1）<div>有时候出现超时，说明连接数据库的账号和密码及服务端端口 出问题的概率较少。可以对网络进行抓包，分析出问题时间点的报文情况，看是服务端收发问题，还是客户端收发问题，还是中间有防火墙类似发送reset包，抓包应该能找到一些信息。</div>2024-09-18</li><br/>
</ul>