你好，我是徐昊，欢迎和我一起学习测试驱动开发（Test-Driven Development，TDD）。

对于测试驱动开发，稍有了解而全无实践的人，会认为是天方夜谭，甚至无法想象为什么需要这样的方式来开发：

1. 为什么要开发人员来写测试？这难道不是测试人员的工作吗？难道开发写了测试，测试人员就不用再测了嘛？
2. 又要写测试，又要写生产代码，效率是不是太低了？只写生产代码效率应该更高吧？
3. 不写测试我也能写出可以工作的软件，那么写测试能给我带来什么额外的好处呢？

的确，从直觉上来看，测试驱动开发相当令人困惑：它将我们通常认为的辅助性工作——测试，作为程序员编码的主要驱动力；它主张通过构造一系列自动化测试（由程序员编写），为编写生产代码（Production Code）做指引；它甚至建议，如果不存在失败的测试，就不要编写生产代码。

看起来，似乎测试驱动开发有些**过分强调测试**对于程序员的重要性了。

那么我们就需要仔细思考，“测试”在所谓的“正常软件开发模式”中，到底发挥着怎样的作用。当明晰了测试驱动开发的这个核心逻辑之后，我们才能讨论是不是过分强调了。

## 隐式程序员测试（Implicit Developer Testing）

直觉和经验告诉我们，在所谓的“正常软件开发模式”中，貌似测试只是最后的验收步骤，程序员很少直接参与。但事实却不是这样，就算是所谓的“正常软件开发模式”，也蕴含着非常多“程序员测试”的步骤。只不过这些“程序员测试”并不表现为自动化测试，而是由“测试应用”、“跑一下”和“调试”等隐含手段体现的。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/21/69/79/b4132042.jpg" width="30px"><span>🐑</span> 👍（1） 💬（0）<div>TDD专栏福利大合集：

1、打卡赢好礼（4月23日-5月10日）：正在进行中，学习专栏第1-10讲并在留言区打卡，结束后奖励；

2、代码亲手评（5月底）：预计打卡结束后启动，完成前10讲的打卡，即可提交代码练习作业，徐昊老师会亲自点评；

3、线上带你练：根据专栏更新节奏和老师时间安排确定，徐昊老师会线上带四个同学手把手地改代码，敬请期待！

具体活动介绍见 👉 http:&#47;&#47;gk.link&#47;a&#47;11jPi</div>2022-04-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/f4/87/644c0c5d.jpg" width="30px"><span>俊伟</span> 👍（19） 💬（1）<div>之前拜读《测试驱动开发》觉得这种方法真了不起，之后在工作中也是一直坚持实践。实践TDD真的可以让开发效率变快。现在写代码，早就把Postman之类的工具抛到脑后了，完全通过单元测试来构建可靠的应用。个人感觉使用TDD是一个先慢后快的过程，开头可能会慢一点，但是越往后测试越多，代码写的越快，真的很神奇。</div>2022-03-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/f6/27/c27599ae.jpg" width="30px"><span>术子米德</span> 👍（7） 💬（1）<div>🤔☕️🤔☕️🤔
* TDD带给我的最大改变，那就是先去设定验收的形式和手段，即确定验收的边界，然后整个实现都在趋近这个边界。这种方法刚开始用，很难受，原因在于自己经验不足，不知道怎么验收自己的成果。随着经验的增加，知道如何准确验收自己的成果，就会自然而然TDD。如果是分派任务给大家，个人实践下来，TDD也是优质武器，就是在分配前，对将来交付的内容有验收的预期，会极大提高交付的质量，更不会在交付时带来惊吓级别的惊喜。
* 所以说，TDD在开发初级，会有难受，在开发中级，会自然形成。如果某个所谓的资深，还在说TDD的优劣势，尤其各种不对付，那么大概率他没有体验过一把交付无缺陷的代码，更大概率他卖下过巨量技术债务，要么他本人还在还债，要么已经把债务转嫁给某些无辜开发。</div>2022-03-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/21/1b/ed/34d56ff4.jpg" width="30px"><span>CV</span> 👍（5） 💬（1）<div>对于tdd的理念非常认可，但实际工作中接触的很多都是老项目，一个方法几百行起步，各种反射、静态方法，想写测试感觉都无从下手，更别说tdd落地。希望老师可以讲讲老项目如何开展测试工作</div>2022-03-20</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJUCiacuh59wMbq1icuB8U1T7Vpic8FjKFdanvdt9bzClBmYqFUXmtKmh2Zibn9Dic6A8pjdoBiaia1LCrnA/132" width="30px"><span>tdd学徒</span> 👍（2） 💬（2）<div>很硬核 还配有字幕 
感觉可以不用录音 文字加视频就好了</div>2022-03-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/05/9d/a00a5622.jpg" width="30px"><span>钱忠飞</span> 👍（2） 💬（1）<div>请问课程中有springboot下tdd落地的内容吗？</div>2022-03-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/24/7e/62/48045bee.jpg" width="30px"><span>Sarah</span> 👍（2） 💬（1）<div>内容非常的不错，在工作中也一直在实践，并尝试跟测试用例结合，以达到减少手动测试的目的。
对于这个学习形式，个人认为音频加视频的形式，有点打断学习的体验了，感觉可以都用视频的形式就好，不然要一直音频和视频之间切换，体验感不佳</div>2022-03-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/e9/6c/00668d9d.jpg" width="30px"><span>爱乐之城</span> 👍（1） 💬（1）<div>老师讲的这三类场景日常前端开发中也会碰到，甚至更频繁，比如页面的展示就可以算是「跑一下」验证。请问老师对于前端该写哪些范围的测试，有建议或者单独的章节来讲吗？</div>2022-03-18</li><br/><li><img src="" width="30px"><span>Geek_fa4b49</span> 👍（1） 💬（2）<div>非常高兴徐老师能给大家一个如此基础又如此重要的课程，几乎所有公司都在强调单元测试的重要性，但是我看过很多代码，基本都没有单元测试，好一点的团队是刚开始有单元测试，后面就没有继续维护了。大家都这么重视单元测试，但是为什么都没有坚持下来呢？主要是单元测试成为了项目开发的累赘，没有用TDD。如果是先写代码，再写单元测试，很容易给人一种多余的感受，而且为了测试而测试，就会导致测试无群无尽，甚至连整数的边界都纠结要不要一块测试了。如果用TDD，从test case的角度去设计测试，就不会存在这样的问题。
文章的一个观点非常重要，我们并不是写测试想取代测试人员，而是我们换了一种高效的测试方法而已。我们让测试粒度更细，测试自动化，提高测试的效率。无论如何程序员自己的白盒测试都是要做的，那我们使用TDD这种好的工程实践方法，可以使我们变成高效可靠的程序员。</div>2022-03-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/7a/56/29877cb9.jpg" width="30px"><span>临风</span> 👍（0） 💬（2）<div>工作快一年了，刚开始就知道了TDD，但是一直没有得其要领。后面也接触到了alpha测试，有了自己对开发测试的思考，但始终没有找到一个最佳实践，而自己对测试的理解也在一次次的开发中不断的变化。一开始初生牛犊不怕虎，看到质量较差的代码就想重构、重写，到后面逐渐不敢去碰了，保证自己的代码质量就行了。看着那些老代码，有种心有余而力不足的感觉。自己开发的代码一般都会有测试代码的覆盖，但并不是按照TDD的流程，交付时间又紧张，如果不写测试用例，就能更早是转测代码，有时也会怀疑自己写这些测试用例真的有意义吗，是不是只是自己的自我感动罢了？这次课程，感觉是打了瞌睡来了枕头，非常感谢老师和极客时间这个平台，希望未来自己能真正用好TDD，提高代码质量。
</div>2022-03-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/4d/90/25b6f544.jpg" width="30px"><span>马文龙</span> 👍（0） 💬（1）<div>案例代码有gitee的链接地址吗  徐昊老师</div>2022-03-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg" width="30px"><span>aoe</span> 👍（43） 💬（7）<div>一、 告诉大家怎么2倍速观看视频（希望这个功能能得到优化）
鼠标点击右键-&gt;显示所有控件-&gt;竖着的三个点-&gt;播放速度-&gt;滑倒底部-&gt;2

二、 视频很精彩，非常高效的教学方式，本篇读后感：
1. 当有 private 方法不方便测试时，可以直接提取到一个新的类中变成 public 方法进行测试；同时也说明当前类违反了单一原则，可以及时重构
2. 我现在正发愁 SQL 怎么测！看来能在专栏找到答案了

三、 分享自己的 TDD 学习经历
1. 一次因为把赋值为 0 写成了 1 的 Bug，差点导致公司巨额损失，吓坏了，为了避免此类错误再次发生，最终的解决方案是 TDD
2. 凑巧学到了郑烨老师的专栏《软件设计之美》，带我看到了 TDD 如何入门：从单一原则则到各种原则可以推导出各种设计模式，符合单一原则的代码就是对测试友好的
3. 接着学习了郑烨老师的其他三个专栏《程序员的测试课》、《10X程序员工作法》、《代码之丑》。
   知道了一个方法如果行数太多很大原因是违反了单一原则：
   10行：郑烨老师的标准
   7行：《深入理解 Java 虚拟机》作者周志明老师的标准
4. 从郑烨老师的专栏中知道了两本神奇的书：《代码整洁之道》、《修改代码的艺术》
5. 阅读完《代码整洁之道》后发现还是无从进行 TDD 实践
6. 上网搜了一些国内外热心网友分享的 TDD 视频，开始模仿，虽然不专业，但总算实践了
7. 搜了一下 TDD 的书籍，买了两本：《Java 测试驱动开发》、《测试驱动开发的艺术》
8. 阅读完两本测试图书后知道了 Mockito，写起单元测试方便多了（渐渐理解代码需要对单元测试友好：单一原则、高内聚）
9.  《代码整洁之道》的作者 Bob 大叔说：重构最好的时机就是现在，但需要有单元测试做保障，工作中我也可以及时重构了
10. 正在阅读《修改代码的艺术》，期中 2.1 什么是单元测试中提到：
  单元测试运行很快。如果运行缓慢，那就不是单元测试。
  其他类型的测试经常会伪装成单元测试。如果出现以下情况，那么就不是单元测试：
  a. 测试会访问数据库
  b. 测试会通过网络通信
  c. 测试会访问系统文件
  d. 你需要做特定的工作配置环境来运行测试（例如编辑配置文件）
11. 知道了以前启动 SpringBoot 进行的测试是集成测试而不是单元测试，因为太慢了
12. 现在不知道数据库操作、HTTP请求、void 方法怎么进行单元测试，迷茫中
13. 徐昊老师、郑烨老师、Bob 大叔都在 Thoughtworks 工作过，本专栏让我久久不能平静</div>2022-03-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/b1/e7/f4d66552.jpg" width="30px"><span>danny</span> 👍（10） 💬（0）<div>原来CTO真的会写代码。哈哈

一提到开发质量就会想到要UT，TDD，CodeReview。谁都知道，但落地的聊聊无几。

综观有几方面的因素:
上层只看结果，不关心过程，要的是马上上线，但出了问题，又会马后炮，为什么不UT，不Code Review。

下层想搞，但感觉浪费时间，业务代码还来不及写。但出了问题又反思应该有更好的工作方式，可看看TDD又违背行为习惯，被业务催促下，又回到老路了

也只有像老师这种大师级别的出来做个示范，让中国程序员个个成为小巨人~</div>2022-03-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg" width="30px"><span>文经</span> 👍（6） 💬（0）<div>在直播中，老师提到Beck Kent的《测试驱动开发》看了30遍，我很好奇的是，这30遍是在几年内看完的，看到第几遍的时候有种顿悟的感觉？
这本书我看了3,4遍，也实现了书中的例子，尽管我也看了几本相关的书，例如《重构》、《重构与模式》、《修改代码的艺术》、《敏捷软件开发》、《程序员修炼之道》等，但是TDD一直没掌握。
老师回答我的问题说：“还少27遍”，期待通过这个专栏能够让TDD成为我工具箱中的一项。应该就可以不用看30遍书了😁</div>2022-03-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/de/cf/ef2e0501.jpg" width="30px"><span>奇小易</span> 👍（3） 💬（0）<div>2W2H笔记
Why
Q1：为什么要学习TDD？
1、提高开发者的工程效能
工程效能包括（在开发过程中的）
- 开发功能速度
- 定位问题速度
- 发现问题速度
- 解决问题速度
2、可靠、高效的职业程序员

What
Q1: 程序员在所谓的&quot;正常软件开发流程&quot;中，都做过哪些测试？（或&quot;程序员的测试&quot;都有哪些？）
a、验证性测试
what: 什么是验证性测试？
意图是为了验证代码实现是否符合功能要求。
故在明确的代码执行下，产生的执行结果，要验证该结果是否符合预期。
基于该意图所做的验证操作就是验证性测试。
具体例子如：（测试应用、跑一下）
JPA示例中存储学生对象，最终预期就是将学生对象存入数据库中。
验证的方法就是验证下该对象是否真的存入了数据库。
而具体的验证手法可以通过人工查看的方式来实现，也可以通过编写测试代码来实现。
how good：验证性测试下有两种实现方式，分别是无计划的人工验证和有计划的自动化验证
b、定位性测试
what: 什么是定位性测试？
定位的意图是发现当前代码中存在问题，要快速定位问题，再来解决问题。
通常定位的手段是通过人工断点、打印等技巧，逐步分析错误范围，最终定位到问题，再加以解决。
而也可以通过给排查内容逐个增加验证测试，保证一个个测试通过的情况下，逐步缩小问题范围，从而定位到问题，再解决。
具体例子如：（调试）
how good：定位性测试下有两种实现方式，分别是人工启发式定位和有计划逐模块自动化排查。

Q2：测试驱动开发的核心逻辑是什么？
构造软件的过程可以理解为，通过完成一系列的验证测试（完成需求），然后在验证过程中发现问题，再完成定位测试（解决问题），如此往复，最终直到完成全部功能。
在这样的过程中，测试构成了整个开发流程的骨架，功能开发可以看做是填充到测试与测试之间的血肉。
核心逻辑一：以测试为里程碑点的工程化研发流程（不太理解）
可以看出软件开发过程被分解为完成一个个测试的过程。基于这种分解，能够规划研发流程的进度。（这里不太理解）
核心逻辑二：可重复、高效的自动化测试代替低效的人工测试
可以看出，测试在软件开发过程中无处不在，如此重要的行为，需要高效实现，故需要用高效的自动化手段来代替低效的人工测试手段。

Q3: 课程包含哪些内容？
1、命令行参数解析的示例
2、测试驱动开发的核心理论和方法
3、能够说服他人践行TDD的理由
4、三个示例（ioc容器，restApi框架、db mapper框架）
How
Q1：如何学习TDD？
A: 
1、多练习，在不同场景下练习</div>2022-04-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg" width="30px"><span>escray</span> 👍（2） 💬（2）<div>很久没有写 Java 代码，Java 已经不认识我了。

花了大概 1 个小时，实现了第一个视频里面的普通版本的 StudentRepository，提供代码给和我一样的小白参考

https:&#47;&#47;github.com&#47;escray&#47;TDDCourse&#47;tree&#47;be4fc3b7295cab9bca17928d09fe2b325e31913c&#47;StudentDemo</div>2022-03-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/3e/34/dd0a3c61.jpg" width="30px"><span>爱吃彩虹糖的猫~</span> 👍（2） 💬（0）<div>文中这三段视频对比讲得很好，特别是那段FormHelper的提取，分离关注点来进一步定位问题。</div>2022-03-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg" width="30px"><span>南山</span> 👍（1） 💬（0）<div>不仅想自己掌握这项技能并且变成工作中的主要方式之一，还想带动身边人一起！！！</div>2022-12-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/2a/1f/4e2597f9.jpg" width="30px"><span>汲长娟</span> 👍（1） 💬（0）<div>课程中的项目代码在哪里可以下载？</div>2022-10-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg" width="30px"><span>文经</span> 👍（1） 💬（0）<div>上个月看了《张艺谋的作业》这本书，印象很深的一点是张艺谋摄影的基本功，他拍出来的图片基本上不需要裁剪。还有他学习摄影和电影学院摄影系上学期间留下大量工整的笔记。
那程序员的基本功是什么？我觉得就是把代码写好。记得徐昊老师在第一次直播课中提到技术能力和工程能力的区别。我太过注重知识的学习，例如编程语言、数据结构和算法、计算机系统，甚至于设计模式和软件架构，但工程能力却很弱。
很有技能正如开车一样，不刻意学习和练习，并不会随着年纪变大、经验积累自然掌握。尽管已经工作快15年了，重新把这块能力拼版补上，种一个树最好的时机就是现在！</div>2022-04-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/8d/30/8a1e3abd.jpg" width="30px"><span>西江月</span> 👍（1） 💬（1）<div>怎么快速把一行代码提取成一个 Optional 变量呢？</div>2022-03-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/86/73/5190bbde.jpg" width="30px"><span>苏果果</span> 👍（1） 💬（0）<div>一下更新这么多！老师和编辑也太厉害了吧！追起来追起来！！！期待老师后面的课程～</div>2022-03-16</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erD8CwHKGGIia1HwRBxy5GxMLTfGGzOeLjrmZ6ich9Ng7bbPia89iaSibbldnV4uiaKNXFcO2vQ3ztibCrDw/132" width="30px"><span>Williamleelol</span> 👍（0） 💬（0）<div>调试的情况通过单元测试去验证感觉效率很低，通过日志和debug比较快能定位到。</div>2024-11-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/2a/1f/4e2597f9.jpg" width="30px"><span>汲长娟</span> 👍（0） 💬（0）<div>jakarta.persistence.EntityManager
  bad class file: &#47;Users&#47;.m2&#47;repository&#47;jakarta&#47;persistence&#47;jakarta.persistence-api&#47;3.1.0&#47;jakarta.persistence-api-3.1.0.jar!&#47;jakarta&#47;persistence&#47;EntityManager.class
    class file has wrong version 55.0, should be 52.0
    Please remove or make sure it appears in the correct subdirectory of the classpath.</div>2022-10-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/b5/0d/0e65dee6.jpg" width="30px"><span>FelixFly</span> 👍（0） 💬（0）<div>老师，麻烦问一下视频中对方法返回值快速生成的技巧，视频中是选中一个方法按啥快捷键出来的，我所知道的是可以通过.var快速生成</div>2022-10-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ff/28/040f6f01.jpg" width="30px"><span>Y</span> 👍（0） 💬（0）<div>先赞一个。工作中写测试代码比较少，过来好好学习一下</div>2022-09-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/62/81/69b09ed8.jpg" width="30px"><span>木槿花</span> 👍（0） 💬（0）<div>在编码中，深感无计划测试的低效，也无法全部cover所有场景，要是有另外同事改了代码，可能又引入了新的bug，但是老代码很多privte方法，静态方法等，重新写测试用例难度大，时间来不及，希望能从老师的课程中寻到一些有效的方法。</div>2022-05-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/f0/50/c348c2ea.jpg" width="30px"><span>吕伟</span> 👍（0） 💬（1）<div>每次插入都不会重复的是用什么数据库中间件。
单元测试就怕插入脏数据后的清理</div>2022-05-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/43/2d/af86d73f.jpg" width="30px"><span>enjoylearning</span> 👍（0） 💬（0）<div>自己做的项目一直在采用单元测试，不过还是习惯了写个方法再写测试，这也许是个习惯。先写测试再写代码试过总感觉有些别扭。</div>2022-04-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/e5/33/ff5c52ad.jpg" width="30px"><span>不负</span> 👍（0） 💬（0）<div>1. 种草了，专栏这种形式很赞。相信我能学得会。
2. 之前在私人小项目中接触过别人写的测试用例，通过很开心给，报错了只能自己去调试源码，知道这种方式，写完其实挺平平无奇，一直也重视。
3. 老师直击核心，其实程序员完成代码一直都没离不开过 “测试”，调试更是找错必备，TDD有计划的自动验证，确实能解决很多后顾之忧。</div>2022-04-23</li><br/>
</ul>