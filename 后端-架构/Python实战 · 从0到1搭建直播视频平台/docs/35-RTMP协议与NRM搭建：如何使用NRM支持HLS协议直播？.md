你好，我是Barry。

在上节课我们学习了如何使用Nginx来搭建服务器，并完成了防火墙的配置。这节课我们继续来完成直播系统的开发，学习如何通过NRM简单迅速地搭建流媒体服务器，并使用NRM来支持HLS协议直播。

在动手实操之前，我会先带你认识一下NRM，之后再为你讲解RTMP协议和HLS直播协议的工作原理。有了这些理论基础，后面搭建流媒体服务器的时候，你的思路也会更清晰。

## NRM的功能特性

NRM实际是Nginx-rtmp-module的缩写。这是一个用于Nginx的RTMP模块，它允许Nginx作为RTMP协议的服务器，主要用来处理基于RTMP协议的音频和视频流传输。

NRM是Nginx的第三方模块，它的开发由第三方开发者研发维护。NRM模块一直在不断更新和发展，目前已经有大量的开发者为其贡献代码。这是NRM的[GitHub地址](https://github.com/arut/nginx-rtmp-module)，你可以课后再花点时间详细了解一下。

在直播领域里NRM应用很广泛。它可以作为直播服务器的后端，接收和处理来自客户端的直播请求，并将直播流传输到其他服务器或客户端上。同时，它还可以与其他直播相关的服务（如CDN服务、推流服务器等）集成，提供完整的直播解决方案。

为了帮你熟练地应用NRM，我们还需要了解它的功能特点，我们可以从直播流管理、直播流分发、负载均衡、安全性和可定制性这五个方面来把握。具体你可以参考后面的表格。
<div><strong>精选留言（1）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg" width="30px"><span>peter</span> 👍（0） 💬（1）<div>请教老师几个问题：
Q1：RTMP是基于HTTP吗？是用TCP还是UDP?
Q2：RTMP握手过程怎么有C2、S2？
我理解是：客户端发C0,服务端回S0，客户端再回C1。文中的流程图怎么多出了C2、S2？而且客户端怎么一次就发出C0、C1？
Q3：RTMP与HLS是什么关系？
理解1：平等关系，同类产品，选一个就可以。
理解2：组合关系，两个组合起来完成直播，具体来说是RTMP基于HLS。这两种理解是我瞎猜的，哪个对？
Q4：HLS支持移动端，那么在PC端直播效果更好，对吗？
Q5：NRM只能在Nginx上用吧。
这个问题可能稍微有点奇怪，奇怪的原因是我对Nginx的固有认识：Nginx位于前面，后面是真正的服务端程序，Nginx只是做一些负载均衡、代理等方面的工作，但不真正负责业务处理，业务处理由后面的服务端处理。如果NRM只能在Nginx上使用，那就是说Nginx也变成了“后端服务处理”。</div>2023-07-13</li><br/>
</ul>