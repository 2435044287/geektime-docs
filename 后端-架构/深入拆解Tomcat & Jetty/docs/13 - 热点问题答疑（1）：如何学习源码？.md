不知道你有没有留意到，不少高端开发岗位在招聘要求里往往会写这么一条：研究过框架和中间件源码的优先考虑。这是因为一切秘密都藏在源码之中，阅读源码会让我们对框架或者中间件的理解更加深刻。有时候即使你阅读了大量原理性的文档，但如果不看源码，可能仍然会觉得还没有理解透。另外如果你能深入源码，招聘者从侧面也能感觉到你的学习热情和探索精神。

今天我们就来聊聊源码学习这个话题。对于Java后端开发来说，有不少经典的开源框架和中间件，下面我帮你按照后端的分层架构整理出来供你参考。

- **服务接入层**：反向代理Nginx；API网关Node.js。
- **业务逻辑层**：Web容器Tomcat、Jetty；应用层框架Spring、Spring MVC和Spring Boot；ORM框架MyBatis；
- **数据缓存层**：内存数据库Redis；消息中间件Kafka。
- **数据存储层**：关系型数据库MySQL；非关系型数据库MongoDB；文件存储HDFS；搜索分析引擎Elasticsearch。

这其中每一层都要支持水平扩展和高可用，比如业务层普遍采用微服务架构，微服务之间需要互相调用，于是就出现了RPC框架：Spring Cloud和Dubbo。

除此之外，还有两个非常重要的基础组件：Netty和ZooKeeper，其中Netty用于网络通信，ZooKeeper用于分布式协调。其实很多中间件都用到了这两个基础组件，并且ZooKeeper的网络通信模块也是通过Netty来实现的。
<div><strong>精选留言（22）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg" width="30px"><span>Dovelol</span> 👍（73） 💬（5）<div>老师好，想请教下tomcat中有个名叫Catalina-utility-xx线程作用是什么呢？能否讲下tomcat中各种线程池或者线程的作用？</div>2019-06-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/2d/4c/983ce1b9.jpg" width="30px"><span>海水</span> 👍（24） 💬（2）<div>老师好，如果向spring controler里面的耗时避免不了，比如三方接口的耗时避免不了秒级的耗时，这样是不是要用异步servlet，耗时交给单独的线程池？但是我感觉这样即使用单独的线程池也是用的系统的级线程池，高并发的话是不是也解决不了问题？有没有办法换成协程来解决问题？但是spring 貌似又是线程级的，这种场景是不是 改用go会好点？</div>2019-06-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/47/1d/673537d4.jpg" width="30px"><span>Vincent</span> 👍（8） 💬（1）<div>老师好，&quot;包括静态的依赖关系和动态的协作关系&quot; 能通过Tomcat 具体讲解下吗

</div>2019-07-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg" width="30px"><span>Dovelol</span> 👍（7） 💬（1）<div>老师好，之前请教了tomcat中的几种线程，有个小问题是，我在controller中调用Thread.currentThread()发现有些项目（可能是不同项目或者不同运行环境）确实是Catalina-exec在处理请求，但是有些名称是Thread-1，Thread-2这种线程在处理，区别在哪呢，是不是哪个地方配置不同的原因？</div>2019-06-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg" width="30px"><span>发条橙子 。</span> 👍（7） 💬（1）<div>老师 ， 那你的意思是不是 ，其实现在已经把tomcat的整体架构讲完了 。我们可以先试着自己去读源码了？</div>2019-06-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg" width="30px"><span>Dovelol</span> 👍（4） 💬（2）<div>老师好，请教下，在看tomcat接收请求的源码时发现org.apache.coyote.Request在AbstractProcessor类中是一个成员变量，并且AbstractProcessor的实现类Http11AprProtocol是由recycledProcessors.pop()产生的，那所有请求岂不是公用一个Http11AprProtocol对象，那并发请求的时候Request对象的属性到底是哪个请求数据的呢，感觉Request对象应该是线程绑定的才对，但是没有找到绑定的地方。</div>2019-06-11</li><br/><li><img src="" width="30px"><span>ty_young</span> 👍（2） 💬（1）<div>老师，您说的服务端线程模型就是Proactor和Reactor么</div>2019-06-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/35/d3/649c0b36.jpg" width="30px"><span>唐木儿</span> 👍（1） 💬（2）<div>老师，我下载了Tomcat源码后，用Ant编译后，显示&quot;程序包org.apache.tools.Ant不存在&quot;，是怎么回事呢？直接通过CMD，键入&quot;ant&quot;，提示的是BUILD SUCCESS！这表示已经编译过了吧？但是一运行就显示上面的提示&quot;程序包org.apache.tools.Ant不存在&quot;</div>2019-06-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/29/60/7d5c43d7.jpg" width="30px"><span>幸运</span> 👍（0） 💬（3）<div>老师!您好! 可以问你一个开发中遇到的问题吗?就是我的项目在eclipse中运行时接收数据没有出现乱码.但是把项目打war包导Tomcat中跑时接收数据就出现乱码,然后我在Tomcat--&gt;catalina.bat文件中 添加 set JAVA_OPTS=-Dfile.encoding=UTF-8 这个,发现接收到的数据不乱码了?但是我用log4j打印的日志出现了乱码?这个问题我想请教一下?谢谢指点，查阅很多资料，实在没办法😣</div>2019-06-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg" width="30px"><span>-W.LI-</span> 👍（11） 💬（0）<div>谢谢老师!少走好多弯路</div>2019-06-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg" width="30px"><span>Monday</span> 👍（9） 💬（0）<div>个人感觉，学习知识能问出高质量问题非常重要，感谢老师的问题和源码学习路线。🙏🙏🙏</div>2019-06-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/4f/a8/fa10583f.jpg" width="30px"><span>imsunv</span> 👍（1） 💬（0）<div>老师关于网络通信的总结很棒，很多东西都是知道些，但是不能很好的总结下来</div>2019-06-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg" width="30px"><span>QQ怪</span> 👍（1） 💬（0）<div>谢谢老师分享</div>2019-06-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/6d/00/d740cfd9.jpg" width="30px"><span>尹兆发</span> 👍（1） 💬（0）<div>老师辛苦了</div>2019-06-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/22/c4/1f/791d0f5e.jpg" width="30px"><span>旷野之希</span> 👍（0） 💬（0）<div>讲得特别好，感谢。</div>2024-03-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2e/27/b4/df65c0f7.jpg" width="30px"><span>| ~浑蛋~</span> 👍（0） 💬（0）<div>请问调用request.startAsync()方法的作用是啥？之后的逻辑由哪个线程来处理？</div>2022-07-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/64/eb/732e9707.jpg" width="30px"><span>青苹果</span> 👍（0） 💬（0）<div>老师您好，请问什么是真正学懂了一个框架的源码呢？有什么标准吗，我的意思是，学习源码要到什么程度我们可以说，这个框架的源码我算看过了，看懂了，可以看下一个了呢？</div>2022-01-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/4f/39/cb4df994.jpg" width="30px"><span>单俊宁</span> 👍（0） 💬（0）<div>老师给的思路很好，但我去看源码的时候总是理不出线路来，导致看了源码跟没看一样</div>2020-03-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/a8/05/90b5b097.jpg" width="30px"><span>阴建锋</span> 👍（0） 💬（0）<div>老师  使用tomcat线程池 最小设置100 最大设置1000 问题:观察线程数(如 300多)一直在增加没有释放什么原因(看线程有好多是空闲(100多空闲的))</div>2020-01-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/e9/69/779b48c2.jpg" width="30px"><span>苏忆</span> 👍（0） 💬（0）<div>谢谢老师</div>2019-09-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/b7/ba/ae4cabd8.jpg" width="30px"><span>仙道</span> 👍（0） 💬（3）<div>能不能教下怎么把tomcat源码导入idea啊</div>2019-07-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/a5/f0/8648c464.jpg" width="30px"><span>Joker</span> 👍（0） 💬（0）<div>谢谢老师。。。</div>2019-06-12</li><br/>
</ul>