在当今的互联网时代，我们每个人获取信息的机会基本上都是平等的，但是为什么有些人对信息理解得更深，并且有自己独到的见解呢？我认为是因为他们养成了思考和总结的好习惯。当我们学习一门技术的时候，如果可以勤于思考、善于总结，可以帮助我们看到现象背后更本质的东西，让我们在成长之路上更快“脱颖而出”。

我们经常谈敏捷、快速迭代和重构，这些都是为了应对需求的快速变化，也因此我们在开始设计一个系统时就要考虑可扩展性。那究竟该怎样设计才能适应变化呢？或者要设计成什么样后面才能以最小的成本进行重构呢？今天我来总结一些Tomcat和Jetty组件化的设计思想，或许从中我们可以得到一些启发。

## 组件化及可配置

Tomcat和Jetty的整体架构都是基于组件的，你可以通过XML文件或者代码的方式来配置这些组件，比如我们可以在server.xml配置Tomcat的连接器以及容器组件。相应的，你也可以在jetty.xml文件里组装Jetty的Connector组件，以及各种Handler组件。也就是说，**Tomcat和Jetty提供了一堆积木，怎么搭建这些积木由你来决定**，你可以根据自己的需要灵活选择组件来搭建你的Web容器，并且也可以自定义组件，这样的设计为Web容器提供了深度可定制化。
<div><strong>精选留言（18）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/12/ea/05/c0d8014d.jpg" width="30px"><span>一道阳光</span> 👍（10） 💬（2）<div>这些扩展点被定义成一个个接口，只要你的 Bean 实现了这些接口，Spring 就会负责调用这些接口，老师，spring是怎么判断这些接口被实现了，就调用接口的方法。
还有就是好多扩展原理都是创建一个类去实现接口，然后会自动调用接口的方法，比如springMVC的lan jie (敏感词)器，这个原理是怎么实现的呢？组件是怎么判断这个接口被实现了，就可以被调用？</div>2019-06-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg" width="30px"><span>往事随风，顺其自然</span> 👍（9） 💬（1）<div>怎么自己编写一个jetty 服务器，像spring boot 内嵌式的</div>2019-06-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ad/27/5556ae50.jpg" width="30px"><span>Demter</span> 👍（6） 💬（3）<div>老师还要开别的专栏吗啊</div>2019-08-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/44/ec/0c24c4f5.jpg" width="30px"><span>breezeQian</span> 👍（4） 💬（1）<div>老师好，最近也在看 tomcat 的源码，对 tomcat 的 StandardService 类中的 executors 字段不太理解，这个东西有什么作用吗？</div>2019-06-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/3a/f8/c1a939e7.jpg" width="30px"><span>君哥聊技术</span> 👍（2） 💬（1）<div>spring bean生命周期那张图，右下第二应该是postprocessAfterinitialization吧</div>2019-06-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/d0/69/5dbdc245.jpg" width="30px"><span>张德</span> 👍（1） 💬（1）<div>springboot优化的时候  是在bootstrap.yml里面配置上文中的参数吗？？李老师</div>2019-06-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/c5/e6/50c5b805.jpg" width="30px"><span>欠债太多</span> 👍（0） 💬（1）<div>关于源代码的阅读，老师有什么好的建议或方法么？</div>2019-06-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/85/3b/cfdc8bf2.jpg" width="30px"><span>Royal</span> 👍（0） 💬（1）<div>您好，请问该栏目会涉及JAX-RS的内容么？我想请教下关于这块javax.ws.rs.container.AsyncResponse的内容</div>2019-06-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7c/52/90d79281.jpg" width="30px"><span>王超</span> 👍（35） 💬（0）<div>非常赞，这样的总结让人醍醐灌顶，触类旁通！期待后续精彩分享</div>2019-06-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/e9/69/779b48c2.jpg" width="30px"><span>苏忆</span> 👍（24） 💬（2）<div>老师，您出源码分析的书吧，感觉讲解的是我见过源码分析最好的，把原理设计说的特别好。</div>2019-09-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/8a/76/4abc8ac1.jpg" width="30px"><span>完美世界</span> 👍（5） 💬（7）<div>tomcat，jetty共同点：
1.组件化及可配置
2.生命周期
3.组件骨架抽象类，模板模式
4.观察者模式
5.责任链模式



敏捷开发中，很少用到设计模式，需求变化太快。。。稳定的需求，或者系统的核心逻辑，可以考虑。</div>2019-06-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/21/20/1299e137.jpg" width="30px"><span>秋天</span> 👍（4） 💬（0）<div>面向接口编程和模板方法模式 都是经典的模式，模板方法模式用来抽象高层执行的一个骨架，对于每个变化的点 放到子类取实现 做到开闭原则</div>2019-07-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg" width="30px"><span>QQ怪</span> 👍（3） 💬（0）<div>非常赞，总结的非常到位，并且又对设计模式回温了下，感谢老师的分享！</div>2019-06-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/5d/60/38ea52c5.jpg" width="30px"><span>Bright丶</span> 👍（2） 💬（0）<div>老师讲解得太棒了，这种从封层开始分解的方式，让人很容易理解设计者的意图。我感觉现在自己去看源码也能很轻松的抓住主要脉络，而不会陷入细节了。希望老师能多出几个这样分析框架的专栏。</div>2020-01-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/9a/ab/fd201314.jpg" width="30px"><span>小耿</span> 👍（0） 💬（0）<div>请问老师，根据上文的 Spring Bean 生命周期图，afterPropertiesSet() 方法和后面的 init-method 方法不都是在同一个阶段调用的么？那这两个调用节点不是重复了么？</div>2022-05-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/55/e6/87197b10.jpg" width="30px"><span>GeekAmI</span> 👍（0） 💬（0）<div>寻找架构中的变化点，设计时预留扩展点。</div>2022-01-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/4f/39/cb4df994.jpg" width="30px"><span>单俊宁</span> 👍（0） 💬（0）<div>学习了一遍，过几天来看感觉忘了好多</div>2020-03-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg" width="30px"><span>靠人品去赢</span> 👍（0） 💬（1）<div>这个对比Spring和web容器的比较很赞，我之前知道spring加载类，web应用加载类，但是从没想到过，这个spring的类加载是靠着web应用的类加载器来加载的，那是不是没有web应用，spring是不是不能实现实例化和注入了？这部分是不是也在spring的framework包里，那部分？</div>2019-09-25</li><br/>
</ul>