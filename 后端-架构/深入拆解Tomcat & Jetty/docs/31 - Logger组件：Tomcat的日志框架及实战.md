每一个系统都有一些通用的模块，比如日志模块、异常处理模块、工具类等，对于Tomcat来说，比较重要的通用模块有日志、Session管理和集群管理。从今天开始我会分三期来介绍通用模块，今天这一期先来讲日志模块。

日志模块作为一个通用的功能，在系统里通常会使用第三方的日志框架。Java的日志框架有很多，比如：JUL（Java Util Logging）、Log4j、Logback、Log4j2、Tinylog等。除此之外，还有JCL（Apache Commons Logging）和SLF4J这样的“门面日志”。下面是SLF4J与日志框架Logback、Log4j的关系图：

![](https://static001.geekbang.org/resource/image/a2/2b/a263790cd53456273d50ab754063a72b.png?wh=961%2A472)

我先来解释一下什么是“门面日志”。“门面日志”利用了设计模式中的门面模式思想，对外提供一套通用的日志记录的API，而不提供具体的日志输出服务，如果要实现日志输出，需要集成其他的日志框架，比如Log4j、Logback、Log4j2等。

这种门面模式的好处在于，记录日志的API和日志输出的服务分离开，代码里面只需要关注记录日志的API，通过SLF4J指定的接口记录日志；而日志输出通过引入JAR包的方式即可指定其他的日志框架。当我们需要改变系统的日志输出服务时，不用修改代码，只需要改变引入日志输出框架JAR包。
<div><strong>精选留言（11）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/78/c7/083a3a0b.jpg" width="30px"><span>新世界</span> 👍（9） 💬（0）<div>server.tomcat.access-log等参数配置输出方式，输出位置</div>2019-07-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg" width="30px"><span>吃饭饭</span> 👍（7） 💬（0）<div>查看这个文件就可以吧：spring-boot&#47;1.5.9.RELEASE&#47;spring-boot-1.5.9.RELEASE.jar!&#47;org&#47;springframework&#47;boot&#47;logging&#47;logback&#47;defaults.xml</div>2019-07-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg" width="30px"><span>Standly</span> 👍（3） 💬（0）<div>springboot可以配置切换tomcat默认的日志模块吗？</div>2019-07-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/60/14/6cb28332.jpg" width="30px"><span>罗力友</span> 👍（1） 💬（1）<div>Java 的原生日志系统是每个 JVM 有一份日志的配置文件，这不符合 Tomcat 多应用的场景，所以 JULI 重新实现了一些日志接口。
——老师，为什么说不符合呀。一个tomcat只能启一个jvm吗？</div>2020-08-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg" width="30px"><span>QQ怪</span> 👍（1） 💬（0）<div>默认应该是输出到控制台吧，配置目录可以输出到文件</div>2019-07-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/25/11/a7/6ee3f556.jpg" width="30px"><span>Wx</span> 👍（0） 💬（0）<div>jul-to-slf4j把tomcat日志接过来, 另外server.tomcat.access-log配置可以记录tomcat请求响应日志</div>2024-07-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg" width="30px"><span>James</span> 👍（0） 💬（0）<div>打印在控制台。如果有配置logging.path logging.file就输出到文件上</div>2021-04-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/f2/04/993ec92d.jpg" width="30px"><span>赵达铭</span> 👍（0） 💬（0）<div>是不是springboot下.tomcat直接使用springboot指定的日志框架？不知道代码具体在哪体现</div>2020-12-16</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI4akcIyIOXB2OqibTe7FF90hwsBicxkjdicUNTMorGeIictdr3OoMxhc20yznmZWwAvQVThKPFWgOyMw/132" width="30px"><span>Chuan</span> 👍（0） 💬（1）<div>老师，请问下Handler是定义不同的日志输出方式吗？比如FileHandler是用于规定输入到文件，ConsoleHandler用于规定输出到Console？如果配了这两个，是不是会在文件和控制台各输出一份啊？</div>2020-03-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg" width="30px"><span>Demon.Lee</span> 👍（0） 💬（1）<div>老师，及各位小伙伴，你们是如何解决多个app的日志分离问题的，一个tomcat下部署了多个app，想让每个app的日志都打印到独立的app下面，有什么好的实践么，http:&#47;&#47;logback.qos.ch&#47;manual&#47;loggingSeparation.html</div>2020-02-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg" width="30px"><span>Demon.Lee</span> 👍（0） 💬（0）<div>谢谢老师！</div>2020-01-02</li><br/>
</ul>