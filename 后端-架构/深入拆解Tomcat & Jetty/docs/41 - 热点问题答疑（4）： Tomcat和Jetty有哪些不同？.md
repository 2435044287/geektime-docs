作为专栏最后一个模块的答疑文章，我想是时候总结一下Tomcat和Jetty的区别了。专栏里也有同学给我留言，询问有关Tomcat和Jetty在系统选型时需要考虑的地方，今天我也会通过一个实战案例来比较一下Tomcat和Jetty在实际场景下的表现，帮你在做选型时有更深的理解。

我先来概括一下Tomcat和Jetty两者最大的区别。大体来说，Tomcat的核心竞争力是**成熟稳定**，因为它经过了多年的市场考验，应用也相当广泛，对于比较复杂的企业级应用支持得更加全面。也因为如此，Tomcat在整体结构上比Jetty更加复杂，功能扩展方面可能不如Jetty那么方便。

而Jetty比较年轻，设计上更加**简洁小巧**，配置也比较简单，功能也支持方便地扩展和裁剪，比如我们可以把Jetty的SessionHandler去掉，以节省内存资源，因此Jetty还可以运行在小型的嵌入式设备中，比如手机和机顶盒。当然，我们也可以自己开发一个Handler，加入Handler链中用来扩展Jetty的功能。值得一提的是，Hadoop和Solr都嵌入了Jetty作为Web服务器。

从设计的角度来看，Tomcat的架构基于一种多级容器的模式，这些容器组件具有父子关系，所有组件依附于这个骨架，而且这个骨架是不变的，我们在扩展Tomcat的功能时也需要基于这个骨架，因此Tomcat在设计上相对来说比较复杂。当然Tomcat也提供了较好的扩展机制，比如我们可以自定义一个Valve，但相对来说学习成本还是比较大的。而Jetty采用Handler责任链模式。由于Handler之间的关系比较松散，Jetty提供HandlerCollection可以帮助开发者方便地构建一个Handler链，同时也提供了ScopeHandler帮助开发者控制Handler链的访问顺序。关于这部分内容，你可以回忆一下专栏里讲的回溯方式的责任链模式。
<div><strong>精选留言（12）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/cb/ce/d9e00eb5.jpg" width="30px"><span>undefined</span> 👍（7） 💬（0）<div>jetty 那 2% 的错误主要是什么导致的哈？</div>2021-04-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/39/8b/af74591f.jpg" width="30px"><span>chun1123</span> 👍（7） 💬（0）<div>同样意犹未尽！</div>2019-08-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/8a/76/4abc8ac1.jpg" width="30px"><span>完美世界</span> 👍（3） 💬（0）<div>jetty 吞吐量高，适合做网关。tomcat成熟稳定，更适合做核心应用。
springboot 内置了三个容器：1.undertow;2.jetty;3.tomcat。默认的是tomcat。
详细对比可以参考：https:&#47;&#47;examples.javacodegeeks.com&#47;enterprise-java&#47;spring&#47;tomcat-vs-jetty-vs-undertow-comparison-of-spring-boot-embedded-servlet-containers
</div>2019-09-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/d8/d6/47da34bf.jpg" width="30px"><span>任鹏斌</span> 👍（2） 💬（0）<div>第一遍读完了打算开始第二遍细细品味</div>2019-12-18</li><br/><li><img src="" width="30px"><span>Zzz</span> 👍（1） 💬（0）<div>这门课是一个宝藏!</div>2020-07-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg" width="30px"><span>许童童</span> 👍（1） 💬（0）<div>这篇文章有点短，没学够的感觉。</div>2019-08-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg" width="30px"><span>QQ怪</span> 👍（1） 💬（0）<div>学的意犹未尽</div>2019-08-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/62/24/07e2507c.jpg" width="30px"><span>托尼斯威特</span> 👍（0） 💬（0）<div>Jetty ErrorRate&gt;0的原因是什么? 是因为有些请求分配不到线程所以超时了吗？</div>2020-08-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/f1/7e/8925aba5.jpg" width="30px"><span>小熊</span> 👍（0） 💬（0）<div>最后的示例很形象，哈哈</div>2020-05-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/74/14/ea854bfc.jpg" width="30px"><span>wakaka</span> 👍（0） 💬（0）<div>为啥选择100个线程模拟客户端请求呢？对于本地单机压测，这个数值是高还是低呢？</div>2020-04-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg" width="30px"><span>Demon.Lee</span> 👍（0） 💬（0）<div>一刷结束，我还会回来的，我要先去把基础的书学习一遍。另外，我也学习课程的时候在提了些问题，老师基本都没回复。我现在想想，之前因项目要用tomcat，一些东西不懂，时间紧张，问题提的都不是好问题，老师都不用回了，我会自己去思考。谢谢老师！</div>2020-03-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/11/78/4f0cd172.jpg" width="30px"><span>妥协</span> 👍（0） 💬（0）<div>阅读tomcat源码，有个地方不明白，NioEndpoint在处理感兴趣的IO事件时，在processKey函数中，调用了unreg(sk, attachment, sk.readyOps()); 这个不是在selector上取消了感兴趣感兴趣的事件吗？为何要这么处理？？tomcat源码版本8.5.38</div>2019-10-12</li><br/>
</ul>