你好，我是孔令飞。今天，我们来聊聊开发应用中需要用到的那些规范。

无规矩不成方圆，生活如此，软件开发也是如此。一个应用基本都是多人协作开发的，但不同人的开发习惯、方式都不同。如果没有一个统一的规范，就会造成非常多的问题，比如：

- **代码风格不一：**代码仓库中有多种代码风格，读/改他人的代码都是一件痛苦的事情，整个代码库也会看起来很乱。
- **目录杂乱无章：**相同的功能被放在不同的目录，或者一个目录你根本不知道它要完成什么功能，新开发的代码你也不知道放在哪个目录或文件。这些都会严重降低代码的可维护性。
- **接口不统一：**对外提供的 API 接口不统一，例如修改用户接口为`/v1/users/colin`，但是修改密钥接口为`/v1/secret?name=secret0`，难以理解和记忆。
- **错误码不规范：**错误码会直接暴露给用户，主要用于展示错误类型，以定位错误问题。错误码不规范会导致难以辨别错误类型，或者同类错误拥有不同错误码，增加理解难度。

因此，在设计阶段、编码之前，我们需要一个好的规范来约束开发者，以确保大家开发的是“**一个应用”**。一个好的规范不仅可以提高软件质量，还可以提高软件的开发效率，降低维护成本，甚至能减少 Bug 数，也可以使你的开发体验如行云流水一般顺畅。所以，在编码之前，有必要花一些时间和团队成员一起讨论并制定规范。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/11/63/84/f45c4af9.jpg" width="30px"><span>Vackine</span> 👍（36） 💬（1）<div>程序员最不想做的就是给自己代码写文档，最讨厌的就是别人的代码没文档😂</div>2021-06-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/7a/d2/4ba67c0c.jpg" width="30px"><span>Sch0ng</span> 👍（9） 💬（3）<div>写文档是一个很好的习惯，除了文中提及的作用，写的过程可以帮助思考也可以训练表达能力。
那为什么好的习惯坚持做的人却不多呢？
一方面，不会，多数人不知道怎么才能写出好的技术文档
另一方面，态度，多数人对待文档的态度是要我做，不是我要做
</div>2021-08-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/28/2b/045c9c43.jpg" width="30px"><span>Ekkoful</span> 👍（6） 💬（1）<div>老师，您好，文章中说，前端只需要按照接口文档实现调用逻辑，后端只需要按照接口文档提供功能，这样的意思是我们需要先给接口文档写好，再写代码是么？因为我这边不是专职开发，自己开发的时候也是独自一人开发完成后才写接口文档，所以不太清楚写文档的流程，希望老师解答</div>2021-07-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/79/10/ba663484.jpg" width="30px"><span>库库尔坎</span> 👍（5） 💬（1）<div>“一个规范的 API 接口文档，通常需要包含一个完整的 API 接口介绍文档、API 接口变更历史文档、通用说明、数据结构说明、错误码描述和 API 接口文档。API 接口文档中需要包含接口描述、请求方法、请求参数、输出参数和请求示例。”  API 接口文档 包含 API 接口文档 ？ 自己包含自己了哦</div>2021-06-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/49/93/d9a66772.jpg" width="30px"><span>Cipher</span> 👍（5） 💬（1）<div>快扶我起来，我还能学。</div>2021-06-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/43/2d/af86d73f.jpg" width="30px"><span>enjoylearning</span> 👍（3） 💬（4）<div>还应有单元测试规范</div>2022-10-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/68/d4/c9b5d3f9.jpg" width="30px"><span>💎A</span> 👍（3） 💬（1）<div>用coding的api文档工具或者yapi是更好的选择，yapi写完的文档还可以对数据进行严格测试</div>2021-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/20/75/15/7b22b6c1.jpg" width="30px"><span>穿山乙</span> 👍（1） 💬（1）<div>大公司也一样没啥规范</div>2022-09-19</li><br/><li><img src="" width="30px"><span>牛二宝</span> 👍（1） 💬（1）<div>老师我有个困惑：如果有人在github复制并修改了一些GPL项目的源码到自己的商用项目中，但是自己的商用项目又不开源，那谁又能知道呢</div>2022-04-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/87/64/3882d90d.jpg" width="30px"><span>yandongxiao</span> 👍（1） 💬（1）<div>总结：
  1. 规范设计分类：编码规范 和 非编码规范。
  2. 非编码规范：开源规范、文档规范、版本规范、Commit 规范、发布规范
  3. 编码规范：目录规范、代码规范、日志规范、错误规范、接口规范。
  4. 开源规范：选择一个开源协议，努力达到作者提到的开源规范。 
  5. 文档规范：README.md（结构）；项目文档规范（结构）；接口规范（组织形式）。
  6. 版本规范：使用 cz-cli 规范自己的 Commit 信息，方便自动生成的 CHANGELOG；使用 gsemver dump 自动生成 semver 格式的版本号；提供 &#47;version 接口，将部署的组件与源代码关联起来。</div>2021-11-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg" width="30px"><span>lesserror</span> 👍（1） 💬（1）<div>以后我会刻意按照这篇的规范内容来做开发，让自己养成好的习惯。</div>2021-09-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/04/60/64d166b6.jpg" width="30px"><span>Fan</span> 👍（1） 💬（1）<div>markdown 里面的内容是手敲的呢？还是有工具可以帮助生成呢？</div>2021-08-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/43/9e/3bc0ce71.jpg" width="30px"><span>꧁小佳꧂</span> 👍（1） 💬（1）<div>api 文档为什么不放在 开发文档目录里</div>2021-07-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/e8/55/63189817.jpg" width="30px"><span>MClink</span> 👍（1） 💬（1）<div>我们的后端接口文档是通过 proto 自动生成的。比较爽</div>2021-06-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/bf/86/c0cb35f0.jpg" width="30px"><span>8.13.3.27.30</span> 👍（1） 💬（1）<div>代码风格不一 目录杂乱无章 接口不统一 错误码不规范 我现在的项目已经全了，脑瓜子疼</div>2021-06-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/0d/00/d07ea760.jpg" width="30px"><span>qiaocc</span> 👍（1） 💬（1）<div>使用grpc protobuf进行开发，还需要定义接口规范吗？</div>2021-06-13</li><br/><li><img src="" width="30px"><span>Geek_5f1498</span> 👍（1） 💬（1）<div>请问下：一个迭代涉及到前后端的话(前后端分离),要怎么约束前后端的版本号会比较规范，同时又得放在一个迭代里？</div>2021-06-10</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKELX1Rd1vmLRWibHib8P95NA87F4zcj8GrHKYQL2RcLDVnxNy1ia2geTWgW6L2pWn2kazrPNZMRVrIg/132" width="30px"><span>jxs1211</span> 👍（1） 💬（1）<div>接口更新，apidoc是否可以自动更新，如果不是采用自动更新而是手动更新的话，会不会出现忘记更新结构文档的情况，这种情况下应该怎么解决？</div>2021-06-08</li><br/><li><img src="" width="30px"><span>Geek_b317dc</span> 👍（0） 💬（1）<div>fork后，想把在centos7环境下的一些脚本改动push到自己的仓库中去，但是一直失败。
commit messgae如下：
chore: update bash when environent is 1.10 and centos7
报错信息：
&gt; git -c user.useConfigOnly=true commit --quiet
.git&#47;hooks&#47;commit-msg: line 12: go-gitlint: command not found

这个commit描述是有啥问题么</div>2022-10-21</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKELX1Rd1vmLRWibHib8P95NA87F4zcj8GrHKYQL2RcLDVnxNy1ia2geTWgW6L2pWn2kazrPNZMRVrIg/132" width="30px"><span>jxs1211</span> 👍（0） 💬（1）<div>问题：
1 swagger也是API文档，为什么还要在这里单独提供API文档呢
2 功能和修改，怎么才能不会忘记更新对应的文档，这么多文档维护成本很高，这个问题有什么解决办法呢，user.md这样的文档如果手动维护，很可能改了代码忘了更新文档，是否有比较好的实践 
3 codegen -type=int -doc这样的工具是否可以用来生成所有的文档，还是只能用于生成部分类型的文档</div>2021-12-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/4e/80/faa89499.jpg" width="30px"><span>周振</span> 👍（0） 💬（1）<div>如何确保 要确保整个代码库和提交记录中，不能出现内部 IP、内部域名、密码、密钥这类信息。

如果有怎么做处理，有最佳实践或者指导吗</div>2021-11-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/e4/eb/a6ec4c1e.jpg" width="30px"><span>风中劲草</span> 👍（0） 💬（1）<div>这里，有个在线的 README 生成工具，你也可以参考下：readme.so。这个README生成工具有链接地址么</div>2021-10-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/c6/73/abb7bfe3.jpg" width="30px"><span>疯琴</span> 👍（0） 💬（1）<div>我用vscode的REST Client做接口测试，文档就直接写在.rest文件里了，相当于自带了接口示例，也很只管方便。</div>2021-10-19</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJkOj8VUxLjDKp6jRWJrABnnsg7U1sMSkM8FO6ULPwrqNpicZvTQ7kwctmu38iaJYHybXrmbusd8trg/132" width="30px"><span>yss</span> 👍（0） 💬（1）<div>请问老师，项目在gitee 有库吗？

github 在国内访问经常访问不到</div>2021-06-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/68/d4/c9b5d3f9.jpg" width="30px"><span>💎A</span> 👍（34） 💬（3）<div>三天才更新一篇，让隔壁老外看见了还以为我们学不动了，再来一篇，一天更新一篇</div>2021-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg" width="30px"><span>pedro</span> 👍（22） 💬（3）<div>需求规范，由产品统一撰写PRD，研发统一review并评论，双方达成一致后进行迭代，内部上线后，测试同学按照PRD统一测试，正式上线后，PRD存档供后续修改和优化，年底时作为OKR review的参考。</div>2021-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/25/06/13/e4f9f79b.jpg" width="30px"><span>你赖东东不错嘛</span> 👍（13） 💬（0）<div>规范正是小公司不重视的地方，在此非常感谢作者事无巨细的说明开发规范，收益良多。</div>2021-07-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/ee/12/77ddaeb8.jpg" width="30px"><span>Yabo</span> 👍（13） 💬（0）<div>可以用 hugo 部署markdown文档</div>2021-06-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/02/ab/37dd3ca2.jpg" width="30px"><span>i++</span> 👍（2） 💬（0）<div>以前从来没注意过版本这件事，现在长见识了</div>2021-06-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/fb/7f/746a6f5e.jpg" width="30px"><span>Q</span> 👍（1） 💬（0）<div>good!</div>2021-06-01</li><br/>
</ul>