你好，我是钟敬。

上节课我们完成了事件风暴的第一步，识别领域事件。

领域事件表示的是每个业务步骤的结果。那么我们再往深想一步，到底是什么人，执行了什么操作才会造成这种结果的呢？另外，识别行为需求以后，又该怎么进一步导出领域模型呢？

为了解决这些问题，这节课里，我们来一起完成事件风暴的另外两步，识别命令和识别领域名词。

把事件风暴的三步都搞清楚后，我们再来归纳一下事件风暴的作用以及实操时候的一些常见的问题。

## 事件风暴第二步：识别命令

现在，我们开始进行第二步，识别命令。

所谓命令（command），就是引发领域事件的操作，我们可以通过分析领域事件得到。除了识别出命令本身以外，我们通常还要识别出谁执行的命令，以及为了执行命令我们要查询出什么数据。

比如说，对于“合同已签订”这个事件，对应的命令就是“签订合同”。这里，我们在水蓝色的便利贴上写出命令，然后贴在对应的领域事件上方。如下图：  
![](https://static001.geekbang.org/resource/image/39/b3/39b647f39d2a30810dec11b7e517c1b3.jpg?wh=3733x1630)

那么“签订合同”这个操作是什么人执行的呢？需求里说是“销售人员”。这里的销售人员术语上叫做“执行者”，英文是actor。我们把执行者写在小一点的粉色便利贴上，贴在命令上方，如下图：

![](https://static001.geekbang.org/resource/image/84/d8/8478aca09d3fb51ef6527cf044e583d8.jpg?wh=3733x1865)

为了表示执行者是人，这里还在便利贴上画了一个小人儿。之所以这样，是因为有时执行者还可以是系统，可以在便利贴上画一个屏幕的图像表示系统执行者。像下图这样：
<div><strong>精选留言（28）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg" width="30px"><span>escray</span> 👍（5） 💬（2）<div>这里是四色建模法么？

识别领域事件：场景已创建、策略已创建、任务已创建、装备已选择、目标已标定、玩家已选定（红蓝白）
识别命令：创建场景、创建任务、选择目标、设置毁伤、创建装备、创建想定、创建兵力
识别领域名词：场景、任务、装备、模型、目标

对于思考题：

之前接触过用户故事，感觉用户故事可以把系统的功能串联在一起，更加场景化一些；而事件风暴感觉有点类似于头脑风暴的过程，相对发散一些。比较好的方法可能是先采用事件风暴发散，找到足够多的领域事件，然后使用用例分析或者用户故事将领域时间串联在一起。

如果借鉴事件风暴的思路，那么可能首先需要和业务人员同步一下对于业务中各个概念的定义，形成一个团队内部的术语表。曾经在业务讨论中，出现过多次业务术语不一致的情况。从这个角度来说，事件风暴其实也是一次很好的统一语言的方式。

</div>2022-12-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/c2/79/fbc18da4.jpg" width="30px"><span>超斌hello</span> 👍（42） 💬（4）<div>https:&#47;&#47;www.processon.com&#47;view&#47;link&#47;639920d07d9c0866853d9d91
试验了一下，技术和业务都听得懂了
</div>2022-12-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg" width="30px"><span>Jxin</span> 👍（38） 💬（1）<div>1.用例和用户故事更独立细致，是垂直视角对需求的提炼。产物更详细，耗时更长；
 事件风暴则比较像水平视角对需求的提炼，重心在快速了解核心业务，识别核心领域名词，粒度更粗，但广度更广，耗时相对短很多。主要也是为后续沟通的开展建立基础。
如果领域名词比较多，且关系复杂，就很有必要在项目前期做一轮事件风暴，拉齐基础认知。

2.事件风暴会去识别规则吗？ 我一般不做，规则在后续，通过用户故事来补齐。主要是事件风暴时间线在前期，对规则容易陷入细节，不好把握会议节奏。所以更多的是仅串主流程，识别核心领域名词。

3.事件风暴仅罗列“主流程”吗？我一般不限制，因为在开事件风暴的时候，我脑子里的“主流程”大概率只是一厢情愿。我们都知道有隐式概念，隐式，表达的是知识归宿的特殊性。可能只有圈内人懂，可能只有那么几个人甚至一个人脑子里才有。隐式概念的显式化靠的是业务专家几年几十年的积累，而不是一场事件风暴。而一厢情愿的“主流程”容易漏掉这些关键概念，所以我一般是简单引导 + 不断追问是否有补充，尽量收集信息。后续自己过滤一遍，然后与专家再碰，达成一致。

4.记录事件风暴时，带命令和执行者吗？ 我不带，一方面时间不够（时间问题可以通过工作坊形式的调整来满足），另一方面给自己做后续分析时埋思考的机会。只要事后补执行者和命令，就一定会有模糊的点，这些都是展开思考和后续沟通对齐的点。</div>2022-12-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/d5/3e/7f3a9c2b.jpg" width="30px"><span>Jaising</span> 👍（5） 💬（3）<div>这样看来事件风暴抓准了企业软件开发中协作困难这个痛点，以事件为核心允许不同背景的利益相关方展开对话，并超越各自的专业背景界限，借助白板便利贴重视头脑风暴的可视化，尽可能让所有参与者充分咀嚼领域知识，从而深刻高效地挖掘与传递业务知识，形成业务全景图，减少信息孤岛等偏差存在，有效降低复杂软件的需求分析与传递成本。
做了个2000字小笔记，对事件风暴的粗浅认知：https:&#47;&#47;juejin.cn&#47;post&#47;7182111319967924282</div>2022-12-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/de/cf/ef2e0501.jpg" width="30px"><span>奇小易</span> 👍（4） 💬（1）<div>2w2h笔记

why

what

事件风暴步骤回顾
识别领域事件。
识别命令和角色以及相关查询数据。
识别领域名词。（从命令、角色、事件中提取对事件有影响的名词）

命令是什么？
产生业务结果的动作，可以从领域事件中倒推出来。
签订合同（命令）-&gt; 合同已签订（领域事件）

角色是什么？
发起动作的对象就是所谓的角色。
例如：客户（角色） -&gt; 签订合同（命令）-&gt; 合同已签订（领域事件）

查询数据是什么？
要使角色完成动作所需要的最少必要数据。
例如：上述示例需要客户和合同信息才能完成。

事件风暴中不同元素在建模和实现层面都有什么作用？
TODO

常见问题
第一个问题是，在事件风暴里是否要列出所有的领域事件和命令？
否，列出当前最为关注的内容。这一步关注的是全面，较为粗粒度的结果。
细化的部分放到后面进行。

第二个问题是，各个领域事件需要体现严格的时间顺序吗？
细节放在其它环节

第三个问题是，每个步骤的颗粒度应该有多大？
宜粗不宜细，保证每个步骤都在一个层次的粗粒度。

第四个问题是，事件风暴适用于所有项目吗？
它要解决的问题是需求与业务的一致等问题，只要需要解决这个问题，就可以用。

第五个问题是，怎么保存和维护事件风暴的结果？
1、如果需求管理有其它手段代替的话（用户故事、用例等），则可以把它当做临时结果。
2、如果没有的话，就持续维护它。

how 

Q: 识别命令和角色以及相关查询数据?
A:
理解相关概念，然后用不同的便利贴来体现。

Q: 如何进行识别领域名词？
1、识别出角色、命令、查询数据、领域事件中的名词性概念。
2、把围绕同一名词的角色、命令、查询数据、领域事件放在一堆。
3、此时该名词已是领域名词。只需将其做个特殊标识，便于区分。

Q: 一个名词在事件和命令中都出现如何标识？
该名词后给个出现次数的数字即可。

how good

---

思考题：

1、如果你以前学习过用例分析、用户故事等方法，那么比较一下，看它们和事件风暴各自有什么优缺点？

两者实践不多，直观感受是事件风暴的文字量极少，图形展示比较直观。其它两种可能就对文字描述更为依赖。

2、如果你自己的项目中，已经有捕获行为需求的方法，那么怎样借鉴事件风暴的思路，为现有的方法添加协作和统一语言的实践？

统一语言的话，需求梳理过程中强调命名的统一，加个术语表。

协助过程优化TODO。</div>2023-02-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/7e/a6/188817b6.jpg" width="30px"><span>郭嵩阳</span> 👍（4） 💬（1）<div>事件风暴这些产物要体现在设计文档上吗？应该体现在哪部分？大部分场景下我们拿到的需求都是prd,这部分有些已经很明确了,还需要事件风暴吗</div>2022-12-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/9d/c0/cb5341ec.jpg" width="30px"><span>leesper</span> 👍（3） 💬（2）<div>抓个虫，最后一幅图中 R001的“举例“和R005的举例重复了，应该体现不同项目之间分配投入时间比例不超过100%

我认为事件风暴建模法比传统方法更敏捷高效，强调协作，三下五除二就把主要业务流程建模出来了，不用一上来就陷入不必要细节，而且和领域驱动设计是天生一对</div>2022-12-13</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLCrJQ4AZe8VrDkR6IO03V4Tda9WexVT4zZiahBjLSYOnZb1Y49JvD2f70uQwYSMibUMQvib9NmGxEiag/132" width="30px"><span>Dowen Liu</span> 👍（2） 💬（1）<div>看了05、06领域建模又回来看这两讲事件风暴，重新理解了下，感觉事件风暴就是两个核心作用：对齐理解、统一语言。事件风暴对建模的帮助像是这两核心功能顺带的，而建模不必依赖事件风暴。</div>2023-11-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ac/0c/f3e37765.jpg" width="30px"><span>夏</span> 👍（2） 💬（1）<div>
基本上一个领域事件只对应一个命令，写了命令就相当于写了事件，把事件和命令都写出来，不是很啰嗦吗？</div>2023-07-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg" width="30px"><span>aoe</span> 👍（0） 💬（1）<div>DDD 寻找「领域名词」的过程
======
1. 通过头脑风暴，找出「领域事件」
2. 由「领域事件」推导出「命令」
3. 从「领域事件」、「命令」、「查询数据」里找到共同的名词，这些名词就是「领域名词」

名词解释
======
领域事件：业务中已经发生的重要事件，是业务方必须关心的，对业务流程有重大影响，发生后会改变系统数据。例如用户已注册、商品已下单。领域事件应该具备原子性，方便解耦、异步处理、追踪审计。查询功能不算领域事件。

命令：引发领域事件的操作，我们可以通过分析领域事件得到。除了识别出命令本身以外，我们通常还要识别出谁执行的命令，以及为了执行命令我们要查询出什么数据。例如用户注册、用户下单（需要查询出商品信息）。命令是对领域事件的描述，是对领域事件的触发。

第三次学习</div>2024-04-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/e7/8e/318cfde0.jpg" width="30px"><span>Spoon</span> 👍（0） 💬（1）<div>1.用例分析感觉颗粒度比较大，并不能很好的提取出领域事件、领域模型，会比较粗粒度的从用户交互出发；用户故事这个没有用过
2.统一语言应该是业务、产品、开发对齐一致的结果，从需求梳理到最后一致的表达，刻画在模型上</div>2024-02-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/b2/aa/8a74401f.jpg" width="30px"><span>傲慢与偏见</span> 👍（0） 💬（1）<div>老师，比如 认证流 流程中，有三种类型 公司+法人，公司+代理人，个人。
这三种类型后续认证动作不一样。（比如法人只需要短信，代理人需要授权书、回款金额，个人只需要提交资料即可）

我们可以按流程类型分组排列命令吗？</div>2023-12-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2a/1f/0a/3dd0cabc.jpg" width="30px"><span>黑夜看星星</span> 👍（0） 💬（2）<div>老师，比如有个情况
帧号计算，执行者系统，查询数据包括GPS时间，TOD时间，涉及操作硬件psync和pll ，那么这些都算上？</div>2023-11-19</li><br/><li><img src="https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLm8skz4F7FGGBTXWUMia6qVEc00BddeXapicv5FkAx62GmOnUNEcE4scSR60AmappQoNdIQhccKsBA/132" width="30px"><span>末日，成欢</span> 👍（0） 💬（1）<div>老师，想要咨询一个问题, 对查询数据&#47;业务规则这里还有点困惑
对于命令来说,可能就是对应的一个API,拿购买商品命令举例
对于查询数据这里, 可能这个领域逻辑需要很多种类的数据,比如【商品信息,活动信息,优惠券信息】
如果还要根据查询出来的商品数据里的一些数据,比如说商品SKU等其他信息, 还要做其他数据的查询, 图里【查询数据】这里就会表示的很多，
或者是业务规则很多的话, 如果一一识别的话, 就感觉过了一遍详细用例,但是感觉不过的话,就怕会遗漏一些场景, 对领域知识理解的不够。

现在的困惑就是我有一个业务流程
业务规则很多, 依赖的数据种类也很多, 有点无从下手。
这是我画的事件风暴，老师可以看下说下问题所在https:&#47;&#47;www.processon.com&#47;view&#47;link&#47;64ef4046db6e4c759267f88f</div>2023-08-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg" width="30px"><span>aoe</span> 👍（0） 💬（1）<div>第二次学习「事件风暴」，关于「识别领域名词」，按自己的理解整理了一下：
第一步：把围绕同一个名词（相同&#47;相关名词）的「领域事件」放在一起，按「名词」分组
第二步：将「领域事件」对应的「命令」、「查询数据」加入分组
第三步：将「领域名词」加入分组

详见 https:&#47;&#47;wyyl1.com&#47;post&#47;23&#47;07&#47;</div>2023-07-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/12/65/846d566c.jpg" width="30px"><span>Breakthrough</span> 👍（0） 💬（1）<div>钟老师，有个问题想请教下，如果我们针对某项细节功能，比如可视化看板开发，就是通过从一些系统取数进行汇总计算然后在前端呈现（类似BI），后端还是采用4层开发框架，那么这种功能构建的过程是否还需要采用事件风暴的方法或者它和我们常规围绕流程的事件风暴法有什么区别吗</div>2023-06-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/c6/71/e56d8687.jpg" width="30px"><span>linne</span> 👍（0） 💬（1）<div>非常感谢钟老师讲解的这么详细。我在学习过程中遇到几个小的疑问，还要麻烦老师解答：
1 关于识别命令的问题：识别命令后的结果图中少了“项目管理”流程的部分。
想对照一下自己画的是否正确，比如在项目管理流程中，和合同相关的事件的执行者都是销售人员，和项目相关的事件的执行者都是项目经理。

2 关于查询数据的问题：
2.1 识别命令后的结果图中&quot;员工管理&quot;部分，添加员工的查询数据是所属部门，我写的是&quot;企业&quot;。
另外转移员工的查询数据是目标部门，我写的是目标部门和员工。
请老师看下比较正确的应该是哪一个。
类似的，在识别领域名词的结果图和事件风暴结果表中，&quot;添加直属部门&quot;的查询数据分别是&quot;所属部门、目标部门和&quot;企业&quot;，应该是哪一个呢。

2.2 如何来判断查询数据应该写哪个，比如添加员工需要查到企业和部门，我想这里如果有租户概念，企业只能操作自己企业的数据，其实也不存在是否要先查企业，那如果遇到数据是父子关系（比如企业下有部门之类的这种关系），那查询数据的地方应该是就建议写什么数据，我从文中的图里看到基本上是&quot;子&quot;数据，不知道理解是否是对的。</div>2023-04-19</li><br/><li><img src="" width="30px"><span>RED_Allen_Account</span> 👍（0） 💬（1）<div>1.事件风波是将项目拆解为一个个的领域模型，划分出各个领域的边界，而用户故事更多的是在事件风波中划分出的领域中进行需求的提炼和完善

事件风波可以使用 Miro 进行多人协作</div>2023-02-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/74/aa/178a6797.jpg" width="30px"><span>阿昕</span> 👍（0） 💬（1）<div>1.用例分析和事件风暴，本质上都是谁做了什么事情，系统如何进行处理；用例分析会更贴近业务需求，描述的是具体的业务场景，离技术比较远；事件风暴侧重于业务和技术的融合，不仅描述业务也指导技术建模；
2.协助可以从技术更多参与到行为需求分析开始；统一语言可以从梳理容易混淆的概念开始；</div>2023-01-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/36/98/cdc6baf1.jpg" width="30px"><span>狂躁程序猿</span> 👍（0） 💬（2）<div>钟老师，这里再请教个问题，这里的领域规则为什么在EventStorming的过程中不作为Policy去识别？文章里只有登记表，但是识别的过程应该也是属于EventStorming的内容吧，这个并没有讲</div>2022-12-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/aa/a1/791d0f5e.jpg" width="30px"><span>白发青年</span> 👍（0） 💬（1）<div>很清楚。事件风暴整理完成后，中台的主要对象和数据库的主要实体已经出来了。传统的分析设计模型，数据库的实体，都是需要数据库设计人员完成，重复交流，信息传递出现衰减，效率也低下。</div>2022-12-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/cc/1d/3c0272a1.jpg" width="30px"><span>abc🙂</span> 👍（0） 💬（4）<div>比较好奇，如果事件和命令是对应的，我感觉更加应该先有命令，再找出命令对应事件，我觉得非技术员的业务员更加喜欢说，“我们能与客户签合同，然后指派项目经理跟进”，签合同，指派都是动词，命令。您觉得呢？</div>2022-12-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/22/02/13/81895861.jpg" width="30px"><span>凡晓飞</span> 👍（0） 💬（2）<div>一个领域事件是只对应一个命令么？感觉命令只是换了种写法</div>2022-12-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/cb/c5/c1d7ca5e.jpg" width="30px"><span>赵晏龙</span> 👍（0） 💬（1）<div>把事件风暴的适用范围都说得很清楚，特别是是否应该保存产出物这些细节问题。
其实对于已有项目而言，我觉得催化剂法的产出物能够表示得更好，您有更好的建议吗？</div>2022-12-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/33/d3/30a89b21.jpg" width="30px"><span>nick</span> 👍（0） 💬（2）<div>我很好奇在事件风暴之前，图中紫色部分“流程名”或者叫模块是怎么识别出来的。如果能有这些流程名或者模块名，是不是相当于用例已经出来了，只要再写用例规约，也就能识别出参与者、领域事件、领域名词了。</div>2022-12-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/24/76/791d0f5e.jpg" width="30px"><span>zyz</span> 👍（1） 💬（0）<div>看了这一篇感觉自己在实践中的一些问题分享避免
1.当你自己还不太理解或者不清楚怎么做的时候可以闲在技术内部分享来完成原有业务的事件风暴流程，边学习、边理解.当自己还不太熟悉的时候邀请业务方我个人出现过的问题就是无法区分对错，比如钟老师例子里面的查询算不算。
2.团队很重要，如果绝大多数人都不懂或者不愿意学习的话这个事情比较难以阻止，而且贴出来的卡片往往跟真实业务不符合，难以挖掘潜在的一些业务规则，找一个自己熟悉的业务带大家练手既能提高自己的影响力也能提高事件风暴熟练度
3.一定要征得上级领导同意。</div>2023-11-07</li><br/><li><img src="" width="30px"><span>刘彤</span> 👍（0） 💬（0）<div>学到这里，理解事件风暴的目的是为了业务人员和技术人员进行需求反串讲时进行，执行人(用户)、动作(命令)，结果(事件)，查询(领域名词&#47;对象)</div>2024-04-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/d6/01/2448b4a9.jpg" width="30px"><span>py</span> 👍（0） 💬（0）<div>识别领域事件，识别命令，识别领域名词。 核心目的是沟通领域知识，形成统一语言，事件风暴不是唯一的方式。</div>2023-01-05</li><br/>
</ul>