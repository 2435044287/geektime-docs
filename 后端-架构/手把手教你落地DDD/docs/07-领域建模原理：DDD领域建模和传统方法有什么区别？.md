你好，我是钟敬。

前面几节课，我们一起完成了行为需求和领域建模，重点在于实践。但是，如果仅停留在实践层面，不去了解背后的原理，我们就会知其然而不知其所以然，最终还是不能很好地进行实践。

所以，在对领域建模有了一定的感性认识以后，今天我们上升到理论层面，一起来理解模型驱动设计的本质含义。然后再来深入探讨“统一语言”，以及它和领域建模的关系。

## 什么是领域模型？

在讨论什么是领域模型之前，咱们先说说什么是模型。

先来看几个例子。比如说你去买房，售楼处都会有一个沙盘模型，这样你就可以看到楼的外观、朝向、周边环境等等。

但是如果要盖这个楼盘，靠沙盘模型就不行了，需要有一套详细的建筑图纸，图纸也是模型。为了对大楼进行设计，还要进行各种计算，计算用的公式也是模型，称为数学模型。另外，小孩玩的玩具车、玩具枪什么的，也是模型。事实上，现代生产和生活中，充满着各种各样的模型。

从这些例子里，咱们可以发现模型的几个共同特点。

首先，**模型是以解决特定问题为目的的**。例如沙盘模型是为了卖房，而建筑图纸是为了盖楼。没有目的就谈不上模型。

第二，**模型都是对现实世界或人们思维中的事物进行的模拟**。例如沙盘模型和建筑图纸都是对建筑物的模拟，而玩具车是对真车的模拟。
<div><strong>精选留言（28）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg" width="30px"><span>Jxin</span> 👍（21） 💬（6）<div>这章的认知和钟老师有挺大差异，我的观点不一定成熟，列出来，和大家共同探讨。

定调：
分析模型: 观察现实世界，记录现实世界的产物。模型产物: 用例分析&#47;事件流。
设计模型: 对现实世界的认知做进一步提炼(抽象)的产物。模型产物: 领域模型图&#47; 架构设计&#47; 详设。
实现模型: 通过编码将设计模型中的概念转换成可运行的 代码&#47;软件。

然后 分析-&gt;设计-&gt;实现 是一个循环关系（两关联一循环），这个循环会不断地增减和提炼知识。而领域建模指的是这个循环的产物，而不是单指分析阶段。也说明领域建模是一个循环渐进的过程，代码也是领域建模的一种模型产物。

为什么领域模型图是设计模型？ 首先为什么不是分析模型？ 因为领域模型里面的部分概念其实是做了抽象的，相比分析阶段的观察现实世界已经到了设计阶段的提炼和抽象；其次，以钟老师上章的UML图为例， 领域模型图既有领域模型以及模型间的关联关系，也有注释和规则，后面再追加领域服务与实体的行为，已经很完备，完备到可以用来验收和表达实现模型了（编码实现），这个粒度和能力从循环的顺序看，应该是落在中间的 设计模型。

思考题：
1.业务和技术理解不一致的情况很多，后果，可大可小，大部分偏小。毕竟系统都上了，还留有后果很严重的认知差异，这个还是比较少见的。毕竟我们哪怕不用ddd也不会不做风险设计和防患。毕竟一次资损整个团队一年白干。

2.做过，好几年，坚持下来了。不过在一线大厂时其实比较少用，1.团队不懂这块，自己的影响力也没法影响整个团队变更工作模式，所以权衡利弊，随大众。2.中台的系统，没有立场也没有勇气去做变更。（能了解到的信息很有限，基本只够在那加行代码，根本不敢乱来。为什么信息很有限，项目权限申请就直接劝退了）</div>2022-12-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg" width="30px"><span>escray</span> 👍（1） 💬（3）<div>开玩笑的说，我们的传统就是没有方法。

文中对于模型的定义和解释很精彩，特别是说模型以解决特定问题为目的。之前可能更多的把模型当做了可展示的三维模型，类似于沙盘；而对于计算模型，类似于图纸，考虑的比较少。

软件开发是建模过程，特别是业务系统，其实就是在使用技术手段模拟业务过程。之前参与过信息化系统的开发，试图使用技术来引领业务，比如超前开展无纸化办公，结果……

曾经看到或者听说过得失败项目，大多数从第一步捕获行为需求就走歪了。

即使是传统软件开发，其实也希望能够站在技术和业务的十字路口。领域驱动开发，其实是给出了一种发现需求到分析设计的方法论，能不能用的好，就千人千面了。

领域模型和系统实现一致，并且能够保持同步进化，这个更难。

对于思考题，

1. 业务和技术理解不一致的地方，通常在于业务希望保持原有操作方式，越简单傻瓜不费脑子越好，技术希望能够分布式、微服务……
2. 以前的项目主要是面向领导开发，所以谈不上领域建模，当然不排除领导本身是业务专家。</div>2022-12-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/6f/e0/ddfc33a5.jpg" width="30px"><span>胡昌龙</span> 👍（7） 💬（1）<div>感谢老师的内容，理得很清晰，很有帮助，请教下：
传统模式下，产品关注自己的业务分析模型，研发关注自己的技术设计模型，各自做好自己边界内的迭代维护工作。领域驱动模式下，领域模型，统一语言等也会不断迭代更新：
1) 如何在产品与研发是两个大部门的情况下，产品与研发一起同时维护更新，有没有相关的工具；
2) 另外，产品体系较大，模型和业务知识比较多的话，如何统一管理，快速构建可讨论画面
3) 每次迭代可能只是一个切面的需求，中间可能横跨多个领域，基于事件风暴及领域思路分析需求，会不会比较重，或者怎么做到轻；

感谢老师！！！</div>2022-12-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/fe/93/c7baea71.jpg" width="30px"><span>bighero</span> 👍（9） 💬（2）<div>我想谈谈我眼中的传统与现在的区别。
传统的时代是所谓的“两张皮”的时代。一面皮其实更倾向于拿过来用户需求就被开发人员按照ER关系割开来，拆解的七零八落的关系时代，代码只求crud的快活感。另一面皮是销售（当时并没有所谓的专职ba po划分）拿着cmm到处宣传讲解，某公司是多么按照国际标准规范来制作软件。
现在软件制作更倾向于mvp。最小实现小步快跑的方式螺旋迭代，利用小迭代来固化领域价值，不断迭代完善。所以才有了用户故事方式或事件风暴。其实我一直认为 事件风暴是一种特殊的用户故事表现形式。它力求从事件的起因 经过 结果，来反向导入who where when 。其实还是用户故事的一种描述方式而已。</div>2022-12-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/fd/58/1af629c7.jpg" width="30px"><span>6点无痛早起学习的和尚</span> 👍（8） 💬（1）<div>这里有个疑惑点，其实很多时候，是不是只需要技术完成业务的功能就行了，比如业务你要什么功能，我技术按照我技术的设计（不按照业务的设计）帮你实现这个功能就行了，但是这个问题可能仅限于本次完成这个功能，导致了外表看起来一样，内在完全不一样。
如果后面业务基于这个功能要做新的扩展，技术的设计可能扩展性就不太好了，所以其实这里就是技术没有按照业务的设计去做，双方并没有达成内在设计去实现，最后就导致了这个冲突。
DDD 其实就可以解决掉这个冲突，不知道我理解的对不对。
因为我的工作中，就出现过，产品做了一个模型设计关系（账户模型），但是研发不按照产品的模型来设计，但是最终的功能出来是可以满足产品的。</div>2022-12-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7d/b6/abdebdeb.jpg" width="30px"><span>Michael</span> 👍（6） 💬（1）<div>还是有几个问题想请教老师，您说的DDD里的建模与普通建模的区别在于DDD里的建模需要兼顾业务和技术两种视角，但是在前面的例子里面似乎只专注于业务视角啊?
还有就是为什么在领域建模的时候要关注关系而不是别的东西呢？这个有没有什么说法之类的？</div>2022-12-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg" width="30px"><span>aoe</span> 👍（5） 💬（2）<div>看完之后豁然开朗，不在担心自己建模太烂，《DDD》序中写道“真正强大的领域模型是随时间演进的，即时是最有经验的建模人员也往往发现他们是在系统的初始版本完成之后才有了最好的想法。”
在前几课一直纠结自己面对“企业管理”这个项目无法做到像老师一样的分析，现在的想法是，找一个自己感兴趣的项目开始练习 DDD 就完了。</div>2022-12-20</li><br/><li><img src="" width="30px"><span>Geek_c33f40</span> 👍（3） 💬（1）<div>老师您好, 目前团队的开发流程是产品收集需求, 产品和交互输出交互稿, 我们开发按照交互稿的内容去实现就行了.  

团队虽然有在落地DDD, 但领域模型还是只是开发去建模, 没有加上产品. 一方面是因为功能并不复杂, 开发通过交互稿就可以理解这个流程, 例如一个简单的包含发帖和回复的论坛. 另一方面产品对这个功能的理解也不深, 例如不清楚未来的规划, 功能拓展点可能在哪里, 都是走一步看一步, 所谓&quot;敏捷&quot;, 加上产品也可能收效甚微. 

目前问题在于设计领域模型的时候输入太少不太好做决策, 开发团队也尝试从例如竞品分析去获取更多对领域的理解, 但还是觉得不太够. 一个功能迭代次数太少也无法验证领域模型是否合理.

老师请问有没有什么好的建议? 还是说针对这种没有领域专家, 业务也相对简单的场景按现有的模式也是可以接受的, 领域模型应先按简单的方式做设计.</div>2023-02-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/4f/3c/296b5fa7.jpg" width="30px"><span>mm马</span> 👍（3） 💬（1）<div>本章内容与徐皓老师的两关联一循环有异曲同工之处，妙哉</div>2023-02-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/9d/c0/cb5341ec.jpg" width="30px"><span>leesper</span> 👍（2） 💬（2）<div>有个问题请教下钟老师：贵公司在完成需求分析、领域建模，进入设计和编码阶段时，是从头开始做，以TDD的方式进行演进式设计，一步一步迭代功能，添加一些必要组件（比如流程引擎）呢，还是在一些现成脚手架基础上直接做开发呢？我猜是前者，对吧？因为我对现在一些常用的脚手架其实是持保留意见的……这些所谓的脚手架拿来搞简单的CRUD可以，拿来实现复杂软件其实是处处掣肘，根本不好用的</div>2022-12-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/cb/c5/c1d7ca5e.jpg" width="30px"><span>赵晏龙</span> 👍（2） 💬（3）<div>1. 绝大多数你在软件开发中的感觉到的不协调，都是模型的差异，其实也包括技术框架的使用。
2. 习惯先建模再设计以后，就回不去了</div>2022-12-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/fd/58/1af629c7.jpg" width="30px"><span>6点无痛早起学习的和尚</span> 👍（1） 💬（1）<div>2 刷，回到这一章节，在 1 刷之后在公司实践中遇到一个问题：领域模型要和业务需求一致（这个太难拉齐了）
在实践中，产品经理给的业务需求在某个功能上&#47;模型上就是一句话的内容，写的很粗，当研发看到这句话进行了自己的一些抽象设计模型，然后 PM 就不认可这个抽象模型和他的业务需求模型不一样，但是研发的抽象模型比PM 的业务需求模型更抽象，扩展性也更强，研发的抽象设计模型也能完成满足 PM 当前业务需求和未来扩展的需求场景。
就因为这个点，研发和 PM 撕逼了不少次，研发吐槽 PM 过度干涉技术设计，PM 吐槽研发不按照需求来。
具体🌰就是这样：
背景：我们是做一个海外电子银行的业务，模型就是三户模型，底层是资金账户概念
PM需求：来一个人，我要给这个人开设一个账户，账户类型就是现金户，对应的就是资金账户类型里的余额账户，也就是 type+人==&gt;余额账户
研发设计：把账户类型设计成一个模型叫产品账户概念，1 个人可以有多类产品账户，1 个产品账户有多个资金账户，抽象原则就是：分离开业务层和资金层，业务层可以多变，资金层永远是不变的。
就因为这个设计，互相撕逼不认可。其实现在来看，研发是把产品诉求里的类型抽象了一个模型，而产品就理解为一个字段。</div>2023-04-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/31/83/93f9a589.jpg" width="30px"><span>江凌</span> 👍（0） 💬（1）<div>模型是一种以解决特定问题为目的，对现实世界或人们思维中的事物提取部分信息忽略其他大部分信息进行模拟，具备多种表现形式的人造物</div>2024-05-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg" width="30px"><span>aoe</span> 👍（0） 💬（1）<div>从「知识管理」的角度来看，DDD 的核心是「知识」

DDD 中的核心模式：统一语言、模型驱动设计

建立领域模型是 DDD 的核心，主要有两个目的：
将知识可视化，准确、深刻地反映领域知识，并且在业务和技术人员之间达成一致；
指导系统的设计和编码，也就是说，领域模型应该能够比较容易地转化成数据库模式和代码实现。

请根据 彼得·德鲁克的《管理》一书，分析一下「知识在 DDD 中的作用」 AI 总结：
领域模型本质上是对领域知识的抽象和表达
知识是决策的基础
知识创造价值
知识的共享与沟通
持续学习与知识的迭代
知识的管理与领导
使知识具体化并可操作
知识在 DDD 实践中的体现：事件风暴、领域建模

知识管理的内容来自 《徐昊 · AI 时代的软件工程》课程

详见 https:&#47;&#47;wyyl1.com&#47;post&#47;23&#47;09&#47;</div>2024-04-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/f5/97/9a7ee7b3.jpg" width="30px"><span>Geek4329</span> 👍（0） 💬（1）<div>在对应的捕获行为需求和需求分析阶段，我们这架构师对技术人员的要求是不能用技术视角看业务问题，必须用业务视角和产品、业务同学进行沟通，只有在设计阶段才能考虑技术的问题，但是在我们架构师看来技术问题都是小问题。所以想咨询一下老师，领域驱动设计兼容了业务和技术的视角，这个是官方的还是老师的个人理解？有没有更强有力的佐证？</div>2023-10-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/9c/f6/eca921d9.jpg" width="30px"><span>赫伯伯</span> 👍（0） 💬（1）<div>领域模型的使用价值在哪里呢？面向企业开发，领域数得出来就那么几个，团队有了经验，也不用以来领域建模。没有经验，那就高薪请一个有经验的人来带队。如果想进入新市场，那就在找个有经验的人来。所以说，这玩意是挺好，但是什么样的企业，才能用领域建模获得实际价值呢？</div>2023-06-08</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJat6pp5AbdicOVBUgPrJicTqkaYC0ZnicrdHb2qHAmvicOJKO3NFH2SczHj7fubVHUKSdRbY9jGCr7SQ/132" width="30px"><span>zangchao</span> 👍（0） 💬（1）<div>受益匪浅，产品经理的业务分析设计和技术人员的模型设计和实现往往是割裂的，尤其在系统迭代了几年 换了好几波人之后，坚持DDD无疑是解决良方。有几个问题想请教钟老师？
1、如何在团队中推行DDD? 我是一名研发，DDD又需要产品、设计、前端、测试共同参与，很难推动那么多人一起搞，尤其是产品要按照DDD规范进行设计，与研发一起反复沟通沉淀知识，占用大量的时间，开发周期本来就很紧，领导又要求DDL。
2、新项目如何推进DDD？新项目往往没有领域专家，大家都是摸着石头过河。新项目往往DDL要求更甚，第一个版本上线，往往都是几周甚至几个月连续加班换来的。
3、统一语言有个疑问，比如账号和权限系统，用户账号在账号上下文中账号是标准概念，但是在权限模型尤其是ABAC模型中没有账号其实对应 主体和客体中的主体，这时候 账号的开发同学问如何获取这个账号的权限，权限的开发同学只认主体客体，就会产生比较多无效沟通，这种一般怎么统一语言啊？</div>2023-05-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/fd/58/1af629c7.jpg" width="30px"><span>6点无痛早起学习的和尚</span> 👍（0） 💬（1）<div>2 刷，继续留个言，发表一下实践感受，在统一语言里的词汇表统一真的很难，发现大家都对这个不是很 care，经常性在各种环节对于一些词汇理解的 gap，然后又拉齐，非常影响效率。</div>2023-04-27</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/MyK55tF3hiaibZItXTibYpXjJy9WqrgtNy4szu5XJ2iazhEQNjjeDJIrY6yU9kWVZCbOzCM1HPueIdibkcVJ2w6QMgA/132" width="30px"><span>L</span> 👍（0） 💬（1）<div>有演示工程代码的链接吗</div>2023-03-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/45/02/795ce950.jpg" width="30px"><span>Jason</span> 👍（0） 💬（1）<div>行为需求与模式实现中领域模式的维护由产品主导还是研发主导呢？我们一般会放在研发这一则，先有领域模型再去做软件设计</div>2023-03-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/60/b0/bd53196b.jpg" width="30px"><span>新起点</span> 👍（0） 💬（1）<div>感谢老师的分享，此处有一个疑问，据我了解SAAS、PAAS和IAAS中都有多租户，非SAAS专属，和您确认下。</div>2023-02-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/24/49/08/c8545982.jpg" width="30px"><span>Vincent萧森</span> 👍（0） 💬（1）<div>凑字数的吧 </div>2022-12-29</li><br/><li><img src="https://wx.qlogo.cn/mmopen/vi_32/DKLvU4DhJueYbIdV8pGQED1vAt5pIUepcvneOlABUyfeeP64SibsL5wvcpo3JJibQNTyJVDvIE5ahcCiaQuP2CxGA/132" width="30px"><span>飞风课马</span> 👍（0） 💬（1）<div>老师，想请教下您对DDD和EA中五级流程建模&#47;实体建模&#47;产品建模方法的看法，后者也注意业务建模成果指导系统建设，是诸如同归还是本质上有差异？谢谢！</div>2022-12-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/36/98/cdc6baf1.jpg" width="30px"><span>狂躁程序猿</span> 👍（3） 💬（0）<div>要想保持领域模型的持续更新，并且和业务实现一直，还是要基于DDD的战略模式建模，基于战术模式实现，缺一即跑偏，很难再保持业务、领域模型、实现的高度统一了。一旦以传统的贫血模型开发落地，前期的领域模型建的再好，后面也难以维护了。真的是要实现代码即模型才有保障！</div>2022-12-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/d6/01/2448b4a9.jpg" width="30px"><span>py</span> 👍（1） 💬（0）<div>1. 碰到过。导致后续迭代困难。
</div>2023-02-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/46/c0/106d98e7.jpg" width="30px"><span>Sam_Deep_Thinking</span> 👍（0） 💬（0）<div>作者功力深厚呀，文章写的很到位。</div>2024-11-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/21/d5/15/4927d5f1.jpg" width="30px"><span>牛奶</span> 👍（0） 💬（0）<div>1、有，经常有，我们用的us非常依赖于us上文字的描述是否清楚，如果不清楚很容易造成理解差异，解决办法就是不断的沟通询问。
2、我们BA有做过，但是因为整个业务流程过于复杂，每个开发只能兼顾到自己对应的那部分，所以对整个模型的理解并不是很通透，只是对对应的每个us理解比较多。</div>2023-10-07</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqOOrv7cDhjs53c333nZPYJnsWt83CsBIdgYSWVI2ajkwicqCuunfN8nyRGNdShOTer9hWQzNutzBA/132" width="30px"><span>Geek_sj3wqh</span> 👍（0） 💬（0）<div>厉害</div>2023-02-26</li><br/>
</ul>