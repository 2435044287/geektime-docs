你好，我是胡夕。

截止到现在，专栏已经更新了38讲，你掌握得怎么样了呢？如果暂时掌握得不是很好，也没有关系，慢慢来，有问题记得在留言区留言，我们一起讨论。

今天，我们来聊点儿不一样的。我总结了3个讨论热度很高的话题，现在一一来为你“揭秘”。

1. 如何搭建Kafka开发环境？很多人对于编译和调试Kafka饶有兴致，却苦于无从下手。今天我就给你完整地演示一遍搭建Kafka开发环境的过程。
2. 如何阅读Kafka源码？我曾经在专栏[第1讲](https://time.geekbang.org/column/article/98948)提到过我自己阅读Kafka源码的经历，后来我收到很多留言，问我是如何阅读的，今天，我就跟你分享一些阅读Kafka源代码的比较好的法则或者技巧。
3. Kafka的学习资料。幸运的是，我在这方面还是有过一些总结的，今天我会毫无保留地把资料全部分享给你。

## Kafka开发环境搭建

现在，我先来回答第1个问题：如何搭建Kafka开发环境。我以IDEA为例进行说明，Eclipse应该也是类似的。

### 第1步：安装Java和Gradle

要搭建Kafka开发环境，你必须要安装好Java和Gradle，同时在IDEA中安装Scala插件。你最好把Java和Gradle环境加入到环境变量中。

### 第2步：下载Kafka的源码
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg" width="30px"><span>每天晒白牙</span> 👍（9） 💬（1）<div>周六日写的Kafka服务端之网络层的源码分析
https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;-VzDU0V8J2guNXwhiBEEyg</div>2019-09-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/59/67/f4ba1da4.jpg" width="30px"><span>Hello world</span> 👍（4） 💬（1）<div>老师，想问您一个问题，producer是直连的kafka ， kafka集群下线一台机器后（分片也已经迁移到其他服务器），producer就会报错一直连不上那台服务器，重启也会这样，现在我怀疑是producer拿了broker缓存的metadata数据，broker缓存的metadata数据可能会很长时间才会更新。现在有一个问题，kafka是否有一个接口可以去强制刷新broker的缓存呢</div>2019-12-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/83/19/0a3fe8c1.jpg" width="30px"><span>Evan</span> 👍（3） 💬（1）<div>发现一个工具，不知道好不好用
https:&#47;&#47;gitee.com&#47;newegg&#47;KafkaCenter.git</div>2020-04-02</li><br/><li><img src="" width="30px"><span>dengy</span> 👍（1） 💬（1）<div>老师，最近发现由kafka topic+偏移量+分区组成的ID有重复，es使用这些重复ID的时候，会只保留最新的一条。请问如何使用kafka参数组成一个唯一的ID</div>2019-09-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/af/fa/5714677b.jpg" width="30px"><span>sonald</span> 👍（1） 💬（1）<div>跑.&#47;gradlew clean releaseTarGz其实会自动下载gradle吧。之前安装gradle似乎没有必要？</div>2019-09-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/42/da/c3821210.jpg" width="30px"><span>李晟</span> 👍（0） 💬（1）<div>老师，是否可以讲讲kafka connector的部署和设计 。</div>2021-07-05</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/4kF5cFK9MN6G56siauKMczuaArSO5KUVP24kqGZA7NbO3AzM4dxCEgrrGiart361KesLA0Cw6SDictPI1xyrfbVsQ/132" width="30px"><span>有梦不难</span> 👍（0） 💬（2）<div>老师，文章中说的kafka开发环境是windows还是linux下的？我是用的是Linux环境的，还需要安装Gradle吗</div>2020-12-20</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/IZIDwkPK8Y3TPX5f940SodNT3BN1nPZQXmGbt78z7uqzjG6DJysFreV2BvTbDVMAdibIACPx1IfsxRBIDtfASXA/132" width="30px"><span>lnj</span> 👍（0） 💬（1）<div>想问一个问题，有没有c或者c++的kafka项目？</div>2020-04-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/3f/37/e74c878b.jpg" width="30px"><span>老陈的空酒桶</span> 👍（0） 💬（1）<div>老师我的环境是利用filebeat把nginx的日志上传至kafka, kafka配置了简单的sasl plan但是filebeat总是报错，kafka message: client&#47;metadata got error from broker while fetching metadata:%!(EXTRA *errors.errorString=EOF)； 我查了好久 没查到原因，老师有什么好建议吗？</div>2020-04-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1a/3d/189c2360.jpg" width="30px"><span>Eric余浩</span> 👍（0） 💬（1）<div>本机是要安装 scala 环境的吧</div>2020-02-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/bd/18/2af6bf4b.jpg" width="30px"><span>兔2🐰🍃</span> 👍（0） 💬（1）<div>按照上面步骤搭建，请问要安装ZooKeeper么？</div>2019-11-13</li><br/><li><img src="" width="30px"><span>懒懒的龟</span> 👍（0） 💬（3）<div>kafka 启动报错，报请求偏移量2但是我们只有0到0范围内的日志段，这个可能是什么原因</div>2019-11-12</li><br/><li><img src="" width="30px"><span>Geek_a6f5ee</span> 👍（0） 💬（1）<div>有没有好的python语言的kafka开源项目</div>2019-11-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/02/78/23c56bce.jpg" width="30px"><span>james</span> 👍（0） 💬（1）<div>请问线上kafka数据可以迁移到线下kafka吗  也就是不同kafka直接数据迁移 复制文件的方式可否呢</div>2019-09-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c4/f3/92f654f1.jpg" width="30px"><span>Bug? Feature!</span> 👍（0） 💬（2）<div>输入gradle后，等了很久，然后报错了，有遇到的吗？</div>2019-09-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/dc/20/64394be8.jpg" width="30px"><span>double</span> 👍（0） 💬（2）<div>老师，partition与replication是怎么分配到broker上的</div>2019-09-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/67/8a/babd74dc.jpg" width="30px"><span>锦</span> 👍（0） 💬（1）<div>Scala语言需要学习到什么程度才能读懂源码呢？</div>2019-08-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg" width="30px"><span>每天晒白牙</span> 👍（10） 💬（0）<div>这篇加餐很及时，正好在读kafka的源码，感谢老师</div>2019-08-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/28/9c/73e76b19.jpg" width="30px"><span>姜戈</span> 👍（1） 💬（0）<div>收藏了，刚好消息中间件学习，阅读Kafka源码，太及时了</div>2019-08-31</li><br/><li><img src="" width="30px"><span>dherblay</span> 👍（0） 💬（0）<div>没有java写的kafka源码，感谢～</div>2023-06-14</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/rURvBicplInVqwb9rX21a4IkcKkITIGIo7GE1Tcp3WWU49QtwV53qY8qCKAIpS6x68UmH4STfEcFDJddffGC7lw/132" width="30px"><span>onemao</span> 👍（0） 💬（0）<div>大佬自己博客的id真是别具一格</div>2022-12-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/24/f6/b4/2696b4fb.jpg" width="30px"><span>ting</span> 👍（0） 💬（1）<div>请问老师，生产者发送消息到topic，返回local :queue full怎么解决呢</div>2022-10-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/a3/f2/ab8c5183.jpg" width="30px"><span>Sampson</span> 👍（0） 💬（0）<div>您好老师，请教下，我按照您的方法，从git上down下来源码编译，会爆版本太低的错误，但是我改了源码中的版本之后又会爆其他的错误，请教下这个地方需要怎么改呀 。文件 build.gradle 里面的 33 行代码 id &#39;com.diffplug.spotless&#39; version ‘5.12.5&#39;   。</div>2021-11-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>努力坚持</div>2021-08-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/98/a9/cd05f663.jpg" width="30px"><span>鸡蛋壳</span> 👍（0） 💬（1）<div>老师，kafka是怎么解决java nio的空轮询问题的？</div>2021-02-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg" width="30px"><span>Ryoma</span> 👍（0） 💬（0）<div>实践——理论看再多也不如实践一次来得深刻</div>2020-02-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg" width="30px"><span>钱</span> 👍（0） 💬（0）<div>课后思考及问题
你觉得学习 Kafka 或者任何一种技术，最重要的是什么？
学习是个持续的过程，经验和外部帮助固然重要，但最关键的，还是自己要付出努力，持之以恒。
还是那句话：Stay focused and work hard！
不怕不占先，就怕缠的粘。基础好脑子聪明这些条件有最好，否则除了Stay focused and work hard别无他法。</div>2019-09-15</li><br/><li><img src="" width="30px"><span>墙角儿的花</span> 👍（0） 💬（0）<div>老师 对于im服务器集群，客户端的socket均布在各个服务器，目标socket不在同一个服务器上时，服务器间需要转发消息，这个场景需要低延迟无需持久化，服务器间用redis的发布订阅，因其走内存较快，即使断电还可以走库。im服务器和入库服务间用其他mq解耦，因为这个环节需要持久化，所以选rocketmq或kafka，但kafka会延迟批量发布消息 所以选rocketmq，这两个环节的mq选型可行吗。</div>2019-09-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/25/7f/473d5a77.jpg" width="30px"><span>曾轼麟</span> 👍（0） 💬（0）<div>我觉得最重要的是两个，坚持和热情，老师还有一本书也挺好的《apache kafka源码剖析》</div>2019-09-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/32/c3/3ca99b1e.jpg" width="30px"><span>Allen Lei</span> 👍（0） 💬（0）<div>我觉得最重要的是要知道为什么这门技术会存在，解决了什么问题，最重要的是思想</div>2019-09-02</li><br/>
</ul>