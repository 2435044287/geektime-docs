你好，我是胡夕。今天我要和你分享的主题是：Kafka Streams与其他流处理平台的差异。

近些年来，开源流处理领域涌现出了很多优秀框架。光是在Apache基金会孵化的项目，关于流处理的大数据框架就有十几个之多，比如早期的Apache Samza、Apache Storm，以及这两年火爆的Spark以及Flink等。

应该说，每个框架都有自己独特的地方，也都有自己的缺陷。面对这众多的流处理框架，我们应该如何选择呢？今天，我就来梳理几个主流的流处理平台，并重点分析一下Kafka Streams与其他流处理平台的差异。

## 什么是流处理平台？

首先，我们有必要了解一下流处理平台的概念。[“Streaming Systems”](https://www.oreilly.com/library/view/streaming-systems/9781491983867/ch01.html)一书是这么定义“流处理平台”的：**流处理平台（Streaming System）是处理无限数据集（Unbounded Dataset）的数据处理引擎，而流处理是与批处理（Batch Processing）相对应的。**

所谓的无限数据，是指数据永远没有尽头。流处理平台是专门处理这种数据集的系统或框架。当然，这并不是说批处理系统不能处理这种无限数据集，只是通常情况下，它更擅长处理有限数据集（Bounded Dataset）。
<div><strong>精选留言（20）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/16/9f/5e/479f33a6.jpg" width="30px"><span>沧海一粟</span> 👍（14） 💬（1）<div>分不太清streams和直接启动consumer消费有什么区别？都是实时的呀。</div>2020-04-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/52/bb/225e70a6.jpg" width="30px"><span>hunterlodge</span> 👍（10） 💬（2）<div>老师，我一直没理解流处理的正确性是什么，既然是处理无限的数据，那又怎么可以和批处理来比较呢？好比我们无法比较一个无限整数集合的sum以及一个有限整数集合的sum呢？</div>2019-11-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/54/b5/310dae7b.jpg" width="30px"><span>小刀</span> 👍（5） 💬（2）<div>留言好少，我加一个场景，我在用stream关联应用日志和istio的open tracing调用链日志</div>2020-05-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/64/15/9c9ca35c.jpg" width="30px"><span>sipom</span> 👍（4） 💬（1）<div>batch、streaming区别的图非常形象👍</div>2020-03-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/12/4e/ff0702fc.jpg" width="30px"><span>火锅小王子</span> 👍（1） 💬（1）<div>老师好，请教下，kafka stream模型底层有应该也是采用拉模型的方式吧，这样的话还是一个轮训的过程，也就是实际上不是属于那种真正的流数据吧 ？</div>2021-04-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/4f/60/049a20e9.jpg" width="30px"><span>吴宇晨</span> 👍（1） 💬（1）<div>想问老师对新出的ksql有什么看法</div>2019-09-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/52/c7/f9ad5669.jpg" width="30px"><span>时彬斌</span> 👍（0） 💬（1）<div>老师好，请问有好用的golang版的处理streams的库推荐吗，目前用的kasper</div>2021-01-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/0c/52/f25c3636.jpg" width="30px"><span>长脖子树</span> 👍（0） 💬（1）<div>配图 好评 哈哈哈</div>2020-06-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/59/67/f4ba1da4.jpg" width="30px"><span>Hello world</span> 👍（0） 💬（1）<div>老师，你使用有bug的connector是官方的还是自己写的呢？kafka stream如果要写入其他数据源，是不是就得开发自己的connector呢？</div>2019-09-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/c8/69/ce605c29.jpg" width="30px"><span>轶</span> 👍（2） 💬（0）<div>单纯从功能角度来看，Flink 等标准的大数据处理框架肯定是胜过 kafka streams 的。但按照 Confluent CTO 的说法，二者之间的最大区别是：“Flink 和 Kafka Streams 程序之间的根本区别在于它们的部署和管理方式。”
怎么理解这句话呢？一般来说 Flink 等大数据处理平台都是由公司的大数据团队部署和管理的，如果某个应用项目中的部分处理逻辑需要依赖于这些大数据处理平台的话，那必然涉及团队间的协作问题，很多时候这比技术问题本身还难以解决😅。但是如果相关处理不是很复杂的话，其实完全可以通过 Kafka streams 来解决，因此应用研发团队可以完全掌控相关的代码和部署，从而能够快速响应需求变化。 </div>2020-07-23</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/DLcTlSKOQlrhRq1hzBNvnWfENsyFrxNnhJ5UPibPMLazy9c2nBlSd1sxHqzHaOTTaZIYkEDAby3HpdianMxt6Dsw/132" width="30px"><span>Joey</span> 👍（1） 💬（0）<div>所以相比flink，kafka stream一点也不香</div>2021-12-01</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/tVtdATOIDmDt85Xuv5dAHNpk93NVTPiaU2MtPA4DLXQia6VXwycpreNzkQs91bLuMCrYUhdGShOtcR1GKW3cp5xA/132" width="30px"><span>jellyabd</span> 👍（1） 💬（0）<div> xAcs</div>2019-09-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/e9/d9/e9542569.jpg" width="30px"><span>Alex</span> 👍（0） 💬（0）<div>端到端的eos特性要保证消费的数据都被处理并生产到另一个主题，这几个步骤是如何保证原子性的，比如，消费的数据已经生产到新主题了，此时没有commit，流程中断，后续恢复后会重新消费并生产，此时不会重复么，还是依赖生产事务特性给自动去重了～</div>2024-06-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/39/d0/82/791d0f5e.jpg" width="30px"><span>大将</span> 👍（0） 💬（0）<div>个人理解Kafka Streams 是利用kafka相关特性，顺便做了一套类库。</div>2023-12-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/9f/0c/8484f8b1.jpg" width="30px"><span>夏落de烦恼</span> 👍（0） 💬（0）<div>flink和kafka stream的算子是一样的么？</div>2022-09-05</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIoRAqV3Yic1wa2gKDq74h1SB5azIpZAOE2uY43CZevju1vd4wxibXq3Y6LJvxJ4tlsJEEmkI64ZJvw/132" width="30px"><span>余晓杰</span> 👍（0） 💬（0）<div>Java8 stream和kafka stream 有可比性吗</div>2022-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>中国程序员喜欢开箱即用，都要自己开发很多人可能能力就不足以胜任。</div>2021-08-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/f1/12/7dac30d6.jpg" width="30px"><span>你为啥那么牛</span> 👍（0） 💬（0）<div>我说一下对于流处理计算不准确的问题，似乎大家对这块不太理解。什么是不准确？没有绝对的准确。即使是批处理也不敢保证准确。

流处理与批处理最大的区别就是实时性，批处理在一个处理间隔周期内，从业务角度来说，我们可以认为它所依靠的基础数据是可信可靠的，可以保证的。基于此，我们认为批处理上准确的。

但是流处理就不一样了，它是实时性的，基础数据在最终确认可信前，数据状态是一直在变化的，就比如网上买东西，购物车一直是变化的，只有你下单后，才能确定具体买了哪些。
</div>2021-02-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/41/59/78042964.jpg" width="30px"><span>Cryhard</span> 👍（0） 💬（0）<div>突然觉得，这节课的文稿封面图片和内容还是很搭的。</div>2020-12-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/1b/4a/f9df2d06.jpg" width="30px"><span>蒙开强</span> 👍（0） 💬（0）<div>老师，你好，kafka流处理sink端的自带支持少，但可以自己用第三方包把结果写入mysql，hbase等的</div>2019-09-05</li><br/>
</ul>