你好，我是徐昊，今天我们来继续学习AI时代的软件工程。

上节课我们介绍了为什么用户故事是大语言模型（Large Language Model，LLM）时代提取业务知识的最佳形态，以及一些编写用户故事的最佳实践。由于用户故事侧重于定义问题**，**而LLM往往更擅长提供解决方案，似乎对于用户故事而言，LLM并不能提供太多的帮助。

然而LLM仍然可以在用户故事编写的环节给予我们帮助。主要是从验收条件入手，帮助我们提取整体解决方案，完善用户故事或是将整体解决方案的细节补充到用户故事中去。

那么今天我们就来看一下，如何利用LLM帮助我们更好地编写用户故事。

## 验收条件与用户故事

用户故事的特质可以总结为3C，即Card，Conversation和Confirmation。Card是指用户故事的物理载体，即索引卡（Index Card）。因为索引卡面积有限，不能事无巨细地写下所有需求信息，只能关注最重要的信息也就是用户价值。其他的不可言说知识则通过对话（Conversation）的这种社交活动传播。

在对话过程中，最重要的目标就是明确这张故事卡的验收条件（Acceptance Criteria）有哪些，也就是如何确认（Confirmation）卡确实做完了。
<div><strong>精选留言（10）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/51/6e/efb76357.jpg" width="30px"><span>一只豆</span> 👍（2） 💬（2）<div>“用户故事”一直在模糊的用，上节课被老师推荐Mike Cohen 的《User Stories Appiled》赶在本节课更新前看完了，感觉如梦初醒恍然大悟，也更加觉得老师上节课对于“三类用户故事”的总结精辟实用。也引出本节课程的模糊点： 
书中的“捕获”比喻和老师本节课中说的“用户故事可能变化”，都给我传递出：用户故事只是对 模糊需求空间进行逐步清晰、逐步描述的载体。相对应的，整体解决方案应该也是阶段性动态的，用户旅程也是阶段性动态的。（不知这理解对吗？）
所以，本节课教的 LLM 辅助用户故事编写的核心价值是不是可以理解为： 可以先 high level 描述整体解决方案和用户旅程，然后 通过一个个用户故事的 TQA 式对话，一步步让人类在 LLM 引导下，让 high level 的解决方案以一个个用户故事的形态 拆解出来。因为用户故事也能驱动测试，测试进一步驱动开发。所以，从整体软件工程视角看，我们通过 LLM 对需求这个复杂空间做了快速探索&#47;试错，具体来说就是对需求和解决方案都完成了拆解，于是把最重要的“做正确的事”部分啃下来了？ 
不知道是否 get 到真经，还请指教～</div>2024-04-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/3b/4f/80/d3062c42.jpg" width="30px"><span>可乐了</span> 👍（1） 💬（1）<div>&quot;TQA 的形式无法通过 ChatGPT 直接使用，需要构造一个 Agent 调用 ChatGPT 的 API 完成。&quot;
徐老师，如果要快速构造一个你文中提到的 Agent 用辅助用户故事的编写，有什么快速的构造方法建议？或者您这个是否可以提供使用？比如开源等方式。
谢谢！</div>2024-05-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/29/87/e1/b3edcc09.jpg" width="30px"><span>范飞扬</span> 👍（0） 💬（2）<div>用户旅程又是如何产生的呢？

我假设“用户旅程”和“业务流程或交互流程”是类似的，
那么我们就可以用老师在《如何落地业务建模》里面说过的“从收入流与成本结构中寻找事件”，来产生用户旅程了。</div>2024-04-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/29/87/e1/b3edcc09.jpg" width="30px"><span>范飞扬</span> 👍（0） 💬（2）<div>原文0
====
如果 LLM 提出的问题，包含了对于操作的误解，那么我们要重新修改用户故事。

问题
===
老师，对这句话我有三问题~
1、“操作”是指的什么？是指User Story里面的 I want 么？还是根据[原文1]，是指验收条件的 When 部分？
2、如果“操作”指的是验收条件的When，那么根据[原文2]，应该修改整体解决方案把？而不是修改用户故事？
3、可以举一个“LLM对于操作的误解”的问题 的例子嘛~

注释：
[原文1]：操作（When）描述了在给定条件下，用户将执行的操作或事件
[原文2]：When 学生在注册页面点击“注册”按钮时（整体解决方案：整个学籍管理系统是一个 Web 应用）</div>2024-04-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/9c/f6/eca921d9.jpg" width="30px"><span>赫伯伯</span> 👍（0） 💬（1）<div>用户旅程又是如何产生的呢？</div>2024-04-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/29/87/e1/b3edcc09.jpg" width="30px"><span>范飞扬</span> 👍（0） 💬（0）<div>业务上下文 (又称 业务背景说明 或 Business Context) = 整体解决方案 + 用户旅程</div>2024-05-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/fd/58/1af629c7.jpg" width="30px"><span>6点无痛早起学习的和尚</span> 👍（0） 💬（0）<div>现在有点迷糊“业务上下文”和“用户故事”，这 2 者的关系和区别了</div>2024-05-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/f6/27/c27599ae.jpg" width="30px"><span>术子米德</span> 👍（0） 💬（0）<div>🤔☕️🤔☕️🤔
【Q】提取不可言说业务知识时，LLM会问怎样的问题？
【A】哪些概念存在、是否已经定义、能否举个例子？
有哪些角色存在、何时何地上场？
开始在哪里、过程有哪些、结束在哪里？何时无法开始、会有哪些异常、何时放弃？
任何操作改变哪些状态、引起哪些变化？
— by 术子米德@2024年4月6日</div>2024-04-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/f6/27/c27599ae.jpg" width="30px"><span>术子米德</span> 👍（0） 💬（0）<div>🤔☕️🤔☕️🤔
【R】用户故事，它处于问题的定义域，LLM，它处于问题的解决域，逻辑上而言，LLM依赖问题的清晰定义，然后给出具体的解决方案。
不过，在用户故事定义后的验证环节，LLM可用来提取整体方案、完善用户故事。
此时，采用TQA（Think-Question-Answer），让LLM对用户故事进行提问，而非回答问题，尤其是让LLM向用户故事发验收条件方面的问。
【.I.】对话（Conversation），在提纲下聊，就像个提线木偶，僵硬感十足，在发散下聊，就像西红柿在溜冰，刚开始奔放自由到僵硬冻住；如果盯住价值，就是这会对我有实用或有意义，并且对于什么条件达到接受有共识，那么在手心有把握感后，会迅速期望暂停，先把这到手的东西给实现，算是成功对话嘛？
【.I.】助手（Copilot），他能帮我干任何事情，把事情扔给他就行，结果得我自己来判定。当我清楚想干啥，那就给任务列表给助手，当我还在弄清楚要干啥，那就让助手来协同，让他来向我发问，就像我提前找个评审方，在正式交付之前，先借LLM来预审。
【Q】用户故事，占位符的含义，是指它在故事链的位置，随着这些位置出现关联和顺序，对应到整体解决方案和用户旅程，其中需求的不可言说知识，被逐步传递出来、并在用户故事里体现的过程？
【Q】TQA里的L为啥能问出示例中的问题？
— by 术子米德@2024年4月6日</div>2024-04-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/b1/94/ae6dcfb9.jpg" width="30px"><span>I. Z.</span> 👍（0） 💬（0）<div>太精彩啦！</div>2024-04-04</li><br/>
</ul>