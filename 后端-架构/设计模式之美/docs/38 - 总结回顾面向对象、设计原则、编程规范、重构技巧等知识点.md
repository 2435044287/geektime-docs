到今天为止，设计原则和思想已经全部讲完了，其中包括：面向对象、设计原则、规范与重构三个模块的内容。除此之外，我们还学习了贯穿整个专栏的代码质量评判标准。专栏的进度已经接近一半，马上就要进入设计模式内容的学习了。在此之前，我先带你一块来总结回顾一下，我们已经学过的所有知识点。

今天的内容比较多，有一万多字，但都是之前学过的，算是一个总结回顾，主要是想带你复习一下，温故而知新。如果你看了之后，感觉都有印象，那就说明学得还不错；如果还能在脑子里形成自己的知识架构，闭上眼睛都能回忆上来，那说明你学得很好；如果能有自己的理解，并且在项目开发中，开始思考代码质量问题，开始用已经学过的设计原则和思想来审视代码，那说明你已经掌握这些内容的精髓。

![](https://static001.geekbang.org/resource/image/f3/d3/f3262ef8152517d3b11bfc3f2d2b12d3.png?wh=5013%2A3903)

## 一、代码质量评判标准

**如何评价代码质量的高低？**

代码质量的评价有很强的主观性，描述代码质量的词汇也有很多，比如可读性、可维护性、灵活、优雅、简洁。这些词汇是从不同的维度去评价代码质量的。它们之间有互相作用，并不是独立的，比如，代码的可读性好、可扩展性好就意味着代码的可维护性好。代码质量高低是一个综合各种因素得到的结论。我们并不能通过单一维度去评价一段代码的好坏。

**最常用的评价标准有哪几个？**
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/6b/84/d1e6eac9.jpg" width="30px"><span>sun</span> 👍（37） 💬（6）<div>总结的太好了  我是跪着读完这篇的</div>2020-07-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4a/96/99466a06.jpg" width="30px"><span>Laughing</span> 👍（1） 💬（1）<div>这节课把之前的内容都串起来了，并且靠后的章节与前面的一些设计规则表达的意思基本大同小异，把这些规则多应用就能形成自己的编码风格。</div>2020-11-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg" width="30px"><span>南山</span> 👍（106） 💬（5）<div>这篇看起来反而是最轻松的。
一直有每篇都用xmind做笔记的习惯，自问自答，wwh。
会结合工作中的代码去思考内容，审视代码，也在code review中和同事结合团队现状制定可行的checklist和编码规范
受益良多，也更期待后续</div>2020-01-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg" width="30px"><span>小文同学</span> 👍（84） 💬（0）<div>终于坚持 原则和思想 这一模块了。
自己在毕业一年后就在公司开展了《设计模式和重构》的分享课，能够入选的原因是自己在小步快跑地重构了一个老旧项目的核心逻辑代码，为项目偿还了一部分技术债务。当初受启发最大的是 《重构》 这一本书，现在自己从维护旧项目到开发新项目，设计模式对自己来说就更加重要了。

在阅读这三十余篇的文章后，多次因为自己编写代码违反了文章中提及的原则感到愧疚。自己负责的新项目曾经一段时间陷入了代码质量问题和可维护的问题，自己编写的框架很多坑，同事在框架中开发也没说踩。真希望自己可以提前一年阅读到这个专栏，必定可以让我省下现在很多的烦恼。

我是为了提高项目 code review 的质量订阅专栏的，也通过专栏的原则发现了项目中大量不及格的设计，在和同事讨论的过程中有了原则和思想的指导，很快地就能达成小模块重构的方案。期待后面的具体的设计模式部分文章，相信一定会给我带来更多重构代码的思路。

受专栏设计思想和原则的启发（特别是贫血模型和充血模型部分的启发），我准备对项目公共模块进行一系列重构，编写测试用例，重新让项目回归到可维护甚至易维护的状态。

感谢老师的专栏文章！

</div>2020-03-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg" width="30px"><span>辣么大</span> 👍（25） 💬（3）<div>1. 学完了还是得用：自己业余时间写了一个小项目，然后尝试丰富功能，重构它。目前完成了最基本的功能，代码写的只能算是能用。基本每天都在使用这个小工具。下步打算利用课程中的知识来“盘他”！
2. 自己个人代码中加入了 FindBugs 和 Google code style。
3. Leetcode练习时注意逐步优化，想想也算是重构吧，不用ide写代码，注意编码规范。
4. 一个方法不要超过20行。
5. 注意代码的可测性，之前没有注意过这方面。重构前要先写测试。
6. 读完了一本《大话设计模式》，正在看《重构2》。
期待争哥下部分的课程！</div>2020-01-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4c/12/f0c145d4.jpg" width="30px"><span>Rayjun</span> 👍（19） 💬（0）<div>太厉害了，能把这么复杂的体系用这么简练的文字表达清楚，值得反复读。</div>2020-02-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/57/66/e57bdb18.jpg" width="30px"><span>liliumss</span> 👍（11） 💬（1）<div>王工确实总结的很好，但是目前国内对代码质量的重视氛围非常差，领导（包括高层领导）只要进度，堆砌业务，本人所在面领从单体服务到微服务的拆解阶段，本身之前单体服务已经非常混乱了，业务还一直向上面堆砌业务，bug多，工期还要求的很短，各种出问题，沙丘上建楼，而且据我观察国内这个行业大部分公司都是这个样子，包括所谓的一些大公司。真所谓代码写的再好，也要遇到像shit一样的项目代码需要你去面对在上面还要做新的业务，真的是很难，有没兄弟有同感的？</div>2020-09-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/e7/5a/9578215e.jpg" width="30px"><span>蔡佳良</span> 👍（9） 💬（4）<div>这个专栏讲的非常棒，是我看过最实在，接地气容易落地的设计模式。但是没有工作经验的同学或者工作不久，项目经验不多的同学就不容易产生共鸣。容易品尝不到其中的精髓，建议做几个项目了，看看开源项目代码了，再时不时来回看一下，你就知道其中的滋味了。</div>2020-10-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/fb/21/a89aca0a.jpg" width="30px"><span>未来小娃</span> 👍（9） 💬（0）<div>【设计模式笔记39】20200628
一、如何评判代码质量高低
评判标准有三个：可维护性、可读性、可扩展性，通过面向对象设计思想、设计原则、编码规范和重构技巧写出高质量代码

二、面向对象思想
四大特性：封装、继承、抽象、多态
封装的意义在于保护数据不被随意修改，提高代码可维护性；仅暴露有限接口，提高代码易用性
继承的意义在于解决代码复用问题
多态的意义在于让子类替换父类，可以灵活替换实现，提高代码的扩展性和复用性
抽象的意义在于修改实现不需要修改定义，同时也是复杂系统开发的有效手段

面向对象开发流程
面向对象分析（OOA）：搞清楚做什么，产出是详细的需求描述，怎么才算详细，我觉得至少应该包括以下几方面：背景、解决什么问题、怎么解决、涉及哪些模块以及这些模块分别要改什么
面向对象设计（OOD）：搞清楚怎么做，产出是类、类关系
面向对象编程（OOP）：将分析和设计的结果翻译为代码的过程，几个要点：接口和抽象类的使用、基于抽象而非实现编程、为什么不推荐使用继承，组合的好处是什么？贫血模型和充血模型的使用

三、设计原则
单一职责：怎么判断？函数或属性过多、依赖的类过多
开闭原则：我们要时刻具备扩展意识、抽象意识、封装意识。在写代码的时候，我们要多花点时间思考一下，这段代码未来可能有哪些需求变更，如何设计代码结构，事先留好扩展点，以便在未来需求变更的时候，在不改动代码整体结构、做到最小代码改动的情况下，将新的代码灵活地插入到扩展点上
里氏替换原则：用于知道子类如何设计，核心在于“design by contract”，父类定义了函数的约定，子类可以改变函数的内部逻辑，但是不能改变函数的“约定”：对输入、输出、抛出异常的约定。注意和多态的区别
接口隔离原则：客户端不应该墙皮依赖它不需要的接口。和单一职责原则的区别，后者针对的是模块、类和接口，前者侧重于接口的设计，并且告诉我们如何判断接口是否单一
依赖注入原则：将依赖的对象通过构造函数等方式传递给类使用。控制反转是指将程序的控制权交给框架，反转的控制权。扩展点包括：依赖抽象不依赖细节、高层模块依赖底层模块
KISS原则：尽量保持简单。要点有三：不要重复造轮子、不要过度优化、不要使用别人不懂的技术实现代码（如何做）
YAGNI原则：你不会需要它。核心是不要过度设计（要不要做）
DRY原则：不要重复你自己。包括实现逻辑重复、功能语义重复、代码执行重复。怎么解决？减少代码耦合、满足单一职责原则、模块化、业务与非业务逻辑分离、通用代码下沉、继承、多态、抽象、封装、应用模板等设计模式。复用意识也非常重要。在设计每个模块、类、函数的时候，要像设计一个外部 API 一样去思考它的复用性。
LOD原则：什么是高内聚？用于知道类的设计，相近功能的代码放在一个类中。什么是松耦合？知道类与类之间的关系，一个类的改动不会或者很少导致被依赖类的改动

四、编码规范
1、命名与注释：命名要准确达意、命名要可读可搜索；代码注释要包括做什么、为什么、怎么做、如何用
2、编程技巧：将复杂的函数拆分为类和函数、拆分函数来处理函数参数过多的场景、参数化对象、函数不要使用参数做逻辑控制、移除过深的函数嵌套、用字面量取代魔数、用解释性变量命名复杂表达式
</div>2020-06-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/a4/6f/672a27d4.jpg" width="30px"><span>will</span> 👍（9） 💬（0）<div>这一篇总结了之前所有的知识点，只能说自己真的太菜了，看完又忘记大部分了，看来真的得沉下心来好好学习学习</div>2020-02-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/57/31/6772744d.jpg" width="30px"><span>ちよくん</span> 👍（6） 💬（0）<div>打卡，我是理解记忆，老师的原话我肯定记不住，我在老师理解的基础上有自己的理解！</div>2020-01-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/30/5e/c42bc33f.jpg" width="30px"><span>Younger Ku</span> 👍（4） 💬（3）<div>我们公司比较重视业务，对技术要求不高，大领导总觉得随便找几个技术人员就能做。业务量庞大，不断堆砌业务代码，每次都是倒排工期，计划制定不合理，时间紧，任务重，排期每次都后延。通常一个功能从头到尾并不是一个人负责，因为是最初的负责人可能被抽调忙别的业务去了，不得不换个人在上面改bug或添加新的需求，最终能有四五个人参与修改，每个人用自己的风格添加代码，最后问起来这个功能到底是做什么的谁也说不清，只能自己忍着看代码了解。尽管如此但表面上做出来大屏或PC界面看着不错，政府为了完成任务又有采购需求就会去买，用不用再说。这就是国内大多数传统软件行业的现状，所以如果想让自己的技术有更高一层次的发展还是去互联网大厂，产品直接面向用户，用户数量及口碑直接反应产品好坏，为了做出更好的产品就会对技术有更高的要求，也就能给自己带来更高的挑战，倒逼自己去提高技术。</div>2020-09-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/97/46/fe1f21d8.jpg" width="30px"><span>北风一叶</span> 👍（3） 💬（0）<div>这篇文章非常重要</div>2020-08-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/81/47/e5b206d9.jpg" width="30px"><span>erDuo</span> 👍（2） 💬（0）<div>真不错，需要定期回顾，重构要伴随整个职业生涯</div>2020-10-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/91/97/3762ca10.jpg" width="30px"><span>小情绪</span> 👍（2） 💬（1）<div>争哥，请教一个问题，虽非本章内容，但也是代码层面的，还望不吝赐教：
public class LinkedList&lt;E&gt; extends ... implements...{
  private static class Node&lt;E&gt;{
    E item;
  }
  Node first;

  public E peek(){
   final Node&lt;E&gt; f = first;
   return (f == null) ? null : f.item
  }
}

上面的peek方法为啥不写成如下：
  public E peek(){
   return (first == null) ? null : first.item
  }
为啥非得用一个局部变量来接收，并且要用fianl修饰？</div>2020-09-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/4a/e7/6c16af5d.jpg" width="30px"><span>汉江</span> 👍（2） 💬（0）<div>我感觉一定要有自己理解 可以是在争哥理解的基础上 有自己理解  不能一味的是 争哥说什么就是什么  不然自己能力不会有很大提升</div>2020-08-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/97/0b/a943bcb3.jpg" width="30px"><span>zhou</span> 👍（2） 💬（0）<div>学习了很多，感觉也忘了很多。有必要对前面的所有知识点在重新复习一遍了。 </div>2020-07-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/10/22/910f705c.jpg" width="30px"><span>改名不换人</span> 👍（2） 💬（0）<div>都快讲完了我才看到这 惭愧啊 
前面的设计思想和实现方式 用到了最近的需求代码中 感觉收获很大</div>2020-05-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/9e/b1/758f2fe7.jpg" width="30px"><span>香</span> 👍（1） 💬（1）<div>争哥简直是业界良心！不知道争哥后续是否会出类似于操作系统和编译原理这样的课程，如果有的话，非常期待！</div>2021-01-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/a2/e4/47fd0f81.jpg" width="30px"><span>賢</span> 👍（1） 💬（1）<div>为什么说私有方法过多不符合单一职责原则？如果类内部的职责逻辑处理过程复杂一些，拆分出了一些内部方法，不用暴露的所以封装为私有方法，这种不算不符合吧？</div>2020-04-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/fa/ab/0d39e745.jpg" width="30px"><span>李小四</span> 👍（1） 💬（0）<div>设计模式_38:
虽然每篇文章看几遍，但总体来说算是第一遍的学习，这一遍最重要，每一个细节都不放过，后面还需要多次的复习和实践，直到它们变成大脑皮层中物理性的神经回路。

另外，我个人热爱且敬佩认真做事的人，共勉之！</div>2020-02-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg" width="30px"><span>Monday</span> 👍（1） 💬（0）<div>总结了前面所有的章节，可以座位自己的技能树，谢谢</div>2020-02-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/44/47/3ddb94d0.jpg" width="30px"><span>javaadu</span> 👍（1） 💬（0）<div>想了几次，抽象并不是面向对象设计独有的特性，而是一个最基本的应对软件复杂性的思路，大型软件如果想活得好，抽象思维一定少不了。

之前教科书中都说面向对象是三大特性：封装、继承、多态，这里不知道老师是怎么看的</div>2020-01-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/64/9b/d1ab239e.jpg" width="30px"><span>J.Smile</span> 👍（1） 💬（0）<div>今天大年初五，抢占沙发！</div>2020-01-29</li><br/><li><img src="" width="30px"><span>Geek_44ce9a</span> 👍（0） 💬（0）<div>用心良苦，赞</div>2025-02-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/6e/a3/bec136c0.jpg" width="30px"><span>cxzm</span> 👍（0） 💬（0）<div>1、对于业务需求和非业务需求可以参考专栏的面向对象分析、设计和实现流程去做
2、在实际开发过程中，参考各种设计思想、原则和编程规范，做到让代码易读、易维护、可扩展、高内聚松耦合等
3、对于已有代码，首先借助各种设计思想、原则和编程规范来发现其中存在的问题，然后，基于小步快跑的原则，从ut出发，逐步重构代码，让代码从能用到好用。</div>2024-09-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/02/65/ddb6460e.jpg" width="30px"><span>柯里</span> 👍（0） 💬（0）<div>加油吧，很多概念仍然是知道，不够深刻</div>2023-11-08</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/32icunDzVeChmzW535dInNcc0D7X67NjbiaztRvWVMuNibiaRUNal9ic8o3Rdb09pRA1e8IVSJyexribx9rSeYPTnllg/132" width="30px"><span>Geek_f7e6db</span> 👍（0） 💬（0）<div>终于看到了一半了，只有周末6点多爬起来，为了看设计模式这门课，让我感触很深，原来我写代码的能力提升的空间居然没有了。那是不可能的，没有提升空间也是说笑的，就是有点羞愧感，什么呢，回过头看以前写的代码，发现自己都看不入眼。</div>2022-11-12</li><br/><li><img src="" width="30px"><span>Geek_08a0f7</span> 👍（0） 💬（0）<div>满满的干货，这得整2-3便才能完全吸收啊！
</div>2022-06-29</li><br/><li><img src="" width="30px"><span>小杰同学</span> 👍（0） 💬（0）<div>我自以为学会了  看了下这篇 才觉得学的如镜中水月 都忘记了</div>2022-06-03</li><br/>
</ul>