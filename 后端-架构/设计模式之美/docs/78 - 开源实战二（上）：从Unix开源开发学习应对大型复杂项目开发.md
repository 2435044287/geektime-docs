软件开发的难度无外乎两点，一是技术难，意思是说，代码量不一定多，但要解决的问题比较难，需要用到一些比较深的技术解决方案或者算法，不是靠“堆人”就能搞定的，比如自动驾驶、图像识别、高性能消息队列等；二是复杂度，意思是说，技术不难，但项目很庞大，业务复杂，代码量多，参与开发的人多，比如物流系统、财务系统等。第一点涉及细分专业的领域知识，跟我们专栏要讲的设计、编码无关，所以我们重点来讲第二点，如何应对软件开发的复杂度。

简单的“hello world”程序，谁都能写得出来。几千行的代码谁都能维护得了。但是，当代码超过几万行、十几万，甚至几十万行、上百万行的时候，软件的复杂度就会呈指数级增长。这种情况下，我们不仅仅要求程序运行得了，运行得正确，还要求代码看得懂、维护得了。实际上，复杂度不仅仅体现在代码本身，还体现在协作研发上，如何管理庞大的团队，来进行有条不紊地协作开发，也是一个很复杂的难题。

如何应对复杂软件开发？Unix开源项目就是一个值得学习的例子。

Unix从1969年诞生，一直演进至今，代码量有几百万行，如此庞大的项目开发，能够如此完美的协作开发，并且长期维护，保持足够的代码质量，这里面有很多成功的经验可以借鉴。所以，接下来，我们就以Unix开源项目的开发为引子，分三节课的时间，通过下面三个话题，详细地讲讲应对复杂软件开发的方法论。希望这些经验能为你所用，在今后面对复杂项目开发的时候，能让你有条不紊、有章可循地从容应对。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg" width="30px"><span>Jxin</span> 👍（71） 💬（2）<div>1.不用哪些，只要一个，就是合理的分层。

2.大型软件的持续开发，。人多，代码量大，时间长会有这三个问题。


3.人多：人一多什么鸟都有，在快节奏下，你很难去保证所有人的所有代码质量。即便你有code review，但质量是要对业务做让步的，而这是合理的。那么这时候去要求每个人的，编码规范，抽象封装能力，就非常的难。所以这些能力对软件质量很重要，但你抓不了也是白搭。反观分层，它其实是限定了一块业务逻辑，实现代码的基本拆分和归类，定义了一个基本的规范。任何人都可以顺着这个规范去阅读他人的代码。实现了最基本的复杂性隔离。可执行可落地，试用期基本就可以灌输成功。

4.代码量大：对于代码量大的项目，要找到目标功能，是很痛苦的。而分层在这时候就具备类似索引的功能。哪怕项目没注释，只要它按着分层写，你就可以顺着 业务 功能 细节这样的线去摸到目标功能，无需从入口开始读代码。

5.时间长：软件在时间线上是动态的，当下的业务边界很可能因时间的推移而被变革，需要重组模块的数据范围和业务边界。好的分层可以让你更快的重组模块，解决当前模块划分不合理的问题。具体可以看下ddd的分层。它可以让你在重组模块时，只需花一两个小时，剪切粘帖整块聚合的业务代码，并调整一些基础功能的实现，便能实现模块重组。而不需长达数个月的风险评估，代码调整，测试覆盖。</div>2020-05-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/44/47/3ddb94d0.jpg" width="30px"><span>javaadu</span> 👍（43） 💬（2）<div>年前做的一个项目，是一个能力编排引擎，这是我实际参与的第一个具备良好设计的软件项目，满足了：抽象和封装、模块化和分层结构、基于接口而非实现编程等设计原则，在这个项目中我才真正获得了对这些设计原则的理解。这个经历说明—我应该尽量去高水平高素质的团队，才有机会遇到高水平的项目和代码</div>2020-05-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/62/bb/323a3133.jpg" width="30px"><span>下雨天</span> 👍（14） 💬（0）<div>分层和模块化，基于接口通讯，这两点最重要！
这个相当于整个架构搭起来了，每个模块怎么划分怎么交流定好了，其他扩展行，可读性，抽象都可以细化到模块中实施。</div>2020-05-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/70/9e/9337ca8e.jpg" width="30px"><span>jaryoung</span> 👍（9） 💬（1）<div>个人觉得是：高内聚、松耦合，高内聚说明合适的人都在一起了，松耦合说明不合适的人的都隔离起来。</div>2020-05-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8a/02/828938c9.jpg" width="30px"><span>Frank</span> 👍（8） 💬（0）<div>我觉得在大型项目开发中，单一职责和最小知识原则也是发挥很大的作用，从编码角度来看，类，模块都遵守单一和最小知识原则，这样的话内聚性高，耦合少，每个类和模块可能都不会太复杂，可读性，可测试性也就不会太差。从一个系统的生命周期来看，单一职责体现为产品，开发，测试，运维。各个角色的人各司其职，耦合不会太多，能有效的提高效率。会想起以前在某家传统公司，需求沟通、设计、编码、测试、维护几乎要自己一个人干，有时候觉得太累。</div>2020-05-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg" width="30px"><span>辣么大</span> 👍（5） 💬（3）<div>五一快乐！
我觉得抽象封装和分层模块化最能发挥作用。最近在看ROS机器人操作系统，是开源一个中间件系统，思想是通过封装，抽象，使得不懂硬件的程序员可以对机器人进行编程。里面所有的可执行程序，都可以叫做一个node（节点），机器人可以组装的（移动底盘，机器臂等）这个是模块化，机械臂控制使用moveit运动学控制规划模块，底座导航使用导航功能模块，这个算是模块化。机器的各个部分，都使用命名空间的方式访问，和争哥将的linux系统结构的方式差不多。</div>2020-05-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/aa/49/51790edb.jpg" width="30px"><span>落尘kira</span> 👍（4） 💬（0）<div>我觉得是最小惊奇原则，可读性一定要是第一位的（不管代码写的有多惊奇，起码得让后面的同学看懂，多写一行注释也好）</div>2020-05-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/1b/41/dbb7d785.jpg" width="30px"><span>xk_</span> 👍（4） 💬（0）<div>单一职责原则和KISS原则，其他原则太复杂，就记得这两个。</div>2020-05-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/f7/eb/e7127bb8.jpg" width="30px"><span>，</span> 👍（2） 💬（0）<div>    如何定义复杂度: 对软件做一些修改,所需的人力物力较少,那么我们就可以说他复杂度低,反之则认定它复杂度较高
    分层和模块化应对的是架构层面的复杂度,影响的是整个软件的质量,他应该是软件开发中最重要的部分,一旦发生改动,需要多个模块进行修改,将近于重新做架构设计,成本非常大
实例:  TCP&#47;IP网络模型,应用层,传输层,网络传输层,网络层的划分是水平方向的划分,应用服务器,负载均衡服务器,DNS服务器,个人电脑,体现的是垂直方向的划分,这种划分方式能够很好的应对复杂度

     基于接口通讯是应对的是模块通讯时的复杂度,一次改动,通常会影响多个模块,需要多个模块的开发者协作才能完成改动,但毕竟只需要修改模块之间的通讯,成本相对较小,所以较为次要
    KISS,为扩展设计,最小惊奇应对的是代码层面的复杂度,属于实现细节,改动通常不会被其他模块感知,改动需要的人力物力较上两者更少,所以他最为次要</div>2020-05-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4c/b3/931dcd9e.jpg" width="30px"><span>J</span> 👍（2） 💬（0）<div>封装与抽象、分层与模块化、基于接口通信，我觉得是最重要的三个设计原则。

封装与抽象是从使用者的角度来考虑系统该如何设计。
分层与模块化则是在系统建设者之间划分好界限和职责。
基于接口通信构建了内外之间最合适的交互方式。</div>2020-05-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/86/56/509535da.jpg" width="30px"><span>守拙</span> 👍（2） 💬（0）<div>课堂讨论: 

    在大型项目开发中, 分层与模块化最能发挥作用. 

    分层与模块化思想搭建项目骨架, 层间通信或模块间通信可以应用基于接口而非实现的原则通信, 提高了扩展性. 

    而分层与模块化自然而然的实现了封装与抽象的原则. 
    
    而某一层或某一模块的具体实现可以参考KISS原则, 最小惊奇原则等进行设计.</div>2020-05-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg" width="30px"><span>Heaven</span> 👍（2） 💬（0）<div>这一篇教导的是一些实际开发中的经验,如果没有接触过实际开发的同学,可能会觉得对上面原则的取舍比较困难,这就需要在不断实战中积累
顺便一提今天的问题,在现在的开发中,最重要的必然是封装
操作系统将网络连接封装为了Socket函数,而浏览器和各种高级语言会对于Socket再进一次的封装,方便我们的开发,
并且如果没有封装,现在可能从事编程的人员需要各个从底层硬件开始了解,互联网也不会发展如此的快了</div>2020-05-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/15/79/efde2a69.jpg" width="30px"><span>马球先生</span> 👍（2） 💬（0）<div>在大型软件开发中 模块化和分层 分别从横行和纵向 两种相互垂直的方向来划分软件结构</div>2020-05-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/f6/7b/b6abcbbe.jpg" width="30px"><span>否极泰来</span> 👍（1） 💬（0）<div>我觉得分层模块化比较重要，有这个能保证阅读代码的边界
毕竟再复杂的代码，只要花些时间都能看完，但是熟悉一个模块代码的时候不知道边界在哪，容易把迷失在这个系统里面。</div>2021-04-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/70/ac/83bc14c0.jpg" width="30px"><span>面向百度编程</span> 👍（1） 💬（0）<div>我觉得有效的避免复杂性都是通过转移来实现，比如设计模式的，策略，职责链，状态模式，门面模式去转移复杂度。但是每种模式都有其场景化，需要根据业务来衡量</div>2020-05-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/a4/6f/672a27d4.jpg" width="30px"><span>will</span> 👍（1） 💬（0）<div>好的设计会满足抽象封装模块化等各种特性。</div>2020-05-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/28/28/5ffdd123.jpg" width="30px"><span>漫游者</span> 👍（1） 💬（0）<div>我觉得还有一点是需求管理吧，好像跟设计思想和原则没有关系～～。我们写代码除了实现功能，更重要的是面向未来做扩展。如果需求是可预期的，其实更容易让我们去运用老师说的设计思想原则模式等等。</div>2020-05-06</li><br/><li><img src="" width="30px"><span>不能忍的地精</span> 👍（1） 💬（0）<div>分层和模块化，有效的将软件的复杂性限制在了层里面和模块里面</div>2020-05-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/82/3d/356fc3d6.jpg" width="30px"><span>忆水寒</span> 👍（1） 💬（0）<div>分层、模块化、接口编程 最实用的技巧。</div>2020-05-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg" width="30px"><span>李二木</span> 👍（1） 💬（0）<div>现在微服务很火，服务切分按照模块来的。</div>2020-05-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg" width="30px"><span>djfhchdh</span> 👍（1） 💬（0）<div>最小惊奇原则吧，实际上大型业务系统的架构都大同小异，有些特定的程式，但是实际编码过程中，对于开发规范的遵守，就很重要了，这个直接影响代码可读性，如果不好好遵守，各行其是，“破窗效应”就会显现，导致代码越来越难维护，严重打击开发团队的信心~~~</div>2020-05-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg" width="30px"><span>小晏子</span> 👍（1） 💬（0）<div>个人认为有效降低复杂性的原则是封装抽象和分层模块化，封装抽象能够使一些通用功能服用，降低复杂性，分层模块化可以方便多人协调开发，还可以让开发人员专注于某些层级模块的代码实现。</div>2020-05-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/25/5e/a4/d48b8298.jpg" width="30px"><span>Geek_sz</span> 👍（0） 💬（0）<div>talk is easy</div>2023-12-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/02/65/ddb6460e.jpg" width="30px"><span>柯里</span> 👍（0） 💬（0）<div>单一职责还能避免解决代码冲突，可读性，所以，技术比较好的团队可以拓展的更多，一般的话，还是老实强调可读性，但是分层，分模块无论什么团队都要做的</div>2023-11-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/09/5b/e9ee3b41.jpg" width="30px"><span>音为</span> 👍（0） 💬（0）<div>开闭原则，依赖倒置原则</div>2023-09-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/b5/93/cf0fc8af.jpg" width="30px"><span>八年老萌新</span> 👍（0） 💬（0）<div>代码规范这些东西 仁者见仁智者见智  规范的具体内容不用纠结对错，重要的是所有的开发人员都遵守规范，也就是文中的最小惊奇原则</div>2023-05-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/bc/50/c00a05ea.jpg" width="30px"><span>安意诚</span> 👍（0） 💬（0）<div>文档里有一个拼写错误，可以改一下。第二个review。“聚焦在 Code Review 上来看，如何通过 Code Reviwe 保持项目的代码质量？”</div>2023-02-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/67/ab/fcf0cec4.jpg" width="30px"><span>寒光</span> 👍（0） 💬（0）<div>一般都讲“高内聚，低耦合”，是不是说，内聚和耦合是一组相对的概念，那高和低相对应该是比较合适的。如果要换一种说法，也应该是相对的，如：紧内聚，松耦合~~，高内聚，松耦合，总觉得怪怪的。</div>2022-05-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>厉害了</div>2021-06-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg" width="30px"><span>helloworld</span> 👍（0） 💬（0）<div>我感觉分层与模块化, 为扩展而设计还有最小惊奇原则在大型项目中最有用. 因为大型项目的特点就是业务复杂度高
, 而分层与模块化可以将各个复杂的部分进行隔离, 修改当中的某个复杂部分的同时不会影响到其他的部分; 而为扩展
设计也是为了解决当引入新的功能时候以至于已有复杂的功能不受影响, 从而使项目的健壮性增强; 项目之所以是大项目
参与的人数注定是少不了的, 因为通过分层与模块化后部门team的人可以比较职责单一的只维护其中的一个模块, 这时候就
需要针对无论是代码的风格还有设计方式(类的命名, 工具类的命名等)需要统一, 这样才能减轻学习的成本</div>2021-05-07</li><br/>
</ul>