对于一个工程师来说，如果要追求长远发展，你就不能一直只把自己放在执行者的角色，不能只是一个代码实现者，你还要有独立负责一个系统的能力，能端到端（end to end）开发一个完整的系统。这其中的工作就包括：前期的需求沟通分析、中期的代码设计实现、后期的系统上线维护等。

前面我们还提到过，大部分工程师都是做业务开发的。很多工程师都觉得，做业务开发没啥技术含量，没有成长，就是简单的CRUD，翻译业务逻辑，根本用不上专栏中讲的设计原则、思想、模式。

所以，针对这两个普遍的现象，今天，我通过一个积分兑换系统的开发实战，一方面给你展示一个业务系统从需求分析到上线维护的整个开发套路，让你能举一反三地应用到所有其他系统的开发中，另一方面也给你展示在看似没有技术含量的业务开发中，实际上都蕴含了哪些设计原则、思想、模式。

话不多说，让我们正式开始今天的学习吧！

## 需求分析

积分是一种常见的营销手段，很多产品都会通过它来促进消费、增加用户粘性，比如淘宝积分、信用卡积分、商场消费积分等等。假设你是一家类似淘宝这样的电商平台的工程师，平台暂时还没有积分系统。Leader希望由你来负责开发这样一个系统，你会如何来做呢？

你可能会说，只要产品经理给我产品设计文档（PRD）、线框图，我照着实现就可以了。我觉得，这种想法有点狭隘。我认为，技术人员应该更多地参与到产品设计中。在Google工作的时候，我很明显能感受到，Google工程师跟其他公司工程师有一个很大区别，那就是大部分人都具备产品思维，并不是完全的“技术控”。所以，Google很多产品的初期设计都是工程师来完成的，在产品发展壮大到一定程度的时候，才会引入产品经理的角色。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/fb/21/a89aca0a.jpg" width="30px"><span>未来小娃</span> 👍（379） 💬（9）<div>聊聊技术与业务
  最近看了一些关于程序员价值方面的文章，很多人包括我自己有个疑问，面试时只看技术，进公司后做业务，两者矛盾么？这个问题的本质是哪个更有价值。如果你不喜欢做业务那就往中间件方向发展，做出类似高性能高可用的中间件不失为值得骄傲的事情。那么业务呢，要清楚的是公司的现金流都是来源于业务，业务产生价值。那么两者的关系是公司依赖业务，业务开发需要技术，也就是技术是更底层更通用的能力，所以自然也就更好评价，业务各不相同复杂度和场景天差地别不可复用，自然就没有比较好的评价标准。技术能力的高低决定了业务质量，而业务质量的高低反过来影响你的技术，业务复杂度上升了，之前的技术可能就不满足了，这也是技术不断更新的源动力，无法适应业务的技术是没有价值的，那么到底是什么造成了程序员价值的高低呢？我认为有以下几点：
第一，专业能力。虽然技术不断更新，但是底层的基础技术却没变，我们应该花更多时间掌握好底层技术，不变应万变。基本功扎实了才能走得更远
第二，落地能力。有了基本功后我们就具备完成一件开发任务的能力，但是怎么把事情做好却是需要不断提升的，结果导向，积极主动，有想法能落地才能体现你的价值。记住，当你开始积极主动思考一些事情后，你已经领先了大部分人
第三，终身学习能力。公司要持续发展，业务就会不断迭代发展，要让自己的技术能够匹配上业务的发展就需要不断学习，扎扎实实在自己想要专研的领域做精，你的价值也就体现出来了。
  总结下：技术是业务的支撑，业务反过来影响技术，业务发展就需要提升技术。</div>2020-04-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/dc/a5/0cabbf5b.jpg" width="30px"><span>Dawn</span> 👍（29） 💬（3）<div>上下层系统之间的调用倾向于通过同步接口，同层之间的调用倾向于异步消息调用，依据是什么？</div>2020-11-17</li><br/><li><img src="" width="30px"><span>蛀牙</span> 👍（11） 💬（1）<div>&quot;上下层系统之间的调用倾向于通过同步接口，同层之间的调用倾向于异步消息调用。比如，营销系统和积分系统是上下层关系，它们之间就比较推荐使用同步接口调用。&quot;

老师或者哪位大神可否就这句话展开讲讲，为什么异层同步，同层异步？</div>2020-08-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/66/26/4909dc7f.jpg" width="30px"><span>姜玮</span> 👍（10） 💬（1）<div>课堂练习的思考，技术和业务好比生产力和生产关系的相互作用。大体上来讲，一定是相辅相成，互相作用的。当一个技术人员没有办法完成业务需求时候，那么，技术就显得更重要一些; 而当技术人员发现业务的指标都做完了，想要把业务做得更好，那么就要去深入理解业务，才能在通用技术之上构建出更贴合业务的优秀系统。

生产力，决定了整个社会价值形态的下限，而生产关系的优劣，可以影响在当前生产力局面下，社会价值形态的上限。

因此，技术可以解决温饱问题，业务可以带领走上上小康道路。</div>2020-11-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/b4/c2/05ed8ad9.jpg" width="30px"><span>自然</span> 👍（5） 💬（1）<div>模块的划分我理解第三种也是合理的，因为积分的所有配置和规则维护应该都有积分系统完成，符合单一职责，订单、评价系统只需要发事件消息出来就可以了，他们不需要关心积分的业务逻辑，积分系统收到消息后去处理积分内部的业务逻辑。
这块不太清楚，老师怎么看？</div>2020-06-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/f5/cd/3890be04.jpg" width="30px"><span>小川</span> 👍（3） 💬（1）<div>老师好，请教您一个问题，针对这个案例，我有一个困扰，数据库是否要维护 用户总积分这个字段，还有就是积分过期这种是如何实现方式比较好呢？  

感谢老师的回答！</div>2020-06-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/36/ef/83c2a743.jpg" width="30px"><span>悠南</span> 👍（1） 💬（1）<div>我想了解下需求分析这块儿  经常的得到的需求输入是宽泛的,不知道通过什么视角及思维方式去分析需求</div>2020-05-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/e4/cd/5363c8fa.jpg" width="30px"><span>Rain</span> 👍（1） 💬（6）<div>我怎么感觉老师提的话题有点跑偏？还是好好想一想如何做好设计模式比较合理对吗？另外，老师本课带的思路也有点偏差我觉得，毕竟我们要设计的是一个积分模块而不是一个淘宝系统。架构和设计都是有演变过程的，个人认为任何撇开并发与用户数而不谈的需求是耍流氓。此处也应该循序渐进的讨论设计方而不是如此的过度设计，谢谢。</div>2019-12-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/86/5a/c7a1d177.jpg" width="30px"><span>dxy_123456</span> 👍（0） 💬（1）<div>在一家国企工作，领导是个注重员工培养的人，每天都会花半个小时学习UX、产品经理相关的课程。期初都是不感兴趣的，觉得和自己无关，但今天在老师的讲课中看到一些UX相关的知识，还是非常惊喜。我觉得多学习会发现很多相关领域的知识都是可以串起来的，技术人员当然重点还是多钻研技术，但既然在公司也做业务相关的工作，为何不再花一点时间把它做得更好呢。</div>2020-11-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/0c/f4/6bd66c0e.jpg" width="30px"><span>Jevan Wu</span> 👍（0） 💬（1）<div>&quot;上下层系统之间的调用倾向于通过同步接口，同层之间的调用倾向于异步消息调用。&quot; 请问，这点是基于什么样的考虑，我理解应该需要同步的才用接口，其他都用异步的方式就好了吧？</div>2020-11-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c0/bf/9d6f3645.jpg" width="30px"><span>Single</span> 👍（0） 💬（1）<div>为什么同层推荐消息，上下层推荐同步接口调用吗？</div>2020-08-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/9d/9c/2d5eac97.jpg" width="30px"><span>destiny</span> 👍（0） 💬（2）<div>有一个疑问请教一下,假设系统有A和B上下两层,B层由B1和B2两个模块A层同步调用B1,B1异步调用B2,那么A到B1的请求下来,B1给B2发的异步请求,这时怎么给A回执请求结果呢?</div>2019-12-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg" width="30px"><span>沉淀的梦想</span> 👍（408） 💬（14）<div>个人觉得，如果对当前工作不满意，想要找更好的工作的话，应该多花点时间在技术上，但是如果对当前工作很满意，想要继续在当前岗位上发展的话，还是应该多花时间在业务上</div>2019-12-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/fa/ab/0d39e745.jpg" width="30px"><span>李小四</span> 👍（123） 💬（4）<div>设计模式_23
这个问题太有感触了，不熟悉业务当然做不好系统，但业务理解的深度与技术能力并没有直接的对应关系。
我们先讨论一下另外一个问题：
技术人员创造的价值是什么呢？我们的技术最终体现某一个商业的业务上，解决用户的问题，从而创造价值。我们去面试，去找新的工作机会，目的是更好地实现自己的价值，目的并不只是换个涨点工资的工作。比如王争老师，现在也是在教育的这个具体的业务上闪闪发光。

这里引用一下吴军老师的“五级工程师模型”

&gt; 第五级：能独立解决问题，完成工程工作；
&gt; 第四级：能指导和带领其他人一同完成更有影响力的工作；
&gt; 第三级：能独立设计和实现产品，并且在市场上获得成功；
&gt; 第二级：能设计和实现别人不能做出的产品，也就是说他的作用很难取代；
&gt; 第一级：开创一个产业

可以看到，在更高级别的工程师中，对于产品和商业的理解变成了一种要求，因为他是技术与现实生活的桥梁。</div>2019-12-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/62/bb/323a3133.jpg" width="30px"><span>下雨天</span> 👍（32） 💬（0）<div>相辅相成，缺一不可！如果说业务是场景，技术是招式，没有场景的招式是无意义的，没有招式的场景是苍白的！不同场景下选用有效招式才是最终目的！</div>2019-12-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/ca/c7/00e544c2.jpg" width="30px"><span>黄林晴</span> 👍（30） 💬（3）<div>首先我非常赞成，技术人也要有产品的思维，但是悲催的是，对我这种喜欢和产品经理讨论需求的技术人其实说多了怕是觉得找借口……

课堂讨论:
一般面试的时候都是注重技术，但是进去公司后都是以业务为核心，我一直觉得程序猿甚至公司的竞争核心不止于技术上，如果你看好公司前途想脚踏实地干一番，那么久好好熟悉公司业务系统，如果觉得想找更好的出路就多学技术争取很好的出路✔</div>2019-12-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/cb/9f/ee68858c.jpg" width="30px"><span>阿玛铭</span> 👍（17） 💬（2）<div>不懂业务（需求）是做不好业务系统的，不懂技术是做不好软件系统的。重技术作为底层通用模块，在跳槽的时候可以发挥作用，让自己的选择面更广，但也是有代价的，意思是如果跳到不同行业，以前的业务积累就没有意义了。工作性质决定，我目前和以后业务、技术时间精力投入占比分别是20、80。终身学习是人无法避免的趋势，为了增加个人综合能力和生存韧性，还会投资一些非IT相关的通用软技能。</div>2019-12-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/ef/89/8c73a24d.jpg" width="30px"><span>Chen</span> 👍（16） 💬（0）<div>技术能力是敲门砖，是比业务能力更下层的东西，扎实的技术能力能应用于各种业务场景。我认为应该优先提升技术能力，当然当你有技术话语权的时候业务能力能够让你如虎添翼！</div>2019-12-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/75/53/76281fc3.jpg" width="30px"><span>BerryMew</span> 👍（13） 💬（0）<div>我以前是技术控，完全不关心业务，也不觉得业务比技术重要。但随着工作时间越来越长，特别是在一个行业做的越来越久，越发能够感受到，业务是你在行业中有更好发展的必备条件。</div>2019-12-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/a6/7e/83d6b7dd.jpg" width="30px"><span>debug</span> 👍（12） 💬（0）<div>两手都要抓，两手都要硬</div>2019-12-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/a0/a3/8da99bb0.jpg" width="30px"><span>业余爱好者</span> 👍（12） 💬（5）<div>永远不能忘了我是谁。我是一个程序员，技术是我吃饭的家伙，是我赖以生存的东西。无论何时我都选技术，除非我转行。</div>2019-12-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ff/e6/4b0ddfcf.jpg" width="30px"><span>李飞</span> 👍（10） 💬（8）<div>有点不太理解的是：“合理地将功能划分到不同模块”这点老师说的比较推荐前两种划分方式，但我觉得额第三种划分方式也挺符合 “高内聚，低耦合”，“所有的功能都划分到积分系统中，包括积分赚取渠道及兑换规则、消费渠道及兑换规则的管理和维护。” 这样代码维护就只会在这个积分模块了啊，请老师帮我解惑，为什么不推荐第三种划分方式</div>2020-03-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/86/56/509535da.jpg" width="30px"><span>守拙</span> 👍（10） 💬（2）<div>课堂讨论Answer：

钻研业务与发展技术的取舍（或精力分配）取决于其风险与收益。

如果公司基本面良好，业务蒸蒸日上，我个人受到领导的认可，同事的尊敬，则倾向于将更多的精力钻研业务，提升个人在公司的不可替代性。

如果公司基本面恶化或前途未卜（比如大多创业型公司），领导本领低微或不重视我的意见，和同事相处一般，则应将大量精力分配在技术精研上，提升个人在就业市场上的竞争力。

最后，钻研业务和提升技术并不是一枚硬币的两面，如果一些事情上同时满足两种需求，就再好不过。




</div>2019-12-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg" width="30px"><span>Jxin</span> 👍（10） 💬（1）<div>课后讨论
1.业务是专业资源（复用受限），技术是通用资源（复用不受限），所以业务知识的沉淀对于个人是一个风险比较高的投资，所以大部分人本能的就会讨厌这种受制的局势，进而就不喜欢在业务上投入太多的精力。

2.其实我觉得很遗憾，大部分程序员会规划自己的技术栈却不关心干什么活（做什么业务）。当然，业务知识不好考核，技术知识好考核，所以技术知识在面试吃香也是必然。不过可以遇见的情景是：招了个技术牛逼的人，但短时间他产生不了什么价值（需要了解业务），等到他吃透业务（半年甚至一年），他的技术水平已经又上了一个台阶，面临新一轮人员调动的开始。结果就是，一个技术很牛逼的人，在我这个项目组干活期间，不显山不露水，资深的水平干着高级的事，我还知道这合情合理，等他开始发挥资深水平价值时，人走了。

3.产品技术其实是一体两面，如果有产品思维，那么业务领域的选择和技术栈的选择其实是绑在一起的。走在自己想干的业务领域，自己的技术栈也跟着这个领域的需求去发展，如此以来每份工作的业务积累都能为下份公司带来大量点子和突破口。但这样就会出现，高级的水平干架构师的事，但一般没公司为你带来的“架构师级价值”买单。目前的情况是欢喜的接受你带来的改变，但并不会为你加薪（因为你的技术水平在市场只值这么多，公司给你的钱会尽量平衡在市场线，而非你真正的价值）。这种病态得不到改善，程序员不重视业务就得不到变革。所幸当下，跑马圈地已过，抢人已经不再疯狂，招聘方的招聘目标也在慢慢从技术牛逼到实际价值转变。</div>2019-12-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/15/03/c0fe1dbf.jpg" width="30px"><span>考休</span> 👍（6） 💬（2）<div>我觉得前期技术更重要一些，现在一些负责业务的人员其实业务水平也没有多么高，反而把重心放在了管理上，多年经验告诉自己脱离了技术的管理最后都是一坨翔，因为管理最重要的是做决策，而如果没有技术做支撑的话，决策就变成了空中楼阁。</div>2020-02-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ee/64/55adb692.jpg" width="30px"><span>听风的锈</span> 👍（5） 💬（0）<div>第一种和第三种划分方式感觉没太明显的区别，在积分系统里 也会独立一个模块对接各种业务的兑换规则。</div>2020-09-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg" width="30px"><span>明翼</span> 👍（5） 💬（2）<div>我曾经做过几年的项目经理，对于业务已经非常熟悉了，后面公司转型，以前的业务知识完全清零了。所以我认为如果作为乙方的程序员技术能力更重要，决定了你的职业选择广度，业务也要懂，只是不要把大精力花在上面。如果你是甲方的程序员，而且不会跳槽国企的那种，想成为行业专家，那业务更重要，技术很多可以速成或招聘，但是业务熟悉的人想找不好找，除非在同类竞争公司去挖。</div>2019-12-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/a8/b2/998448ca.jpg" width="30px"><span>悠游</span> 👍（4） 💬（0）<div>如果公司是个靠谱的公司或者打算久呆，那么公司的业务一定要熟悉；如果只是攒技能和经验，那么还是技术更重要一些，不过话说回来，谁知道公司是不是一直靠谱，自己会不会被优化掉；所以总的来说，还是学好技术更重要一些。</div>2020-02-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg" width="30px"><span>小文同学</span> 👍（3） 💬（0）<div>技术和业务是相互相成的，学的技术最好都能够在业务上发挥价值，而且也只有业务才能检验技术的真正价值。
面试官不一定需要程序员的过往的业务能力，但一定会喜欢程序员把技术和业务两者共同分析和实践的能力，可以说这是一种元能力。</div>2020-02-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/6a/c4/85b82cda.jpg" width="30px"><span>易燃🔥</span> 👍（3） 💬（0）<div>如果背景是作为一个技术人，那个人觉得做一个“业务驱动的领域技术专家”会是一个比酷的定位，具体来描述的话，研究业务时间不低于20%，研究技术时间不低于60%。可以理解前面的比例为象征意义：20%是指——如果花10%的时间可以达到用户对业务的了解程度，那作为技术人，你起码要花费20%的时间理解业务和领域相关的业务知识；60%是指——如果50%代表“仅仅大于一半”，那么我们对技术方面花的心思要比“仅仅大于一半”多。引用老师之前的例子“放盐少许”，自己“品味”哈哈。</div>2020-02-25</li><br/>
</ul>