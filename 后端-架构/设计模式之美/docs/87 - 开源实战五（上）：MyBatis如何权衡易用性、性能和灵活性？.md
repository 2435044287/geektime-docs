上几节课我们讲到了Spring框架，剖析了背后蕴含的一些通用设计思想，以及用到的十几种设计模式。从今天开始，我们再剖析另外一个Java项目开发中经常用到的框架：MyBatis。因为内容比较多，同样，我们也分三节课来讲解。

- 第一节课，我们分析MyBatis如何权衡代码的易用性、性能和灵活性。
- 第二节课，我们学习如何利用职责链与代理模式实现MyBatis Plugin。
- 第三节课，我们总结罗列一下MyBatis框架中用到的十几种设计模式。

话不多说，让我们正式开始今天的学习吧！

## Mybatis和ORM框架介绍

熟悉Java的同学应该知道，MyBatis是一个ORM（Object Relational Mapping，对象-关系映射）框架。ORM框架主要是根据类和数据库表之间的映射关系，帮助程序员自动实现对象与数据库中数据之间的互相转化。说得更具体点就是，ORM负责将程序中的对象存储到数据库中、将数据库中的数据转化为程序中的对象。实际上，Java中的ORM框架有很多，除了刚刚提到的MyBatis之外，还有Hibernate、TopLink等。

在剖析Spring框架的时候，我们讲到，如果用一句话来总结框架作用的话，那就是简化开发。MyBatis框架也不例外。它简化的是数据库方面的开发。那MyBatis是如何简化数据库开发的呢？我们结合[第59讲](https://time.geekbang.org/column/article/212802)中的JdbcTemplate的例子来说明一下。
<div><strong>精选留言（26）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/19/f7/eb/e7127bb8.jpg" width="30px"><span>，</span> 👍（71） 💬（2）<div>工作中做过一些c++的东西,做起来相当复杂,每引入一个第三方类库,都要自己去github上找,找到再clone下来,打包,才能引入,模板编程面向对象面向过程基于对象函数式,眼花缭乱,指针引用const傻傻分不清楚,cmake打包异常,只有求助大佬才能维持生活
做java就像回家一样,做开发有spring全家桶,打包部署有maven,在csdn比家里感觉好多了,里面各个是人才,说话又好听,只需要CTRL C V就能完成工作,我超喜欢里面的!</div>2020-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg" width="30px"><span>Demon.Lee</span> 👍（33） 💬（0）<div>易用性：Hibernate &gt; MyBatis &gt; JdbcTemplate
性能：JdbcTemplate &gt; MyBatis &gt; Hibernate
灵活性：MyBatis &gt; JdbcTemplate &gt; Hibernate</div>2020-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/49/f2/25cfa472.jpg" width="30px"><span>寒溪</span> 👍（27） 💬（2）<div>netty是个反例，兼顾易用性和性能。</div>2020-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg" width="30px"><span>Monday</span> 👍（23） 💬（1）<div>mybatis系列
1、mybatis plus 作用如其名，mybatis增强功能封装好了一些crud的方法
2、mybatis-generator自动生成器，自动生成实体、mapper、Mapper.xml等
3、mybatis分页插件PageHelper，无需关心分页的问题</div>2020-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/13/80/2c9da1b1.jpg" width="30px"><span>L🚲🐱</span> 👍（15） 💬（1）<div>Mybatis Plus 可以说是 大大的提高了 Mybatis 的使用效率</div>2020-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/f3/51/c8eb2d0c.jpg" width="30px"><span>Amon Tin</span> 👍（8） 💬（0）<div>jooq，试用了一年多了，非常好用，把SQL语法换成了select().from().where().and()这类的Java语法，同时也支持直接写SQL，orm的定义和映射关系也可以根据表结构自动生成，性能可匹敌mybatis，易用性不比hibernate差，可读性比上面两个都强，实乃新一代orm框架之王</div>2021-07-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/3a/f8/c1a939e7.jpg" width="30px"><span>君哥聊技术</span> 👍（8） 💬（0）<div>比如做限流的时候可以直接使用guava中的限流器</div>2020-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/0b/5f/2cc4060c.jpg" width="30px"><span>子豪sirius</span> 👍（7） 💬（8）<div>mybatis可以让开发人员自己写SQL，相比hibernate给了更多控制权。不过在实际开发中有个问题，有些开发人员会写很复杂的SQL，美其名曰是性能更好，但实际性能提升多少，不清楚；反而因为SQL写得巨长巨复杂，带来了阅读困难、调试和查错不便等等问题。明明这部分代码用Java写，业务逻辑是更清晰的～</div>2020-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7d/95/dd73022c.jpg" width="30px"><span>我是曾经那个少年</span> 👍（5） 💬（0）<div>1:  Spring Boot技术栈，集成外部框架方便。
2：Spring Cloud Alibaba 微服务的技术组件基本够用。
3：hutool工具类方便好用。该有的都有。
4：Mybatis-Plus 避免了最简单的增删改查的实现，以及数据库主键自增，数据字段填充，多数据源的支持。
</div>2021-12-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/43/79/18073134.jpg" width="30px"><span>test</span> 👍（5） 💬（2）<div>SpringCloud全家桶</div>2020-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7e/1f/b1d458a9.jpg" width="30px"><span>iamjohnnyzhuang</span> 👍（4） 💬（0）<div>golang 用的gorm框架。感觉做的算是比较好，又有ORM的特性可以直接做对象转换，又开放了SQL编写，比较灵活。但是有一点，就是sql都编写在代码里和jdbctemplate一致，不是特别好维护。</div>2020-08-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/cf/81/96f656ef.jpg" width="30px"><span>杨逸林</span> 👍（3） 💬（4）<div>学习 JPA 和 Hibernate 的成本很高，一般人根本不知道什么 HQL，还有 hbm 文件，以及 OneToMany，ManyToMany，ManyToOne，用起来其实很麻烦。而 Mybatis 只要你会写 SQL 就行了，根本不要你了解那些，虽然设计数据库表的时候会用。</div>2020-09-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/4a/34/1faac99b.jpg" width="30px"><span>夕林语</span> 👍（3） 💬（0）<div>在项目开发当中用到lombok可以减少重复的geter seter方法，虽然有点违背面向对象的特性；还有一些工具类库的使用，比如google guava，一些集合类和字符串的操作大大简化</div>2020-06-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/44/47/3ddb94d0.jpg" width="30px"><span>javaadu</span> 👍（3） 💬（0）<div>目前用过的最好用的框架还是Spring Boot</div>2020-05-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg" width="30px"><span>辣么大</span> 👍（2） 💬（3）<div>使用MyBatis，之前项目组写sql规范中要求不让写 select * 这种sql，说是影响性能。

每个DO都有很多字段，每次写sql写的要吐，没办法自己写了个程序自动生成简单的DO查询sql。</div>2020-05-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/5a/8c/1fec5fa2.jpg" width="30px"><span>一名小学生</span> 👍（2） 💬（0）<div>打卡~
MyBatis 介于JDBC Templete 和 MyBatis中间，在易用性、性能、灵活性三个方面做到了权衡。</div>2020-05-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg" width="30px"><span>Jxin</span> 👍（2） 💬（1）<div>ruby on rails</div>2020-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/38/b5/fe066d0c.jpg" width="30px"><span>木易杨</span> 👍（1） 💬（1）<div>这篇文章只能算是几个框架之间的对比吧？并没有真正讲解Mybatis的核心</div>2022-05-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/85/49/585c69c4.jpg" width="30px"><span>皮特尔</span> 👍（1） 💬（0）<div>移动端开发：
Android有ORM框架greenDAO；
iOS的FMDB、YYModel不能算ORM框架，不过Apple官方的CoreData应该算是一个</div>2020-06-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/61/61/677e8f92.jpg" width="30px"><span>xianhai</span> 👍（1） 💬（0）<div>jetty，容易集成</div>2020-05-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/86/56/509535da.jpg" width="30px"><span>守拙</span> 👍（1） 💬（0）<div>对于&quot;减少不必要的体力劳动&quot;这一限定条件来说, Gson + Idea插件GsonFormatter当仁不让. 无法想象没有它们该怎么写业务代码.</div>2020-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg" width="30px"><span>小晏子</span> 👍（1） 💬（0）<div>rails框架功能也异常强大，全自动ORM，不用写sql语句，所有东西框架帮你搞定，快速搞出产品原型的利器！</div>2020-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/3a/44/19/791d0f5e.jpg" width="30px"><span>燕姿</span> 👍（0） 💬（0）<div>这期好水</div>2024-04-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/f8/8b/74d2ab6b.jpg" width="30px"><span>斜杠青年</span> 👍（0） 💬（0）<div>JDBC-&gt;JDBCTemplate-&gt;Mybatis-&gt;MybatisPlus</div>2022-11-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7d/c8/e4727683.jpg" width="30px"><span>恬毅</span> 👍（0） 💬（0）<div>mybatis-generator 极大的减少的写代码量</div>2022-04-28</li><br/><li><img src="https://wx.qlogo.cn/mmopen/vi_32/eLNeJNaEkwGSK7xvtamMibVLMy2MpbIqX3iaEhT7JtSnTRMRTwZ2j4HX7WAapiashbiaBDVriaXKSP0Oeic6ZAEVEXag/132" width="30px"><span>M</span> 👍（0） 💬（0）<div>越通用的框架，性能越差，灵活性也越差</div>2021-04-06</li><br/>
</ul>