你好，我是文强。

在[第03讲](https://time.geekbang.org/column/article/670596)讲协议的时候，我们知道了协议分为公有协议和私有协议。公有协议有MQTT、AMQP、OpenMessaging等等，主流消息队列一般会设计自己的私有协议，比如Kafka 协议、Pulsar 协议、RocketMQ 的 Remoting 协议等。另外消息队列从使用场景的角度看，分为了消息和流两个方向。所以在业务架构中，一般会同时使用多种消息队列来满足不同的使用场景。

但是同时使用多款消息队列，从业务视角来看会增加学习和使用成本，从公司视角看会增加运维和资源成本。所以在一些有基础架构团队的企业，都会有收拢消息队列服务的需求，因此搭建消息中台总会被提起或者提上日程。

那么这节课我就来讲一下如何搭建企业内部中台型的消息服务，会围绕主要的技术方案展开，详细分析每个方案的实现思路以及优劣势。希望能对你有所帮助！

## 统一的消息服务

首先我们来看一下什么是统一的消息服务。

它是指收拢企业内部的消息组件，集中交付、运维、管理等等。业务侧不需要过多关心运维运营方面的细节，专注使用就好。

![](https://static001.geekbang.org/resource/image/ba/8b/ba2d80c581224b89f0048e4ed297658b.jpg?wh=10666x6000)

### PaaS 化和中台化

从实际落地的角度来看，统一消息服务一般有PaaS 化和中台化两种方案。

1. **PaaS 化**，指由统一的团队提供各种开源的消息队列服务。当业务需要某款消息队列时，基础团队负责交付、运维、故障处理、监控体系搭建等工作，业务侧只需要负责使用即可。
2. **中台化**，指通过提供统一的接入层负责消息的读写。屏蔽底层细节，以降低业务方使用成本和切换成本，规范业务使用方式，从而提升系统稳定性，加快处理问题的速度。
<div><strong>精选留言（2）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/1d/3f/0d/1e8dbb2c.jpg" width="30px"><span>怀揣梦想的学渣</span> 👍（0） 💬（0）<div>按照图示展示的，我是否可以理解为，中台化和PAAS化都可以提供多种消息队列产品给业务端使用。PAAS化是业务独占一种消息队列集群，中台化是业务可以随时通过切换接入的协议，选择中台中不同的消息队列集群。</div>2024-11-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/36/0e/a41a4cdb.jpg" width="30px"><span>一个假的程序员</span> 👍（0） 💬（1）<div>接入层的设计可以这样吗：提供统一的api，集成开源的生产消费SDK，在PaaS平台和业务侧通过配置选择一种消息队列，两边保持一致，以这样的方式实现接入层</div>2023-09-25</li><br/>
</ul>