你好，我是文强。

在基础篇和进阶篇，我们构建了一个分布式的消息队列集群。接下来我们就开始往这个集群里面添加各种功能。我们会用八节课来分析**消息队列的基本功能**、**顺序消息和幂等**、**延时和定时消息**、**事务消息**、**死信队列和优先级队列**、**消息查询**、**Schema**、**WebSocket** 等功能的技术选型和设计思路。当我们将这些功能加入到集群之后，一个完整的消息队列基本就打造出来了。

在本节课程中，我们会重点讲解以下4个消息队列基础功能的实现，这四部分的内容相互独立，你可以挑有需求的知识点来学习。

1. **静态/动态配置的实现**：配置是集群的基础模块，看一下如何在集群中实现静态和动态配置。
2. **集群和节点元数据的设计**：集群构建需要设计、存储集群和节点的元数据，看一下它们应该包含什么内容，如何存储。
3. **Topic和分区的支持**：Topic和分区是消息队列生产消费的最小单位，看一下Topic和分区的元数据应该包含哪些内容，以及如何存储这些元数据。
4. **消费分组（订阅）的管理**：详细讲一下消费进度的存储格式和保存机制的实现。

为了便于理解，我们假设现在的集群是基于第三方存储引擎 ZooKeeper 来实现的。具体如下图所示：

![](https://static001.geekbang.org/resource/image/09/e2/093daba2b27cd1a0c397920d288b48e2.jpg?wh=10666x6000)

## 如何实现静态和动态配置

### 静态配置

静态配置是我们在业务开发中经常用到的，配置信息一般以YAML、JSON、Properties等格式存储。在服务启动时加载配置文件到内存当中，进行业务逻辑处理。
<div><strong>精选留言（1）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/49/85/3f161d95.jpg" width="30px"><span>Alpha</span> 👍（2） 💬（0）<div>《Apache Pulsar 轻装上阵：迈向轻 ZooKeeper 时代》 这个链接不可用了；可以参考英文博客： https:&#47;&#47;streamnative.io&#47;blog&#47;moving-toward-zookeeper-less-apache-pulsar </div>2024-09-23</li><br/>
</ul>