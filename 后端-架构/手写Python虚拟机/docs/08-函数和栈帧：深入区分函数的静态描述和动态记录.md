你好，我是海纳。

前几节课我们实现了Python虚拟机基本的功能，从这一节课开始，我们将开始实现函数的功能。函数是编程语言最重要的特性，它是对逻辑的封装，也是构成一个复杂软件的基本元素，所以它的重要性可想而知。

在实现函数功能之前，我想通过这一节课把函数和栈帧之间的关系深入地讲解清楚，这样你在实现函数的时候，头脑中才能有清晰的全景图。

我相信，你在工作中肯定遇到过栈溢出（StackOverflow）的错误，比如在写递归函数的时候，当漏掉退出条件，或者退出条件不小心写错了，就会出现栈溢出错误。我们也经常听说缓冲区溢出会带来严重的安全问题，这在日常的工作中都是要避免的。

## **函数与栈帧**

当我们在调用一个函数的时候，CPU会在栈空间里开辟一小块区域，这个函数的局部变量都在这一小块区域里存活。当函数调用结束的时候，这一小块区域里的局部变量就会被回收。这一小块区域很像一个框子，所以大家就命名它为stack frame。frame本身是框子的意思，在翻译的时候被译为帧，现在它的中文名字就是栈帧。

所以我们可以说，**栈帧本质上是一个函数的活动记录。**当某个函数正在执行时，它的活动记录就会存在，当函数执行结束时，活动记录也会被销毁。
<div><strong>精选留言（3）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/11/76/4a/014c6775.jpg" width="30px"><span>细雨平湖</span> 👍（1） 💬（1）<div>递归算法讲得非常清楚！厉害！</div>2024-05-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/b2/98/82b76c88.jpg" width="30px"><span>Se7en</span> 👍（1） 💬（1）<div>海纳老师，没有编译器相关工作经历该如何去准备面试或者入行，对llvm和gcc还算熟悉</div>2024-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>学习打卡</div>2024-10-23</li><br/>
</ul>