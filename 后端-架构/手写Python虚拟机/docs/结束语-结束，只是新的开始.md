你好，我是海纳。

今天就是专栏的最后一节课了。在这个专栏里，我们一起实现了 Python 虚拟机的基本功能，并且在直播课程中，又实现了一个小的脚本语言。从而打造了一个五脏俱全的小型语言虚拟机。

## 虚拟机的基本结构

就像专栏第一课所介绍的，编程语言虚拟机是一个有足够深度的领域。以相对成熟的 Hotspot 和 V8 举例，**一个典型的编程语言虚拟机包括执行器、垃圾回收器和运行时支持等三大特性。**

执行器有两种基本的结构：解释器和 JIT（Just In Time，即时编译）执行器。我们专栏所实现的正是字节码解释器，而 JIT 执行器因为有完整的编译流程，很难在有限的时间内实现它的完备功能，只能留给你自己去探索。

垃圾回收器的主流算法也在不断地演进。Hotspot 从 CMS 走向 G1 回收器，然后向 ZGC 等无暂停垃圾回收算法演化，支持的堆越来越大，回收的效率也越来越高。与此同时，JS 和 Go 语言中的分块分区算法也在持续进步。

在 Python 虚拟机中，运行时包括列表、字典等内建类型支持，也包括闭包、函数对象等维持运行时状态的对象。运行时与语言的语法特征有很强的关联性。很多语言仍然在不断地向前发展，所依赖的正是语言运行时提供的能力。

我们会看到像Scala和Kotlin等语言一开始可以运行在JVM上，后面慢慢地演化出自己的语言核心库，并慢慢转向自研编译器。
<div><strong>精选留言（2）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>未来可期</div>2024-11-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/b2/e0/bf56878a.jpg" width="30px"><span>kkxue</span> 👍（0） 💬（1）<div>功力深厚，表达专业清晰，期待hinus下个专栏！</div>2024-07-12</li><br/>
</ul>