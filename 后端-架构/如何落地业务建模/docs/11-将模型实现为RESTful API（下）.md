你好，我是徐昊。今天我们来聊聊继续如何将模型映射为RESTful API。

上节课我们学习了如何将领域模型实现为RESTful API的宏观步骤，分为四步：

1. 通过URI表示领域模型；
2. 根据URI设计API；
3. 使用分布式超媒体设计API中涉及的资源；
4. 使用得到的API去覆盖业务流程，验证API的有效性。

并着重学习了，如何通过URI表示领域模型；并在得到与领域模型对应的URI之后，使用类似角色-目标-实体法的分析方法，获得API候选。那么今天我们就继续学习后面两步，通过分布式超媒体设计API中涉及的资源，并将使用API覆盖业务流程，以验证API的有效性。

## **RESTful API是一种什么样风格的API？**

到目前为止我们得到的API候选，比如 GET /users 等，还不能被称作RESTful API，而仅仅可以被叫做**基于HTTP的远程过程调用**（HTTP RPC）。那么**RESTful API到底是一种什么样的API呢？**

RESTful API是指**符合REST架构风格的API设计**，而REST架构风格是对互联网规模架构（Internet Scale Architecture）的总结与提炼。这一切都源于Roy Fielding提出的一个问题：既然互联网（Internet）是人类迄今为止构造的最大的软件应用，那么到底是什么样的架构原则，支撑了如此规模的异构且互联的系统呢？我们能从中学习到什么，以帮助我们更好地构建软件？
<div><strong>精选留言（24）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/4a/76/abb7bfe3.jpg" width="30px"><span>大海浮萍</span> 👍（5） 💬（1）<div>看完restful api第二章，还是有些疑问，比如在采购订单场景下，修改订单（修改基本信息）和发布订单（修改状态，通知下游），感觉只能都设计成 PUT &#47;order&#47;{order_id}，那如何区分这两种用例呢，请赐教</div>2021-07-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/56/74/7ef8b5a0.jpg" width="30px"><span>绝露</span> 👍（6） 💬（2）<div>有没有写过文章，描述那4个小时发生了什么。 非常好奇。</div>2021-07-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/ab/69/5f1f0d1c.jpg" width="30px"><span>支离书</span> 👍（2） 💬（3）<div>服务器永远不需要考虑客户端的需求。 --这话客户端同学不答应啊，并且考虑大部分中小公司现状，前端人员一般没有后端人员资历深，让前端因为分页数不一致就加一堆逻辑恐怕也不现实啊。。更何况要把集成与订制的责任交给前端了。。</div>2021-08-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/b3/40/54894c8f.jpg" width="30px"><span>Geek_fe0336</span> 👍（1） 💬（1）<div>看来不会弹吉他的软件工程师不是好咨询师啊！</div>2021-12-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/ab/69/5f1f0d1c.jpg" width="30px"><span>支离书</span> 👍（1） 💬（1）<div>&#47;users一直返回最新注册的用户，那么就不是固定的50个了吧？第一页的数据个数就一直在变了。。就必须靠客户端解决这个问题了，不仅是在每页个数不同时需要客户端解决了</div>2021-08-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/ed/84/0b8e2d25.jpg" width="30px"><span>邓志国</span> 👍（1） 💬（1）<div>这种客户端，是又一次发明了浏览器吗？</div>2021-07-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/93/32/e11fcd33.jpg" width="30px"><span>Oops!</span> 👍（1） 💬（1）<div>我的理解是本节主要讲了RESTFUL API的一个准标准：HAL，前端开发的时候也需要遵循这个标准才能woker吧。比如分页的例子，前端按50每页加载，后端20每页的往外吐，那前端就需要理解这个next链接隐含的含义，即next链接返回接下来的数据，但是不一定符合页面分页模式，然后前端需要一直调用next,直到凑足50条，是这样吗？另外，关于缓存，按文中所提模式，如果查询条件比较复杂多变，比如有排序项，过滤等，那这个缓存会不会过于复杂。进一步的，如果允许用户注销，用户注销后，前面缓存的这个用户信息该怎么处理？</div>2021-07-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/cb/c5/c1d7ca5e.jpg" width="30px"><span>赵晏龙</span> 👍（1） 💬（1）<div>【服务器永远不需要考虑客户端的需求】这是我在这一章里面学到的最重要的东西，结合你讲的渐进式服务消费，确实能解决一些问题。</div>2021-07-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/6b/d1/abb7bfe3.jpg" width="30px"><span>輪迴</span> 👍（0） 💬（1）<div>渐进式服务消费很新颖的思路，这种方式对多变的前端开发是否合适？移动端设备的性能与存储的取舍都需要考虑。</div>2021-08-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/28/c7/c5c67391.jpg" width="30px"><span>帅气のboy</span> 👍（0） 💬（1）<div>实际业务中要让前端接受这个方式可能会很难。但是这个思想可以指导服务端将业务代码写成分层结构，越底层的越是通用不变的，越上层的就可以是下层多个接口的组合</div>2021-08-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/bb/cc/fac12364.jpg" width="30px"><span>xxx</span> 👍（0） 💬（1）<div>渐进式服务消费有那么厉害吗。。。</div>2021-07-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/64/a1/9f2900d9.jpg" width="30px"><span>敬</span> 👍（0） 💬（3）<div>渐进式增强和性能如何权衡呢？比如一个page由多个module组成，一个module由多个element组成，如果&#47;pages&#47;{pageid}只返回module的超链接集合，前端要请求多少次啊？</div>2021-07-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/fa/dd/f640711f.jpg" width="30px"><span>哈德韦</span> 👍（9） 💬（0）<div>我还以为@郑晔 大佬和我一样在公交车站是在等公交车🚌，现在知道自己和大佬的区别了。</div>2021-09-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/96/65/aaf5985b.jpg" width="30px"><span>云川</span> 👍（2） 💬（1）<div>分页的例子中，如果前端的需求是分页且多条件查询，对Rest架构的后端是不是就无解了？</div>2022-07-04</li><br/><li><img src="" width="30px"><span>Geek_123</span> 👍（2） 💬（0）<div>和郑晔同学讲的20分钟 前台渐进增强，希望能详细讲讲，怎么就迅速成为资深架构师了~</div>2022-05-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/a3/df/a0e60008.jpg" width="30px"><span>：）byebye burden</span> 👍（2） 💬（0）<div>业务流程就是编排API的过程</div>2021-07-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg" width="30px"><span>Jxin</span> 👍（1） 💬（0）<div>本章
很棒的洞见，我还得再品品。这是一句废话，但真长见识了，得再想想。
课后题：
在我原本的理解。云平台是实现层面的优化，而业务建模是抽象层面的活，业务模型理应不受云平台的出现而改变。从实现层面的效率优化反向影响抽象层面的模型设计，有意思的思路，期待老师的内容。</div>2021-07-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/fd/58/1af629c7.jpg" width="30px"><span>6点无痛早起学习的和尚</span> 👍（0） 💬（0）<div>2024年01月16日08:41:11
其实这里有个疑问，标准的 restful api 会有多少公司这样使用？包括HAL，为什么大家会放弃使用标准的规范？
目前在某个大厂吧，Java 技术栈的都没有标准使用 restful api，基本不包含 HAL，能把 get、post、put分清楚就算很少的了</div>2024-01-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/13/71/3762b089.jpg" width="30px"><span>stevensafin</span> 👍（0） 💬（0）<div>有个问题咨询一下，比如说注销用户和admin删除用户，都是delete  users&#47;userid该如何区别</div>2023-10-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/c4/03/f753fda7.jpg" width="30px"><span>JianXu</span> 👍（0） 💬（0）<div>老师，你能简短的说一下您的学习方法吗？我看您的文章，有一种维度更高的感觉。同样学习restful , 感觉自己就是学了个皮，精髓没有摸到。</div>2022-10-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/9d/c0/cb5341ec.jpg" width="30px"><span>leesper</span> 👍（0） 💬（0）<div>老师，分页那个例子为啥是倒着来的？本页是4，nextpage为啥是3？</div>2022-09-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg" width="30px"><span>aoe</span> 👍（0） 💬（0）<div>有的时候背负巨大的工作量，原来是替前端写了代码！
作为一个后端，确实不应该操前端心
前端，颤抖吧</div>2022-05-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/79/29/a90cf777.jpg" width="30px"><span>深山小书童</span> 👍（0） 💬（0）<div>hal json是不是意味着要加一层bff来适配各种客户端</div>2021-09-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/fa/dd/f640711f.jpg" width="30px"><span>哈德韦</span> 👍（0） 💬（0）<div>好多年前尝试在公司推渐进增强，推不动于是离开了</div>2021-09-10</li><br/>
</ul>