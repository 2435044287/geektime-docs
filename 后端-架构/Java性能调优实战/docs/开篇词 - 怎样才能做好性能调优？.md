你好，我是刘超，目前在金山西山居担任技术经理，很高兴通过这个专栏，跟你一起讨论 Java 性能调优这个话题。

先给你讲个故事吧。多年前我加入了一家大型互联网公司，刚进入就以 996 标准，参与新品研发。公司业务发展急需互联网产品，因此我们的时间很紧张，4 个月新产品就上线了。

开始还算顺利，但不久后的一天晚上，系统突然就瘫痪了，重启之后，问题仍然无规律地重现。当时运维同事马上写了一个重启脚本，定时排队重启各个服务，但也只能做到“治标不治本”。

作为主力开发，我和公司的系统架构师一起排查问题。架构师轻车熟路地通过各种 Linux 命令在线上环境查看性能指标，也 dump 出日志文件，走查代码，最后定位到了问题，后面就是分析原因、制定解决方案、更新版本等一系列操作。那是我第一次深刻感受到性能调优的重要性。

后来的几年里，我又陆续参与过物流、电商、游戏支付系统的研发，这些项目都存在一个共性，就是经常会运营一些大促以及抢购类活动。活动期间，系统不仅要保证处理请求业务的严谨性，还要历经短时间内高并发的考验。我也一直处于性能调优的一线。

正所谓“实践出真知“。这些年在生产环境中遇到的事故不少，很多坑一点点踩平，就走出了一条路，这个过程中我收获了很多实打实的经验，希望能分享给更多的人，我们一起学习、交流和探讨。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/16/9d/b6/8a9d2a64.jpg" width="30px"><span>言凡</span> 👍（50） 💬（2）<div>老师你好，我的项目上用户量少，对性能要求也不高，很难遇到性能调优的大场面。缺少实践的话，通过学习也不会有很深的感触。在这种情况下应该如何提高自己的性能调优能力呢？</div>2019-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/65/84/5515dde0.jpg" width="30px"><span>李青</span> 👍（24） 💬（3）<div>首先，感谢老师的分享，使我受益匪浅。
其实我在这想回答@业余草童靴在留言中的困惑
个人认为性能调优分为以下步骤：
1.目前现象----》2.提出猜想------》3.验证猜想-------》4.定位到问题-------》5.解决问题
分析问题难其实就对应的是第2步骤，说白了就是你提不猜想，为什么你提出猜想，那是因为你的知识面不广，基础知识不牢固。知识面不够，就导致针对现象，提不出问题。
定位问题难对应第4步骤，这个的问题就是不会使用工具，我们在佐证我们的猜想时需要一些辅助工具。不会使用工具，就导致不能佐证猜想。
</div>2019-05-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg" width="30px"><span>业余草</span> 👍（20） 💬（3）<div>定位痛点，难定位，其实是不会定位，难重现。分析问题，不会分析，不知道怎么分析，不知道各数据代表什么等。解决问题，解决这个问题，可能引出另外一个问题等。</div>2019-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg" width="30px"><span>钱</span> 👍（6） 💬（1）<div>马上又要开始双十一大促啦!
性能压测又是我来负责，性能优化的书和性能优化的事情也做过一些，订阅此专栏希望更系统的跟大牛再学习一次。
问题先行，通过此专栏，我希望学习到如下知识点：
第一互联网系统中各种组件的最佳性能指标大概多少
第二如何开始的定位出性能瓶颈和解决性能问题
第三了解老师的方法论是怎么样系统形成的

目前我的认知
1：首先，老师的观点扎实的计算机基础知识，这一点非常认同也非常重要，不过这一点我认为也是最难的没有几年的刻苦努力基本办不到，我大学也是学习计算的，不过当时并没有认识到计算机组成原理、计算机操作系统原理、计算机网络原理、计算机数据库原理、计算机编译原理、数据结构与算法等等这些计算机理论基础课程的对于软件编程的作用和重要性，工作前几年也是没有高度重视，现在再补啦！没有这些，自己的瓶颈很快就到
2：性能优化的思路
2-1：首先，要清楚每个常用组件的最佳性能指标，否则根本不知道达到其性能瓶颈没，比如：数据库每秒查询最快多快，网络带宽多少，当然计算机比人快太多啦！只要人能感知到慢，那一定是慢了，而且慢的惊人
2-2：定位性能瓶颈，这一步最难最关键，唯有扎实的计算机基本功加丰富的性能调优经验才能容易一段，首先，需要清楚一个服务有多少个环节，然后推测每个环节存在性能瓶颈的概率，然后按照概率大小去监控验证一下，基本功越好经验越丰富判断就越准确
2-3：如果做到了第二步，问题基本解决了，定位到问题可以认为就解决了一半的问题，有时是解决的80%的问题
2-4：优化性能的思路，让干的快的全干，如果做不到让干的快的多干，如果还做不到，看看是否能通过巧妙的逻辑少干一些活，如果还做不到，那证明已到性能最佳值，只能增加人手扩机器啦
2-5：复盘，归纳总结，避免一个坑了掉进去两次</div>2019-09-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/2e/55/5ead1d09.jpg" width="30px"><span>洗脚城老板</span> 👍（5） 💬（1）<div>希望老师后面的课程能够更多的注重于实际业务场景而不只是理论</div>2019-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/55/e4/7061abd5.jpg" width="30px"><span>Mr.J</span> 👍（4） 💬（2）<div>老师您好，我是做Android开发的，Java后台服务开发只是最近项目接触到一些，用的是Springboot，springcloud，对于性能调优这块，首先我们的项目用户量很少，针对一些厂家定制项目，用户量小到出了问题可以停下来让你解决的地步，而且我也是刚接触后端这块，本身后端的很多开发知识要学，现在看到这个感觉很有用，也一边学开发一边学调优吧，也许能从摇篮中扼杀bug，对于我这种情况，老师您在学习的过程中有什么建议吗？</div>2019-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/e0/26/4942a09e.jpg" width="30px"><span>猫头鹰爱拿铁</span> 👍（4） 💬（1）<div>对性能调优所说的要扎实的计算机基础实在是太认同了。之前也做过类似的事，不过涉及的不复杂，是个单体应用，在开始性能调优的时候首先要对应用的性能进行监控获知瓶颈在哪，这就涉及到磁盘、网络、内存、cpu以及数据库不仅仅是jvm这块。然后再从这些数据里面抽丝剥茧等去找问题。</div>2019-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/14/d8/2bacd9bb.jpg" width="30px"><span>GEEK_jahen</span> 👍（3） 💬（1）<div>没有接触具体的调优过，虽然这些方面专业基础课都有学过，看专栏也体会到调优涉及的面很多。我就对学习过程做点预想吧：1)建立CPU、网络、磁盘等方面的性能指标，梳理理解指标的高低代表的含义；2)如何查看这些指标，也即熟练掌握性能分析工具；3)专栏最重要的是经验，由经验建立的系统的调优知识网络很重要；4)经验来自实践，希望专栏能提供案例，如何抽丝剥茧的综合调优的过程。

1)2)学习中会用笔记单篇记录，并计划整理一份cheat sheet，3)计划用知识导图梳理</div>2019-08-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/2a/20/f098e3aa.jpg" width="30px"><span>ātma-grāha(harry)</span> 👍（1） 💬（1）<div>公司是做电商的，用户量大概是百万级别的，我是刚毕业的主要接触的是逻辑代码，怎么才能继续提升自己？</div>2019-06-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/ac/15/935acedb.jpg" width="30px"><span>iusugar</span> 👍（1） 💬（1）<div>老师好，我是一名大三学生，现在就一心想提高java方面的技术。没接触过公司的实战项目，学这个专栏会不会太早了？</div>2019-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/f6/df/a576bfce.jpg" width="30px"><span>建国</span> 👍（1） 💬（1）<div>老师好，我是跨专业到码农，已经从事JAVA开发两年半，我们公司是做培训的系统，客户大规模使用前都会报备，平时不需要多少的并发量，需要的时候做系统升级，每次做升级都需要压力测试，但是现在服务器的内存达到了瓶颈，就是刚重启完系统基本都是70%，运行几天之后基本都是85%，所以每周都晚上重启两次（遇到上线就不需要了），所以很难受，希望能学到点内存优化的方案策略，期待期待</div>2019-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/b7/cb/18f12eae.jpg" width="30px"><span>不靠谱～</span> 👍（1） 💬（1）<div>每次遇到性能调优就不知所措了，希望能跟随老师入门。</div>2019-05-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/d6/c9/08a62ac7.jpg" width="30px"><span>胡小榕</span> 👍（1） 💬（2）<div>我是一名毕业不久的新人，对调优没经验，上个月线上系统经常出现full gc和oom，经理让我去看的时候真的是不知所措，在网上查了些资料缓解了一下。深有所感，扎实的基础知识非常重要，同时知识的广度和深度可以使得我们在工作中&quot;轻松点&quot;，希望老师的这门课程带给我进一步的成长</div>2019-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f6/5f/85e82813.jpg" width="30px"><span>高峰</span> 👍（0） 💬（1）<div>我来晚了</div>2022-08-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/a0/47/b2ec8c8f.jpg" width="30px"><span>半糖咖啡</span> 👍（0） 💬（1）<div>没有视频的吗</div>2022-04-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/4c/77/24431108.jpg" width="30px"><span>托马斯的剑</span> 👍（0） 💬（1）<div>离职了，希望用有限的时间做个提升，年后能有个好的开始~</div>2019-12-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/db/4d/670db925.jpg" width="30px"><span>陈同学</span> 👍（0） 💬（2）<div>生产环境的应用跑段时间，接口就收不到请求了，服务器cpu，内存占用都不高。怎么会出现这样的问题呢</div>2019-12-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/1c/bd/23aeb6d0.jpg" width="30px"><span>java届-Mr.吉</span> 👍（0） 💬（1）<div>经常遇到dump 出日志文件，到底啥意思，可以具体解释一下么</div>2019-08-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/d5/7e/b93debb2.jpg" width="30px"><span>半小时的天气</span> 👍（0） 💬（3）<div>目前遇到的问题是数据库查询很慢呀明明数据不多</div>2019-05-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg" width="30px"><span>-W.LI-</span> 👍（0） 💬（1）<div>老师好!我现在的情况是技术深度和广度都不够，之前也尝试过看一些底层源码。可是看起来很费劲，一头扎在实现里，没法看见全貌。单独一行代码看的懂，连一起整个类的功能就想不太明白了，更搞不清为啥这么设计了。我现在的策略是先抓广度，比较好的书和课程我都看起来。买一些课程跟着老师们学(好些理解不了的，能背的我就先背下来，背不下来的就只好放过了先)，等学完一些课程以后再开始尝试看源码这样会不会好一些?</div>2019-05-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/61/78/e7aa4e04.jpg" width="30px"><span>al-byte</span> 👍（0） 💬（1）<div>随着学习的广度越来越大，知识点总会出现交集，倾听各大牛的独到见解，总结经验，点滴积累 厚积薄发。</div>2019-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/57/38/ba6a106f.jpg" width="30px"><span>Phoenix</span> 👍（0） 💬（1）<div>普通的业务系统80%的主要问题在数据库</div>2019-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/5f/73/bb3dc468.jpg" width="30px"><span>拒绝</span> 👍（0） 💬（1）<div>涉及到面很全，后端程序猿有福了。</div>2019-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/27/1d/1cb36854.jpg" width="30px"><span>小辉辉</span> 👍（0） 💬（1）<div>这是一个既有广度，又有深度的专栏，考查综合实力的时候到了😀😀😀</div>2019-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/e9/69/779b48c2.jpg" width="30px"><span>苏忆</span> 👍（0） 💬（1）<div>厉害了 一定要好好学完这个课程 加油</div>2019-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/e1/cf/23a33fb4.jpg" width="30px"><span>年年</span> 👍（10） 💬（3）<div>学完这个再等着波姐的翻译的《Java性能优化实践》出版，到时候两相印证美滋滋</div>2019-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/03/6d/5d367ef8.jpg" width="30px"><span>luciferin</span> 👍（9） 💬（0）<div>跟着大佬有肉吃</div>2019-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/52/37/599210ae.jpg" width="30px"><span>Jimmy(陈基明)®</span> 👍（6） 💬（0）<div>挺好的，期待</div>2019-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/60/be/68ce2fd0.jpg" width="30px"><span>小田</span> 👍（4） 💬（0）<div># 摘要
1. 能力要求：深度、广度
2. 学习方法：cs基础、追问和总结、源码
3. 课程设计思路：高频问题、源码-思路和实现、方法论</div>2020-02-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/bd/84/06654c88.jpg" width="30px"><span>slofish</span> 👍（3） 💬（0）<div>这个专栏，这是我第三遍拜读，一本好书，我觉得至少读3-5遍，每次感觉肯定不一样，希望这次更上一层楼，也非常感谢老师的分享。我是一位测试开发工程师，在做性能测试方向，我希望自己可以：选择工具、性能监控、监控指标、定位瓶颈、瓶颈调优。本专栏可以为我定位瓶颈、瓶颈调优提供丰富的建议。</div>2020-09-30</li><br/>
</ul>