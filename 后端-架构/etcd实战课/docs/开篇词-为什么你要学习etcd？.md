你好，我是唐聪，etcd活跃贡献者，腾讯资深工程师，欢迎你和我一起学习etcd。

开门见山，今天我想和你聊聊为什么要学习etcd。随着Kubernetes成为容器编排领域霸主，etcd也越来越火热，越来越多的软件工程师使用etcd去解决各类业务场景中遇到的痛点。你知道吗？etcd的GitHub star数已超过34.2K，它的应用场景相当广泛，从服务发现到分布式锁，从配置存储到分布式协调等等。可以说，etcd已经成为了云原生和分布式系统的存储基石。

另外，etcd作为最热门的云原生存储之一，在腾讯、阿里、Google、AWS、美团、字节跳动、拼多多、Shopee、明源云等公司都有大量的应用，覆盖的业务可不仅仅是Kubernetes相关的各类容器产品，更有视频、推荐、安全、游戏、存储、集群调度等核心业务。

## 我想为你解决哪些问题？

在工作和参与etcd社区贡献的过程中，我经常会收到各类问题咨询，同时自己也经历了各种问题。我相信你在使用Kubernetes、etcd的过程中，很可能也会遇到下面这些典型问题：

- etcd Watch机制能保证事件不丢吗？（原理类）
- 哪些因素会导致你的集群Leader发生切换? （稳定性类）
- 为什么基于Raft实现的etcd还可能会出现数据不一致？（一致性类）
- 为什么你删除了大量数据，db大小不减少？为何etcd社区建议db大小不要超过8G？（db大小类）
- 为什么集群各节点磁盘I/O延时很低，写请求也会超时？（延时类）
- 为什么你只存储了1个几百KB的key/value， etcd进程却可能耗费数G内存? （内存类）
- 当你在一个namespace下创建了数万个Pod/CRD资源时，同时频繁通过标签去查询指定Pod/CRD资源时，APIServer和etcd为什么扛不住?（最佳实践类）
<div><strong>精选留言（27）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg" width="30px"><span>唐聪</span> 👍（101） 💬（5）<div>非常感谢关注etcd专栏的同学们，大家在试读过程中，可能已经发现每讲比较长，大部分5000多字左右，就为了尽量给大家透彻的分享清楚，一两个问题。

希望通过好几个月周末与凌晨时间，总结出的15万多字文章，1百多张图，能帮助大家通过短短短短几个月的学习，快速获得我多年知识与丰富实战经验总结，提升大家对etcd的了解，少踩坑，一定会物有所值。

欢迎大家和我一起学习etcd。</div>2021-01-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/02/db/5d227be5.jpg" width="30px"><span>xiaoyu</span> 👍（7） 💬（1）<div>正在学习kubernetes，之前不是很了解，所以etcd是什么，云原生存储？</div>2021-07-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/13/45/16c60da2.jpg" width="30px"><span>蔫巴的小白菜</span> 👍（5） 💬（1）<div>等来了etcd,一起加油呦</div>2021-01-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/9d/84/171b2221.jpg" width="30px"><span>jeffery</span> 👍（5） 💬（1）<div>终于来了！期待已久！按照老师的拆解法去执行！一定收获满满……</div>2021-01-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/2a/b9/2bf8cc89.jpg" width="30px"><span>无名氏</span> 👍（3） 💬（1）<div>工作中正好用到，跟随大佬学习etcd</div>2021-01-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/61/e6/fedd20dc.jpg" width="30px"><span>mmm</span> 👍（2） 💬（1）<div>期待已久，赶紧交学费！leader频繁切换，几百kv却消耗几G内存都是工作中遇到过问题，一脸茫然，希望能在这里找到答案</div>2021-01-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/5c/88/222d946e.jpg" width="30px"><span>linxs</span> 👍（2） 💬（1）<div>从12月等到现在终于来了hhhh</div>2021-01-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/75/0b/553d4ec4.jpg" width="30px"><span>逍遥</span> 👍（1） 💬（1）<div>之前两个项目简单用过，算大致了解怎么用，但是一些具体的细节或者深入的原理和问题背后的原因，就模糊了。这个课程很及时啊！紧跟大佬的步伐，冲呀</div>2021-01-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/93/ec/985675c8.jpg" width="30px"><span>小高</span> 👍（0） 💬（1）<div>掌握etcd，就掌握了分布式系统的基础，加油，四刷了</div>2021-09-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/20/c3/94/e89ebc50.jpg" width="30px"><span>神毓逍遥</span> 👍（0） 💬（2）<div>第一边快扫而过，这是第二边，认真以待，老师的知识结构划分是很不错的，混沌工程如何发现数据不一致性的，这个可以提下吗？</div>2021-09-06</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/1pMbwZrAl5g8ZRC5SOlz9VQOVRGN5V1rFNwsmEehicGzxMRicGj330jNfwTE1MRLaZTdSvX8R2YJVEh8DrYnMVAQ/132" width="30px"><span>Geek_edd932</span> 👍（0） 💬（1）<div>老师，请问一下，etcd集群从V3.3.18能零停机、滚动升级到V3.5.0吗？</div>2021-08-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/97/07/7406fe30.jpg" width="30px"><span>nullptr</span> 👍（0） 💬（1）<div>从增值产品部就开始用simo大佬的redis，看到大佬的名字就来购买了。</div>2021-03-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/46/42/eaa0cc92.jpg" width="30px"><span>无风</span> 👍（4） 💬（0）<div>厉害了，看思维导图很清晰。
</div>2021-01-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/ac/de/68f35320.jpg" width="30px"><span>小来子</span> 👍（2） 💬（0）<div>看到了学长的名字. 哈哈哈哈哈哈~</div>2021-02-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/34/c3/ed5881c6.jpg" width="30px"><span>手机失联户</span> 👍（2） 💬（0）<div>etcd 实现的 Raft 算法模块是比较复杂的，很期待老师会怎么讲解这一部分</div>2021-01-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/78/df/424bdc4a.jpg" width="30px"><span>于途</span> 👍（1） 💬（0）<div>从去年11月盼到了现在。O(∩_∩)O哈哈~</div>2021-01-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/25/2b/63/aa4fb42a.jpg" width="30px"><span>Viayaa</span> 👍（0） 💬（0）<div>有没有学习交流群啊</div>2023-07-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/c9/10/65fe5b06.jpg" width="30px"><span>J²</span> 👍（0） 💬（0）<div>今年工作涉及到云原生，所以跟K8S打交道比较多，一直不是很明白list-watch机制中的watch是怎么实现的，于是前来学习Etcd，希望能学好。</div>2023-05-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/75/9b/611e74ab.jpg" width="30px"><span>技术修行者</span> 👍（0） 💬（0）<div>平时工作中，直接使用etcd的场合不多，但是它是分布式系统中很重要的一部分，之前的使用，更多像是黑盒模式。
看完导读，感觉内容很有吸引力，希望学完后，我能对etcd有一个全面深入的理解。</div>2022-11-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/d9/6f/62e027f4.jpg" width="30px"><span>风有点儿大</span> 👍（0） 💬（0）<div>你好，有ETCD key 命名规范的文章吗？</div>2022-09-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/29/80/e3a4962d.jpg" width="30px"><span>雪原与星空之间</span> 👍（0） 💬（0）<div>开始学习</div>2022-07-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/2c/e2/afa3867c.jpg" width="30px"><span>凡俗</span> 👍（0） 💬（0）<div>玩Kubernetes的话，如果不能理解它的数据存储层面，那么还是不够深度</div>2021-08-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/29/f1/78/3ef66168.jpg" width="30px"><span>StarOS</span> 👍（0） 💬（0）<div>团队上k8s的优雅姿势，不需要懂k8s，即可享受k8s带来的便利，体验产品 http:&#47;&#47;staros.cloud?hmsr=C16&amp;hmpl=A5
</div>2021-08-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/09/6a/1f2ef718.jpg" width="30px"><span>Jiekun</span> 👍（0） 💬（0）<div>问个小白问题etcd是念E&#47;T&#47;C&#47;D还是et-cee-dee</div>2021-05-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/b4/d0/8c5756be.jpg" width="30px"><span>湘问海</span> 👍（0） 💬（0）<div>刚好需要学习一下Etcd </div>2021-03-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/47/ad/f683df31.jpg" width="30px"><span>若水</span> 👍（0） 💬（0）<div>请求一下：“Redis&#47;Codis 构建了大规模的排行榜”在这种排行榜中，如果针对多个候选ID进行批量投票，有没有好的实现方案。</div>2021-01-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/57/56/74cd397e.jpg" width="30px"><span>陈光辉</span> 👍（0） 💬（0）<div>迅速入坑，一起学习</div>2021-01-21</li><br/>
</ul>