你好，我是徐逸。

作为研发，在我们的工作中，除了做产品功能需求，有很多时间需要主动做技术需求，而其中比较重要的一项，就是服务性能优化。它关乎着用户体验以及我们可以支撑的业务体量。

然而，很多研发刚开始接触这方面工作时常常无从下手，最常见的痛点有这样几个。

1. **对性能优化的流程不是很清晰。**在着手进行优化工作时，往往不知从何处开始，也不清楚该如何定位到性能瓶颈点。
2. **对性能优化的工具不了解。**针对瓶颈点，不清楚该用哪个工具，也不知道该如何用工具分析引起性能问题的原因。
3. **对常见的服务优化手段缺乏足够的了解**。即便知道了引起性能问题的原因，也不知道可以运用哪些手段才能有效解决，对如何制定优化方案一筹莫展。

所以，这一章我就带你来解决上述的3个痛点。而今天这节课，我们先来梳理一下Go服务性能优化流程，迈出我们定位和解决性能问题的第一步。

我根据自己实践的经验，把服务性能优化流程分成5步。它们分别是定目标、找瓶颈点、分析瓶颈原因、性能优化和验证目标是否达成。

![](https://static001.geekbang.org/resource/image/09/7e/098acb4f4952893000ab001eef343a7e.jpg?wh=3900x963 "图1 服务性能优化流程图")

你可能对每一步的含义不是很了解，没关系，我们后面会逐一解释。首先，在我们陷入性能优化的细节之前，先想一想，你的性能目标是什么？

## 定目标：你的性能目标是什么？

**所谓性能目标，是我们预先设定的一系列期望达成的量化指标。常见的量化指标包括QPS、延时、数据量等**。比如说我们的接口要支持到100wQPS，平均延时要到10ms以内，这就是我们的量化指标。
<div><strong>精选留言（4）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/21/d7/4f/5059c43a.jpg" width="30px"><span>CodeFish-Xiao</span> 👍（4） 💬（1）<div>其实更加好奇的是：指标该定制多大，一个正常的指标区间该是什么样的？
例如接口时延 50ms算正常还是1s算正常，这些指标该如何去制定，按照什么标准制定</div>2024-12-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/4c/fc/0e887697.jpg" width="30px"><span>kkgo</span> 👍（2） 💬（1）<div>目前主要是通过skywalking来分析服务 存在服务，数据库等问题 再单个优化</div>2024-12-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/e9/58/7bb2c561.jpg" width="30px"><span>请务必优秀</span> 👍（0） 💬（1）<div>突然发现如果是做内部平台（比如运维平台啥的），基本没人关注延时，哈哈哈，都是能用就行，这种情况下，应该先紧着功能增加迭代的速度，实现目标为优，无须花精力优化，这就叫不过度设计吧 哈哈哈</div>2024-12-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/73/eb/a3bdb006.jpg" width="30px"><span>Fukans</span> 👍（0） 💬（1）<div>“调用下游 IO 瓶颈。除了服务代码上的优化，比如说分页请求、压缩等，我们还可以从框架层想办法。”  这句指的是优化ORM框架之类的吗？</div>2024-12-11</li><br/>
</ul>