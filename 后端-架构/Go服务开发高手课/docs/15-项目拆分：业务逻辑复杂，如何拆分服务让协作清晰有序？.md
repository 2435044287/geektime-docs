你好，我是徐逸。

作为后台研发，在我们的日常工作中或多或少都接触过微服务架构。对于微服务架构，我们除了要熟悉常用的微服务技术栈之外，还有一个极为重要的部分，那就是如何进行微服务拆分。要知道，服务拆分决策与实施的过程，会直接对系统未来的迭代效率和可维护性产生重大影响。

所以，今天这节课，我们就来聊一聊，如何进行微服务拆分。首先，在着手微服务拆分之前，你需要思考一个问题，那就是你们的团队到底适不适合采用微服务架构呢？

## 架构决策：你们团队是否需要使用微服务？

要想清楚这个问题，我们可以从下面两个方面思考：

1. 微服务架构主要是为了解决什么问题，你的项目是否面临类似的问题呢？
2. 采样微服务架构需要哪些技术栈，你们公司是否具有实施微服务架构的技术条件呢？

微服务架构是为了解决随着项目复杂度的提升，研发效率急剧下降的问题。就像下面的图一样，当项目复杂度不高时，微服务架构因为需要额外的微服务管理成本，研发效率会比单体架构低。随着项目复杂度的升高，理解和迭代项目的成本越来越高，最终微服务架构的研发效率会超过单体架构。

![](https://static001.geekbang.org/resource/image/e6/f8/e69a88148a4ce810c83db5b0fe927ff8.jpg?wh=2539x1461 "图1 架构和研发效率关系图")

因此，只要咱们的项目复杂度超过图中单体架构和微服务架构曲线交点时，就可以采取微服务架构。

那这个交点究竟该如何确定呢？
<div><strong>精选留言（3）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/17/e9/26/472e16e4.jpg" width="30px"><span>Amosヾ</span> 👍（1） 💬（1）<div>老师，文中技术维度基于稳定性拆分的例子，将下单前校验一个接口单独拆分出来，会不会过于细了呢？成熟的微服务场景下，一般一个服务大概有多少接口？</div>2025-01-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/de/a6/23062f7b.jpg" width="30px"><span>17</span> 👍（0） 💬（1）<div>老师，双写差异对账有什么方式，常用架构，框架，手段吗，尤其是新业务数据表与旧业务数据表是异构的</div>2025-01-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/19/fe/d31344db.jpg" width="30px"><span>lJ</span> 👍（0） 💬（0）<div>1. 服务的粒度要适中，过小的服务会导致管理复杂性增加，而过大的服务则失去了微服务的优势。
2. 服务间的依赖性应该最小化。服务应尽量保持自治，避免过多的跨服务调用和复杂的依赖链。
3. 根据目的的不同灵活地选取不同的拆分方式，常见的拆分方式有：业务逻辑、可扩展、可靠性、性能等。
4. 每个微服务应该拥有自己的数据存储，并且能够自治地管理其数据。避免不同微服务共享数据库。
5. 构建完备的基础设施，服务发现、服务路由、服务容错、接口框架、API 网关、自动化部署、自动化测试、配置中心、服务监控、服务跟踪、服务安全。</div>2025-01-10</li><br/>
</ul>