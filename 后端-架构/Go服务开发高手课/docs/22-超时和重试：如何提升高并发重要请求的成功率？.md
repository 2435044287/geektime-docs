你好，我是徐逸。

首先预祝你春节假期快乐。这节课是春节前最后一次更新，1月28日到2月4日期间我们会暂时停止更新，2月5日再恢复更新。

在这一章前面的课程内容里，咱们一同深入学习了如何从编码以及单元测试这两个关键层面，来全力保障服务上线之后的稳定性。不过呢，即便咱们把代码编写得再健壮，服务在线上环境实际运行的过程当中，依旧会有很多突发状况。

这一章我们就从架构层面入手，一起看看线上服务稳定性的各种常见问题如何解决。

作为用户，想必你对双十一大促或者春运抢票这样的情况并不陌生，这种流量高峰期，也是最考验系统稳定性的时候。那今天呢，咱们就先来聊一聊，在这样的高并发场景下，下游访问偶尔响应时间变得很长时，我们究竟应当采取哪些措施，才能尽可能地确保我们的服务始终保持稳定且可用呢？

## 下游响应时间变长对我们服务有什么影响？

在讨论具体方案之前，你不妨先想一想：倘若请求下游偶尔出现响应时间变长的情况，可能给我们的服务带来怎样的影响呢？

![](https://static001.geekbang.org/resource/image/9b/14/9bfae6049984f4c7297265a97e140814.jpg?wh=4000x2198 "图1 正常响应")

要知道，当请求下游迟迟不能返回结果时，我们服务与下游服务之间的**连接就无法释放**，而且正在等待请求返回的**协程也会被读请求给阻塞住**。一旦响应时间变长的请求数量变多，极有可能使我们**服务的机器资源被耗尽，最终使得我们的服务崩溃**。
<div><strong>精选留言（2）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/89/03/c7563a26.jpg" width="30px"><span>看你发呆而发呆</span> 👍（0） 💬（1）<div>希望能多加一些实例</div>2025-02-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/c9/55/8973db30.jpg" width="30px"><span>七桐木</span> 👍（0） 💬（1）<div>老师，这节课的理论知识有没有具体的实例供参考</div>2025-01-28</li><br/>
</ul>