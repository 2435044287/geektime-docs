你好，我是徐逸。

通过上节课的学习，相信你已经掌握了Go 代码中潜藏的四类陷阱。然而，除了编写健壮的代码来预防线上问题之外。当出现线上问题时，能够快速定位和修复问题同样至关重要。而日志和错误码，是我们快速定位线上问题的得力工具。可以说，日志记录的质量高低以及错误码设置的合理与否，直接影响着我们面对问题时的定位效率。

因此，今天这节课，我们就来聊聊怎样合理地打印日志和设置错误码，才能帮助我们更快的定位问题。

## 日志最佳实践

为了能通过日志更高效地定位问题，我们在进行日志打印时，重点需要考虑下面三个问题。

1. 首先是**日志的位置**。我们需要确定在代码的哪些关键位置打印日志，从而确保当问题发生时，我们能够有足够的信息来定位问题。
2. 其次是**日志的等级**。我们需要决定在不同情况下应该记录哪种级别的日志，以便在问题发生时能够快速识别问题的严重性。
3. 最后是**日志的内容**。我们必须考虑日志中应该包含哪些具体内容，以确保日志信息的完整性和有用性，从而帮助我们高效地诊断和解决问题。

### 日志位置：我们该在哪些地方打印日志？

为了能借助日志快速定位问题，**日志打印要适度，既不能过多也不能太少**。日志过多不仅会淹没关键信息，而且过多的日志打印与收集，会大量占用磁盘、网络等硬件资源，对服务性能造成不良影响；反之，如果日志过少，一旦出现问题，由于缺乏足够的信息，会导致我们难以靠日志定位问题根源，增加故障排查和修复的难度。
<div><strong>精选留言（1）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/17/e9/26/472e16e4.jpg" width="30px"><span>Amosヾ</span> 👍（2） 💬（1）<div>golang 的zap日志库还要注意 caller_skip 的配置，配置错了不利于溯源。</div>2025-01-22</li><br/>
</ul>