Golang是一门号称从语言层面支持并发的编程语言，支持并发是Golang一个非常重要的特性。在上一篇文章[《44 | 协程：更轻量级的线程》](https://time.geekbang.org/column/article/99787)中我们介绍过，Golang支持协程，协程可以类比Java中的线程，解决并发问题的难点就在于线程（协程）之间的协作。

那Golang是如何解决协作问题的呢？

总的来说，Golang提供了两种不同的方案：一种方案支持协程之间以共享内存的方式通信，Golang提供了管程和原子类来对协程进行同步控制，这个方案与Java语言类似；另一种方案支持协程之间以消息传递（Message-Passing）的方式通信，本质上是要避免共享，Golang的这个方案是基于**CSP**（Communicating Sequential Processes）模型实现的。Golang比较推荐的方案是后者。

## 什么是CSP模型

我们在[《42 | Actor模型：面向对象原生的并发模型》](https://time.geekbang.org/column/article/98903)中介绍了Actor模型，Actor模型中Actor之间就是不能共享内存的，彼此之间通信只能依靠消息传递的方式。Golang实现的CSP模型和Actor模型看上去非常相似，Golang程序员中有句格言：“**不要以共享内存方式通信，要以通信方式共享内存**（Don’t communicate by sharing memory, share memory by communicating）。”虽然Golang中协程之间，也能够以共享内存的方式通信，但是并不推荐；而推荐的以通信的方式共享内存，实际上指的就是协程之间以消息传递方式来通信。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/16/7c/b5/4a7a2bd4.jpg" width="30px"><span>Sunqc</span> 👍（29） 💬（1）<div>会反复看这些内容，每次看感觉都不一样，另外老师推荐的 并发编程的艺术，还有图解java多线程模式，结合这些书看加深理解。持续关注并发编程</div>2019-06-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/03/89/e1621a01.jpg" width="30px"><span>zhangtnty</span> 👍（10） 💬（1）<div>王老师辛苦了👍</div>2019-06-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg" width="30px"><span>QQ怪</span> 👍（6） 💬（1）<div>更本看不够啊，不想老师停更</div>2019-06-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/1c/d7/a53dad9e.jpg" width="30px"><span>叫我天才好了</span> 👍（4） 💬（1）<div>第一遍只能说让我理解了并发的处理，还是要多复习几遍。加油吧，不拼一下你永远不知道你的潜力有多大，感谢老师的分享。</div>2019-09-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/03/5b/3cdbc9fa.jpg" width="30px"><span>宁悦</span> 👍（3） 💬（1）<div>今天看完了整个系列，觉得老师讲的非常好，自己也在看图解java多线程，加深理解。感谢老师</div>2020-03-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg" width="30px"><span>helloworld</span> 👍（3） 💬（1）<div>终于看完了。对Java领域的并发编程有了更深一层的认识。认真对待专栏的每一节课程，学原理，看示例程序，思考课后的问题。尤其是第一部分关于Java多线程编程相关的理论介绍是让我
收获最大的。工作中对于Java中的各种队列了解不是很多，在这个专栏中学习了。至于专栏中关于并发设计模式和案例分析两部分的讲解，感觉了解即可。专栏虽然结束了，但是对于并发的
学习没有结束，继续！</div>2019-09-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/37/4e/5c3153b2.jpg" width="30px"><span>知行合一</span> 👍（3） 💬（1）<div>订了十几个专栏，老师讲的是最通熟易懂的，虽然有些知识点由于自己不够熟悉还需要多看几遍，找相关的书籍多加研习。谢谢老师！真心希望以后还能学习老师的新专栏</div>2019-07-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/5b/66/ad35bc68.jpg" width="30px"><span>党</span> 👍（3） 💬（1）<div>现在golang也很火 golang和java 以后怎么选</div>2019-07-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/e7/cd/08088f14.jpg" width="30px"><span>马哲富</span> 👍（3） 💬（1）<div>2个星期看完了，还得慢慢消化，谢谢王老师，老师辛苦了！</div>2019-06-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/e8/32/f44f163e.jpg" width="30px"><span>海涛</span> 👍（2） 💬（1）<div>学的比较晚也比较慢，准备开始刷第二遍</div>2019-12-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/df/40/5527fb46.jpg" width="30px"><span>jery</span> 👍（2） 💬（2）<div>想问老师一个问题，问题描述：集群中有A、B两台机器，集群与另一系统C进行通信。
系统C作为服务端最大并发数为50。如何保证集群中两台机器并
发向C发起请求控制在50并发之内。
我的思考:解决方法1：A、B两台机器平分50个并发。2.建一张表，实时监控正在执行任务任务的线程数，让A、B并发总数不大于50.</div>2019-08-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/4f/a5/71358d7b.jpg" width="30px"><span>J.M.Liu</span> 👍（2） 💬（1）<div>全程跟完的，飞机起飞关机前，打卡。感谢老师</div>2019-06-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/83/39/f9623363.jpg" width="30px"><span>竹马彦四郎的好朋友影法師</span> 👍（1） 💬（1）<div>2021年原地过年，把这个专栏刷掉了~ 嘿嘿，喜欢，~其实都知道，但是不系统，谢谢王老师提纲挈领，吾辈获益良多！</div>2021-02-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/e0/be/ee317b4c.jpg" width="30px"><span>爱读书的张先生</span> 👍（1） 💬（1）<div>记录一下，终于看完了，感谢王老师。</div>2020-07-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/f4/c7/037235c9.jpg" width="30px"><span>kimoti</span> 👍（1） 💬（1）<div>坚持到了最后一篇,感谢王老师</div>2020-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/60/6d/e2576fda.jpg" width="30px"><span>Rancood</span> 👍（1） 💬（1）<div>第一个完整看完的课程，学到了不少，王老师辛苦了</div>2019-06-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/e8/ed/f9347e5e.jpg" width="30px"><span>松小鼠</span> 👍（1） 💬（1）<div>老师辛苦了，我也打卡，像我们底层的程序员只能好好学习技术前行了</div>2019-06-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/fc/90/c9df0459.jpg" width="30px"><span>ack</span> 👍（1） 💬（1）<div>今天默默打开才发现已经更完了，谢谢老师，写得真的通俗易懂</div>2019-06-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/5f/73/bb3dc468.jpg" width="30px"><span>拒绝</span> 👍（1） 💬（1）<div>第一个看完的专栏，老师叫的跟细致，以前只会简单的用一下线程，现在稍微会诊断一下多线程引发的问题了，课程虽然讲完了，内容还未消化，会反复阅读。</div>2019-06-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/23/4f/3ce24bed.jpg" width="30px"><span>朱延云</span> 👍（1） 💬（1）<div>谢谢老师，终于补完了，对并发编程有了更多认识。特备棒的课程，辛苦了</div>2019-06-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/47/65/cce8eb34.jpg" width="30px"><span>nimil</span> 👍（1） 💬（1）<div>最后一篇了？谢谢老师，收获很多</div>2019-06-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg" width="30px"><span>张三</span> 👍（1） 💬（1）<div>打卡！这是最后一期了吗？</div>2019-06-12</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLicqNWaoMc7SI7ZCFZ5cicicQ7zxlyTP9lQHYtJL8QYd17YasOn5p1iciawibqPRR1wic6FVG4V6icTDPhtA/132" width="30px"><span>圆小白</span> 👍（1） 💬（1）<div>老师，幸苦了。</div>2019-06-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/76/23/31e5e984.jpg" width="30px"><span>空知</span> 👍（1） 💬（1）<div>感谢 老师 ヾ(◍°∇°◍)ﾉﾞ！</div>2019-06-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/00/c4/634c1e10.jpg" width="30px"><span>西行寺咕哒子</span> 👍（1） 💬（1）<div>全程追更下来， 老师辛苦了</div>2019-06-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/f5/d1/cc6f82eb.jpg" width="30px"><span>kaixiao7</span> 👍（1） 💬（1）<div>在这个专栏中学到了很多，尤其是并发编程的原理，老师讲的非常棒。
非常感谢老师，老师辛苦了！</div>2019-06-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/48/f3/65c7e3ef.jpg" width="30px"><span>cricket1981</span> 👍（1） 💬（1）<div>&quot;Actor 模型中发送消息是非阻塞的&quot;---&gt;如果actor mailbox满了呢？是否发送者阻塞？另外，如果引入actor persistence是否能保证消息百分百送达？</div>2019-06-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/cb/93/124d8cd8.jpg" width="30px"><span>努力努力再努力</span> 👍（0） 💬（2）<div>学完啦 赞</div>2022-09-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/0b/8c/db1ee0a2.jpg" width="30px"><span>walkingonair</span> 👍（6） 💬（0）<div>最后一篇了，结束打卡，内容很丰富，还要复习两遍</div>2019-06-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg" width="30px"><span>每天晒白牙</span> 👍（4） 💬（0）<div>追完了</div>2019-07-17</li><br/>
</ul>