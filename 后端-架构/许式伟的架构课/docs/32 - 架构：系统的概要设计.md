你好，我是七牛云许式伟。

我们第二章 “桌面开发篇” 就快要结束了。今天我们把话题重新回到架构上。

## 基础架构与业务架构

桌面开发篇我们主要涉及的内容如下。

![](https://static001.geekbang.org/resource/image/55/50/553d5dd6b9e774585514a05674066550.png?wh=572%2A259)

对于一位架构师而言，其架构工作的内容可以大体分为两块，一块是基础架构，一块是业务架构。

基础架构，简单来说就是做技术选型。选择要支持的操作系统、选择编程语言、选择技术框架、选择第三方库，这些都可以归结为基础架构方面的工作。

基础架构的能力，考验的是选择能力。背后靠的是技术前瞻性和判断力。这并不简单。大部分架构师往往更容易把关注点放到业务架构上，但实际上基础架构的影响面更广，选错产生的代价更高。

架构师之间的差距，更大的是体现在其对待基础架构的态度和能力构建上。真正牛的架构师，一定会无比重视团队的技术选型，无比重视基础平台的建设。阿里提倡的 “大中台、小前台”，本质上也是在提倡基础平台建设，以此不断降低业务开发的成本，提升企业的创新能力。

业务架构，简单来说就是业务系统的分解能力。基础架构其实也是对业务系统的分解，只不过分解出了与业务属性几乎无关的部分，形成领域无关的基础设施。而业务架构更多的是分解领域问题 。

一旦我们谈业务架构，就避不开领域问题的理解。所谓领域问题，谈的是这个领域的用户群面临的普遍需求。所以我们需要对用户的需求进行分析。
<div><strong>精选留言（21）</strong></div><ul>
<li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKj3GbvevFibxwJibTqm16NaE8MXibwDUlnt5tt73KF9WS2uypha2m1Myxic6Q47Zaj2DZOwia3AgicO7Q/132" width="30px"><span>饭</span> 👍（25） 💬（7）<div>老师，我想请教一个问题，我们公司系统都是传统的流程式的管理系统，各功能模块之间是通过某些业务字段状态，产生业务关联。比如一个最简单流程例子，完成模块A操作(状态=1)，才能做B操作(状态=2)，然后是模块C操作(状态=3)，有的状态判断可能是多种复杂条件。后果是功能间耦合性很高，导致没办法轻松往流程中添加或删除一个模块。一直在思考，有什么办法能解藕，但没想到办法，老师有什么建议没？针对这种流程式的业务管理系统（如仓储系统，物流系统），功能模块间的解藕</div>2019-08-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/92/ec/abb7bfe3.jpg" width="30px"><span>kevenxi</span> 👍（3） 💬（1）<div>最近在编写一个系统中某个子系统模块的概要设计，结合课程思考，现在要完成的其实不应是概要设计，应该是详细设计。一方面，概要设计要以子系统维度来阐述系统各角色之间的关系。这一部分，在该子系统设计中，还是需要的，但已不是关键设计内容。重点已是该子系统内部各功能模块的分解实现，包括数据结构，即数据表设计；还包括界面和流程，甚至关键按钮的伪代码（算法）。
详细设计，很多公司都交给程序员了，文档都是后补的。但是先有详细设计，再让程序员去实现，应该说效率要高一些。</div>2021-04-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/f1/cb/48e18c02.jpg" width="30px"><span>3岁大宝宝</span> 👍（1） 💬（1）<div>老师，想问下您对普元EOS的构件开发有什么看法么</div>2019-09-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/3d/77/45e5e06d.jpg" width="30px"><span>胡鹏</span> 👍（1） 💬（1）<div>原文: 如果存在大量说不清业务意图的函数，或者存在大量职责不清的模块和类，就知道他基本上还处在搬砖阶段。 
   针对细化到每一行代码的设计和作用，很久之前我就意识到了自己这方面没做好，，很多自己写的代码自己无法知道是否优良，于是各处搜索资料，买课程等，，

 可能是因为水平不够，看到了答案还不知道答案或者是目前所搜索到的知识面不够，还没找到，，，
不过本课程，让我眼前一亮， 到底哪些会变，哪些不太会变，哪些需要如何抽象，用什么样的设计模式更好，这些东西已经看到说明的苗头了，不知老师后面会有这一块更详细说明嘛，

如果没有，还望老师能在这个方面，提点一下理解学习路径呢</div>2019-08-19</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDOKcx20XxmrRrLkelN8yAsBk0ZcuremVN7lZp4U2kdABFULtEVmCgaFlJLh1TYia0kicPbvxeZQNg/132" width="30px"><span>Geek007</span> 👍（0） 💬（1）<div>再读此篇，真是受益匪浅。把自己平时的工作也都梳理了一下。谢谢许老师，希望有机会加入七牛云。</div>2020-01-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/9d/60/45b3184d.jpg" width="30px"><span>顺哥聊成长</span> 👍（0） 💬（1）<div>Model代表核心业务逻辑吗？我之前以为Controller是，Model只是数据结构及其操作的包装，就像操作系统内核的机制和策略分离一样，Model是机制，Controller是策略。</div>2019-08-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/d2/af/f878dc80.jpg" width="30px"><span>yl</span> 👍（0） 💬（1）<div>最近在思考如何重构遗留的一个项目，正好可以用许老师讲的方法论指导实践。

请教一个问题，c语言开发的项目在数据库中间件的选择上有什么建议？
我们的项目因用户采购数据库不同，可能要调用不同厂家的数据库，目前通过odbc方式调用，维护代价高，没有找到比较成熟的c语言中间件(类似java的orm框架)</div>2019-08-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/b9/8d/00bded19.jpg" width="30px"><span>不温暖啊不纯良</span> 👍（8） 💬（0）<div>之前写过一个数据清洗的功能，如果让我现在再去写，我会先确定这个业务中的稳定点和变化点是什么？
稳定点就是。读取数据，处理数据，输出数据，操流程监控。
变化点就是。读取的数据源不一样，读取方式不一样，处理数据的规则不一样。输出数据的源不一样，方式不一样。

我可以把当做一个io子系统，子系统中读，处理，记录，写有四大模块。再分别设计出4个最基础的业务模型。

比如读数据，分别是从文件读取。从关系数据库读取。从非关系数据库读取。
比如处理数据，分别是处理前的水平，规则的集合，处理后的数据。
比如写数据，分别是写入文件，写入关系型数据库，写入非关系型数据库。
比如记录。我可以把它设计成一个切面，分别获取读取数量，正在处理的数量，和正在写入的数量。

我把这些基础业务模型设计成抽象类或者是接口，如果上层业务需要丰富接口，需要实现和集成这些基础模型。</div>2021-04-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/39/d5/9a0a169e.jpg" width="30px"><span>孙光</span> 👍（4） 💬（0）<div>专栏需要反复看反复练，这一篇收获很多。</div>2019-11-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/71/4f/bce0d5bc.jpg" width="30px"><span>哈哈</span> 👍（3） 💬（0）<div>许老师的深度真不是一两天能达到的，这看第三次了，每次都有新的知识理解。</div>2020-03-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/03/57/31595f22.jpg" width="30px"><span>Lrwin</span> 👍（3） 💬（1）<div>关于抽象的理解：
抽象的东西一定是稳定的，比如我说:&quot;一个女孩很漂亮&quot;，漂亮这个词很抽象，每个人都会有对漂亮这个词的定义，所以这句话很稳定，大家很难差生歧义。那这句话如果我换成&quot;这个大眼睛的女孩很漂亮&quot;，这个描述是我对于一个具体的描述（大眼睛），这样的描述会产生歧义（有的人觉得小眼睛的女孩才漂亮）因为这样的描述太具体了。
回到架构思维,必须考虑两点:1. 需求分析(不错需求分析，就不要开始做软件) 2.系统分解(也可以称为各层级的抽象)

关于系统分解:
我们仅仅需要根据需求 ，抽象的划分出不同的子系统,比如电商系统可以划分为: 会员系统、商品系统、订单系统、库存系统等。。这些系统划分期初不一定肯定准确，但是根据需求粗略的划分就好.
再将我们需求中的用例(场景)拆解成不同的小功能点，比如下单流程: 1.验证库存 2.验证会员资质 3.计算价格 4.生成订单。。 根据场景拆分后的静态动作划分到不同的子系统就可以了。 
划分后的静态动作在子系统中进一步拆解，拆解为包、类 等。 拆分的过程一定遵循:从抽象慢慢过渡到具体的一个过程</div>2019-11-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg" width="30px"><span>escray</span> 👍（2） 💬（0）<div>最近要写需求分析说明书和概要设计说明书，所以挑着看了前面讲需求的两篇专栏和则一篇讲概要设计的。专栏本身是偏架构的，和我要写的内容有一些差别，不过核心的要求是一样的，按照高内聚低耦合的原则做好系统分解，“以子系统的维度来阐述系统各个角色之间的关系”。

我是以项目经理的角色来写中途接手项目的概要设计，有一些学习成本，和架构师角度的概要设计有所不同，按照已有的文档模板照猫画虎，也算是“做中学”了。

另外，特意查了一下概要设计说明书的英文名称，可能是 PDD, Preliminary Design Document</div>2020-12-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/8d/c5/898b13b4.jpg" width="30px"><span>亢（知行合一的路上）</span> 👍（2） 💬（0）<div>概要设计的焦点是整个系统如何被有效串联起来，子系统、模块之间是如何交互的，完成业务需求。</div>2020-04-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg" width="30px"><span>程序员小跃</span> 👍（2） 💬（0）<div>代码即文档。代码是理解一致性更强的文档。

还有老师描述的如何判断一个程序员是不是搬砖的，实在是太形象了，自己也曾经经历过那种时刻。现在不敢说完全没有，所以按照老师的这个准则，好好对比对比，对于自身成长来说，很是重要。</div>2019-08-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg" width="30px"><span>leslie</span> 👍（2） 💬（1）<div>       程序离开了实践那就变成了理论：其实数学本来也就是一门实战性学科；证明理论的对错不是用嘴巴说出来的，而是通过大量的方式方法去验证论证：“实践是检验真理的唯一标准”。</div>2019-08-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/53/cb/d3e98e49.jpg" width="30px"><span>zero</span> 👍（1） 💬（0）<div>老师真是贴心啊，做了个v1.0版本。</div>2020-01-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/ec/81/2127e215.jpg" width="30px"><span>梦醒十分</span> 👍（1） 💬（0）<div>许老师辛苦啦！</div>2019-08-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/cd/b8/14597b01.jpg" width="30px"><span>西门吹雪</span> 👍（0） 💬（0）<div>这一节干货满满</div>2024-01-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>学习打卡</div>2023-09-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f5/b9/888fe350.jpg" width="30px"><span>不记年</span> 👍（0） 💬（0）<div>判断一个功能分解良好系统的标准之一是当需求变动时，功能块需要变动的数量，最好的情况是只需要变动一块～</div>2019-12-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/7a/08/4d3e47dd.jpg" width="30px"><span>Aaron Cheung</span> 👍（0） 💬（0）<div>打卡32 一个继承很多的python项目 感觉不太好重构……</div>2019-08-15</li><br/>
</ul>