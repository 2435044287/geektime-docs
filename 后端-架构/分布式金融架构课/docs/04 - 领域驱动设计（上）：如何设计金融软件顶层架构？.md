你好，我是任杰。这节课我想和你聊一聊如何设计顶层金融软件架构。

通过前面三节课的学习，你应该感觉到金融业务比较复杂，对应的金融软件也很复杂。那想让业务和架构设计良好配合，就是一个非常有挑战性的事情了。这也是软件工程要解决的问题。

软件工程的教材里一般不会写项目怎么成功，而是记录项目怎么失败。金融行业对信息化要求很高，那在实际解决问题时，金融行业自然也会经历很多失败的软件项目。

幸运的是，错的次数多了也渐渐总结出一些比较好的方法论，本世纪初出现的**领域驱动设计**就是其中一个。一些大型的金融公司已经用这个方法，从战略上重新设计了顶层框架和运作机制，也取得了不错的效果。

想更好地掌握这种方法，你就要搞清楚它的适用范围以及整体思路，这样才能在后续实践中更好地使用。话不多说，接下来我会从三个角度入手，带你理解领域驱动设计理论中的核心知识点。

## 领域驱动设计侧重点

顾名思义，领域驱动设计（**Domain Driven Design**，简称 **DDD**）指的是针对特定领域进行定制化的设计。

从**空间**上来讲，它看到的是整个行业或者整个领域。从**时间**上来讲，它看到的是软件从发生、发展到消亡的整个生命周期。从**角色**上来讲，它看到的是业务、产品、开发和运维等所有参与人员的合作。
<div><strong>精选留言（8）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg" width="30px"><span>tt</span> 👍（2） 💬（1）<div>我也觉得是选项2，因为不同的领域属于不同的业务。如果直接传输领域模型:

一个会带上很多目的领域不需要的数据；
第二个划分不同领域的目的是为了解耦，如果直接传输领域模型相当于违背了这个初衷。</div>2020-12-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/5d/6f/42494dcf.jpg" width="30px"><span>Jerry Wu</span> 👍（26） 💬（3）<div>我说下自己的一些经历吧~

在人员组织架构上，领域驱动设计要求太高，不适合大部分公司。金融行业可以用领域驱动设计，一个重要的原因是，这些企业能招到足够的人才。

文中提到，领域驱动设计取消了垂直沟通，而是变成小组沟通。这虽然能提高沟通效率，但对开发人员表达和理解能力是个考验。

我身在小公司，表达和理解能力算过得去，在产品会议上也愿意表达。但我发现自己既孤独又没话语权，当业务方、产品经理、开发人员聚在一起时，开发人员往往在一脸懵逼中，沉默到底。直到会议结束后，开发人员才去问产品经理：我该做些什么？

因此，垂直沟通并不是没道理的，表达和理解能力确实稀缺，必须要有人代为转述和翻译。当然，这也是个机会，善于表达理解的程序员往往是团队核心。</div>2020-12-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7b/98/8f1aecf4.jpg" width="30px"><span>楼下小黑哥</span> 👍（4） 💬（0）<div>领域模型将会包含自身领域的业务逻辑，，不应该暴露给其他领域，否则就会形成不同领域之间的系统耦合。
所以应该选择 2，对外只传输简单数据类型，业务逻辑还只是在自身领域内实现
</div>2020-12-29</li><br/><li><img src="" width="30px"><span>Geek_b17612</span> 👍（1） 💬（0）<div>选项2，不同领域之间通过简单对象进行交互。既然区分了领域，那就意味着两个不同领域的内容不应该强依赖。他们内部的处理逻辑也不应该暴露出来，那么也就没有必要暴露出领域模型。</div>2021-01-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7a/86/655307b3.jpg" width="30px"><span>江湖小虾</span> 👍（1） 💬（0）<div>选项2，因为领域模型会根据业务逻辑经常变化，容易造成不同系统之间的耦合，使用不带有业务逻辑的简单数据类型，不带有业务逻辑，适合接口的版本的管理</div>2020-12-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/36/ba/b177d176.jpg" width="30px"><span>可观测性无声笛</span> 👍（0） 💬（0）<div>求微信群</div>2022-09-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f9/e6/47742988.jpg" width="30px"><span>webmin</span> 👍（0） 💬（0）<div>传输数据可以采用模型语言（IDL）定义好模型后，根据模型通过生成器生成不同的编程语言和RPC协议的Server和Client的stub。</div>2021-01-14</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/FoE5JTn2hmicRVXiatP2ibbe10CTbiassOskjkqDWaWZ4dDIw4Z9KMrALLPIkVfdIbLYB5ro4U7AQ0elPtVDibt31sA/132" width="30px"><span>Geek_74107b</span> 👍（0） 💬（0）<div>选json或者protobuf这种通用的 业务无关的 语言无关的数据类型</div>2020-12-28</li><br/>
</ul>