你好，我是任杰。今天我们来聊聊混沌工程。

这一讲是第三个模块“分布式正确性及高可用”的最后一讲。我们前面学习了实现金融系统正确性、可用性的许多方法。

不过，尽管你掌握了各种金融系统的屠龙之技，平时工作也兢兢业业，但是业务方并不一定懂技术。他们怎么才能放心让几百亿上千亿的业务跑在你的系统上呢？

所以，这节课我们就来看看，如何通过混沌工程来证明系统是正确的。这一块内容涉及面非常广，所以我还是会照例给你重点讲解**混沌工程背后的原理**，你了解了背后的原理之后，很容易就能在实践中加以应用了。

## 分布式系统正确性理论

我们在学习算法的时候，老师和教材都会证明为什么算法是正确的。分布式系统也是一样，有很多对于分布式算法的正确性证明。但是不知道你发现了没有，我们从来没有说Raft共识算法是正确的？

Raft算法已经在很多环境运行了很长的时间，从来没有人怀疑过它的正确性。如果你看过Raft算法的论文，也会觉得它应该是正确的。那为什么我们不会说Raft算法是正确的呢？

原因是现在都是通过形式语言的方式来证明分布式算法的正确性。**形式语言证明有一个局限，它只能证明有限状态的情况。由于Raft算法涉及到无限种可能的情况，因此无法通过形式语言来证明正确性。**
<div><strong>精选留言（2）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg" width="30px"><span>tt</span> 👍（0） 💬（1）<div>Raft算法的状态，包括谁是主节点，节点的转态:主节点、从节点、候选节点，任期，日志的状态。

无限中状态是指在节点数很多时，状态数就无穷大了么？</div>2021-02-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/b2/e0/d856f5a4.jpg" width="30px"><span>余松</span> 👍（3） 💬（0）<div>共识算法没有定义所谓的正确性，但是有其他定义。
共识算法的特征：
* 协商一致性：所有节点都接受相同的决议
* 诚实性：也叫安全性，所有的节点不能反悔，节点对于一项提议不能有两次决定（全序广播支持） 
* 合法性：如果决定了值V，则V必须是某个节点所提出的 
* 可终止性*：节点不崩溃则最终一定可以达成某个节点所提议的V。 （Paxos由于活锁不一定满足）</div>2021-06-10</li><br/>
</ul>