你好，我是何辉。今天我们继续学习Dubbo拓展的第二篇，拦截扩展。

再次见到“拦截”功能，有没有熟悉的感觉，我们前面学过的“参数验证”“缓存操作”，都利用了过滤器特性，对你来说，使用过滤器来编码解决实际问题，应该不是什么难事了。

但是会用，并不代表能用好，很多人在遇到问题或接到新增的业务需求时，面临的常见问题是：是否真的需要使用过滤器？如何适当地利用过滤器进行扩展？

我们进入今天的学习，尝试回答这些问题。

## 四个案例

想回答第一个问题是否该用过滤器，理解清楚“拦截”到底能达到什么效果就很重要。

我们先看四个可以使用拦截的实际场景，分析一下“拦截”在其中的作用。

![图片](https://static001.geekbang.org/resource/image/f2/28/f2430eeeb12ebc7c4ed8780a11489f28.jpg?wh=1920x1289)

- 案例一，已有的功能在之前和完成时，都记录一下日志的打印。
- 案例二，查询发票详情功能，需要在查询之前先看看有没有缓存数据。
- 案例三，用户在进行支付功能操作时，需要增加一些对入参字段的合法性校验操作。
- 案例四，获取分布式ID时，需要增加重试次数，如果重试次数达到上限后，仍无法获取

结果，会在后置环节进行失败兜底逻辑处理，防止意外网络抖动影响正常的业务功能运转。

这四个案例，细心的你想必发现了一些共性，都在执行业务功能之前干一点事情，执行后又干一点事情。逻辑结构看起来是一段一段的，而且每段又各自承载着独立于整体的聚焦功能，功能的层次划分非常清晰。