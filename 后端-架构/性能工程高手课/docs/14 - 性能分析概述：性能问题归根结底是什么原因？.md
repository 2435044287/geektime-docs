你好，我是庄振运。

前面几讲，我们讨论了有关性能测试的内容，了解了各种测试的种类、测试的规划、测试的工具以及执行测试的经验教训。在整个性能优化的世界里，性能测试是基础，在这一基础上，我们才能对各种性能问题进行性能分析，并进行相应的性能优化。

从这一讲开始，我们来探讨一下常见的各种性能问题，和如何进行相应的性能分析。我们首先宏观地介绍一下性能的外部指标、内部瓶颈和资源制约，以及如何正确地进行性能分析。然后接下来的几讲分别重点讨论CPU、内存、存储和网络几个领域。

## 性能的外部指标

谈论应用程序系统和互联网服务的性能时，我们首先要清楚外部的性能指标是什么。最重要也最普遍的指标有三个：服务延迟（Service Latency）、吞吐率（Throughput）和资源使用率（Resource Utilization）。我们分别来看看。

### 服务延迟

**服务延迟**（或者叫访问延迟），指的是客户发出的请求被成功服务的时间。

虽然具体的定义和度量有很多种，比如有些度量只考虑系统本身的服务时间，而不考虑其它因素（比如网络传输时间）。但我个人坚持，这个指标是直接针对客户体验的，因此不能仅仅从自己的系统角度衡量，而必须是端到端的延迟度量（End To End, or E2E）。因为只有这样来定义这一指标，才能准确地抓住“外部性能”这一特点。
<div><strong>精选留言（7）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/13/de/d4/b83c4185.jpg" width="30px"><span>David.cui</span> 👍（1） 💬（1）<div>老师讲的十大性能瓶颈的那个图很好，但是太理论了。具体到某个操作系统中的时候，该怎样查看具体的性能值呢？</div>2020-03-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/53/db/858337e3.jpg" width="30px"><span>Ethan Liu</span> 👍（0） 💬（1）<div>老师，go语言有什么profiling工具？</div>2020-04-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/58/3b/22dbe7c3.jpg" width="30px"><span>LQQ</span> 👍（0） 💬（1）<div>老师，我有个问题，对于资源使用率的监控这块，我们公司现在用的是k8s，可能有十几台机器，这样的话要怎么监控？</div>2020-02-28</li><br/><li><img src="" width="30px"><span>15652790052</span> 👍（0） 💬（1）<div>老师，问几个问题：
对服务进行压测，那么压测的目标是什么？我理解的是尽可能让系统资源利用率高（如 cpu 80%），如果达不到就分析瓶颈。是这样的么？</div>2020-01-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/f3/44/e10d87c7.jpg" width="30px"><span>王治澎</span> 👍（3） 💬（0）<div>配上思维导图，整个知识树越来越高</div>2019-12-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/9a/89/babe8b52.jpg" width="30px"><span>A君</span> 👍（0） 💬（0）<div>影响性能的三个指标，延迟、吞吐率和资源使用率。延迟是用户的真实体感，吞吐量与硬件容量成正比，资源使用率则决定了软件能否达到理论吞吐量以及在高吞吐量下的延迟。性能问题本质上是缺资源的问题，在某个地方程序缺少某些资源导致它卡住了。</div>2021-03-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg" width="30px"><span>钱</span> 👍（0） 💬（0）<div>手动点赞“十大性能问题瓶颈图”，基本是这十个地方可能存在性能问题，那什么现象能表示具体问题出在哪里？以及怎么确认自己的猜想？怎么一步步抽丝剥茧的定位到问题？有点福尔摩斯的味道，元芳你怎么看？</div>2020-03-04</li><br/>
</ul>