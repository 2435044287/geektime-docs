你好，我是庄振运。

你一定有过在网页或者手机上下载照片的体验，如果数据传输太慢，那你的体验一定十分糟糕。你看，互联网实体之间的数据快速传输对用户体验至关重要。这里涉及到的其实就是网络传输问题。所以，今天我们就通过生产实践中的案例，来探讨一下互联网服务中的数据传输性能。

说到底，网络传输问题其实就分两种：

1. 数据根本没有传递；
2. 数据传送速度较慢。

“数据没有传递”虽然看起来更严重，但是相对“数据传送缓慢”来说，更容易判断和解决。所以，这一讲，我们就重点解决第二种问题。我们一起来看看，为什么网络传送速度会慢，在众多原因中怎么快速诊断出关键问题来，又该如何去解决。

造成网络传输缓慢的原因很多，我们这一讲，就是帮助你快速诊断问题出在哪里：是客户端，是服务器端，还是网络本身？在此基础上，你才能专门针对具体的领域继续分析。

## 为什么数据传输慢？

我们先看一下，都有哪些可能的原因会导致数据传输缓慢呢？在宏观上，这种问题的可能原因可以分为三种场景：

1. 客户端应用程序的原因；
2. 网络的原因；
3. 服务器应用程序的原因。

也就是说，可能是由于数据发送方过载，而没有向接收方发送数据；也可能是网络通道很慢；又或者是数据接收方的服务器太忙，从而无法从网络缓冲区读取数据。
<div><strong>精选留言（6）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/17/58/3b/22dbe7c3.jpg" width="30px"><span>LQQ</span> 👍（1） 💬（0）<div>老师说的任意指也包括零和非零吗？这一块有点懵，比如receiveQ是非0，sendQ是任意，如果是任意也就是说sendQ也可以有值，那怎么断定是数据消费太慢呢？</div>2020-05-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg" width="30px"><span>美妙的代码</span> 👍（0） 💬（0）<div>知道了问题 。怎么解决啊？</div>2024-07-05</li><br/><li><img src="" width="30px"><span>Geek_8363c3</span> 👍（0） 💬（0）<div>ethtool是个好东西</div>2021-11-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/ce/80/f9f950f1.jpg" width="30px"><span>张翠山</span> 👍（0） 💬（0）<div>如果判断出服务端或者客户端慢了。怎么定位慢的原因呢。</div>2020-05-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg" width="30px"><span>钱</span> 👍（0） 💬（0）<div>网络通信是互联网技术的底座，由于涉及的东西较多，出现问题也不好排查，老师把她抽象成了三部分：发送方、传输方、接收方，问题也主要在这三者之间，发生慢？传输慢？接收慢？具体是谁的问题，可以通过netstat&#47;ss命令来观察发送队列和接收队列的情况来判断，不过即使判断出来了，也不太好解决，只能划分一下责任，有时通过方法监控的调用链就能搞清楚，不过网络是基础设施这个存在问题，处理的话需要升级到部门或公司的层面。</div>2020-03-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg" width="30px"><span>我来也</span> 👍（0） 💬（0）<div>以前只知道通过netstat 的sendq recvq看是否发生了拥塞，先不到老师结合两边的socket状态来判断是哪方的原因。学习了！
netstat经常使用，倒是ss用的不太多。</div>2020-02-06</li><br/>
</ul>