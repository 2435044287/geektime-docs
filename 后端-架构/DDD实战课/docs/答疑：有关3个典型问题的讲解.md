你好，我是欧创新。

截至今天这一讲，我们的基础篇和进阶篇的内容就结束了。在这个过程中，我一直有关注大家提的问题。那在实战篇正式开始之前啊，我想针对3个比较典型的问题，做一个讲解，希望你也能同步思考，调动自己已学过的内容，这对我们后面实战篇的学习也是有一定帮助的。

**问题1：有关于领域可以划分为核心域、通用域和支撑域，以及子域和限界上下文关系的话题，还有是否有边界划分的量化标准？**

我在 [\[第 02 讲\]](https://time.geekbang.org/column/article/149945) 中讲到了，在领域不断划分的过程中，领域会被细分为不同的子域，这个过程实际上是将问题范围不断缩小的过程。

借用读者“密码123456”的总结，他认为：“对于领域问题来说，可以理解为，对一个问题不断地划分，直到划分为我们熟悉的、能够快速处理的小问题。然后再对小问题的处理排列一个优先级。”

这个理解是很到位的。在领域细分到一定的范围后，我们就可以对这个子域进行事件风暴，为这个子域划分限界上下文，建立领域模型，然后就可以基于领域模型进行微服务设计了。

虽然DDD没有明确说明子域和限界上下文的关系。我个人认为，子域的划分是一种比较粗的领域边界的划分，它不考虑子域内的领域对象、对象之间的关系和结构。子域的划分往往按照业务阶段或者功能模块边界进行粗分，其目的就是为了让你能够在一个相对较小的问题空间内，比较方便地用事件风暴来梳理业务场景。
<div><strong>精选留言（28）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/4b/2f/186918b4.jpg" width="30px"><span>C J J</span> 👍（19） 💬（9）<div>对失血，贫血，充血解释得很不错的文档。https:&#47;&#47;www.infoq.cn&#47;article&#47;alibaba-freshhema-ddd-practice</div>2020-01-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/db/c3/e11adfe8.jpg" width="30px"><span>hunter</span> 👍（19） 💬（10）<div>基础层依赖领域层。能录个例子吗？如何反转依赖的，还是不明白</div>2019-11-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/fe/1f/6a3f2abb.jpg" width="30px"><span>小超人</span> 👍（12） 💬（3）<div>“依赖倒置”不看定义我还一直因为是基础层依赖领域层。看了定义才知道，原来是基础层和领域层互相不依赖，而是共同依赖一组抽象接口。我觉得“面向接口编程”听起来更舒服。</div>2020-05-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/98/b8/e4f01f2c.jpg" width="30px"><span>Paul</span> 👍（8） 💬（2）<div>老师，您好！有一些设计实现上的疑问：
领域服务的CRUD是不是都是操作聚合根或整个实体对象，比如我只想根据ID判断记录是否存在，或者返回个别字段，需要返回整个实体对象吗？</div>2019-11-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg" width="30px"><span>南山</span> 👍（8） 💬（1）<div>老师，实体内可以调用他所在聚合的仓储吗？</div>2019-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f7/95/42e16e49.jpg" width="30px"><span>骆驼1089</span> 👍（6） 💬（3）<div>老师，有个问题请教一下，充血模式的优势是什么，比现有的贫血模式的优势是什么？</div>2020-04-06</li><br/><li><img src="https://wx.qlogo.cn/mmopen/vi_32/icRpVCFkicVnBiatPIZy4uiaoiba8ZODxclF00R6Tphsn55kdMtBYJtialcokIu3f4qJzx7QQR98ibVH4ndZ48E2o9vRQ/132" width="30px"><span>Jade</span> 👍（4） 💬（6）<div>事件总线 实现思路？用到什么技术或来源组件？还是说事件总线就是消息队列呢</div>2019-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/db/c3/e11adfe8.jpg" width="30px"><span>hunter</span> 👍（2） 💬（1）<div>微服务内不使用事件总线，如何保证两个聚合操作的一致性？</div>2019-11-07</li><br/><li><img src="" width="30px"><span>秋雨</span> 👍（1） 💬（2）<div>老师你好，我有一个问题想问下：
现有事件风暴再有领域模型还是先划分好领域，再通过事件风暴建立领域模型？</div>2020-03-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/c1/60/f5439f04.jpg" width="30px"><span>Geek_dn82ci</span> 👍（1） 💬（1）<div>子域划分的过程更偏业务侧工作，然后基于每个子域进行事件风暴（讨论）的时候，就是在梳理领域对象的过程，且发掘领域对象之后就可以分清楚哪些是值对象，哪些是实体哪些是聚合根？是这样理解吗</div>2020-02-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/8a/8c/07dd8832.jpg" width="30px"><span>夙梦流尘</span> 👍（1） 💬（2）<div>有个问题想请教下。现在A聚合里面有B、C实体，是通过A的主键去关联的（我知道这样不好但是目前老项目就是这么搞的，重新定义实体标识风险有点大）。导致现在我用工厂创建A聚合的话，要先把A的数据落地，才能拿到A的主键，然后才能创建A聚合里的BC实体。这样的话只能 1.在工厂里就把A落地，然后填充BC实体返回完整聚合。2. 工厂只返回A聚合，然后在填充BC实体。这样工厂就没返回一个完整聚合。
这两种我觉得都不好，麻烦指导下</div>2019-11-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/ea/19/14018371.jpg" width="30px"><span>瓜瓜</span> 👍（1） 💬（5）<div>使用充血模型，比如RPC的接口包，接口包的实体为充血模型，该实体的很多功能需要引用很多第三方jar包，这样会不会导致接口包很沉重，比如说一个图片上传服务，客户端和服务端交互是通过图片实体来进行交互的，而图片的下载和上传是属于图片实体的内部功能，这样图片实体就会引用apahce.httpclient的很多jar包，该怎样解决这个问题呢</div>2019-11-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/9d/a4/c8d7ce59.jpg" width="30px"><span>Hans</span> 👍（0） 💬（1）<div>聚合之间如果存在聚合根吗，如果业务交互只需要属性值，是否可以直接返回属性值。</div>2020-07-29</li><br/><li><img src="" width="30px"><span>moming</span> 👍（0） 💬（1）<div>微服务能不能共用一个业务数据库。</div>2020-07-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/aa/65/4cf4470f.jpg" width="30px"><span>Tumayun</span> 👍（0） 💬（1）<div>太过抽象了，可以多举例，举一些大家都容易理解的实例</div>2020-06-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/7a/3c/87e015f8.jpg" width="30px"><span>堵车</span> 👍（0） 💬（2）<div>基础篇草草看了一遍，有挺多词汇无法理解，需要重新看一遍，还是继续看实战篇，然后再二刷？对于事件总线这个东西不太理解。不知道大家是怎么阅读这个专栏的</div>2019-12-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/c9/20/e4f1b17c.jpg" width="30px"><span>zj</span> 👍（0） 💬（4）<div>提个问题，接口层是DTO，应用层是DO，那在接口层将DTO将DTO转换成DO是否会用到工厂模式来转换实体，工厂依赖仓储查询实体依赖数据。因为有些时候DTO要想转换成DO可能需要通过仓储来查询依赖属性的吧？</div>2019-11-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/84/49/47d48fd0.jpg" width="30px"><span>观弈道人</span> 👍（0） 💬（3）<div>事件风暴与头脑风暴究竟啥区别？</div>2019-11-21</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoOGZ6lbHiboIZMN9USbeutnmCWBahVLtSlKlIENKvrZQCUQzpzeZQOxTntIkBUeDk6qZUPdqmfKrQ/132" width="30px"><span>宝宝太喜欢极客时间了</span> 👍（0） 💬（2）<div>仓储层跟传统的dao层感觉没啥区别？</div>2019-11-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg" width="30px"><span>南山</span> 👍（0） 💬（1）<div>工厂创建出实体或者是聚合跟之后再加到仓储中吗(持久化)？</div>2019-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/f9/2f/01b32495.jpg" width="30px"><span>小孩</span> 👍（0） 💬（1）<div>之前提过这个问题，基础依赖领域的仓储接口，领域不还得依赖基础层的通用组件吗？这不循环依赖了吗。</div>2019-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg" width="30px"><span>吃饭饭</span> 👍（44） 💬（7）<div>事件风暴？为什么一有关键词总会出现这个，它不就是一个集中讨论定需求的动作？陌生词汇太多，如果夹杂一些白话最好了，感觉这一套字眼真的是越说越迷糊了，DDD 我感觉说白了就是一种划分手段，核心最终都会落在为服务上</div>2019-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg" width="30px"><span>密码123456</span> 👍（4） 💬（0）<div>感觉有点像，设计模式中核心的一句话。封装变化。变化是无穷的，但是我们尽可能的把，变化引起的改动降到最小。</div>2019-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/64/50/a54f0907.jpg" width="30px"><span>祥敏</span> 👍（3） 💬（3）<div>您好，领域层提供仓储接口，基础层实现仓储接口，依赖倒置的设计是非常好的，能够拆除领域层对基础层的依赖。
上层向下依赖领域层，领域层通过依赖倒置，让基础层也依赖领域层，这样就实现了领域层为核心的设计理念。
领域驱动设计提出了全新的设计思路，讲述偏抽象，重点在如何落地，期待实战篇。</div>2019-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/f5/90/2caa07d0.jpg" width="30px"><span>Geek8815</span> 👍（0） 💬（0）<div>欧老师，倒数第三段的这句话”不会出现导致聚合之间数据不一致的情况，就可以不使用事件总线“能不能再解释下，我理解是“不会出现导致聚合之间数据不一致的情况，就可以使用事件总线“</div>2021-07-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg" width="30px"><span>剑八</span> 👍（0） 💬（0）<div>领域就是一个组织为了达到某个业务目的，而做的一系列业务活动的集合。
划分子域则是为了能够从组织架构上以及软件设计上能够更加的内骤与解耦。方便进行维护。
而子域中更细分的单位是聚合，一个聚合代表了若干能够协同工作的实体集合，一个聚合所做的事情是比较聚焦的。
在领域驱动设计中，对于一个未知领域往往是采用从下到上的设计方法，即先根据用例，场景分析得出实体，值对象然后划分聚合以及子域，再组合子域成为一个域。</div>2020-05-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/1e/f9/bfb54326.jpg" width="30px"><span>狮锅艺</span> 👍（0） 💬（0）<div>学习打卡</div>2020-03-17</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKZ16iaIia0029oI1Qh5NicibpbTiaBAaCOPYXoLplKHr6uQ2rSVxPZanBvpMcL2NuhwKQYCFnaHP5tedQ/132" width="30px"><span>FIGNT</span> 👍（0） 💬（1）<div>讲的很精简，把《实现领域驱动设计》的主要内容讲的很清楚了。但是还是很抽象的，关键还是要实战，加深理解</div>2019-11-06</li><br/>
</ul>