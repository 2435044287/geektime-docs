你好，我是轩脉刃。

上一节课分析了一下问答网站的需求，并且搭建起来了前端和后端框架，我们就来填充这个网站的具体内容。今天要做的是用户模块的开发。用户模块基本是所有系统的基础模块，所以如何开发设计用户模块，希望你一定好好掌握。

## 模块设计

简单回顾一下用户模块的需求分析，分为两个部分，用户注册和用户登录。我们先细化一下每个部分并且定义好它们的接口。

### 用户注册

首先是用户注册，它的时序图再放一下：  
![](https://static001.geekbang.org/resource/image/4b/12/4b26edc5fa6177ab07113d542cfdda12.png?wh=1362x1216)

其中包含两个页面，第一个页面是预注册过程页面，用户在这个页面中输入用户名、密码、邮箱。这个页面的路径我们设置为/register。

![图片](https://static001.geekbang.org/resource/image/53/b3/53175c922fef8a06f0186b369b54abb3.png?wh=1920x674)

输入用户名密码之后，它会发送一个邮件到用户的邮箱，在这个邮件中会带着一个确认注册的链接，只有通过点击这个链接，你才算完成验证。发送邮件的邮箱，我使用自己注册的一个126邮箱，最终邮件内容效果是这样的：

![图片](https://static001.geekbang.org/resource/image/ca/cd/ca9872f2c4dc901337956539bab71dcd.png?wh=1200x324)

用户点击/user/register/verify 链接之后，才算正式注册完毕，接着会引导用户进入登录流程。

所以我们梳理一下，预注册这个过程前端和后端一共进行了两次交互，也就是说需要两个接口。

- /user/register 预注册接口

用户在这个接口中带着用户名、密码和邮箱到后端。一般这种注册类接口我们会选择使用POST方法，它的参数为 username、password、email 三个字段。
<div><strong>精选留言（2）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/1f/26/34/891dd45b.jpg" width="30px"><span>宙斯</span> 👍（0） 💬（1）<div>看项目情况，老项目或迭代项目并没有做过多考虑，model层就直接和数据库和业务服务层打交道，写业务时会做过多的传输数据的转化。
不复杂的新项目会做基础层，存储层，服务层，聚合层，领域层，访问层，其中通常存储层，服务层，领域层会给出传输对象，不过这也不绝对视情况而定。</div>2021-12-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/3e/45/3879f334.jpg" width="30px"><span>Tron</span> 👍（0） 💬（0）<div>登录注册敏感信息不用加密码？</div>2023-05-27</li><br/>
</ul>