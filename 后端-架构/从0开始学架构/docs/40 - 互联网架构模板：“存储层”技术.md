很多人对于BAT的技术有一种莫名的崇拜感，觉得只有天才才能做出这样的系统，但经过前面对架构的本质、架构的设计原则、架构的设计模式、架构演进等多方位的探讨和阐述，你可以看到，其实并没有什么神秘的力量和魔力融合在技术里面，而是业务的不断发展推动了技术的发展，这样一步一个脚印，持续几年甚至十几年的发展，才能达到当前技术复杂度和先进性。

抛开BAT各自差异很大的业务，站在技术的角度来看，其实BAT的技术架构基本是一样的。再将视角放大，你会发现整个互联网行业的技术发展，最后都是殊途同归。

如果你正处于一个创业公司，或者正在为成为另一个BAT拼搏，那么深入理解这种技术模式（或者叫技术结构、技术架构），对于自己和公司的发展都大有裨益。

互联网的标准技术架构如下图所示，这张图基本上涵盖了互联网技术公司的大部分技术点，不同的公司只是在具体的技术实现上稍有差异，但不会跳出这个框架的范畴。

![](https://static001.geekbang.org/resource/image/60/91/603bfbe7aee29228b4bc3972ac874991.jpg?wh=4377%2A2340)

从本期开始，我将逐层介绍每个技术点的产生背景、应用场景、关键技术，有的技术点可能已经在前面的架构模式部分有所涉及，因此就不再详细展开技术细节了，而是将关键技术点分门别类，进而形成一张架构大图，让架构师对一个公司的整体技术架构有一个完整的全貌认知。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/c3/ab/c2ca35e6.jpg" width="30px"><span>名贤集</span> 👍（269） 💬（13）<div>这篇文章写的很好，但是参考了2016年的一片文章太多内容，请慎重引用其它文章内容</div>2018-07-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/de/17/75e2b624.jpg" width="30px"><span>feifei</span> 👍（66） 💬（1）<div>我觉得是几个方面导致的问题：
1，存储平台的开发成本高，由于存储平台是核心的平台，高可用，高性能是必须的，这就导致需要经验丰富的高级工程师来开发。而云平台作为服务提供商，有能力开发出来存储平台。
2，需要使用存储平台的公司不多，而且一般是大型的公司，小公司的业务规模都不大，对于存储平台的需求基本不高，云平台面向的是所以用户，众口难调，必然提供基础服务
3，云平台的存储平台是收费的，能为企业带来经济效益，而开源的存储平台，投入巨大，能使用的却很少，也就失去了意义

总结一下，云平台的存储平台，面向的是所有用户，包括大公司，有这方面的需求，而且是收费的，能够为平台带来收入；开源存储平台，服务的用户很少，投入巨大，所以没有</div>2018-07-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/02/3b/b4a47f63.jpg" width="30px"><span>only</span> 👍（36） 💬（2）<div>架构师需要懂这么多技术吗？这是一件非常困难的事，特别在中小公司，员工都是当畜生用的，没有那么多学习时间</div>2018-11-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/6a/a8/ee414a25.jpg" width="30px"><span>公告-SRE运维实践</span> 👍（17） 💬（1）<div>上云方案对于很多小型公司来说，是一种最简单的方式了，成本低，性能可用性都能达到很高的水平。而开源的平台存储受限于几个条件 1 涉及到的存储太多，开发测试都需要很大的人力 2 小公司没条件采用，大公司有自己的，使用的人不多，不能快速迭代发展 3 没有大型公司的参与，无法推广使用</div>2018-07-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f5/0a/077b9922.jpg" width="30px"><span>krugle</span> 👍（14） 💬（2）<div>可以讲下服务器容量规划设计吗</div>2018-07-29</li><br/><li><img src="" width="30px"><span>Geek_88604f</span> 👍（12） 💬（2）<div>        存储平台都是各大互联网公司根据自身的业务发展特点、业务复杂度、业务规模量身打造的，逐步演进来的。其特点是功能强、规模大、复杂度高、有很高技术门槛。即使开源出来也几乎没有人用，小公司用不了（没有发展到那个阶段），大公司不会用（因为业务特点不一样，虽然有规模有技术）
        小公司没有能力用不代表他们不想用。这些小公司如果能在底层存储方面得到支持，一方面可以降低业务开发的复杂度加快业务上线的时间，另一方面能保证底层存储的稳定性，保证良好的质量口碑，对业务发展还是很有好处的。
        对于大公司来说放着这么优秀的存储平台技术不去变现那也是很大的浪费。况且大规模的存储平台到云华的距离已经很近了。有需求就有供给，如果将存储平台技术以云服务的形式开放出去，一方面推动了中小公司的发展，另一方面自己也赚得盆满钵溢。</div>2019-10-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/e8/e9/bc6b56c0.jpg" width="30px"><span>吕浩</span> 👍（9） 💬（1）<div>存储平台虽然是软件系统，也要基于大量的硬件来实现。小规模公司没有这个硬件规模，选择云存储会降低成本。</div>2018-07-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg" width="30px"><span>钱</span> 👍（6） 💬（2）<div>华仔，感觉这是扩展式介绍，不够深入和细致呀！比如：现在要设计一个小文件存储系统，大概5亿+个小文件，其实学完还是不知道具体该怎么思考？怎么设计？怎么存储文件？怎么存放性能最佳？一台服务器存不下怎么水平扩展？查询时怎方便查找？怎么迅速的查找？文件之间是否存在结构关系？😀
信息的存储，不管信息是以什么面相示人，核心在怎么存？怎么查？不同的信息有不同的结构，判断出合适的存储结构，这个很关键呀!下面就是，怎么再利用他方法加快存储的性能，如果单机容量到了瓶颈，以什么方式扩展才比较好？这些也很关键，我想听老师讲讲这些，学完后自己能设计一下，玩一把。</div>2019-09-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/99/84/73fde23a.jpg" width="30px"><span>Kim</span> 👍（5） 💬（1）<div>请问老师，数据库的分布式与分布式数据库有什么区别没有</div>2018-11-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/47/a0/f12115b7.jpg" width="30px"><span>Sam.张朝</span> 👍（4） 💬（1）<div>存储发展到平台，需要体量很大的公司，大部分公司都不能到这样的量级。
就算开发出来，用户少，成本高，收益几乎没有。</div>2019-09-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/5b/fc/da52e7df.jpg" width="30px"><span>Ryan Feng</span> 👍（3） 💬（1）<div>这就和只有卖电池的没有卖电厂的，一般公司只需要电池，大厂才需要柴油发电机组，云服务才需要电厂</div>2020-11-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/15/03/c0fe1dbf.jpg" width="30px"><span>考休</span> 👍（3） 💬（1）<div>对于90%以上的公司来说，存储问题可以直接通过上云来解决，最省时、低成本、高效的做法。</div>2019-08-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/a8/1b/ced1d171.jpg" width="30px"><span>空档滑行</span> 👍（2） 💬（1）<div>1、云计算的普及应该多少影响了存储平台的开源，现在很多中型互联网公司业务跑在云上
2、存储平台确实是需要公司达到一定体量才会有需求，用户量是有限的，开源项目也要考虑开发人员的参与愿意</div>2018-07-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/ce/3d/385b8263.jpg" width="30px"><span>星火燎原</span> 👍（2） 💬（1）<div>存储平台的开源方案对于一般公司来说量级达不到所以很少公司去设计和开源，但是市面上还是有很多大公司的论文可以参考</div>2018-07-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/01/98/d1180ff0.jpg" width="30px"><span>GeekCLei</span> 👍（1） 💬（1）<div>请问大文件（非结构化）和大数据（结构化）的处理有什么差异和联系呢？谢谢您～</div>2021-10-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/e7/f0/d0bf3a5f.jpg" width="30px"><span>Regis</span> 👍（1） 💬（1）<div>现在好多公司是不是都使用对象存储作为视频和照片的存储</div>2020-03-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/ef/38/23d55c3a.jpg" width="30px"><span>陈振华</span> 👍（1） 💬（1）<div>京东的JSF不是存储系统，是类似Dubbo的服务框架</div>2019-12-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/02/59/989f65c8.jpg" width="30px"><span>jacky</span> 👍（1） 💬（1）<div>不太理解，访问日志、操作日志、用户轨迹会有图片大吗？为什么是大文件？</div>2019-05-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/18/59/daeb0b6c.jpg" width="30px"><span>日光倾城</span> 👍（1） 💬（1）<div>个人感觉需要做到存储平台这个级别的公司不多，因而对开源的要求不会那么强烈</div>2019-05-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/60/07/c2738be7.jpg" width="30px"><span>Sylar.</span> 👍（1） 💬（1）<div>互联网行业的大文件主要分为两类：一类是业务上的大数据，例如 Youtube 的视频、电影网站的电影；另一类是海量的日志数据，例如各种访问日志、操作日志、用户轨迹日志等。和小文件的特点正好相反，大文件的数量没有小文件那么多，但每个文件都很大，几百 MB、几个 GB 都是常见的，几十 GB、几 TB 也是有可能的，因此在存储上和小文件有较大差别，不能直接将小文件存储系统拿来存储大文件。

考试您好，这里不太明白，大数据就等于大文件吗？</div>2018-12-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/95/05/1b5cbc41.jpg" width="30px"><span>楼剑波</span> 👍（1） 💬（1）<div>淘宝的存储不是OSS吗？</div>2018-09-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/d4/c2/910d231e.jpg" width="30px"><span>oddrock</span> 👍（1） 💬（1）<div>为什么只有存储平台，没有计算平台，计算特别是离线、流式、即席、模式识别这些计算能够平台化，作为服务统一提供给应用层吗</div>2018-08-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/c2/1f/343f2dec.jpg" width="30px"><span>9527</span> 👍（1） 💬（1）<div>资源动态按需动态分配：例如同一台 Memcache 服务器，可以根据内存利用率，分配给多个业务使用。
这段话没理解，是要在一台机器上启动多个实例，然后给不同业务使用嘛？
现在有在存储上做虚拟化的嘛，感觉这样分配资源，管理都很方便，不知道实际可不可行</div>2018-07-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg" width="30px"><span>小喵喵</span> 👍（1） 💬（1）<div>分布式是多台数据库服务器，每台服务器的数据都一样，集群也是多台服务器，每台服务器的数据也一样，还有冗余。这刚到3个有什么区别呢？理解不了，请华哥举例解析一下。谢谢</div>2018-07-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/22/68/06/e74b5675.jpg" width="30px"><span>存在</span> 👍（0） 💬（1）<div>想问下华仔老师，本篇提到的各个分层和各个平台技术之间的关系是什么样的？</div>2024-08-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/25/68/0a/6c8aecab.jpg" width="30px"><span>月光宫羽</span> 👍（0） 💬（1）<div>
存储平台的特点，文章中作者已经提到：1、通过集中管理能够大大提升运维效率；2、大大提高资源利用率，减少成本；基于此2点，可以肯定的是存储平台是规模化和复杂度发展的结果。其次，开源项目的参与人员，一般是软件爱好者或以大企业供职的开发人员，面对非常大的资源投入，软件爱好者鞭长莫及，大企业断不会投入大量人力、财力将其开源出来供别人使用，还有一点大企业参与了开源项目当然是想做一款和自己业务契合度高的产品，而实际的主导权并不是一家独大。产品需要变得得包罗万象，更加增加了复杂度。大企业一般都会自己基于开源产品二次封装，而中小型企业即便需要都会考虑云产商的产品。云产商之所以提供存储平台方案，一方面是它的受众多是tob，有市场需求；另一方面将技术变现是内部需要，比如阿里的CDN据说是因为双十一才诞生的，那么过了双十一，那这些工程师的价值如何体现呢？当然是将其发展面向市场的业务，毕竟赚钱才是硬道理，其它都是浮云。</div>2022-11-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/16/dc/e860a835.jpg" width="30px"><span>肖二郎</span> 👍（0） 💬（1）<div>说个问题，视频数据也是小文件，看起来一个电影有几个G，实际上都是切成一个个小视频，也是按照小文件存储的。</div>2022-07-05</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132" width="30px"><span>梦倚栏杆</span> 👍（0） 💬（1）<div>平台咋开源，最后一个问题给问懵逼了，看来需要回过头再看看</div>2021-04-15</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epmAicDUiaUdtLhVwSs6fT0yx69ibWy6ia46ZD4vblGtyee8QFz71icKZJkzccAFG3zHnMngSz7WeGBtKw/132" width="30px"><span>小神david</span> 👍（0） 💬（1）<div>小文件存储中图片和文字应该可以拆开吧，图片放到对象存储中。</div>2021-03-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/8d/69/e9886e74.jpg" width="30px"><span>俊刚</span> 👍（0） 💬（1）<div>老师好！以互联网业务为例，多大规模访问量需要分库分表，多大规模访问量需要分布式数据库和存储，有没有衡量标准？谢谢！</div>2020-04-24</li><br/>
</ul>