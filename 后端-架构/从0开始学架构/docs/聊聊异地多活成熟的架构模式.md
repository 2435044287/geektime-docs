你好，我是华仔。

2018年专栏推出的时候，关于异地多活架构这部分，我们讲解了物理部署上的三种模式，分别是同城异区、跨城异地和跨国异地，也详细介绍了根据业务特点设计异地多活架构的4个步骤和4大技巧。6年时间过去了，业界相关技术在不断发展，异地多活架构设计也逐渐成熟。

基于此，这一节我们就一起来看一下目前业界成熟的异地多活架构模式，包括业务定制型、业务通用型和存储通用型三种。

## 异地多活架构总体思路

在详细介绍三种异地多活架构模式之前，我们先来整体看看异地多活架构设计的思路。异地多活架构虽然复杂，不同的架构模式用到的技术和方案也不尽相同，但总体来说，异地多活架构设计的思路是相通的，基本都可以总结为下图：

![](https://static001.geekbang.org/resource/image/52/b7/52f27975489248f3c8ab836d0a6e91b7.jpg?wh=2943x1653)

不管我们采取什么样的技术和手段来实现异地多活架构，总体上都可以把异地多活架构设计分为三部分：网络架构、计算架构和存储架构。我们简单介绍下：

- 网络架构：系统如何调度流量，包括网络流量调度和业务流量调度。其中，网络流量调度采用传统的DNS/GSLB等设备来实现将请求流量分配到多个异地机房，业务流量调度需要基于业务规则（例如用户归属机房）来将请求路由到指定的机房。
- 计算架构：系统如何冗余计算资源，是静态分配（比较浪费钱），还是动态生成（实现比较复杂，可能有风险）。
- 存储架构：关键业务数据如何同步，如何保证一致性，如何处理故障时数据不一致对业务的影响。
<div><strong>精选留言（1）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/1a/9d/81/d748b7eb.jpg" width="30px"><span>千锤百炼领悟之极限</span> 👍（0） 💬（1）<div>思考题，因为短视频不需要强一致性，首先排除存储通用型。用户数量是1亿，业务有优先级，存在核心业务，觉得使用业务定制型。</div>2025-01-31</li><br/>
</ul>