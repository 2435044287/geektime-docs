今天我们将进入专栏最后一个模块，我会和你聊聊下一代微服务架构Service Mesh。说到Service Mesh，在如今的微服务领域可谓是无人不知、无人不晓，被很多人定义为下一代的微服务架构。那么究竟什么是Service Mesh？Service Mesh是如何实现的？今天我就来给你解答这些疑问。

## 什么是Service Mesh？

Service Mesh的概念最早是由Buoyant公司的CEO William Morgan在一篇[文章](https://blog.buoyant.io/2017/04/25/whats-a-service-mesh-and-why-do-i-need-one/)里提出，他给出的服务网格的定义是：

> A service mesh is a dedicated infrastructure layer for handling service-to-service communication. It’s responsible for the reliable delivery of requests through the complex topology of services that comprise a modern, cloud native application. In practice, the service mesh is typically implemented as an array of lightweight network proxies that are deployed alongside application code, without the application needing to be aware.
<div><strong>精选留言（20）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/d4/c2/910d231e.jpg" width="30px"><span>oddrock</span> 👍（18） 💬（2）<div>集中式的方式就类似esb模式了，缺点就是：
1、本地调用变成了远程调用，开销变大。
2、无法采用iptables这样的拦截技术实现对服务的透明无感知的调用和转发。
3、集中后可能存在网络和性能瓶颈。

但这样做也不是一无是处，在一些对微服务治理平台的资源占用要求不能太多，且需要对微服务集中管控的情况下，是不是也可以尝试啊。</div>2018-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/03/10/26f9f762.jpg" width="30px"><span>Switch</span> 👍（11） 💬（1）<div>sidecar代理模式本身定义就是作为轻量级代理，其一般是不支持高可用特性的。
部署方式也是和应用程序一起部署在父容器中，提供一些支撑性 服务。</div>2018-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg" width="30px"><span>李二木</span> 👍（5） 💬（1）<div>老师你看了github的事故说明后，有什么感想呢？</div>2018-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/3c/fa/e2990931.jpg" width="30px"><span>文敦复</span> 👍（3） 💬（1）<div>Control Plane是一个集中式的处理单元，所有side car 共享他？每次调用都需要cp来做决断？</div>2018-11-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg" width="30px"><span>每天晒白牙</span> 👍（2） 💬（1）<div>就像大家所说的，一个sidecar有单点问题。同时sidecar与服务一同部署可以减去网络开销，如果都调用同一个sidecar增加了网络开销。</div>2018-11-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/42/76/256bbd43.jpg" width="30px"><span>松花皮蛋me</span> 👍（2） 💬（1）<div>service mesh是长连接的吗</div>2018-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/ee/53/b8fe4560.jpg" width="30px"><span>欧嘉权Felix</span> 👍（2） 💬（2）<div>唯品会的service mesh实践也很优秀</div>2018-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/d3/cb/f8157ad8.jpg" width="30px"><span>爱吃回锅肉的瘦子</span> 👍（1） 💬（1）<div>第一点，是单点故障，第二点是为了实现负载均衡（个人猜想）第三点多个实例可以用来定位每一个服务？第四点不同实例可以针对性为该服务定制请求，第五点让不同系统不同的标准统一，方便调用。</div>2018-11-06</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/wBibtTTkiaGtcJ3qBeG4BnB4MmaurYf8hZTrXiczmvLHlRrqxJicRaoQPAZ0vw9HHd7yxDH27TLCzBQqqOqyGukw1g/132" width="30px"><span>gen_jin</span> 👍（1） 💬（1）<div>回答老师的问题:1.有单点问题 2.多一跳有性能开销 3.配置麻烦</div>2018-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg" width="30px"><span>南山</span> 👍（1） 💬（1）<div>一个sidercar存在单点故障隐患
有时候需要对服务提供者或服务提供者进行个性化配置，一个sidercar不如多个sidercar方便
集中部署sidercar更有可能出现性能瓶颈，如单个服务流量或者访问量巨大时会不会拖慢整体
暂时只能想到这些不知道对不对的点</div>2018-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/69/4d/81c44f45.jpg" width="30px"><span>拉欧</span> 👍（1） 💬（1）<div>Service mesh要求sidecar是轻量级的代理，这表示sidecar不具备高可用特性，如果一个sidecar代理多个实例，就会出现单点问题，尤其在流量高峰期，一旦sidecar挂了，一群服务都不能用了。
</div>2018-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/3c/fa/e2990931.jpg" width="30px"><span>文敦复</span> 👍（0） 💬（1）<div>Control Plane的作用怎么和企业服务总线这么相似？企业服务总线多了一个流量流转，而Service Mesh中请求是先通过CP选择后，由Sidecar自己调用，这点不同？</div>2018-11-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/7d/da/780f149e.jpg" width="30px"><span>echo＿陈</span> 👍（0） 💬（1）<div>集中起来不就成了网关了嘛……
不对，网关只关心入请求不能对发出的请求加工</div>2018-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/ef/a2/6ea5bb9e.jpg" width="30px"><span>LEON</span> 👍（0） 💬（1）<div>老师想问下Service mesh做负载均衡具体是如何实现的？如何保证每个pod链接是均衡的。是不是需要通过部署ingress给每个pod里的sidecar做负载均衡？</div>2018-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/59/66/39eeb3f9.jpg" width="30px"><span>Cain</span> 👍（4） 💬（0）<div>一个sidecar有单点故障问题。那一个cp还是有单点故障问题啊？这个作者是怎么考虑的？</div>2019-03-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/18/f3/cd07e64c.jpg" width="30px"><span>lujg</span> 👍（2） 💬（1）<div>在现有的Istio模型中，sidecar是与服务共享网络配置，每个服务有一个单独的sidecar。那是否可能将side car部署为一个单一的pod，但是与服务处于同一node上，这样是否可以多个service 共享一个sidecar（并且由于处于同一node上网络延迟不会有明显增加）？请问一下为什么没有选择这种方案？</div>2019-02-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg" width="30px"><span>亚林</span> 👍（1） 💬（0）<div>集中部署起来风险太高，集中部署也就回到原来都老路上面去了，无法解决可用性问题</div>2019-06-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/fd/58/1af629c7.jpg" width="30px"><span>6点无痛早起学习的和尚</span> 👍（0） 💬（0）<div>近几年一直都在说 Service Mesh，今天看了这个文章，立马懂了这个东西是啥了，Service Mesh 解决的问题是什么</div>2024-05-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/a2/54/49dfb810.jpg" width="30px"><span>宵练2233</span> 👍（0） 💬（0）<div>service mesh的思路和Data Distribution Service相似度好高，DDS的出现提高了并行异构系统的可靠性和易用性。不过dds主要用在无人车、飞机、火箭等mission-critical系统中。</div>2021-08-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/53/ca/44088dd0.jpg" width="30px"><span>花生</span> 👍（0） 💬（0）<div>有点类似区块链的本地簿记功能。每个单体解决各自的问题。</div>2019-01-16</li><br/>
</ul>