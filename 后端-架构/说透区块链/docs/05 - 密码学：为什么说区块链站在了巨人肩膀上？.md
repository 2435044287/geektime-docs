你好，我是自游。

在数字社会的今天，我们的工作生活离不开密码学，可以说离开密码学，我们就像是在网络世界中裸奔，毫无隐私可言。然而普通大众可能对密码学知之甚少，它就像是一位低调的守护者，默默维护着网络世界的安全。

区块链中也大量使用了密码学算法，前面课程里我们就多次提到过。比如哈希算法以及区块链存储中讲过的交易签名，它们都属于密码学算法。那今天这一讲，我就为你详细讲讲区块链中常用到的密码学算法。

## 密码学与区块链

在深入密码学算法的学习之前，我想先为你理清密码学与区块链的关系。中本聪在比特币白皮书中开篇就说，比特币是基于密码学构建的去信任数字货币。我认为他把密码学与区块链的关系说得很清楚，**密码学是因，区块链是果**。

怎么理解他们之间的这种因果关系呢？可能有的同学会认为是区块链需要有可追溯，不可篡改等特性，所以中本聪才设计了几种密码学算法去支撑他的构想。但这是完全错误的，属于颠倒黑白的想法。

密码学是先于区块链产生的基础学科，有完备的理论及技术体系。是中本聪及其先行者们在理解及运用密码学的过程中，看到了基于密码学创造数字货币的可能性。正因为哈希算法有校验数据完备性的能力，中本聪才会想到利用区块哈希前后关联形成区块链；也是因为数字签名有证明所有权的能力，所以才会基于数字签名去证明数字货币所有权问题。
<div><strong>精选留言（14）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/23/c0/0a/312ad74f.jpg" width="30px"><span>姚莉莉</span> 👍（4） 💬（1）<div>对于讨论2，主要就是理解私钥代表了所有权，证明身份的基石。公钥是给公开给别人（张三、李四，王五都知道）的，拿公钥对数据哈希值做加密运算，不能提现是张三、李四，还是王五操作的。就没有“签名”的意义了。</div>2021-08-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/23/c0/0a/312ad74f.jpg" width="30px"><span>姚莉莉</span> 👍（3） 💬（0）<div>讨论一，没有理解题目题目的意思。就像我有一张身份证，我从来没有参与转账、交易，银行系统自然也不知道我的存在，不知道我的身份。颁发身份证的是公安局，记录交易的是银行，本来就是两个系统。我没有做第一步交替之前，银行不知道我的信息，（都没有开户）不是很正常吗？</div>2021-08-01</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/jdcEibbu6EicEAM3LREugUwIUFSQsDDicRI7kFC7LCZk5fjN6Aaf1Sum4EfPqSu3Pt6Z3EFY2ZcQCvbCj4MEbFsMw/132" width="30px"><span>李伟浩</span> 👍（2） 💬（1）<div>对hash值做签名应该还有效率方面的考量，毕竟非对称会使数据量明细变大，且非对称都是基于数学难题的如np问题等，所以效率也是很重要的考量。</div>2021-09-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/9b/a6/1f485c48.jpg" width="30px"><span>高远</span> 👍（1） 💬（1）<div>“当然，表示的数据量大，并不代表着就不会有两个不同的数据得到相同的哈希值，这确实在实践中已经出现过。所以，在设计哈希算法时，应该避免不同的明文信息产生相同的哈希值。”
这一点不太理解。既然理论上哈系碰撞是不能避免的（无限集向有限集的映射），那怎么可能在设计哈系算法的时候避免呢？不应该是在应用哈系算法的时候设计好对碰撞的处理吗？</div>2022-02-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/29/5d/3f/ad1fed4a.jpg" width="30px"><span>黑暗骑士</span> 👍（0） 💬（1）<div>老师好，请问我想用以太坊的公钥加密一段消息的话，是使用什么加密算法呢？</div>2022-10-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1f/7e/f1d369e6.jpg" width="30px"><span>幽灵</span> 👍（0） 💬（1）<div>在中国 私钥泄露应该是件很容易发生的事情
毕竟用户基本没有什么隐私可言
银行账户都能经常被盗刷</div>2022-08-27</li><br/><li><img src="" width="30px"><span>Geek6772</span> 👍（0） 💬（1）<div>签名这个没太理解，左边是一个交易的基本信息，那交易的基本信息能伪造吗，加入我是李四，我发起了一个from 张三 to 李四的交易上去，会发生什么，我的私钥加密交易和公钥解密后与再次加密应该也是匹配的吧</div>2022-07-31</li><br/><li><img src="" width="30px"><span>Geek_ee490c</span> 👍（0） 💬（1）<div>感觉验证过程可以想象成一个很有意思的场景 - 跟小卖部老板换零钱，可以把摘要想象成将若干清点好的零钱放进一个红包，然后在红包上面写好自己清点的总数，当小卖部老板收到红包后，又会对里面的零钱进行清点，然后看看是不是可以跟你的写的总数对上。</div>2022-05-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/75/0d/1b797f75.jpg" width="30px"><span>Toringo</span> 👍（0） 💬（1）<div>讨论一：区块中存储的是交易信息，如果说创建一个账号要让整个区块链知道，那账号就需要广播，也需要存储在区块中，这样会产生太多的无意义数据，不环保。
讨论二：如果说数字签名是公钥对信息摘要加密而产生的，那非对称加密在这里没有意义，需要其他方式来证明所有权。那公钥之所以叫公钥，公开的，任何人可以用任何人的公钥加密交易，岂不乱套了。</div>2022-02-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/09/14/7b8dbe8b.jpg" width="30px"><span>A-5d?42:5x50kUNoss</span> 👍（0） 💬（1）<div>请教老师一个问题，通过ECDSA的签名，能否推导出公钥</div>2021-12-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/ef/a2/62b73e2a.jpg" width="30px"><span>二两</span> 👍（0） 💬（1）<div>我个人的理解。
讨论1：创建钱包的行为与区块链网络中的其他节点无关，只有产生交易了，数据流动了，区块链网站的其他节点才知道有该钱包的存在。
讨论2：使用公钥加密后，除了私钥持有者，其他人都无法解密，那么数据签名就失去了意义。</div>2021-08-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/6e/bd/b83ad32d.jpg" width="30px"><span>shangyu</span> 👍（0） 💬（0）<div>讨论一不是个链上行为</div>2023-05-17</li><br/><li><img src="" width="30px"><span>Geek_eb3bd2</span> 👍（0） 💬（0）<div>如果说数字签名是公钥对信息摘要加密而产生的，就无法证明交易发起者的身份</div>2022-10-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/a8/35/85033228.jpg" width="30px"><span>亚东</span> 👍（0） 💬（0）<div>当我们创建一个账户，但是没有产生交易时其实这个在区块链网络中是不被纳入账户体系中。所以账户随便创建，但是如果一旦生产交易了，就需要进入账本体系中，因为区块链是基于交易的账户体系。密码学的哈希算法与非对称加密，很好地解决了区块链中身份与确权（即我的钱就是我的钱，别人不能动）的问题。这个思维是非常巧妙的。我个人感觉商业世界的核心是账本与所有权的问题，区块链创造性地构建了一个虚拟商业世界。</div>2022-04-22</li><br/>
</ul>