你好，我是蔡元楠，是极客时间《大规模数据处理实战》的作者。今天是我第二次受邀来我们专栏分享了，很高兴再次见到你。今天我分享的主题是：活都来不及干了，还有空注意代码风格吗？！

许多来Google参观的人，用完洗手间后，都会惊奇而略带羞涩地问：“你们马桶前面的门上，贴着的Python编程规范，是用来搞笑的吗？”

这事儿还真不是搞笑，Google对编码规范的要求极其严格。今天，我们就来聊聊编程规范这件事儿。

对于编程规范（style guide） 的认知，很多人可能只停留在第一阶段：知道编程规范有用，整个公司都要求使用驼峰式命名。而后面的阶段，比如为什么和怎么做，就并不了解了。

但在Google，对于编程规范的信仰，可能超出很多人的想象，我给你简单介绍几点。

1. 每一个语言都有专门的委员会（Style Committee）制定全公司强制的编程规范，和负责在编程风格争议时的仲裁人（Style Arbiters）。
2. 在每个语言相应的编程规范群里，每天都有大量的讨论和辩论。新达成的共识会被写出“大字报”张贴在厕所里，以至于每个人甚至来访者都能用坐着的时候那零碎的5分钟阅读。
3. 每一个代码提交，类似于Git里diff的概念，都需要至少两次代码评审（code review），一次针对业务逻辑，一次针对可读性（readability review）。所谓的可读性评审，着重在代码风格规范上。只有通过考核的人，才能够成为可读性评审人（readability reviewer）。
4. 有大量的开发自动化工具，确保以上的准则得到强制实施。例如，代码提交前会有linter做静态规则检查，不通过是无法提交代码的。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/14/8f/84/2c2d8c47.jpg" width="30px"><span>lipan</span> 👍（19） 💬（2）<div>以前在小公司，996, 活都来不及干了，还有空注意代码风格。全局变量满天飞。</div>2019-07-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/8b/3d/2a3b67f8.jpg" width="30px"><span>catshitfive</span> 👍（89） 💬（4）<div>最讨厌两件事儿：

1.码代码的时候写注释 2.接手别人代码没注释</div>2019-07-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/ed/44/2267a5a7.jpg" width="30px"><span>一期一会</span> 👍（69） 💬（0）<div>写代码不写注释。过了半年以上有事再去读代码，自己也不知道是怎么回事的人举个手</div>2019-08-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/30/29/d6816ebf.jpg" width="30px"><span>小侠龙旋风</span> 👍（37） 💬（0）<div>心中默念三遍：当和 None 比较时候永远使用 is。</div>2019-07-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/0d/45/b88a1794.jpg" width="30px"><span>一叶知秋</span> 👍（22） 💬（1）<div>个人没经历过，但是听说过： “因代码不规范、使用git push -f，码农枪击4名同事，一人情况危急”</div>2019-07-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/a6/95/3960d10e.jpg" width="30px"><span>奥特虾不会写代码</span> 👍（20） 💬（0）<div>接手了离职同事留下来的代码，很多变量的命名都是无意义的单词+数字，例如data1、data2这种，看得我十分痛苦</div>2019-07-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f1/31/5001390b.jpg" width="30px"><span>Lonely绿豆蛙</span> 👍（9） 💬（0）<div>代码其实归根结底是写给人看的，是程序员之间沟通交流的语言，因此写作风格需要统一规范而不提倡个性化，就像提倡工作中使用普通话而非方言。</div>2020-02-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/03/b8/961a5342.jpg" width="30px"><span>吴月月鸟</span> 👍（5） 💬（1）<div>https:&#47;&#47;blog.csdn.net&#47;FU250&#47;article&#47;details&#47;95633286  git+pylint实现python提交代码格式校验</div>2019-07-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/96/fe/97fc8240.jpg" width="30px"><span>Breathless</span> 👍（3） 💬（2）<div> if not salary:
 if salary is not None:
怎么怪怪的？</div>2019-09-12</li><br/><li><img src="" width="30px"><span>Z_ying</span> 👍（3） 💬（0）<div>dict.items()推荐使用吗  它是使用默认的iter还是另外使用临时内存吗 </div>2019-08-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/0c/b0/26c0e53f.jpg" width="30px"><span>贺宇</span> 👍（3） 💬（1）<div>原来在java的时候比较都用=，后来被主管骂了一顿后就再也不用=做比较了，全部用Objects.equals</div>2019-07-17</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erms9qcIFYZ4npgLYPu1QgxQyaXcj64ZBicNVeBRWcYUpCZ9p0BGsrEcX8heibMLCV4Gde4P9pf7PjA/132" width="30px"><span>yanger2004</span> 👍（2） 💬（0）<div>我们一般是linter通过没问题，才会开始代码评审，所以最后那张图我们是倒过来的</div>2023-01-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg" width="30px"><span>geraltlaush</span> 👍（2） 💬（0）<div>我是遇到过工作十年的人制定的probuf协议文件像万国博览会，java风格，C风格，微软匈牙利命名法，生成的代码的结构体有成员产量是ooxxxxdddd，像甜甜圈和万花筒，测试环境直接把自己的英文名打进日志，并发编程直接一把锁锁住七八个map，那代码，分分钟灼烧着我的视网膜</div>2019-11-10</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/JZewNRQqdPv3rP7DExhIueazCBg4ic3v8icL2UgVGHRt0xbxr6DUHcKiaYHuS8m1hUYfHtjZxd10h8VNY262ickniaw/132" width="30px"><span>三毛大叔</span> 👍（2） 💬（2）<div>评审者是专门评审员吗，一天到晚评审，不写代码?</div>2019-07-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/53/1e/7d098b33.jpg" width="30px"><span>年轻人的瞎折腾^.</span> 👍（1） 💬（1）<div>最痛苦的还是给代码取名字，不能随便取，但是又想不到更好的名字~很愁</div>2021-04-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/24/f0/e0/15c74858.jpg" width="30px"><span>游衍军</span> 👍（1） 💬（0）<div>result = [(x, y) for x in range(10) for y in range(5) if x * y &gt; 10]
这种列表推导式并不复杂
</div>2021-03-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/b5/ca/bba4d696.jpg" width="30px"><span>牺牲</span> 👍（1） 💬（0）<div>不管是代码还是文档，都需要严格统一的规范，不然自己挖的坑还得自己埋。</div>2020-05-29</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI9TONIzolbQaRAubeRv37J4zfwRicsOPe8T6LpAgfLxusiaiaibAWmTwNRxb3OeChNbc0kIgtlhoIEWw/132" width="30px"><span>温若</span> 👍（1） 💬（3）<div># 错误示例
result = [(x, y) for x in range(10) for y in range(5) if x * y &gt; 10]
请问一下景老师，这个是错误示例么？
在基础篇的07|条件与循环里，不是建议[(xx, yy) for xx in x for yy in y if xx != yy]这样写么？
这两个区别在哪？还是我理解的不对？</div>2019-08-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/5c/3f/34e5c750.jpg" width="30px"><span>看，有只猪</span> 👍（1） 💬（0）<div>标题就是每次和人争论代码风格时，被怼的最惨的一点了。代码风格需要搭配严格的上库审核与领导的支持</div>2019-07-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg" width="30px"><span>张申傲</span> 👍（0） 💬（0）<div>第26讲打卡~</div>2024-06-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/8c/ce/a52560f4.jpg" width="30px"><span>田云</span> 👍（0） 💬（0）<div>与单例对象的比较要用is，is比较的是内存地址。</div>2023-03-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/20/f3/3f/160baa71.jpg" width="30px"><span>科富</span> 👍（0） 💬（0）<div>有理有据，晒出推荐的用法和错误用法的对比，比空喊口号有说服力多了</div>2022-02-10</li><br/><li><img src="" width="30px"><span>Geek_943f22</span> 👍（0） 💬（0）<div>None 用 is 比较。</div>2021-07-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/58/c2/51fa1f28.jpg" width="30px"><span>GEEKBANG_9388667</span> 👍（0） 💬（0）<div>老师， 代码自动化规范的分享在哪里呢？ 对这个感兴趣</div>2021-07-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/20/fa/60/a4366b9c.jpg" width="30px"><span>ZY</span> 👍（0） 💬（0）<div>有关字典的遍历 我怎么使用for  for key,value in dict.keys() 比 for key,value in dict 要快些 ，而且后者貌似会导致程序崩溃</div>2021-01-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/36/88/20b6a6ee.jpg" width="30px"><span>Simon</span> 👍（0） 💬（0）<div>“C++ 代码规范中，禁止使用异常”。我确实是这么干的！</div>2020-03-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/f1/84/7d21bd9e.jpg" width="30px"><span>Goal</span> 👍（0） 💬（1）<div>“何时使用 is， 何时使用 ==，何时使用隐式布尔转换”

文中提到的这句话，对这些还是不太理解；</div>2020-01-13</li><br/><li><img src="" width="30px"><span>Paul Shan</span> 👍（0） 💬（0）<div>代码风格是开发人员交流的工具，是对代码阅读者，代码开发者和机器的权衡。</div>2019-11-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/8a/bc/cb39ed38.jpg" width="30px"><span>自由民</span> 👍（0） 💬（0）<div>因为是自学，没机会跟别人合作。以前学的C&#47;C++，在网上看到一篇文章，好像叫&quot;XX关于c++学习的100个观点&quot;之类的，很震撼，就照着做了。因为习惯了，后来看Java，HTML，JavaScript，python等语言的代码都不太习惯。</div>2019-10-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/c6/f9/caf27bd3.jpg" width="30px"><span>大王叫我来巡山</span> 👍（0） 💬（0）<div>收益匪浅，感觉过去写的代码只有自己能看懂</div>2019-07-16</li><br/>
</ul>