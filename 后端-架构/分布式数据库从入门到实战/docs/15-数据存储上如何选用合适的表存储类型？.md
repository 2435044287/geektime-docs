你好，我是彭旭。

上节课我们探索了StarRocks的架构和数据分布，也介绍了CDP的几个表，了解了如何在StarRocks里面设计分区分桶键。

这节课我们再来看看，CDP的数据模型，在StarRocks里面，该如何选用合适的存储引擎。

## 从数仓的建模分层说起

在数仓建模中，有一个比较通用的建模方法论，就是将数据分为4层：包括：ODS（Operational Data Store）、DWD（Data Warehouse Detail）、DWS（Data Warehouse Summary）和ADS（Application Data Store）。

这里我们简单解释一下这4层数据模型的定义与作用。

**ODS**：直接存放从各个渠道收集的原始数据，比如业务系统收集的、前后端埋点收集的等等。有时候会考虑做一定程度的数据清洗，比如处理异常字段、规范字段命名、统一时间字段等。

**DWD**：以业务过程作为建模驱动，基于每个具体的业务过程特点，构建最细粒度的明细事实表，比如浏览明细表、交易明细表。DWD也会清洗ODS层的数据（去除空值、脏数据、异常数据）、降维处理、脱敏等，并基于维度建模，将某些字段做适当冗余，做宽表化。

**DWS**：在DWD层的基础上进行数据聚合和汇总，比如用户交易汇总表、用户指标汇总宽表。一般会依据特定业务需求或报表要求进行数据汇总和预计算，提高数据查询效率和性能。
<div><strong>精选留言（1）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/13/dd/c3/6bb8b410.jpg" width="30px"><span>一米阳光</span> 👍（1） 💬（1）<div>在关系型数据库中，表连接的情况下，在什么时候使用谓词下推可以提升查询效率吗？

当连接的时候有筛选条件，存在索引和Subquery的情况下</div>2024-07-15</li><br/>
</ul>