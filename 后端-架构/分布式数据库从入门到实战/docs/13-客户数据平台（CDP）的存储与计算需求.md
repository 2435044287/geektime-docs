你好，我是彭旭。

从这一讲开始，我们就进入StarRocks相关内容。在这个章节，我会从一个客户数据平台CDP的需求出发，和你一起看看在StarRocks中，如何选用合适的表类型来设计CDP的数据模型，如何更好地分区分桶，在海量数据中生成SQL标签？

先来看一下什么是CDP（Customer Data Platform）。

## 什么是CDP？

在存量时代，企业开始更专注于服务现有用户，而不仅仅是吸引新用户。数字化转型成为了一个热门的企业发展方向。

举个例子，地产行业以前只在购房的时候和用户联系，现在则是从物业、商业、写字楼等多个渠道与用户建立联系，从“一生一次的生意”变成“一生一世的生意”。

为了实现存量用户的精细化运营，企业就需要全面收集客户信息，构建客户的完整画像。

![](https://static001.geekbang.org/resource/image/a1/01/a1ff0cc1a012ecdf677c0d657bdc7601.png?wh=1818x920)

上面这个图描述了一个典型的CDP业务流程：企业收集用户的各种行为数据、业务数据，通过规则计算、机器算法、数据挖掘等方式处理数据，构建一个客户的360度标签、画像。

当然，标签、画像构建过程很复杂，比如需要构建用户全域的ONE-ID，也就是将各个渠道收集到的数据，再通过各个系统不同的关联键，比如手机号、微信unionId、设备ID、邮箱等，识别到这些数据是属于同一个人，通过一个ONE-ID把用户所有的标识符都统一起来。经过各种各样的操作，最终把用户对应的数据关联起来。这里提一下，构建ONE-ID的过程一般都会用到图数据库。