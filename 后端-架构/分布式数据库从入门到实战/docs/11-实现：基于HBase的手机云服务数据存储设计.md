你好，我是彭旭。

前面几节课，我们探讨了HBase实现分区弹性伸缩，优化实时随机存取性能，以及实现高可用的方法。HBase的这些特性解决了手机云服务系统的运维需求、成本需求和高性能需求。为云服务采用HBase作为新的存储方案提供了理论上的支撑。

这节课我们再来看看，如果采用HBase作为新的存储引擎，系统架构设计是怎样的，过程中又可能遇到什么问题。

这节课会复习到前面讲解过的如何基于业务场景设计HBase行键，如何优化列限定符来减少存储空间。同时，我也会讲一个新的知识点，HBase如何实现跨集群数据的实时复制，完成单元化、集群数据汇总分析。

## 单元化与数据备份

你应该还记得我们讲云服务需求的时候有提到，多机房的目标本来是单元化，也就是每个机房能够独立提供服务，具备数据的完整性。但是因为MySQL使用SSD存储，导致了巨大的成本压力，最后每个机房只存储了一部分的数据，所有机房加起来才是一份完整的数据。这样其实没有做到真正的单元化，而且数据也没有多机房的容灾。

其实使用HBase作为新的存储引擎后，这几个问题很容易就解决了。

首先，HBase可以使用机械硬盘存储，使用编码与压缩，也能较大地压缩数据存储空间。这样整体的存储硬件成本至少能够减少50%。
<div><strong>精选留言（1）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg" width="30px"><span>柯察金</span> 👍（0） 💬（0）<div>选择行键的时候没有懂，为啥用 uuid 的时候直接插入就可以，而用时间的要先删除后插入？</div>2024-12-25</li><br/>
</ul>