你好，我是陈现麟。

通过了解水平分片策略中，关于数据划分和数据平衡的原理和知识，我们可以基于极客时间的业务场景，选择合适的数据划分和数据平衡的方式，组合出最佳的水平分片策略。

而在一些数据分析的场景中，一行数据往往有非常多的字段，我们在计算时，却只需要一列或者几列的数据。这时基于水平分片策略，虽然能解决数据容量的问题，但是却没有充分利用数据分析场景的业务特点进行优化。那么是否有针对这个场景设计的数据分片方式呢？

答案是肯定的，**数据的垂直分片与混合分片，比起水平分片来说，能更好地满足数据分析场景**。所以在本节课中，我们将一起来讨论数据分片的另外两种方式：垂直分片与混合分片，思考一下垂直分片与混合分片，是如何利用数据分析场景的业务特点，来做数据存储优化的。

我们会先讨论垂直分片策略的应用场景和技术原理，接着分析混合分片策略是如何结合垂直分片与混合分片，在读写和水平扩展之间达到最优平衡的，最后再对讨论垂直分片时，引入的两种存储方式：行式存储和列式存储，进行对比和总结。

## 垂直分片策略

垂直分片策略和水平分片策略都是对数据进行分片，但是它们的思路却截然不同。水平分片策略将整个数据集的条数作为划分的对象，每一个分片负责处理一定的数据条数。而垂直分片策略则是将数据 Schema 的字段集个数作为划分的对象，每一个分片负责处理一个或几个字段的全部数据，具体如下图所示。
<div><strong>精选留言（5）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/14/59/91/fa2d8bb2.jpg" width="30px"><span>不吃辣👾</span> 👍（1） 💬（1）<div>老师，垂直分片就没有上节水平分片带来的，访问冷热不均，数据倾斜，数据有序性问题吗？</div>2022-04-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/22/a8/2e/4f2f8ce7.jpg" width="30px"><span>水草</span> 👍（0） 💬（2）<div>垂直水平和水平垂直还是没看懂，它们两个示意图都一样。</div>2022-03-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg" width="30px"><span>peter</span> 👍（2） 💬（0）<div>请教老师两个问题啊：
Q1：垂直分片为什么水平扩展性差？
    水平扩展是把数据水平分为多个部分，照样可以啊，只不过可能麻烦一些，需要把多个垂直分片同事分裂。
Q2：水平垂直拆分图，为什么是2个分片？应该也是十个分片啊。</div>2022-03-11</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep075ibtmxMf3eOYlBJ96CE9TEelLUwePaLqp8M75gWHEcM3za0voylA0oe9y3NiaboPB891rypRt7w/132" width="30px"><span>shuff1e</span> 👍（1） 💬（1）<div>其中，主键所在的列是有序的，其他列的读取性能也非常不错，可以理解为数据即索引，所以一般来说，列式存储系统对二级索引依赖不大，列式存储可以方便地应对查询无规律，不能预先建立索引的情况。
——
其他列的读取性能也非常不错，列式存储对二级索引依赖不大，这个的意思具体是？</div>2022-03-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/1a/17/9e925f61.jpg" width="30px"><span>雾都</span> 👍（0） 💬（2）<div>请问老师一个问题，水平分片和垂直分片中的每一片在物理机上是怎么存储的，一片一个物理机？一片一个物理文件？</div>2022-03-11</li><br/>
</ul>