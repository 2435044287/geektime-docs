你好，我是陈现麟。

通过学习限流的内容，我们掌握了限流机制的应用场景、实现原理和关键问题，这样我们就可以为极客时间后端的分布式系统，在关键路径和核心服务上，去引入限流机制，进一步提高系统的稳定性。

但是，在系统因为过载而出现故障的时候，虽然熔断机制可以确保系统不会雪崩，限流可以确保，被保护的服务不会因为过载而出现故障，可是这时候，系统的可用性或多或少都会受到一定的影响，并且这个影响不会区分核心业务和非核心业务。

那么你的脑海里一定会出现一个想法，是否可以在故障出现的时候，通过减少或停掉非核心业务，来降低系统的负载，让核心业务不会受到，或者少受到影响呢？其实是可以的，这就是一个典型的降级场景问题。

在这节课中，我们将一起讨论保障分布式系统稳定性的第三个方法——降级，分析如何通过降级机制，来保障系统的核心服务稳定运行。这节课我依然会按照需要降级的原因，如何实现降级，以及降级机制应该注意的关键问题这一条思路来为你讲解。

## 为什么需要降级

为什么有了熔断和限流之后，我们依然需要降级机制呢？在分布式系统中，熔断、限流和降级是保障系统稳定性的三板斧，缺一不可，并且在保障系统的稳定性方面，降级有着熔断和限流所没有的优点，因此它们之间相互配合和补充，能够最大限度地保障系统的稳定性水平。
<div><strong>精选留言（5）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg" width="30px"><span>peter</span> 👍（10） 💬（1）<div>请教老师几个问题啊：
Q1：什么样的公司会有成百上千的服务？
“但是一般来说，一个分布式系统中，会有成百上千的服务和成千上万的实例”。根据这句话，两个不同的服务不会运行在一台机器上，即一个服务占用一台机器，那就需要一千台PC；如果每个PC再加一个备份，就需要两千台PC。两千台服务器，一般的小公司玩不起吧，它对应什么规模的公司？ 比如用户一千万、日活一百万的公司？比如极客时间，多少服务？多少台服务器？
Q2：降级后还会被调用吗？
一个服务或者接口被降级后，比如被关闭了，那么，其他服务还会来调用它吗？如果调用，岂不是更加糟糕？如果不调用，那这个“不调用”的信息是怎么传递到调用方呢？
Q3：“容灾”和“限流、熔断、降级”之间的关系？
“容灾”和“限流、熔断、降级”没有关系吧。“限流、熔断、降级”是用来保障系统稳定性的，但“容灾”主要是处理火灾、地震一类的意外情况，主要是增加备份，我的理解对吗？</div>2022-02-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/7a/5f/c05cd5dc.jpg" width="30px"><span>Ronnie</span> 👍（2） 💬（2）<div>降级一般是在网关层做吗</div>2022-03-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg" width="30px"><span>Jxin</span> 👍（0） 💬（3）<div>我一直认为，降级和限流熔断是不同视角的手段。熔断保护客户端，限流保护服务端。而降级保护的是系统的收益，实现手段可以包含限流熔断以及分布式多级缓存等等。</div>2022-02-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/59/91/fa2d8bb2.jpg" width="30px"><span>不吃辣👾</span> 👍（0） 💬（0）<div>关键路径的B计划启动，这不是预案管理的思路吗？</div>2023-05-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/57/d8/425e1b0a.jpg" width="30px"><span>小虾米</span> 👍（0） 💬（0）<div>降级应该是作用在这样一个场景，比如有服务a和服务b都依赖一个公共资源，可能是db可能是cache可能是mq，在资源有限的情况下，为了保证系统总体的服务质量，必须减少a或者b的资源使用，这个时候就可以让期中一个不重要的服务降级，让出资源</div>2022-12-16</li><br/>
</ul>