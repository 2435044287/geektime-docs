你好，我是徐长龙。

前面我们比较过很多技术，细心的你应该发现了，比较时我们常常会考虑实现成本这一项。这是因为技术选型上的“斤斤计较”，能够帮我们省下真金白银。那么你是否系统思考过，到底怎么计算成本呢？

这节课，我会结合日志中心的例子带你计算成本。

之所以选日志中心，主要有这两方面的考虑：一方面是因为它**重要且通用**，作为系统监控的核心组件，几乎所有系统监控和故障排查都依赖日志中心，大部分的系统都用得上；另一方面日志中心是**成本很高**的项目，计算也比较复杂，如果你跟着我把课程里的例子拿下了，以后用类似思路去计算其他组件也会容易很多。

## 根据流量推算存储容量及投入成本

在互联网服务中，最大的变数就在用户流量上。相比普通的服务，高并发的系统需要同时服务的在线人数会更多，所以对这类系统做容量设计时，我们就需要根据用户请求量和同时在线人数，来推算系统硬件需要投入多少成本。

很多系统在初期会用云服务实现日志中心，但核心接口流量超过10W QPS后，很多公司就会考虑自建机房去实现，甚至后期还会持续改进日志中心，自己制作一些个性化的服务。

其实，这些优化和实现本质上都和**成本**息息相关。这么说你可能不太理解，所以我们结合例子，实际算算一个网站的日志中心存储容量和成本要怎么计算。
<div><strong>精选留言（2）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/16/9c/fb/7fe6df5b.jpg" width="30px"><span>陈卧虫</span> 👍（3） 💬（1）<div>从前从没想过，原来要花这么多钱</div>2022-12-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/c6/20/124ae6d4.jpg" width="30px"><span>若水清菡</span> 👍（2） 💬（1）<div>1. 建设日志中心，使用云厂商的服务贵还是自己建设的贵？
日志体量少的中小企业建设日志中心优先考虑云厂商，省去了运维人员费用，不需要担心机器资源短缺、无法快速扩容等问题；日志体量大的企业建设日志中心适合自建机房，日志量庞大上云的费用超过自建机房费用，在内蒙、贵州这些地方自建机房的成本要远低于使用云服务，同时现在服务器性能都足够高，可以采用离线日志计算和在线业务混合部署，灵活调度计算资源节约运维成本。

2. 大数据挖掘服务如何计算成本？
可以根据业务提交任务消耗的资源量，存储和计算资源*运行时间*单价来计算成本</div>2023-01-26</li><br/>
</ul>