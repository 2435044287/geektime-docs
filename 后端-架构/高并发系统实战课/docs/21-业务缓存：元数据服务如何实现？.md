你好，我是徐长龙。

当你随手打开微博或者一个综合的新闻网站，可以看到丰富的媒体文件，图片、文本、音频、视频应有尽有，一个页面甚至可能是由成百上千个文件组合而成。

那这些文件都存在哪里呢？通常来说，低于1KB的少量文本数据，我们会保存在数据库中，而比较大的文本或者多媒体文件（比如MP4、TS、MP3、JPG、JS、CSS等等）我们通常会保存在硬盘当中，这些文件的管理并不复杂。

不过如果文件数量达到百万以上，用硬盘管理文件的方式就比较麻烦了，因为用户请求到服务器时，有几十台服务器需要从上百块硬盘中找到文件保存在哪里，还得做好定期备份、统计访问记录等工作，这些给我们的研发工作带来了很大的困扰。

直到出现了对象存储这种技术，帮我们屏蔽掉了很多细节，这大大提升了研发效率。这节课，我们就聊聊存储的演变过程，让你对服务器存储和对象存储的原理和实践有更深的认识。

## 分布式文件存储服务

在讲解对象存储之前，我们先了解一下支撑它的基础——分布式文件存储服务，这也是互联网媒体资源的数据支撑基础。

我们先来具体分析一下，分布式文件存储提供了什么功能，以及数据库管理文件都需要做哪些事儿。因为数据库里保存的是文件路径，在迁移、归档以及副本备份时，就需要同步更新这些记录。
<div><strong>精选留言（4）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/20/04/5e/5d2e6254.jpg" width="30px"><span>Elvis Lee</span> 👍（1） 💬（1）<div>提问：老师，作为文件存储，k8s部署MinIO集群这方案的优劣可以讲解一下吗。目前在仿真链路测试过，但还没上生产，想了解一下</div>2023-02-15</li><br/><li><img src="" width="30px"><span>Geek_3c848e</span> 👍（0） 💬（1）<div>想请问“小文件压缩到大文件块里保存，小文件更新数据时，直接新建一个文件来更新内容。定期整理数据的时候，才会把新老数据合并写到新的块里，清理掉老数据”，这是否就是SSTABLE？</div>2023-04-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/c6/20/124ae6d4.jpg" width="30px"><span>若水清菡</span> 👍（0） 💬（1）<div>分布式存储通过文件块作为单位来保存管理小文件，当我们对文件内容进行更新时，如何刷新这个文件的内容呢？
文中说到 “为此我们通常会在小文件更新数据时，直接新建一个文件来更新内容。定期整理数据的时候，才会把新老数据合并写到新的块里，清理掉老数据。”，对文件内容更新时，刷新这个文件的内容其实就是重新生成一个新的文件块的过程。</div>2023-01-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/53/ef/5cdaa18b.jpg" width="30px"><span>thinkpc</span> 👍（0） 💬（0）<div>这里留个脑洞，如果我们的数据库也按对象存储方式思考，缩减掉所有复杂的操作，是否也可以抽象出新的机遇～</div>2022-12-28</li><br/>
</ul>