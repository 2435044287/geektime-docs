既然我们说到了服务器端的开发，我们就不得不提起多线程和并发的问题，因为如果没有多线程和并发，是不可能做网络服务器端的，除非你的项目是base在Nginx或者Apache之上的。

## 多线程和并发究竟有什么区别和联系？

提到并发，不得不提到并行，所以我就讲这三个概念：并发、并行，以及多线程。作为初学者，你或许不太明白，多线程和并发究竟有什么区别和联系？下面我们就分别来看看。

**并发**出现在电脑只有一个CPU的情况下，那如果有多个线程需要操作，该怎么办呢？CPU不可能一次只运行一个程序，运行完一个再运行第二个，这个效率任谁都忍受不了啊！所以，就想了个办法。

CPU将运行的线程分成若干个CPU时间片来运行。不运行的那个线程就挂起，运行的时候，那个线程就活过来，切换地特别快，就好像是在同时运行一样。

你可以想象这个场景，有一个象棋大师，一个人对十个对手下棋，那十个人轮流和他下。大师从1号棋手这里开始下，下完1号走到2号的棋手面前，下2号棋手的棋，一直轮流走下去，直到再走回1号棋手这里再下一步。只要象棋大师下象棋下得足够快，然后他移动到下一位棋手这里又移动得足够快，大家都会觉得好像有十位象棋大师在和十个对手下棋。事实上只有一位象棋大师在下棋，只是他移动得很快而已。
<div><strong>精选留言（3）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/fd/f7/8c78c31d.jpg" width="30px"><span>放羊大王</span> 👍（4） 💬（0）<div>监听信号量，重新 fork 。加锁什么是最烦的，go的sync包，现在都还没搞懂。能讲讲 ipc 通信方式与具体最小实现，伪代码也行， 以及 actor 和 csp 。我看 elixir 也不错，就是用的人少。 哎！感觉多线程其实就是运行同一份代码，通过if判断运行逻辑于是就有了master worker。</div>2018-08-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/6a/dc/1334bf45.jpg" width="30px"><span>Stone</span> 👍（1） 💬（0）<div>请问为什么在多核CPU上做不到数百次间隔检查才会导致一次线程切换？ 

引用： “在单核的 CPU 上，数百次间隔检查才会导致一次线程切换。在多核 CPU 上，就做不到这些了。” </div>2022-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>学习打卡</div>2024-04-01</li><br/>
</ul>