你好，我是聂鹏程。今天，我来继续带你打卡分布式核心技术。

通过前面几篇文章，我们一起学习了分布式计算模式中的MapReduce、Stream和Actor，它们各显神通解决了很多实际问题。

但是，在现实生活中，经常还会出现这样的情况，前一个任务的结果是另外一个任务的输入。比如工厂生产一瓶饮料，首先需要往瓶子里装上饮料，待饮料装满后，再封口。如果装饮料和封口分别为子任务，那么前一个任务（装饮料）结束后才可以开始第二个任务（封口）。类似这样的作业，就是我们常说的流水线作业。

在分布式领域中解决类似具有依赖关系的流水线作业的计算模式，叫作流水线计算模式。其实，流水线计算模式是我们在[第1篇文章](https://time.geekbang.org/column/article/140004)中提到的数据并行计算的一种形式，就是将一个任务拆分为多个步骤（子任务），然后多个这样的任务通过对步骤（子任务）的重叠执行，以实现数据并行处理的场景。

这种流水线模式在计算机领域中最先用于CPU指令设计，后来推广到机器学习领域进行数据处理、模型训练等。在流水线计算模式中，由于前一个子任务执行后，会扔给下一个子任务，由下一个子任务去展现自己的能力，因此可以形象地比喻为“你方唱罢我登场”。

接下来，我们就一起打卡分布式计算模式中的流水线模式吧。
<div><strong>精选留言（10）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/13/25/00/3afbab43.jpg" width="30px"><span>88591</span> 👍（0） 💬（1）<div>流计算，对数据依赖性没有流水线强。流计算，关注的是计算的实时性。</div>2020-04-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/3b/47/f6c772a1.jpg" width="30px"><span>Jackey</span> 👍（11） 💬（0）<div>我认为流式计算更关注最后的结果吧，中间结果都不会存储，数据也不能重复使用。流水线模式也会关注中间结果，根据每一步的结果不断优化计算方法，保证它能给出我们想要的数据</div>2019-11-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/6b/6a/798232a8.jpg" width="30px"><span>信xin_n</span> 👍（5） 💬（0）<div>流水线模式，是把一个问题分成不同的小段，必须按照严格的顺序处理，核心是错开了时间，提高了时间利用率，但最终结果是相同的东西，比如例子的生产一瓶矿泉水，是单一产品。
流计算模式，更侧重数据输入方式以及流动方向，处理时是可以多方向流动的，最终可以输出各式各样的结果。当然流式计算实际数据的处理会用到流水线模式，把一个大的处理流程拆分为小的流程，依次放入各个bolt处理。但是这些bolt可以组合，不同的数据类型，走不同的流水线。多产品，多流水线。类似物流分拣过程。</div>2019-11-16</li><br/><li><img src="" width="30px"><span>Geek_e986e3</span> 👍（2） 💬（0）<div>个人感觉。流水线实时性不用和流计算一样实时性这么高。流水线可以跑离线任务。而且感觉二者概念不同。流水线只是一种数据处理概念。实时也可以流水线，离线也可以流水线。而流计算和批处理是一种落地模式。不知道我这么理解对不对</div>2019-11-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/22/c8/f2892022.jpg" width="30px"><span>科科</span> 👍（1） 💬（0）<div>个人认为流水线，只是为了尽最大的可能提升对系统的使用效率。CPU为了节省时间的利用效率，将任务分成小块儿使用流水线一次可以处理n个指令，这样做可以尽可能多地处理多个指令，这样整体的等待时间就会降低。
流计算更加强调的是数据的时效性，这一点流水线只是一个模型，并没有强调对时间的时效性。流水线走的应该也是按照任务到来的先后顺序。但是流计算没有办法保证数据先后顺序。</div>2020-05-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/1e/8c/d9330d2b.jpg" width="30px"><span>花儿少年</span> 👍（1） 💬（0）<div>场景不同。
流计算是近乎实时计算，使用实时数据，关注计算结果，计算步骤有变动之前的数据就不能再重用了。
流水线计算模式，指的抽象子任务，分解步骤，从而提高并行度，提高执行效率，和原始输入数据没有关系；如果其中某一步计算有误，可以用前一步的结果再次计算；数据可以是静态的，并且可以反复计算。
最大的不同，个人觉得流计算是指实时计算的场景，流水线模式是分解任务，执行任务的方式？</div>2019-11-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/29/c6/7fd7efa3.jpg" width="30px"><span>xingoo</span> 👍（1） 💬（0）<div>流水线关注的是通过抽象子任务，子任务串联执行，通常用于自己学习模型训练前的数据预处理，其实内部一般都是批量化操作，数据也可以重复使用；流计算关注的是事件或者消息，通过一系列固定操作得到输出。</div>2019-11-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg" width="30px"><span>leslie</span> 👍（1） 💬（0）<div>      流水线计算模式更像是整个流程而是其中的某个环节：就像老师课程所用的例子ETL，数据挖掘必做的事情。流计算只是处理当下的某件事情：一个是整个流程完整的事情，一个只是单一的事件。
      流计算可以是流水线计算模式的一部分工作，反向则不可以。</div>2019-11-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/f2/66/b16f9ca9.jpg" width="30px"><span>南国</span> 👍（0） 💬（0）<div>我认为mapreduce从全局来看的话不是也可以看做一个流水线吗，同样是把一个大的任务划分成很多小的步骤，每一个小的步骤又需要一个map+reduce，然后作为下一个小任务的输入</div>2020-07-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg" width="30px"><span>钱</span> 👍（0） 💬（0）<div>流水线计算模式和流计算的区别是什么？
流水线计算模式核心在于通过任务拆解和协调控制，加速任务的执行。
流计算模式核心在于处理的数据形态是持续不断大批量的。
这个问题类似在问菠菜和菠萝有什么区别😁</div>2020-02-17</li><br/>
</ul>