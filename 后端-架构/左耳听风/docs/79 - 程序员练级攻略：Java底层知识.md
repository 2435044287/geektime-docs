你好，我是陈皓，网名左耳朵耗子。

前两篇文章分享的是系统底层方面的内容，今天我们进入高手成长篇的第二部分——Java底层知识。

# Java 字节码相关

首先，Java最黑科技的玩法就是字节码编程，也就是动态修改或是动态生成Java字节码。Java的字节码相当于汇编，其中的一些细节你可以从下面的这几个教程中学习。

- [Java Zone: Introduction to Java Bytecode](https://dzone.com/articles/introduction-to-java-bytecode) ，这篇文章图文并茂地向你讲述了Java字节码的一些细节，是一篇很不错的入门文章。
- [IBM DeveloperWorks: Java bytecode](https://www.ibm.com/developerworks/library/it-haggar_bytecode/index.html) ，虽然这篇文章很老了，但是这篇文章是一篇非常好的讲Java 字节码的文章。
- [Java Bytecode and JVMTI Examples](https://github.com/jon-bell/bytecode-examples)，这是一些使用 [JVM Tool Interface](http://docs.oracle.com/javase/7/docs/platform/jvmti/jvmti.html) 操作字节码的比较实用的例子。包括方法调用统计、静态字节码修改、Heap Taggin和Heap Walking。

当然，一般来说，我们不使用JVMTI操作字节码，而是用一些更好用的库。这里有三个库可以帮你比较容易地做这个事。

- [asmtools](https://wiki.openjdk.java.net/display/CodeTools/asmtools) - 用于生产环境的Java .class文件开发工具。
- [Byte Buddy](http://bytebuddy.net/) - 代码生成库：运行时创建Class文件而不需要编译器帮助。
- [Jitescript](https://github.com/qmx/jitescript) - 和 [BiteScript](https://github.com/headius/bitescript) 类似的字节码生成库。
<div><strong>精选留言（28）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/63/0b/ad56aeb4.jpg" width="30px"><span>AI</span> 👍（117） 💬（1）<div>有同学认为这种介绍文章没用，一大堆引用。我觉得吧，这文章价值很大。如果只是要写一篇关于字节码或JVM的详细使用，那很多书籍或网站可能有了，反而不值得写。耗子叔这系列文章，在我看来很有大局观，自顶向下梳理了各种技术脉络。授人以渔其实更重要，好的老师是给你指出明路，让你少走弯路，而不是给你讲解几道题。不过这也许要工作几年后才能更深刻的体会到吧，这些总结的资源是一笔财富，至少不用走弯路，可以有选择性的去挑选适合你的认为有价值有兴趣的内容去学习。</div>2018-07-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/82/f4/c23b1dd7.jpg" width="30px"><span>吃桔子的攻城狮</span> 👍（49） 💬（2）<div>第一次评论。这个专栏看了这么久，第一次觉得有必要说几句，这种风格的专栏真的非常赞。看到有些同学说链接太多缺少耗子哥自己的东西，我想说这个系列随便一篇文章拿出来，如果纯自己写都能单独写成一个系列甚至一本书。这就像重复造轮子，明明已经有了优秀的文献资料，为什么要重新写一套？相反，能把这些优质资源做整合，串联，归纳，提供学习的路径和思路才是受益无穷的！

有同学说这些都是网上可以找到的，那不妨请想一下，如果只给你本系列某篇文章的题目，凭自己你真的可以找得到这些资料吗？不会陷入现在互相抄来抄去的劣质博客里迷惘困惑，百思不得其解吗？

支持这种风格，我认为订阅专栏的钱花的很超值！</div>2018-08-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/fe/01/3f3ae95e.jpg" width="30px"><span>怪盗キッド</span> 👍（33） 💬（1）<div>Hi，我利用ASM写了一个简单、快速且无侵入的Java方法监控工具MyPerf4J，通过JavaAgent方式对Java方法进行字节码注入，可以统计出方法的执行性能指标，包括RPS、Avg、TP50、TP90、TP99、TP999等，Github地址：https:&#47;&#47;github.com&#47;ThinkpadNC5&#47;MyPerf4J</div>2018-07-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/2d/92/287f99db.jpg" width="30px"><span>lion_fly</span> 👍（15） 💬（0）<div>看这么多书，耗子叔居然没有掉头发</div>2019-12-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f7/26/3a10924a.jpg" width="30px"><span>ruby</span> 👍（8） 💬（0）<div>皓哥，后面有大数据文章，怎么学spark.hadoop等吗？</div>2018-07-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/83/ed/8dfd6981.jpg" width="30px"><span>superryanguo</span> 👍（6） 💬（0）<div>java有必要单独抽一篇来讲吗？而且都是引用</div>2018-07-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ae/31/7d6cd317.jpg" width="30px"><span>Geek_sa5dup</span> 👍（4） 💬（0）<div>耗子叔，实在是太厉害了，这种资源整合真的是服了，那天看你直播发现你头发还是那么多，这么多的东西你是怎么看完的.....太佩服了</div>2020-02-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/9e/51/4bded5f2.jpg" width="30px"><span>庞雨青_Alice</span> 👍（4） 💬（0）<div>非常感谢左耳皓哥的分享。

读精品的技术文章真是一件很爽快的事情。我个人是喜欢刨根究底的类型，之前在学习编程的过程中一直都没能找到多少成就感。现在看来一是没有找到最精品的文章，二是没有找到适合自己的方式。

这几天耐着性子慢慢读英文的文章，自己的英语能力也有所提高。

感谢皓哥🙏</div>2019-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/60/de/d752c204.jpg" width="30px"><span>鹤鸣</span> 👍（4） 💬（0）<div>C++程序员问个问题:怎样对一个已有的基于spring的项目优化性能?目前我这边首先要做的事情是测试出性能瓶颈，但是目前为止我还在使用那种很土的办法，纯体力活的那种，我觉得这个路子不大对头。</div>2018-07-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/ef/37/4b12b4cc.jpg" width="30px"><span>ZYCHD(子玉)</span> 👍（3） 💬（0）<div>读耗子书的文章总给人带来新鲜的感觉。视野很开阔。前后穿插纵横千里！</div>2018-07-03</li><br/><li><img src="" width="30px"><span>Rolin</span> 👍（2） 💬（0）<div>Android 程序猿好好学！</div>2018-07-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/3d/ae/5eede757.jpg" width="30px"><span>葛阳</span> 👍（2） 💬（0）<div>赞</div>2018-07-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/9b/49/42d3d70c.jpg" width="30px"><span>货赛阔xliu</span> 👍（1） 💬（0）<div>左耳朵老师， 
Aleksey的那个blog叫JVM Anatomy Quarks，不是park是夸克。 
我觉得他就是想对jvm做量子维度的分析。 </div>2020-06-08</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLVZRHorm7z67yJxOCpYWJESPfhia00RDg4oicvPuyCwTKln2BFRMiahOKz9z22RnnEmickA64bHdB7pA/132" width="30px"><span>土豆小小</span> 👍（1） 💬（0）<div>突然的感受，国外程序员的简历上都有很多底层语言，就很好奇他们在自己的项目中是如何涉及到这么多不同的技术</div>2020-04-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/eb/ae/e4752b7e.jpg" width="30px"><span>Allen5g</span> 👍（1） 💬（0）<div>打卡第79篇，感谢耗子叔</div>2020-03-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg" width="30px"><span>钱</span> 👍（1） 💬（0）<div>恩，认同这种风格的文章，感觉很导师风格，指明路线自己去玩，每个人的收获取决于每个人的付出。</div>2019-01-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/1a/40/f10493ef.jpg" width="30px"><span>中山浪子</span> 👍（1） 💬（0）<div>耗叔有专门讲c++对象模型方面和内存分配的篇章嚒？</div>2018-07-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/fe/01/3f3ae95e.jpg" width="30px"><span>怪盗キッド</span> 👍（1） 💬（0）<div>没有使用蓄水池算法，我是通过数组+Map的方式存储数据：
对于数组来说，下标代表方法的响应时间，下标对应的值代表该响应时间的数量；
对于Map来说，Key代表方法的响应时间，Value代表该响应时间的数量；（Accurate模式）</div>2018-07-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/bd/6a/abe84a16.jpg" width="30px"><span>范特西</span> 👍（0） 💬（0）<div>耗子书文章点赞，现在计算机只是体系已经非常庞大。想要学习的人也会太多东西，容易东打一枪西打一枪。别人都是贩卖焦虑转我的快钱。耗子叔的东西提纲挈领，让人心里他是。更适合愿意沉下心来学习的人。我自己是平时在浩瀚的知识海洋中常常迷失，所以感谢大佬指点！</div>2022-02-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/7a/67/2c43bb7a.jpg" width="30px"><span>wxlbear</span> 👍（0） 💬（0）<div>能把老师提供的都消化掉，那绝对已经是很厉害的</div>2021-12-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/b1/81/13f23d1e.jpg" width="30px"><span>方勇(gopher)</span> 👍（0） 💬（0）<div>目前java监控采用agent注入的模式！</div>2021-11-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/25/0b/f4/9c092c47.jpg" width="30px"><span>允</span> 👍（0） 💬（0）<div>Java 虚拟机那儿提供的中文翻译 REPO 我去看了，是翻译的 Java11 说明书，不知道为啥作者说是 `Chinese translation of The Java® Virtual Machine Specification.` 。</div>2021-02-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/78/e5/92bd90d9.jpg" width="30px"><span>陈晨</span> 👍（0） 💬（0）<div>非常有用</div>2020-12-13</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/wI2LwgvwseNqXwkF67zicD9UXBSle9DPhmL6uyKG9Nib6NLfU3OuKYuSQ4DHCWxIQecnqell2vKVvNX8boox0B8w/132" width="30px"><span>Geek_dwq</span> 👍（0） 💬（0）<div>这篇文章的信息量太大了，受益非浅，谢谢啦！</div>2020-04-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/47/18/293cd24d.jpg" width="30px"><span>o0oi1i</span> 👍（0） 💬（0）<div>打卡79</div>2020-03-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/5a/9a/a64f21f2.jpg" width="30px"><span>Tony</span> 👍（0） 💬（0）<div>耗子哥，我记得你以前写过一篇关于java进阶的比较全面的文章，怎么找不到了？</div>2018-07-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/c2/c7/35e66074.jpg" width="30px"><span>天蓝隐湘</span> 👍（0） 💬（0）<div>好</div>2018-07-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/9b/2f/b7a3625e.jpg" width="30px"><span>Len</span> 👍（0） 💬（0）<div>动态生成的代码 debug 起来挺费劲的，尤其是用 IDE。耗叔有什么工具或方法推荐吗？</div>2018-07-03</li><br/>
</ul>