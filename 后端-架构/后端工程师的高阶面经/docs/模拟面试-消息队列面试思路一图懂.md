你好，我是大明，恭喜你学完第三章的内容，又到了要验收成果的时刻了。消息队列这一章的内容很重要，知识也很系统，所以为了帮助你更好地掌握这部分内容，我们在这里设置了面试题。

你在回答的时候，最好是能够写成一个个文档，至少也要口头上说一遍。千万不要仅仅在脑海里面回忆一遍。因为在真正面试的时候，脑海中的记忆到嘴里说出的话，还需要一个转换。

### 22｜消息队列：消息队列可以用来解决什么问题？

01. 你用过消息队列吗？主要用来解决什么问题？异步、削峰和解耦你能各举一个例子吗？
02. 你用的是哪个消息队列？为什么使用它而不用别的消息队列？
03. 为什么你一定要用消息队列？不用行不行？不用有什么缺点？
04. 在对接多个下游的时候，直接用 RPC 调用行不行？为什么？
05. 为什么说使用消息队列可以提高性能？
06. 为什么说使用消息队列可以提高扩展性？
07. 为什么说使用消息队列可以提高可用性？
08. 为什么秒杀场景中经常用消息队列？怎么用的？
09. 订单超时取消可以怎么实现？
10. 你了解事件驱动吗？
11. 什么是 SAGA 事务？怎么利用事件驱动来设计一个 SAGA 事务框架？

### 23｜延迟消息：怎么在 Kafka 上支持延迟消息？

01. 什么是延迟消息？你有没有用过？可以用来解决什么问题？
02. Kafka 支不支持延迟消息？为什么 Kafka 不支持？
03. RabbitMQ 支不支持延迟消息？怎么支持的？
04. RabbitMQ 的延迟消息解决方案有什么缺点？让你来改进，你会怎么办？
05. 什么是死信队列？什么是消息 ttl？
06. 如果要让 Kafka 支持延迟消息你会怎么做？你有几种方案？各有什么优缺点？
07. 在你的延迟消息队列方案里面，时间有多精确？比如说我希望在 10:00:00 发出来，你能保证这个一定恰好在这个时刻发出来吗？误差有多大？你能进一步提高时间精确性吗？
08. 在分区设置不同延迟时间的方案里，能不能支持随机延迟时间？
09. 在分区设置不同延迟时间的方案里，如果要是发生了 rebalance，会有什么后果？
10. 当你从准备转发消息到业务 topic（biz\_topic）的时候失败了，有什么后果？怎么办？
11. 在你使用 MySQL 支持延迟消息的方案里，你怎么解决性能问题？
12. 如果要分库分表来解决 MYSQL 的性能问题，你会怎么分库分表？是分库还是分表？
13. 如果要是不同业务 topic 的并发量有区别，你分库分表怎么解决这种负载不均匀的问题？
14. 如果延迟消息还要求有序性，该怎么办？
15. 如果你已经将消息转发到了 biz\_topic 上，但是更新数据库状态失败了怎么办？
16. 除了用 MySQL，可以考虑用别的中间件来实现延迟消息吗？
<div><strong>精选留言（2）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/14/dc/08/64f5ab52.jpg" width="30px"><span>陈斌</span> 👍（1） 💬（1）<div>老师，你好，会不会出一期，把答案公布一下？</div>2023-08-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg" width="30px"><span>peter</span> 👍（1） 💬（1）<div>请教老师几个问题：
Q1：ZMQ是另外一种MQ吗?
一般了解的就是4种MQ，每一种在运行时都是独立的进程。ZMQ是另外一种，不是独立进程，在发送方和接收方都是以DLL的形式存在。老师是否了解ZMQ？
Q2：用Java写后端程序，怎么创建布隆过滤器和bit array?直接调用某个工具函数就可以实现吗？
Q3：常见的4个MQ，好像都是开源的吧。如果想研究源代码，研究哪个更好？</div>2023-08-29</li><br/>
</ul>