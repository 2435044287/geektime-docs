你好，我是李玥。

上节课我们通过学习 Kafka 创建主题的过程，掌握了消息队列控制面配置下发的设计方法。

这节课我们继续学习消息队列控制面的另外一个重要功能：高可用。学习一下常见的消息队列都是如何实现高可用架构的，进一步的，在理解高可用架构的实现原理基础上，看看如何基于高可用能力来设计消息队列的容灾架构。

## 高可用和容灾的区别是什么？

广义的高可用（High Availability, HA）是指系统在长时间运行过程中，能够持续提供服务的能力。高可用系统的设计目标是尽量减少系统的停机时间，确保系统在遇到硬件故障、软件错误或其他意外情况时，仍能正常运行或快速恢复。

在分布式系统设计领域，可以将高可用理解为：“自动抵御小规模故障的能力”。通俗地说，**系统应具备这样一种能力：当少量节点故障时，系统仍然持续可用或者能快速恢复。**

这里的“少量”是多少呢？一般来说要看系统的规模，几个节点的系统可以容忍一两个节点故障，更大规模的系统可以容忍稍多一些的节点故障。

在设计一个系统的高可用和容灾架构时，有两个重要的衡量指标：RTO 和 RPO。

**RTO 指的是系统可容忍的故障时长目标，RPO 就是系统可容忍的数据丢失数量目标。**

具体来说，RTO (Recovery Time Objective，复原时间目标)指的是：故障发生后，从系统宕机导致服务不可用之时开始，到系统恢复至可以正常提供服务之时，这两个时间点之间的时间段。