上一节结尾给你留的一个思考题是，你知道怎么查看IP地址吗？

当面试听到这个问题的时候，面试者常常会觉得走错了房间。我面试的是技术岗位啊，怎么问这么简单的问题？

的确，即便没有专业学过计算机的人，只要倒腾过电脑，重装过系统，大多也会知道这个问题的答案：在Windows上是ipconfig，在Linux上是ifconfig。

那你知道在Linux上还有什么其他命令可以查看IP地址吗？答案是ip addr。如果回答不上来这个问题，那你可能没怎么用过Linux。

那你知道ifconfig和ip addr的区别吗？这是一个有关net-tools和iproute2的“历史”故事，你刚来到第三节，暂时不用了解这么细，但这也是一个常考的知识点。

想象一下，你登录进入一个被裁剪过的非常小的Linux系统中，发现既没有ifconfig命令，也没有ip addr命令，你是不是感觉这个系统压根儿没法用？这个时候，你可以自行安装net-tools和iproute2这两个工具。当然，大多数时候这两个命令是系统自带的。

安装好后，我们来运行一下ip addr。不出意外，应该会输出下面的内容。

```
root@test:~# ip addr
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether fa:16:3e:c7:79:75 brd ff:ff:ff:ff:ff:ff
    inet 10.100.122.2/24 brd 10.100.122.255 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::f816:3eff:fec7:7975/64 scope link 
       valid_lft forever preferred_lft forever
```

这个命令显示了这台机器上所有的网卡。大部分的网卡都会有一个IP地址，当然，这不是必须的。在后面的分享中，我们会遇到没有IP地址的情况。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/c5/4d/ac0f0371.jpg" width="30px"><span>猿来是你</span> 👍（244） 💬（24）<div>能讲的详细些吗？非网络科班出身，理解不透彻！不要一带而过！</div>2018-05-27</li><br/><li><img src="" width="30px"><span>船新版本</span> 👍（77） 💬（11）<div>cidr那块将IP和子网掩码都转成二进制列出来对比的话会比较直观很多，第一遍看到这块的时候有点懵</div>2018-05-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/d6/42/bafec9b7.jpg" width="30px"><span>盖</span> 👍（495） 💬（5）<div>net-tools起源于BSD，自2001年起，Linux社区已经对其停止维护，而iproute2旨在取代net-tools，并提供了一些新功能。一些Linux发行版已经停止支持net-tools，只支持iproute2。
net-tools通过procfs(&#47;proc)和ioctl系统调用去访问和改变内核网络配置，而iproute2则通过netlink套接字接口与内核通讯。
net-tools中工具的名字比较杂乱，而iproute2则相对整齐和直观，基本是ip命令加后面的子命令。
虽然取代意图很明显，但是这么多年过去了，net-tool依然还在被广泛使用，最好还是两套命令都掌握吧。</div>2018-05-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/a6/6b/12d87713.jpg" width="30px"><span>Jealone</span> 👍（277） 💬（7）<div>MTU 大小是不包含二层头部和尾部的，MTU 1500表示二层MAC帧大小不超过1518. MAC 头14 字节，尾4字节。可以抓包验证</div>2018-05-29</li><br/><li><img src="" width="30px"><span>来生树</span> 👍（61） 💬（3）<div>看了3篇，精彩阿，这个课程定价，严重定低了。应该299起嘛</div>2018-05-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/4e/f7/618a8e52.jpg" width="30px"><span>周磊</span> 👍（52） 💬（3）<div>大学学的计算机网络课程关于ip地址要比这详细多，但刘老师讲的更为生动，联系生活中的场景做比喻，读后印象深刻。
建议读起来困难的同学先了解下二进制以及与十进制转换，再就是找相关的资料补充一下。
很多东西第一遍读不懂没关系，无论你不理解或忘记多少，当你在另一个地方再次看到这些东西时，你便会有种亲切感，以前模糊的地方会在这次变得清晰一些。经过多次的接触同一个知识点，你会越来越清楚直到透彻。</div>2018-05-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/7a/0a/0ce5c232.jpg" width="30px"><span>吕</span> 👍（42） 💬（3）<div>请教一下：我阿里云的多台机器，有172.16.2.145 和172.16.3.28这两个是怎么联通的？</div>2019-05-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4b/0f/d747ed96.jpg" width="30px"><span>Steve</span> 👍（36） 💬（1）<div>推荐两本书籍：《图解 TCP&#47;IP》、《wireshark 数据包分析实战》</div>2019-03-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/87/dd/4f53f95d.jpg" width="30px"><span>进阶的码农</span> 👍（34） 💬（1）<div>A B C 类别表里A类数据有问题 应该是1:0:0:1-126:255:255:254 建议检查以下B 和C类</div>2018-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/5b/b9/d07de7c6.jpg" width="30px"><span>FLOSS</span> 👍（17） 💬（1）<div>现在很多工具都可以更改本机的MAC地址，也就是网络上存在很多MAC地址被更改成一样的，然而并没有出现通讯异常或者混乱这是为什么？</div>2018-05-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/50/34/fefb125f.jpg" width="30px"><span>笨笨熊</span> 👍（15） 💬（2）<div>@Norman，wireshark网络分析就这么简单 这本书不错，推荐给你！</div>2018-05-24</li><br/><li><img src="" width="30px"><span>hellsplum</span> 👍（14） 💬（3）<div>（CIDR 可以用来判断是不是本地人）这句话，哪位大神帮我讲解下是什么意思呢~~~</div>2019-01-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/cd/1c/98b32e26.jpg" width="30px"><span>雷大鸡</span> 👍（14） 💬（2）<div>其实全部使用 MAC 地址也是可以通讯的，但是那样需要维护一个巨大无比的路由表，或者要求生产出来的网卡按照约定给与 MAC 地址并分配到特定的地区使用，形成类似 IP 的寻址机制，但显然那样耗时耗力，不如 IP 机制简洁。</div>2018-10-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/5b/b9/d07de7c6.jpg" width="30px"><span>FLOSS</span> 👍（14） 💬（4）<div>还是没理解，我和同事的电脑就是相同的MAC地址，我们再各自的家里上网都是正常的。</div>2018-05-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/11/3e/925aa996.jpg" width="30px"><span>HelloBug</span> 👍（11） 💬（1）<div>老师，你好~MAC地址是网络生产商写在网卡上的，相当于是写死的。但是iproute2里有命令可以修改网卡的MAC地址，是不是只有虚拟机上的系统的网卡可以修改，而物理网卡的MAC地址是不能修改的？</div>2018-12-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/49/68/bef5f7d3.jpg" width="30px"><span>metalmac.kyle</span> 👍（11） 💬（1）<div>浅显易懂，言简意赅，网络的书看了很多加上实践和作者的讲解豁然开朗，重温复习很有效，如果能再搭配一些相关书籍章节的参考和深入更赞了👍</div>2018-05-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f8/ba/d28174a9.jpg" width="30px"><span>Geek_zbvt62</span> 👍（9） 💬（1）<div>我就是来纯感谢的，天天ip addr，好多内容也不清楚干什么的。</div>2018-05-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/64/74/34409399.jpg" width="30px"><span>Chain</span> 👍（7） 💬（1）<div>课程几十块钱，感觉我捡便宜了😂️😂️😂️</div>2018-05-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/4c/a8/2dbe1e90.jpg" width="30px"><span>Build</span> 👍（6） 💬（1）<div>Ip用于网络寻址，mac在一个局域网内唯一</div>2019-04-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/ae/e0/3e636955.jpg" width="30px"><span>李博越</span> 👍（6） 💬（1）<div>能讲讲子网掩码跟网关之间，具体的关系是怎样的？</div>2018-09-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/8c/14/86736fb7.jpg" width="30px"><span>晴枫慕竹</span> 👍（5） 💬（1）<div>有个问题，就是文中说10.100.122.2&#47;24，网络号是24位，后8位是主机号，按这个来讲它应该属于C类地址，但是从那个表格来看这个IP看他是10开头的，应该又属于A类，这样是否矛盾，还是我哪里理解错了，谢谢</div>2019-05-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/4c/09/6de8b2f6.jpg" width="30px"><span>张晶晶</span> 👍（4） 💬（1）<div>11分钟的时候说ip地址像身份证，结束的时候说mac地址像身份证，是不是有一个说错了？</div>2018-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/f9/90/f90903e5.jpg" width="30px"><span>菜菜</span> 👍（3） 💬（2）<div>老师好！想请问32位的IP地址不够，为什么48位的MAC地址就足够呢，毕竟它也是全球独一无二的啊。特别是现在IoT设备数量急剧增加，网卡数量应该也在急剧增加，所以。。。</div>2018-11-29</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/ojzLmQukvUQ9HenEnpm1YXqvnzAezZBQlJRf2BBpe6RvmbRFECVYUXbH3XhSRrfMuDk4w63ia7PVo8Ge6kibficeg/132" width="30px"><span>HoKwan</span> 👍（3） 💬（2）<div>老师，我有一处理解的不是很清晰，IP的ABC分类法基本弃用了，换成了CIDR，但是ABC分类法中的私有IP段继续沿用了下来（因为这样划分出来的子网基本满足私人的需求），请问是这样理解么？</div>2018-11-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/50/4d/abb7bfe3.jpg" width="30px"><span>richey</span> 👍（3） 💬（1）<div>大师，最后总结说CIDR 可以用来判断是不是本地人，我看了好几遍没发现文中有说啊，指的是根据公有ip或私有ip判断？望解答。</div>2018-08-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/53/bd/e3c73a66.jpg" width="30px"><span>Mouri</span> 👍（3） 💬（2）<div>如果把IP为192.168.1.2的主机和IP为192.168.2.2的主机连到不带Vlan的传统交换机，是不是也可以相互通信？</div>2018-05-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/01/38/5daf2cfb.jpg" width="30px"><span>吴军旗^_^</span> 👍（2） 💬（1）<div>为什么A、B、C类的私有地址是以10、172、192开头的， 没有太明白</div>2019-05-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/69/21/7db9faf1.jpg" width="30px"><span>简迷离</span> 👍（2） 💬（1）<div>对于广播地址192.168.0.255，一旦发送这个地址，整个 192.168.0 网络里面的所有机器都能收到。这里的“一旦发送这个地址”怎么理解，是不是向广播地址发送消息，广播地址所在的整个网路的机器都能收到的意思？</div>2018-09-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/53/26/12445259.jpg" width="30px"><span>翁秀玲</span> 👍（2） 💬（1）<div>以前在学校上过计算机网络课程，前2讲主要是宏观介绍，先让读者有个大的网络轮廓，收获不大，反而有点能懂。这讲不错噢。继续保持。</div>2018-05-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/48/73/cefaaf71.jpg" width="30px"><span>alex</span> 👍（2） 💬（1）<div>能讲讲广播，组播的实际应用场景吗，有没有具体案例</div>2018-05-23</li><br/>
</ul>