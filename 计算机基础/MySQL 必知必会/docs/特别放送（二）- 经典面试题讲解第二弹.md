你好，我是朱晓峰。

到这里，“进阶篇”的内容咱们就学完了。今天，我给你准备了7道面试题。这些面试题涵盖了这个模块的核心内容，我们一起借助面试题来复习一下。我不仅会给你提供正确答案，还会带你深入分析这些问题，让你真正能够做到举一反三。

好了，话不多说，我们现在开始。

## 第一题

**日志文件对数据库的故障恢复至关重要。下面这些关于日志文件的描述，正确的是：**

1. MySQL日志记录的顺序可以与并发操作的执行顺序不一致
2. 为了确保数据库是可恢复的，必须确保先写数据库后写日志
3. 日志文件中检查点的主要作用是提高系统出现故障后恢复的效率
4. 系统故障恢复必须使用日志文件以保证数据库系统重启时能正常恢复，事务故障恢复不一定需要使用日志文件

答案：选项3。

解析：

选项1是错误的。MySQL日志记录的顺序是严格按照操作执行的顺序记录的，不会出现日志记录的顺序与并发操作执行的顺序不一致的情况。

选项2也是错误的。MySQL的日志系统遵循WAL（Write-Ahead Logging）机制，也就是所谓的先写日志，后写数据库的机制。由于记录日志是顺序写入磁盘，而写入数据库的磁盘操作需要对磁头定位，因而写入日志的速度要远比写入数据快。为了提高执行的效率，MySQL执行的是先写日志，日志写入成功之后，就回复客户端操作成功，对数据库的磁盘写入则在之后的某个阶段执行。这样，即便遇到系统故障，由于有了日志记录，就可以通过日志对数据库进行恢复了。WAL机制包括3个规则：
<div><strong>精选留言（1）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg" width="30px"><span>giteebravo</span> 👍（2） 💬（1）<div>
第一题对检查点与脏页理解的不够深刻，需要再次温习；

第五题，如果定义视图的 SQL 语句中包含了聚合函数，就不能对视图中的数据进行 DML 操作。知道了这个结论，但为什么不能呢？

刷题不是目的，真正的目的是对你掌握知识的熟练程度进行检验，发现问题，查漏补缺。
</div>2021-04-29</li><br/>
</ul>