你好，我是王健伟。

这节课我们来谈一谈多路查找树。传统的、用来搜索的二叉查找树有很多，比如平衡二叉树、红黑树等。

虽然通常情况下它们的查询性能很不错，但当数据量非常大的时候，它们却无能为力。因为当数据量非常大时，内存是很有限的，不可能把所有数据全部加载到内存中，大部分数据只能存放到磁盘上，只有需要的数据才会被加载到内存中。

通常来讲，计算机访问内存的速度要远远快于访问磁盘的速度，那么程序大部分的时间就会阻塞在磁盘IO上。所以尽量减少对磁盘的访问次数就是提高程序性能的关键。

那么，如何组织数据才能达到尽量减少对磁盘的访问次数的效果呢？一起来看一看B树。

## B树的基本概念、定义及基础实现代码

B树也被称为多路平衡查找树，也称为B-树，这里的-并不是减号而是一个连字符。这里的多路可以理解为相对于二叉树而言，二叉树是二路查找树，因为最多只有两个子节点，所以查找时最多只有两条路。而B树有多条路（至少3条路），也就是说，B树的节点可以有多个子节点。

B树是一种组织和维护外存（磁盘上的文件）系统非常有效的数据结构，常用在数据库里，引入B树的主要目的就是减少磁盘的I/O操作。

因为平衡二叉树、红黑树等最小高度保持在$log\_{2}^{n}$附近，这意味着大部分针对平衡二叉树、红黑树的操作（查找、插入、删除等）的时间复杂度为O($log\_{2}^{n}$)，如果树中的节点数据很多都是保存在磁盘上的，那么这里就可以将O($log\_{2}^{n}$)理解成对磁盘的访问次数。显然，减少对磁盘的访问次数这件事就变得极其重要。对比来看，B树的高度不是$log\_{2}^{n}$，而是一个可以控制的高度，一般这个高度会远小于$log\_{2}^{n}$，这意味着使用B树可以极大地减少对磁盘的访问次数。
<div><strong>精选留言（1）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/1d/0c/a5/0bbfd5e7.jpg" width="30px"><span>Tiger</span> 👍（1） 💬（0）<div>老师您好，按照B树的定义，M阶的B树每个节点至多有M个子节点，每个节点至多有M-1个关键字，所以在节点的定义中，childs数组的大小应该是M，data数组的大小应该是M-1</div>2023-10-10</li><br/>
</ul>