你好，我是王健伟。

前面我们提到过，向红黑树中插入新的节点会导致红黑树失去平衡，所以，插入新节点后，必须对该红黑树进行平衡性调整。红黑树的平衡性调整，是通过节点**变色**或者**旋转**来实现的。

我们先来想想，红黑树插入节点操作一般分为几种情况呢？

首先，对于没有任何节点的空树，直接创建一个**黑色**节点作为根节点即可。

其次，对于非空的树，查找要插入的位置并插入一个**红色**节点，然后要判断该节点的父节点。

这里注意，之所以插入的是红色而不是黑色节点，是因为红色节点不会增加黑高度，从而尽量减少插入节点后导致的平衡性调整。如果父节点为黑色，此时不需要做什么；如果父节点为红色，会违背红黑树性质3，此时必须进行平衡性调整。

这里我将通过观察到的一些现象来总结一下红黑树插入节点后的平衡性调整操作，从而总结出一些规律，而后根据这些规律来编写代码。为了能够观看到红黑树插入一个节点后的平衡性调整，你可以通过搜索引擎搜索“可视化数据结构算法演示”字样，会发现一个“[可视化数据结构算法演示 - Data Structure Visualization](https://www.cs.usfca.edu/~galles/visualization/Algorithms.html)”的链接，点击后会出现一个页面，点击页面中的“[Red-Black Trees](https://www.cs.usfca.edu/~galles/visualization/RedBlack.html)”链接，会跳转到图1所示的页面。
<div><strong>精选留言（2）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/2a/f0/82/f235d91d.jpg" width="30px"><span>Yj.yolo</span> 👍（0） 💬（1）<div>作者你好，我发现，对于您提供的平衡树和红黑树的代码，我可以明白，也看得懂，但是我自己写就很很艰难，我的问题是：我学会套用相关模板即可？还是说我必须会手撸相关红黑树代码</div>2023-07-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2a/f0/82/f235d91d.jpg" width="30px"><span>Yj.yolo</span> 👍（0） 💬（0）<div>图6最右侧的图，按照相关原理和图6下面的文字，20和40节点应该是黑色吧？</div>2023-07-25</li><br/>
</ul>