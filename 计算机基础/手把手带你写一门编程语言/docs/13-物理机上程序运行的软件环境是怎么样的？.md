你好，我是宫文学。

上一节课，我们主要讨论了程序运行的硬件环境。在某些编程场景下（比如嵌入式编程），我们的语言需要直接跑在裸设备上。所以，你要能够理解在裸设备上运行某个语言的程序所需要的技术。

不过，现代语言大部分情况下都运行在某个操作系统里，操作系统为语言提供了基础的运行环境，比如定义了可执行文件的格式、程序在内存中的布局、内存管理机制，还有并发机制等等。计算机语言需要跟操作系统紧密配合，才能更好地运行。

今天这节课，我们就来讨论一下操作系统中与计算机语言有关的那些知识点，包括内存管理、任务管理和ABI，为进一步实现我们的计算机语言打下良好的基础。

首先我们来看看操作系统的内存管理功能和程序的关系。

## 内存管理

操作系统的一个重要功能就是管理内存，它会把内存虚拟化，并进行内存访问的权限管理。

**那什么是虚拟化呢？**

虚拟化就是让每个进程都有一个自己可以用的寻址空间，不过这些地址是假的地址。但就这些假地址，我们通过指令发给CPU，CPU也是认的。因为CPU中有一个内存管理单元，缩写是MMU，它能够根据这个逻辑地址，计算出在内存里真实的物理地址。MMU还可以跟操作系统配合，设置每个内存页面的权限，包括是否可读、可写和可执行。
<div><strong>精选留言（3）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/14/99/f2/c74d24d7.jpg" width="30px"><span>大豆</span> 👍（2） 💬（1）<div>如果没有操作系统，那么。
1、虚拟化内存及虚拟化cpu将不存在，开发难度大大增加，出错概率也大大增加。
2、io效率大大降低。
3、直接操作硬件会带来更多的安全风险。
4、由于无法使用高级编程语言，开发效率会降低(这个不是很确认，哈哈哈)。</div>2021-09-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/21/7e/fb725950.jpg" width="30px"><span>罗 乾 林</span> 👍（2） 💬（1）<div>没有操作系统环境下：
1、程序编译时需要指定程序链接时的地址布局
2、运行时需要将程序加载到对应的物理地址再从指定地址运行</div>2021-09-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>学习打卡</div>2022-09-15</li><br/>
</ul>