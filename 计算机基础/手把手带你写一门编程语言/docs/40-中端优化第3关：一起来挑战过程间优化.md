你好，我是宫文学。

在前面两节课，我们分析了本地优化和全局优化的场景。我们发现，由于基于图IR的优点，也就是**控制流和数据流之间耦合度比较低**的这个特点，我们很多优化算法的实现都变得更简单了。

那么，对于过程间优化的场景，我们这个基于图IR是否也会带来类似的便利呢？

过程间优化（Inter-procedural Optimization）指的是跨越多个函数（或者叫做过程），对程序进行多方面的分析，包括过程间的控制流分析和数据流分析，从而找出可以优化的机会。

今天这节课，我们就来分析两种常用的过程间优化技术，也就是内联优化和全局的逃逸分析，让你能了解过程间优化的思路，也能明白如何基于我们的IR来实现这些优化。之后，我还会给你补充另一个优化技术方面的知识点，也就是规范化。

## 内联优化

内联优化是最常见到的一个过程间优化场景，说的就是当一个函数调用一个子函数时，干脆把子函数的代码拷贝到调用者中，从而减少由于函数调用导致的开销。

特别是，如果调用者是在一个循环中调用子函数，那么由很多次循环累积而导致的性能开销是很大的。内联优化的优势在这时就会得到体现。

而在面向对象编程中，我们通常会写很多很简短的setter和getter方法，并且在程序里频繁调用。如果编译器能自动把这些短方法做内联优化，我们就可以放心大胆地写这些短方法，而不用担心由此导致的性能开销了。
<div><strong>精选留言（3）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>学习打卡</div>2022-10-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/ac/d3/3e461046.jpg" width="30px"><span>千无</span> 👍（0） 💬（0）<div>一路走马观花地学到这，很有感触，世界大大的打开了</div>2021-11-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/23/7f/24/ceab0e7b.jpg" width="30px"><span>奋斗的蜗牛</span> 👍（0） 💬（0）<div>每次看都有醍醐灌顶的感觉</div>2021-11-15</li><br/>
</ul>