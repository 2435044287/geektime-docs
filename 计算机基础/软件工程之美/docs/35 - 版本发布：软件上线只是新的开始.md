你好，我是宝玉。上一章我们学习了软件测试篇，今天，我们将从版本发布这个话题开始，进入到运行维护篇的学习。

说到版本发布，对于很多开发人员来说，觉得是一件很简单的事情，就是将程序编译打包部署，但实际发布的时候，却经常出现发布错版本的问题，或者是发布前修改了一点代码导致上线出现Bug的情况发生。

而版本发布对于很多项目管理者来说，又是一个很纠结的事情，觉得还有很多功能没完成，很多Bug还没改完，害怕用户负面评价，结果时间一拖再拖，迟迟无法上线。

所以今天我将带你一起学习一下如何做好版本发布，保障好发布产品的质量。

## 关于软件版本

在讨论这个话题之前，我们需要了解“版本”的含义。也许你已经知道版本的含义，但是这里还是有必要明确一下，因为在不同的语境下，版本的含义也有所不同。比如产品经理会对开发人员说：“这个功能我们会放到下个版本中实现”，开发人员会对测试人员说：“这个Bug在昨天的版本中已经修复了”。

这里产品经理说的“版本”是指特定功能集合，开发人员说的“版本”是指某一次程序的构建结果。也就是说对软件版本来说，包含两部分含义，一部分代表特定功能集合，一部分代表某一次特定的代码构建结果。

为了明确标识软件版本，需要对版本进行编号。目前业界在软件版本的命名上，通常会采用以下方式：
<div><strong>精选留言（11）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/12/34/1d/169cd800.jpg" width="30px"><span>beiler</span> 👍（8） 💬（1）<div>老师，我想问个问题啊，比如我冻结了代码，但是测试测试出来了二十个bug，那回归测试是二十个bug修完了一起测试还是修一个测一个？最后再整体测试？</div>2019-06-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/7b/ae/66ae403d.jpg" width="30px"><span>熊猫</span> 👍（7） 💬（1）<div>多个项目发版时，要注意依赖，莫慌，匆匆忙忙很容易出现问题</div>2019-05-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/53/5d/46d369e5.jpg" width="30px"><span>yellowcloud</span> 👍（6） 💬（1）<div>宝玉老师，您好，我们目前有一个项目是做实时数据采集的，对方将实时数据推送给我们，基本上每天每个时刻都可能有数据推送过来。这样就导致一个问题，我们部署新的版本时，他们的数据还在推送，这样就不可避免地丢失了部署过程中的数据，对方也没有重新推送的机制。请问下宝玉老师，这种问题有没有比较好的解决方案，以解决更新版本时数据丢失的问题。</div>2019-05-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/47/c2/e9fa4cf6.jpg" width="30px"><span>Charles</span> 👍（4） 💬（1）<div>我们目前人工管理版本很容易乱，看了文章才知道最后一位是构建版本并且是自动生成的，之前也没深究，豁然开朗，看来很多表面上看起来很简单的东西深究都是学问，谢谢！

另外问宝玉老师一个团队管理问题，如果是瀑布流带点敏捷部分实践的开发方式，总觉得UI这个岗位工作量不怎么饱和，一个版本过来特别是小版本迭代，周期可能是两周，UI可能1天就搞定了，其它岗位都差不多都要全程跟下来，这个问题出现在哪里？

</div>2019-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/40/10/b6bf3c3c.jpg" width="30px"><span>纯洁的憎恶</span> 👍（3） 💬（1）<div>版本规划：
1.规划好要发布功能。必要的先发，锦上添花的后发。根据用户的质量容忍度，划分质量标准，明确哪些功能质量必须一步到位，哪些可以慢慢来。
2.设计好发布策略。对内发布还是对外发布，beta版还是正式版，是否用灰度测试，管理好用户预期。
3.制定综合性发布计划。协调项目团队、客户、运营等多方利益确定发布时间进度。

科学规范的发布流程：
1.代码冻结。禁止修改即将发布到主干的程序，以避免出现不可控的新bug。
2.bug分级。冻结程序中的bug做到心中有数，但对于极其严重的bug仍要在发布前修正，修复后要生成新的候选版本号以示区分。
3.回归测试。最终候选版本发布生产环境前，对主流程和已知bug测试，确保无误。
4.上线申请、审批与部署。
5.上线测试。第一时间发现问题，如有必要立刻回滚，切忌急于打补丁。</div>2019-05-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/2f/f4/2dede51a.jpg" width="30px"><span>小老鼠</span> 👍（2） 💬（1）<div>一个产品的客户有许多，客户的环境各不相同，如何保证产品质量？(比如A电信企业生产的DNS服务器，在X产商集成的是B电信企业的DHCP服务器，在Y产商集成的是C电信企业的DHCP服务器⋯。)</div>2019-10-07</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/m2baiaoDn4II6piarRCeVK4JGah8gzF0m9J6r35xDTEMUUaUrzf23jhRa0aicTeUXDv29ZkicicaI44Fhfn6NrSeHiaQ/132" width="30px"><span>calvins</span> 👍（1） 💬（1）<div>2 b和2 c在版本上线差距真大，从文章来看，我们大部分的发版还是不够严谨。没有beta版，没有灰度，经常紧急修复，版本管理工具缺失，好多问题。不知道这么方面老师有没有好的方法或建议？</div>2020-04-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/34/b7/60281658.jpg" width="30px"><span>E</span> 👍（1） 💬（1）<div>老师，我看您讲的大多数是针对2C，针对2B的有什么好的提议吗？</div>2019-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/44/47/3ddb94d0.jpg" width="30px"><span>javaadu</span> 👍（1） 💬（1）<div>这篇文章来得正好，很有收获，今天要组织项目的发布评审，昨天我在文档里主要梳理了几个点：本次发布的变更点；与前端的合作；自己内部应用的依赖关系；db变更；配置变更等等。

读了这篇文章，感觉自己需要改进几个点
第一，跟产品确认本次的功能点和标准
第二，不同应用的发布记录和灰度计划
第三，发布上线后健康状态的监控（这块我已经做了个降级开关，不过需要提出来，把信息同步出去）

另外，今年跟着老师的专栏学习下来，感觉自己的项目管理能力有不小的提升，表现在工作中就是试用期就开始做技术pm了，感谢老师🙏</div>2019-05-24</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/cbDlATDQicJdp6BkMfeyhpMdYErP36z2InktB8b16JRcaCdEXia4ulS5DGy4T79XVaOYQgMKwr2uGrTeh5hQ6m8A/132" width="30px"><span>Geek_Zeal</span> 👍（0） 💬（0）<div>大型项目程序配置管理演化之路，这篇链接失效了呢老师</div>2023-11-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>软件上线只是新的开始，还需要收集用户的反馈，对线上服务进行监控和预警，对整个版本的开发过程进行总结回顾。--记下来</div>2022-07-05</li><br/>
</ul>