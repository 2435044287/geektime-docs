前18节课，我们主要探讨了编译器的前端技术，它的重点，是让编译器能够读懂程序。无结构的代码文本，经过前端的处理以后，就变成了Token、AST和语义属性、符号表等结构化的信息。基于这些信息，我们可以实现简单的脚本解释器，这也从另一个角度证明了我们的前端处理工作确实理解了程序代码，否则程序不可能正确执行嘛。

实际上，学完前端技术以后，我们已经能做很多事情了，比如让软件有自定义功能，就像我们在[15讲](https://time.geekbang.org/column/article/136557)中提到的报表系统，这时，不需要涉及编译器后端技术。

但很多情况下，我们需要继续把程序编译成机器能读懂的代码，并高效运行。**这时，我们就面临了三个问题：**

1.我们必须了解计算机运行一个程序的原理（也就是运行期机制），只有这样，才知道如何生成这样的程序。  
2.要能利用前端生成的AST和属性信息，将其正确翻译成目标代码。  
3.需要对程序做尽可能多的优化，比如让程序执行效率更高，占空间更少等等。

弄清这三个问题，是顺利完成编译器后端工作的关键，本节课，我会让你对程序运行机制、生成代码和优化代码有个直观的了解，然后再在接下来的课程中，将这些问题逐一击破。

## 弄清程序的运行机制

总的来说，编译器后端要解决的问题是：现在给你一台计算机，你怎么生成一个可以运行的程序，然后还能让这个程序在计算机上正确和高效地运行？
<div><strong>精选留言（14）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/e8/ca/2a7cc193.jpg" width="30px"><span>阿鼎</span> 👍（16） 💬（1）<div>老师，后段技术在实际的项目中，有什么应用？</div>2019-10-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/ff/79/3b38c9e1.jpg" width="30px"><span>nil</span> 👍（9） 💬（1）<div>把前端的ast转化成中间形式确是个漂亮的做法，可以隔离前后端之间的耦合。后端可以面向ir实现。针对不同的硬件平台，实现不同的后端编译程序。这让我想到网络协议中的ip协议。ip协议被设计成沙漏，或者说细腰结构，就是为了减少上下游之间的耦合，应用层和数据链路层中的协议多种多样，但是网络层协议基本是稳定的，ip协议和ir我感觉有着异曲同工之妙！</div>2019-10-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/9a/89/babe8b52.jpg" width="30px"><span>A君</span> 👍（6） 💬（1）<div>前端的任务是生成AST，后端的任务有两个，一个是优化AST，剔除掉冗余操作；第二个是生成充分利用机器特性的目标代码。</div>2021-01-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/64/d5/bfb24dbb.jpg" width="30px"><span>Xylitol</span> 👍（5） 💬（1）<div>博主是厦门人？可以交个朋友～</div>2020-03-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/a0/3f/06b690ba.jpg" width="30px"><span>刘桢</span> 👍（4） 💬（1）<div>后端还是难的呀，考研学组原脑袋都大了</div>2020-05-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1e/51/f54dca29.jpg" width="30px"><span>非洲小白领</span> 👍（3） 💬（1）<div>前端算法部分看得一脸懵逼，后端就熟悉多了</div>2019-12-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/22/2d/5a/380efdec.jpg" width="30px"><span>。</span> 👍（2） 💬（2）<div>老师，一般我们都是在代码中实现多线程（也就是多核心的控制？），那么此处编译器后端所提到的并行性中的多个核心又具体是怎样的呢？</div>2021-01-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/df/6c/5af32271.jpg" width="30px"><span>Dylan</span> 👍（1） 💬（1）<div>熬过最不熟悉的前端，突然感觉一身轻松</div>2020-03-20</li><br/><li><img src="" width="30px"><span>Geek_103f3f</span> 👍（1） 💬（3）<div>老师，直接从这开始学可以吗，前端实在听不懂，对我的工作也没什么用</div>2019-12-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/0a/83/f916f903.jpg" width="30px"><span>风</span> 👍（1） 💬（1）<div>从这一节开始，内容就十分熟悉了，终于不用看JAVA代码了，哈哈😄</div>2019-10-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/dd/11/04ebee55.jpg" width="30px"><span>lizhaochao</span> 👍（0） 💬（1）<div>高速缓存指的是 L1 L2 这些缓存吗</div>2020-06-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/ea/05/9976b871.jpg" width="30px"><span>westfall</span> 👍（0） 💬（2）<div>汇编代码可以直接运行吗？难道不用再转为二进制代码？</div>2020-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/d0/a7/7bb34c67.jpg" width="30px"><span>方</span> 👍（0） 💬（1）<div>函数里面的基本块不能跳转到函数入口，那递归怎么办？</div>2020-05-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/92/0b/2ccf7908.jpg" width="30px"><span>...</span> 👍（1） 💬（1）<div>感觉java编译后的字节码不能认为是一种IR(而应该认为是和汇编代码一样的存在)，这里应该并没有做机器指令的兼容，而是因为使用C在写java虚拟机时利用C语言帮助完成机器指令的兼容，所以并不是java字节码class适配了多平台，而是虚拟机适配了多平台</div>2022-06-12</li><br/>
</ul>