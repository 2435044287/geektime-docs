你好，我是微扰君。

目前为止，我们已经介绍了STL里的大部分序列式容器，包括vector、deque和list，也对应着数组、队列和链表这几种基础数据结构；今天我们来学习最后一种常用的线性数据结构，栈。

栈这个词，相信每一个研发同学在学习编程的过程中都会经常听到。不仅仅是因为栈本身就是一种基础的、常见的数据结构，更因为栈在计算机世界里起着举足轻重的作用。

在编程语言中，栈除了作为一种常用的数据结构，也常常用来表示一种叫做“调用栈”的概念，它是编程语言之所以能实现函数调用的关键所在。而在内存分配中，栈也表示一种内存分配的区域，和内存中的堆区是一种相对的概念。

**栈区是有结构和固定大小的，区块按照次序存放，每个线程独占一个栈区，总的大小也是事先确定的**；而堆区则没有固定的大小，数据可以随意存放。我们常常听到的 stack overflow 错误，也就是栈溢出错误，就是指程序在运行时，存放在栈上的数据已经多于栈区的容量，产生了容量不足的错误。相信说到这，你就更加明白为什么说栈相比于其他数据结构更经常被听到了吧。

其实无论是调用栈还是内存中的栈区，这两种含义都和栈数据结构的LIFO特性有关。如果你已经有了充分的背景知识，可以先想想这是为什么？
<div><strong>精选留言（3）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg" width="30px"><span>友</span> 👍（8） 💬（2）<div>感觉用deque主要是扩容逻辑方便 直接复用</div>2021-12-18</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/rvQxUmekECjyZu1RwbUguBWpBcQuKywQPtiaxNVFJSib07QMZnNUr8MnRF3RYEsn6MhgGFJibwlrVomibEicYMiaia7ZQ/132" width="30px"><span>Geek_a8ce05</span> 👍（3） 💬（1）<div>说的太深了，估计劝退很多人</div>2022-04-12</li><br/><li><img src="" width="30px"><span>Paul Shan</span> 👍（2） 💬（3）<div>如果用vector实现栈，内存管理更简单，省去了Deque存储指针的开销，结构更紧凑，均摊复杂度和Deque是一样的，都是O(1). Deque因为内存管理分了两层，带来了两个好处。第一个好处是极端情况下的高效。虽然均摊复杂度是一样的，但是vector扩容的时候，整体容量要扩充两倍，这一个时刻的效率会很差。Deque分了两层，第一层扩容的时候也要加倍，但是因为第一层管理的是数据块，这个加倍带来的影响小很多。第二个好处是，对大块内存的需求降低。Deque分了两层，只要求第一层是连续内存，第二层可以利用内存碎片。我想正是因为这两个优点让STL采用Deque作为默认Stack实现。</div>2021-12-18</li><br/>
</ul>