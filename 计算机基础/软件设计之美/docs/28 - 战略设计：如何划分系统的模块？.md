你好！我是郑晔。

上一讲，我们已经初步认识了 DDD ，知道了支撑 DDD 最核心的就是通用语言和模型驱动设计的方法。我们在上一讲已经讲了建立通用语言的方法，接下来，就该进行模型的设计了。

在模型设计中，DDD 又分成了两个阶段，战略设计和战术设计。这一讲，我们先来聊聊战略设计，下一讲再来谈战术设计。

战略设计，这个名字听上去有点高大上。而且，战略设计包含很多的概念，比如，子域、限界上下文和上下文映射图等等。这让很多人有些望而却步。虽然概念看似很多，但只要有一条主线将它们贯穿起来，这些概念也不难理解。

我们可以先把这些概念做一个划分，分为**做业务的划分和落地成解决方案**两个部分，也就是说，战略设计中的概念，一部分是为了将不同的业务区分开来，也就是要将识别出来的业务概念做一个划分，另一部分则是将划分出来的业务落实到真实的解决方案中。

好，我们接下来就先来看看战略设计中的这些概念到底是怎么回事。

## 业务概念的划分

我们前面说过，软件开发就是在解决问题，所以，一方面，我们要知道要解决的问题是什么；另一方面，我们要知道怎么去解决问题。

我们要解决的问题就是领域问题，在 DDD 中，有几个概念是与领域相关的，比如，子域、核心域、支撑域、通用域等。其实，它们说的都是一件事，就是如何先把问题从大面上进行分解。
<div><strong>精选留言（16）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/96/63/7eb32c9b.jpg" width="30px"><span>捞鱼的搬砖奇</span> 👍（13） 💬（3）<div>一套微服务里 有一个服务专门负责操作数据库同时又带有业务。其他系统需要发送 RPC 请求调用该系统完成数据库操作。请问老实这样合理吗</div>2020-07-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8e/a3/d7e5fe8a.jpg" width="30px"><span>0xABC</span> 👍（5） 💬（1）<div>通用语言、战略设计、战术设计，好似一个三部曲，从上层到下层，层层细化和分解。感觉通用语言和战略设计对于接触和使用不久的新人是要不断踩坑的，希望郑老师能分析一些过去很多年的一些详细的实际案例，理论结合实际，更能体会其中的奥妙。</div>2020-08-03</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJhyK1QiaqyNo8rzhibX2o97ZEkvslpsYhjZSSTicKjwkNCyFrEH88ywUia8MZV7mml6Az8HEoghkQqfw/132" width="30px"><span>Geeker</span> 👍（5） 💬（3）<div>有一点不太明白，在不同边界上下文交互过程中，防腐层是封装了具体的远程调用协议和将外部数据进行格式装换?</div>2020-07-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ad/24/c6b763b4.jpg" width="30px"><span>桃子-夏勇杰</span> 👍（4） 💬（1）<div>想听郑老师讲讲更简便一些的模型设计方法，例如，四色建模法，我不知道是不是？主要是想听听郑老师的实战经验：）</div>2020-08-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/ee/9c/abb7bfe3.jpg" width="30px"><span>abc-web</span> 👍（1） 💬（1）<div>老师你好，听了关于领域驱动开发这几节课，感觉是先进行事件风暴，在进行领域划分，然后对事件风暴的输出进行归类，是这样吗老师？</div>2021-08-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4a/48/744780ea.jpg" width="30px"><span>fengkuok</span> 👍（1） 💬（1）<div>郑老师，每节课最后的思维导图是用什么软件画出来的？</div>2020-08-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f9/88/cdda9e6f.jpg" width="30px"><span>阳仔</span> 👍（3） 💬（0）<div>总结一下
战略设计首先要把业务概念做一个划分，
这又分为业务划分和解决方案落地
业务划分将领域问题拆分为多个子领域问题，根据重要程度不一样又分为核心域、支撑域、通用域。
解决方案落地则需要做到把拆分的各个子领域问题对应到解决方案中，限定上下文就这样的一个桥梁，而上下文映射则定义了限定上下文之间的交互方式。
最重要的交互方式就是建立防腐层，它的作用是把外部模型和内部模型之间的交互进行转化（这个感觉有点类似适配器模式的意思）
</div>2020-07-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/92/ce/9d24cb2c.jpg" width="30px"><span>峰回路转</span> 👍（2） 💬（0）<div>郑老师，上下文映射图的几种交互方式能给我们讲讲吗？</div>2020-07-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/1b/88/ac69f57a.jpg" width="30px"><span>磉盘</span> 👍（1） 💬（0）<div>通过建立通用语言识别模型，通过战略设计从更高层次对模型分组，模型放到不同的限界上下文中形成了子域，对不同的子域做不同的投入。子域映射到设计上为不同的上下文，每个上下文可以形成一个子系统（微服务）。

上下文通过暴露接口的方式进行交互，就是上下文映射图。在通过战术设计从技术上予以实现。</div>2021-05-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c4/f3/92f654f1.jpg" width="30px"><span>Bug? Feature!</span> 👍（1） 💬（0）<div>战略设计，就是将不同的模型进行分组！划分业务，划分子域，针对各自的特点，进行不同的投入。</div>2020-11-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/fd/58/1af629c7.jpg" width="30px"><span>6点无痛早起学习的和尚</span> 👍（0） 💬（0）<div>看到这里，发现这种偏方法论的东西反而越难懂，看似懂了，但是一用就废，还是需要更多的案例来实践这些方法论，这样才知道方法论的落地到底怎么用</div>2023-10-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>战略设计，就是将不同的模型进行分组--记下来</div>2022-05-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/57/2a/cb7e3c20.jpg" width="30px"><span>Nio</span> 👍（0） 💬（0）<div>解决方案对应的限界上下文还是不太理解，我理解是到了解决方案层面，开发需要将划分后的业务具体实现，但因为总是在一个系统中，难免会有子模块相互重合的地方，如何解决重合地方的就成了比较关键的问题，通过限界上下文可以比较好的解决，但是具体如何通过限界上下文来解决呢，没有get到这个点。</div>2022-04-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/03/67/a1d46d25.jpg" width="30px"><span>zhao.shaowei</span> 👍（0） 💬（0）<div>郑老师好!
根据不同的关注点,不同的变化来源,来划分子域.
那么划分限界上下文,有没有什么参考基准?</div>2021-01-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/7a/9c/a4bc748d.jpg" width="30px"><span>Janenesome</span> 👍（0） 💬（0）<div>看到留言有说项目重构成DDD通常是一把手工程，的确是。工作中怎么说服领导这个重构带来的收益是大于成本的呢。

《10X程序员工作法》里面有提过可以先组一个小团队来实践，其他团队看到成效了便会跟上。可是看这个专栏的大部分人应该还没到这种级别，这时候应该怎么做才好呢</div>2020-10-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg" width="30px"><span>escray</span> 👍（0） 💬（0）<div>一篇文章搞懂子域、限界上下文和上下文映射图。

之前听到领域驱动设计的这些概念一头雾水，经过老师的梳理，清楚了很多。虽然一些具体的业务划分和落地方案还需要进一步的学习，但是大致的框架是有了。

对于同一个概念，在不同领域里面代表不同的含义，这个还是有点晦涩，特别是在使用同样名字的情况下，比如订单在订单上下文、支付上下文、物流上下文中的不同含义；用户和项目成员。

以前的项目在大部分情况下是没有模型分组的，能提取出来几个对象就算是让人满意了。做过类似新闻出版的业务系统，其实从一条新闻的原始材料，经过编辑、审稿、校对，到最终出版，应该也是可以划分出不同的子域的，我们只是使用了不同的对象来指代。用户其实也有不同的限定上下文，不同的用户出现在不同的子域，所担负的职责其实也不太一样，也只是根据职级赋予角色而已。

不过和之前留言的情况一样，如果想把原有系统按照领域驱动设计来重构，那真的就是“一把手工程”了，而一把手哪里会懂领域驱动设计。</div>2020-09-27</li><br/>
</ul>