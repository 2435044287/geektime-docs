你好！我是郑晔。

经过了前面几讲的铺垫，我们已经对软件设计是什么，以及要考虑哪些因素有了一个初步的了解。热身之后，就该开启正式的旅程了。

作为一个程序员，我们在职业生涯中免不了要接手新项目，承担维护该项目的职责。如果一个新项目摆在面前，你会怎么去研究它呢？

很多人的第一反应就是去看源代码。但是，一头扎入代码中，很快你就会迷失其中，最初那股子探索精神，也会逐渐被迷茫所代替。回想一下，有多少次你满怀希望地打开一个开源项目，结果多半都是坚持不了多久就放弃了。你有没有想过，问题出在哪里呢？

你的迷茫在于缺少对这个软件整体的了解，这就如同不带地图指南针闯入密林一般，迷路只是早晚的事。所以，虽然阅读源码是必经的一步，却不应该是你的第一步。我们应该先从了解软件的设计开始。那我们该如何了解一个软件的设计呢？

## 模型、接口和实现

了解一个软件的设计可以从三个部分着手：**模型、接口和实现**。这三者的关系就好比你去看代码，你会先去看有哪些类以及它们之间的关系，这就是看模型；然后你会打开一个具体的类，看它提供了哪些方法，这就相当于看接口；最后，你再来打开一个具体的方法，去看它的代码是怎么写的，这就是看实现。

好，接下来，我们具体地分析一下每一个部分。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/48/ee/96a7d638.jpg" width="30px"><span>西西弗与卡夫卡</span> 👍（50） 💬（3）<div>模型，通常包含两类要素，一是基本元素，二是这些元素之间的关系。比如常见的CRM，基本元素就包括项目、客户、合同和回款，相互之间的主要关系通常是客户报备，进入立项环节（评估投入产出），再签约，最后进入回款环节。这是基本模型。

这个模型（系统）的接口，就是要为BD提供从客户报备到签约、回款的整个流程管理。

实现就是要考虑如何用消息在这些模块之间传递数据，状态控制、数据查重锁定等等。</div>2020-06-01</li><br/><li><img src="" width="30px"><span>Geek_3b1096</span> 👍（27） 💬（1）<div>喜欢老师只能记住一件事总结风格</div>2020-06-02</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/7BNKxqREtUP9ZhWgic92pHKkaPLGPM4xVjnoyMhHoFiaMUq5L0cCgCEXbeibiaR7ONnXh3W72pJUH5lq5pmphs14sA/132" width="30px"><span>闲不住的令狐冲</span> 👍（14） 💬（1）<div>上周月度回顾会，团队成员提出一个改进项，希望能在软件设计方面给他们进行一些培训。一直苦于不能系统给大家讲解。老师的这个系列简直就是及时雨，特别是这篇三步走，让我在后续准备培训分享的课程里面一下找到了方向。</div>2020-06-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/88/c8/6af6d27e.jpg" width="30px"><span>Y024</span> 👍（10） 💬（1）<div>模型-&gt;接口-&gt;实现，这也是郑老师第一季专栏里结构化思维的一种体现，由全局到定向细节。</div>2020-06-09</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVAVOYIoohh3bCdgErne0VHtoPorcrtmOAR45rsWPmJsLkzlvqMulbRyv0Skj8JHajrA9bPia3Lxw/132" width="30px"><span>Geek_0315ca</span> 👍（8） 💬（2）<div>模型，接口，实现的概念映射到现实生活，类似参观动物王国，园区都会发一张园区导航图。导航图就是整个动物王国的模型，海洋馆，猛兽馆等就相当于接口，现实中的海洋馆和猛兽馆就相当于实现。在模型上展示的接口(海洋馆，猛兽馆)只是文档上的书面表示，看不出来它是用什么材料做的，占地面积。只有我们亲自到了才知道它是用水泥建的塔楼，还是水中的玻璃走廊。在海洋馆或猛兽馆门口都还会有一个导航图(模型)，告诉不同种类动物的位置(接口)，你按照导航图找到动物所在的位置(接口)，看到了想看动物(实现)</div>2021-01-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/1a/66/2d9db9ed.jpg" width="30px"><span>苦行僧</span> 👍（8） 💬（1）<div>看rocketmq的文档，可以先从https:&#47;&#47;github.com&#47;apache&#47;rocketmq&#47;blob&#47;master&#47;docs&#47;cn&#47;concept.md了解模型开始</div>2020-06-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/eb/50/21cb3c67.jpg" width="30px"><span>naijiz</span> 👍（7） 💬（2）<div>老师，在使用类似springboot+mybatis开发的时候，mybatis-generator生产的mapper，service，service imp，在配合controller，就可以对数据库的数据进行增删改查，然后就可以实现一些CMS啊电商之类的业务需求，似乎都不需要自己定义新的接口和抽象，请问这是因为业务过于简单的原因吗？</div>2020-07-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg" width="30px"><span>Jxin</span> 👍（7） 💬（1）<div>1.模型：圈定了数据，明确了边界。在我的数据范围内的业务才是我的业务。模型是业务的抽象定义。
2.接口：定义了功能，明确了提供什么服务和这个服务的规格。接口是业务的功能口径。
3.实现：选择技术，明确了功能的性能，满足接口的规格，实现业务的逻辑。实现与业务无关，只考虑接口规格和技术选型。


以上个人理解。课后题有点广。没办法随手解答。得有时间翻个项目才好说。</div>2020-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/37/c1/481ddf9b.jpg" width="30px"><span>刘岳</span> 👍（5） 💬（1）<div>看完老师的文章做了下总结：模型可以理解为对要解决问题的抽象，这里可能更倾向于建模的意思，只有清晰的定义好要解决问题才能写出好的软件，这也是以终为始原则的一个体现吧。一个大的软件还会分解出很多小的模块，小的模块同样适用模型、接口、实现的原则，但小的模块又是上层抽象实现的一部分。接口是软件对外暴露的最基本方法，可以比作成软件的说明书。实现则更具体，接口的稳定性很高，我们可以根据具体情况更改内部实现</div>2020-10-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f2/13/3ee5a9b4.jpg" width="30px"><span>chenzesam</span> 👍（4） 💬（1）<div>以前一直以为 react 的接口设计很有前瞻性，以至于它们的内部架构改了几次对于使用者来说都没什么影响。
读了这个课程之后才发现，它们只是严格遵循了软件设计的原则罢了。
以前一直苦于不知如何改进现有项目的腐败点以及文档的产出，在这里我找到了切入点了，谢谢老师🌹</div>2020-06-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg" width="30px"><span>奕</span> 👍（4） 💬（1）<div>当使用一个新的 库或者框架的时候 首先看的是 接口，看对外提供的功能的是否满足自己的要求，然后才是 具体的实现。 对于模型 想学习开源软件的架构的时候在去关注的</div>2020-06-01</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJbh5FQajwKhNlMrkoSklPpOXBtEYXCLvuWibhfWIS9QxHWDqzhEHJzEdmtUiaiaqFjfpsr2LwgNGpbQ/132" width="30px"><span>Geek_q29f6t</span> 👍（3） 💬（2）<div>老师好：
模型是否可以这样理解：它可以包括，软件中有哪些类，类与类之间是如何组织的；软件中用了哪些框架（是MVC，还是DDD，TTD；也可以是业务模块之间的关系。总之，它是软件最基础，最核心的，也是最不可变的内容，最有别于其他软件的部分。
</div>2020-06-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/b5/0d/0e65dee6.jpg" width="30px"><span>FelixFly</span> 👍（3） 💬（1）<div>这个分析思路比较好，好多一上来就深入源码细节（实现）容易懵，特别是集成关系比较重的时候，最后都不知道调用到哪地方去了，这样就需要单步跟踪才能了解其脉络。若是先分析了类的层次关系，有个一定的理解，后面的调用脉络就有一定的清晰认识。模型这部分比较难理解，要想到作者为什么会这样定义模型，这样的设计用途是什么，可能刚开始不了解，到实现部分有种豁然开朗的感觉。</div>2020-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/26/34/891dd45b.jpg" width="30px"><span>宙斯</span> 👍（2） 💬（1）<div>对于模型这东西怎样才能真正地很好地了解到软件的模型呢？因为通常一款软件可能就一些代码，相关文档也没有提到更多的信息。</div>2020-07-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg" width="30px"><span>escray</span> 👍（2） 💬（4）<div>看了文章，知道自己以前为什么读不懂源码了，因为我每次都是从“实现”入手，想要自顶向上的去了解整个软件的架构，也许这条路也能走通，但是难度太大。

之前看过《代码阅读方法与实践》（和大多数书一样没能看完），这本书其实就是从细节开始讲起的，书是好书，但是我的打开方式似乎有点问题。

进程管理的模型包括调度算法，这个稍微有一点不好理解，我之前以为模型都是一些比较“实”的东西。不过如果从模型是“名词” &#47; 概念，接口是“动词” &#47; 命令，实现是动作 &#47; 技术细节这个角度就更清楚一些。

翻回到专栏的第一篇，老师举例说在交易系统中，有交易原语：下单、成交和撤单，交易动作：冻结、解冻、出金、入金，当时解释说这是模型上的分层。那么我的问题是，这些原语和动作都当做模型来看待么？

如果让我来分析，那么交易系统的模型可能是：用户、商品、订单、支付、物流；接口是：下单、成交、撤单……

看到 @Kǎfκã²⁰²⁰ 的留言，他是把“回款”也放到模型里面了。

似乎是因为老师抽象的层次更高一点，期待下一篇关于模型的讲解。</div>2020-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/a0/a3/8da99bb0.jpg" width="30px"><span>业余爱好者</span> 👍（1） 💬（1）<div>使用一个软件，就是通过其接口进行的。接口分为api和ui。要想正确使用一个东西，就要知道一点内部的原理。模型是对内部原理的简化，可以让人快速上手。如果想玩一些高级的玩法，或者想要改造软件，就少不了研究实现了。

接口和模型组合起来，就相当于一个“ADT”。</div>2020-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f9/88/cdda9e6f.jpg" width="30px"><span>阳仔</span> 👍（1） 💬（1）<div>理解软件开发中的设计可以通过三步走套路:
模型-接口-实现，
这个也就是了解软件设计的“模型”。
模型其实是一个软件设计中的抽象，通过与其它软件设计中的进行对比学习，理解它们的异同，突出自身的核心抽象结构;
接口是软件交互的入口，是一个软件系统的能力提现，它是一种规范，它与模型共同组成了软件系统的稳定性因素;
实现是软件设计中对模型和接口的具体的逻辑实现，这个很好理解

有了这个套路，学习软件设计就有了章法，不会盲目的陷入到软件开发的代码中</div>2020-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/fe/3f/2109c13f.jpg" width="30px"><span>hey_boy0532</span> 👍（0） 💬（1）<div>这里的模型，是否等同于代码的架构？</div>2021-10-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/e9/69/779b48c2.jpg" width="30px"><span>苏忆</span> 👍（0） 💬（1）<div>老师今天提供的思路特别好,终于知道为啥不能很好的掌握一个系统的精髓了,老是感觉自己没有整体的把握.就是因为思路不对</div>2020-12-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/05/be/eb1588b0.jpg" width="30px"><span>☆淡蓝水岸☆</span> 👍（0） 💬（1）<div>例如在C++的一个小系统中，模型可以理解为定义的类么？接口类似于类里面的函数，接口类似于函数的调用？</div>2020-06-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/51/9b/540c0aef.jpg" width="30px"><span>w0807m</span> 👍（2） 💬（0）<div>模型 接口 实现 三步走，跟我们画一幅人像，先画大的棱廓，这就相当于模型，然后画骨骼，这就像接口，最好在填充，就到了实现。</div>2020-08-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/f6/27/c27599ae.jpg" width="30px"><span>术子米德</span> 👍（1） 💬（0）<div>🤔☕️🤔☕️🤔
【R】维护项目，查看代码，迷失其中。
【.I.】打开源代码看一眼，这具有难以拒绝的吸引力；东点西看一番，看得懂的地方，即使没有源代码，都能猜测到，看不明白的地方，最期盼能启动调试，并且在代码当前行停下来，在实际的上下文里，秒懂代码的意图。也就是说，看懂代码，一方面在代码未见之前就懂，另一方面在代码跑后才懂，很难有放在眼前看懂的情况。
【R】看软件设计 = 模型&lt;抽象&gt; + 接口 + 实现。
讨论设计顺序：左 → 中 → 右
【.I.】模型=剪刀+胶水，玩模型不都是先剪开，就像把待解决的问题拆解，然后再用胶水粘起来，就是在解决方案之下进行重组，粘出问题的答案。接口就是胶水能够图上去，进行粘帖的地方。模型和接口拼出来最终的样子，实现则隐藏其中。这样就能解释，一开始就打开实现，迷失就会是大概率事件。
模型说到底，也算种领域语言，语法和语义由模型定义，语料由接口来补位。拿着模型讨论，解耦掉实现，只关注在问题和方案之间，讲清楚问题将如何解决，以及解决到何种程度。
【Q】拿到源码，通过查看代码，反推模型和接口，这样是否可行？
    ---- by 术子米德@2023年10月6日</div>2023-10-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/63/b1/6b9b9d8e.jpg" width="30px"><span>熊猫宝宝</span> 👍（1） 💬（0）<div>说实话，文章有点偏离主题了，我看标题应该是讲软件如何设计，你这拿着代码讲过来讲过去确实不好理解，比如你应该这样，订单模块，我们怎么分析，弄个例子</div>2022-04-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/8f/83/3f99d078.jpg" width="30px"><span>王峰</span> 👍（1） 💬（0）<div>模型也称作抽象，是否可以理解为为了解决现实问题，将客户需求转化后的软件设计方案的呈现，既通过提供怎样的软件架构和模块来满足需求？</div>2021-10-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/84/0d/4e289b94.jpg" width="30px"><span>三生</span> 👍（1） 💬（0）<div>分析框架的流程应当从子模型往上建模，
若从mvc入手，开始分析其内部的子模型是怎么实现，感觉虽然明显看到顶层模型的交互但是会很含糊。
认为应当自底向上的进行分析，从框架运行的流程（生命周期）进行模型分析再上升为组件模型，最后总结mvc模型&#47;其他模型，这种分析的方式，虽然相反，但是感觉更容易懂
</div>2020-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/fd/58/1af629c7.jpg" width="30px"><span>6点无痛早起学习的和尚</span> 👍（0） 💬（0）<div>看了评论，真的太精彩，是对课程内容很好的补充和理解，学到了！</div>2023-08-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/e1/28/0a26566d.jpg" width="30px"><span>奕涛_steve</span> 👍（0） 💬（0）<div>一个系统的模型就是系统包含的模块与模块间的关系。模型设计就是根据需求拆分高内聚、低耦合的模块，并描述清楚各模块的职责与关系。
除了设计模型，我们还需要制定规范，从而确保后续迭代跟着设计的方向走。
此外，模型设计不应该是一次性行为。我们还应该随着新需求不断审视已有设计，在必要时对其扩展甚至重构。那么，设计模型时怎么为后续的扩展或重构留空间呢？等我学完后再总结。</div>2023-06-25</li><br/><li><img src="" width="30px"><span>你好，Java</span> 👍（0） 💬（0）<div>你hashmap那個舉例不好
你應該就以前員工、計算薪資為例
切分好模組（你說的模型）
然後訂好接口 
員工 getName
財務 createSalary

實現就是把getName, createSalary的logic寫出來</div>2023-04-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/64/af/7560c8d8.jpg" width="30px"><span>zachaxy</span> 👍（0） 💬（0）<div>看设计先看模型，这里面的模型可以理解为是软件的组件图所呈现的状态码？</div>2023-02-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/4c/dd/c6035349.jpg" width="30px"><span>Bumblebee</span> 👍（0） 💬（0）<div>阅读开源软件的源码（开源软件往往涉及多个模块）应该是这么一个思路

① 了解整体模型；

② 了解局部模型；

③ 了解局部接口；

④ 了解接口实现；</div>2022-06-04</li><br/>
</ul>