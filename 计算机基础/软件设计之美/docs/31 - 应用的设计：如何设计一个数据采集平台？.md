你好，我是郑晔！

上一讲，我给你讲了 Moco 的设计，这是一个程序库级别的设计。除了开发一个程序库，在日常工作中，还有一种工作是程序员们非常熟悉的，就是开发一个应用。与之对应的设计就是应用设计。

也许你会说，应用设计不就是按照之前讲的 DDD 的方法，先通过事件风暴建立通用语言，然后，再找出子域和划分出限界上下文，最后，再按照模板找出各种对象吗？

是的，设计的基本过程确实是这样的。不过，DDD 的方法只能保证我们设计出一个可以接受的方案。**如果你想有一个更有扩展性的设计方案，就需要多花一点时间去构建一个更好的模型**。

这一讲，我就以一个金融指数系统为例，给你讲一下如何更好地设计一个应用。

## 一个指数系统

在金融系统中，有一个概念叫指数，用来表示金融市场的活动，比如有股票指数、期货指数等等。比较著名的指数有道琼斯指数、标准普尔指数。这个世界上的指数多得数不胜数，每个金融机构都会有自己的指数，而且，它们还会不断推出新的指数。

那指数是怎么算出来的呢？如果以股票为例，就是获取一堆股票的价格，然后根据一个公式算出一个结果。比如，我们有一个公式，A*0.2+B*0.3+C\*0.5，我们把公式里的数据部分称为指标，也就是公式中的 A、B、C，这个公式表示这三种指标分别占比20%、30%和50%。
<div><strong>精选留言（14）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/fe/fa/2a046821.jpg" width="30px"><span>人间四月天</span> 👍（27） 💬（1）<div>说的非常好，和我现在做的风控预警系统类似，同样适用于你说的这个通用模型，开发人员一定要有抽象能力，设计模式是一种特定场景的模型，同类应用系统也有通用的模型，采集，计算，分析，监测，预警，报告，如果你做的系统有这样的功能，那么就可以应用通用设计模型。
你说的编码实现，到开发人员配置，到业务人员配置，我们称为配置化，低代码，无代码化，这些目的都是快速响应需求，减少重复，减少开发投入的好方法，也是通用方法，我们同样应用于多个业务系统，我们有一个系统，要投入三分之二人力，支持开发，测试，我们做到了业务自主配置，开发完全解放出来了，因为这些工作就是低级重复，需要大量沟通，配置工作。开发人员要就是为解决问题的，一定避免低级，简单，重复工作，能自动化就不要手工，能自助化，就不要人工协作，对提升水平没有任何帮助，时间还浪费了，随着年龄增长，水平没有进步，本质上其实是在退步！</div>2020-08-07</li><br/><li><img src="" width="30px"><span>佟宏元</span> 👍（9） 💬（1）<div>关于：“业务人员提出的是问题，解决方案是由技术人员给出的，千万别混淆问题和解决方案。”这句话
我非常认同，业务人员提出的问题，和他们对于这个问题的处理方案，往往和我们软件编写的过程差异很大，好的代码设计，应该是结构清晰，没有冗余，不仅可以正确解决问题，又考虑到性能与可读性，因此很多情况下我们的设计，不应该按照业务实际的解决方式去做。比如人的思维是按顺序去做某件事，一件一件来，但是系统是可以并行的。所以我在小组内经常强调，不能完全按照业务实际的解决方案去做代码的设计，虽然设计来源与实践，但是系统就是为增强人类行为而创作的。
</div>2020-11-22</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKj3GbvevFibxwJibTqm16NaE8MXibwDUlnt5tt73KF9WS2uypha2m1Myxic6Q47Zaj2DZOwia3AgicO7Q/132" width="30px"><span>饭</span> 👍（4） 💬（1）<div>这篇我觉得我还需要看一遍，一路跟着老师学习，涨了不少见识，好多内容都是以前没听说过，又疑惑很久的，都得到解答。希望老师还有其他软件设计类作品</div>2020-08-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/bb/11/28d86278.jpg" width="30px"><span>人月聊IT</span> 👍（2） 💬（2）<div>老师，下一个专栏可以分享一个大型项目从需求到交付的详细过程吗？目前市场没有这种，尤其是其中的代码重构的落地，单测的调整，399也不是问题，一定买</div>2021-05-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/50/e7/8b543b5b.jpg" width="30px"><span>王十一</span> 👍（2） 💬（3）<div>老师还会有下一门课么</div>2020-08-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7e/4b/001b7f3b.jpg" width="30px"><span>花生无翼</span> 👍（1） 💬（1）<div>拒绝低水平重复，应用设计从一开始就应该尽可能做好设计，方便后续扩展。很多业务代码都是CRUD，怎么才能把复杂的事情简单化，这是值得思考的问题，一定要做有含金量的技术。</div>2020-08-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg" width="30px"><span>Jxin</span> 👍（1） 💬（1）<div>1.跟着郑烨大佬长见识。
2.因为要学郑老师这门课，就跟了宫老师的两门编译原理课，很香，值得推荐。

3.目前调配做价格系统。定价时的价格检验项看来可以做成配置化了。除了自己写个语义分析器。引入规则引擎有时也不错。</div>2020-08-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f9/88/cdda9e6f.jpg" width="30px"><span>阳仔</span> 👍（1） 💬（1）<div>总结一下
分离关注点，把不同的职责划分出来。
业务人员提出问题，技术人员提供解决方案，是否有技术含量取决于技术人员怎么去实现解决方案
一个好的设计要从拒绝低水平重复开始</div>2020-08-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/d9/b1/e0db45de.jpg" width="30px"><span>圈圈gor</span> 👍（0） 💬（1）<div>理论很美，然而实际上还是要权衡时间成本，最后还是沦为了低水平的重复劳动…唉</div>2020-10-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>一个更好的设计从拒绝低水平重复开始，把工作做成有技术含量的事情--记下来</div>2022-05-22</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJ5Hnw1tL9EWGdzhibCw89hibKjibwcyUBCSJsQWaxxfGu5AkBibibV0anaKqw3nf3ZP0UWy5BaEYyw2Q/132" width="30px"><span>smilekaka</span> 👍（0） 💬（0）<div>老师请教，这个采集系统，应该是要持续从数据源获取数据（指数本身数据&#47;其他指数数据），然后自己要持续实时的计算，也输出数据序列。

这算是实时计算吧，工程上具体是怎么实现的呢？</div>2022-05-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/25/35/a9/5f309b81.jpg" width="30px"><span>ubuntuMax</span> 👍（0） 💬（0）<div>做有技术含量的事情，就是把复杂的事情简单化，通过分离关注点，把领域设计应用起来，把自动化智能化应用到流程和业务里面。不要做重复低效的事</div>2022-05-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/57/2a/cb7e3c20.jpg" width="30px"><span>Nio</span> 👍（0） 💬（0）<div>拒绝低水平重复，每个项目都要有进步，代码也是一门艺术</div>2022-04-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg" width="30px"><span>aoe</span> 👍（0） 💬（0）<div>看来要学编译原理了，做个技术员</div>2021-11-04</li><br/>
</ul>