你好，我是吴磊，欢迎和我一起探索 Spark 应用的性能优化。

2020年6月，Spark正式发布了新版本，从2.4直接跨越到了3.0。这次大版本升级的亮点就在于性能优化，它添加了诸如自适应查询执行（AQE）、动态分区剪裁（DPP）、扩展的Join Hints等新特性。

其实，在3.0版本发布之前，Spark就已然成为了分布式数据处理技术的事实标准。在数据科学与机器学习魔力象限中，Gartner更是连续3年（2018~2020）将Databricks（Spark云原生商业版本）提名为Market Leader。

![](https://static001.geekbang.org/resource/image/c9/01/c98c4978a48fd52538a99583b48e6601.jpg?wh=1920%2A2133)

自然而然地，**Spark也成为了各大头部互联网公司的标配，在海量数据处理上，扮演着不可或缺的关键角色**。比如，字节跳动基于Spark构建的数据仓库去服务几乎所有的产品线，包括抖音、今日头条、西瓜视频、火山视频等。再比如，百度基于Spark推出BigSQL，为海量用户提供次秒级的即席查询。

可以预见的是，**这次版本升级带来的新特性，会让Spark在未来5到10年继续雄霸大数据生态圈。**

而说到我和Spark的缘分，可以追溯到2014年。一次偶然的机会，我参与到了Spark的调研。深入研究之后，我对Spark高效的执行性能深深着迷，这也让我未来的职业发展都和Spark紧紧地绑在了一起。就这样，我从数据分析、数据挖掘领域，转移到了现在的商业智能和机器学习领域，一直不停地尝试探索数据中蕴含的核心价值。
<div><strong>精选留言（24）</strong></div><ul>
<li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKerOHGs8VAMWj0ysxZpTPcARHEITiaH8YDJR7aoDNYhRpbLsZ0pJdJXIfzvR7u06iaKPBUoWfic5Zww/132" width="30px"><span>Geek_qsftko</span> 👍（15） 💬（1）<div>四年Spark经验  乖乖的来听课</div>2021-03-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/4f/d5/1666b7d0.jpg" width="30px"><span>zhongmin</span> 👍（5） 💬（1）<div>老师平时是怎么利用spark的官网文档的呢？感觉官网文档很全，但是比较的多，看着看着就忘记了</div>2021-08-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/37/d0/26975fba.jpg" width="30px"><span>西南偏北</span> 👍（3） 💬（1）<div>这个五一打算把这门课从头开始学完赶上老师更新的进度。先分享下自己在使用Spark过程中的一些经验吧：很多的调优参数都是需要根据任务的数据量、计算量来动态调整的，很多时候并不是是说资源申请的越多性能就越好，有时候资源申请过多反而会出问题。</div>2021-05-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/3a/96/9fddfb4a.jpg" width="30px"><span>赵鹏举</span> 👍（2） 💬（1）<div>请问下对于几万列的标签表，应该如何存储？ 宽表本身会不会写入非常慢？是将所有字段打横到宽表还是压缩到map？业界有什么通用做法吗？</div>2021-12-22</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/PNmB3mOQ4jTSoDMGPwp5j8a2NL1Mibu4iaebBNnuDQltb2yZ3sygJpxTHuLrG9ewCDLEialorSK3pzXBCQ3JFCZPA/132" width="30px"><span>果子</span> 👍（2） 💬（4）<div>老师可不可以分享一下数据探索，特征工程的一些经验。</div>2021-05-13</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ2tyVlQiaqp5kEOf1LlZB6nJPicN8lzcEkAsSEDmicvib8T3xUEcDibRichLrh3Qiclo3UyuAhhKNGQxGmg/132" width="30px"><span>威猛的小老虎</span> 👍（1） 💬（1）<div>老师，请问下你是如何系统的学习spark的优化。目前学习感觉没有什么切入点</div>2021-05-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ae/1e/8c6cb465.jpg" width="30px"><span>lumos</span> 👍（0） 💬（1）<div>从零基础入门spark来的，老师的课不仅知识含量丰富，也很有趣，能感受到字里行间都是对技术的热爱</div>2022-02-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2c/05/b0/3f9fe47e.jpg" width="30px"><span>Ping E Lee</span> 👍（0） 💬（1）<div>没有Spark使用经验可以学习该课程吗?</div>2022-01-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/3a/96/9fddfb4a.jpg" width="30px"><span>赵鹏举</span> 👍（0） 💬（3）<div>请问有介绍如何能看懂sparksql执行计划吗？</div>2021-10-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/8e/a7/92d1b90e.jpg" width="30px"><span>浩然</span> 👍（0） 💬（1）<div>用的比较多的是SparkSQL,大概是18年开始搞的。听课学习学习。</div>2021-10-10</li><br/><li><img src="" width="30px"><span>黄神齐</span> 👍（0） 💬（1）<div>开始学习</div>2021-09-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/70/49/d7690979.jpg" width="30px"><span>tommyCmd</span> 👍（0） 💬（1）<div>期待讲解下spark streaming啊</div>2021-04-16</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIiaeebUYxl7e4jicPshDRKMbiculHUjKgZZ2ygDibn2S7bbsjeqYIdsEUdVyoryKNa43ZGnDQmWjv3ibQ/132" width="30px"><span>Geek_d794f8</span> 👍（0） 💬（1）<div>这个专栏真是良心和超值，虽然还在更新中，但我开始刷第二遍，每一遍都有收获，提的问题，老师也会耐心解答。感谢老师！</div>2021-04-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/22/b9/50/30eea9a0.jpg" width="30px"><span>BigData～兰兴星</span> 👍（0） 💬（1）<div>像读小说一样去弄懂 Spark--希望弄懂spark就指定了</div>2021-03-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/91/56/f714ad14.jpg" width="30px"><span>老A</span> 👍（0） 💬（1）<div>上车学习了。</div>2021-03-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/ea/23/508f71e3.jpg" width="30px"><span>Jefitar</span> 👍（0） 💬（1）<div>开始学习啦！目前SPARK性能调优只是稍有了解，相信跟着老师学习后，会达到熟练的程度！</div>2021-03-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/2d/42/6e3be953.jpg" width="30px"><span>Will</span> 👍（0） 💬（1）<div>已经使用spark多年，有一定基础，希望可以跟随吴老师一同梳理下知识</div>2021-03-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/29/25/c7/edd74dfb.jpg" width="30px"><span>淡C</span> 👍（2） 💬（0）<div>看完零基础入门Spark来的，老师零基础入门Spark+Spark性能调优感觉可以让我在简历上写熟悉Spark了，干货很多
</div>2022-06-09</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI2oY8ENiaMbvm3OzHheCwibR5ArwgicrqvWAnzXxcmMYoFia9FfhIneXAf1kGXwRyWKaoHVJplCAhsfw/132" width="30px"><span>lyz</span> 👍（0） 💬（0）<div>囫囵吞枣的看完了spark入门，接着看性能调优，后面再细嚼里面知识点，加油</div>2023-12-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/90/19/b3403815.jpg" width="30px"><span>Juha</span> 👍（0） 💬（0）<div>老师好，咨询一个比较基础的问题，咱们日常工作中，是使用纯Spark SQL多还是使用Scala写程序多呢</div>2022-10-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/23/70/d2/00d9e595.jpg" width="30px"><span>cookie</span> 👍（0） 💬（0）<div>一起学习，起飞！</div>2021-03-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/22/d7/ae0ed31f.jpg" width="30px"><span>云超</span> 👍（0） 💬（0）<div>开始学习了</div>2021-03-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/fe/a2/5252a278.jpg" width="30px"><span>对方正在输入。。。</span> 👍（0） 💬（0）<div>好激动，早就开始期待了，希望和老师一起学习</div>2021-03-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/2d/42/6e3be953.jpg" width="30px"><span>Will</span> 👍（0） 💬（0）<div>期待学习！</div>2021-03-15</li><br/>
</ul>