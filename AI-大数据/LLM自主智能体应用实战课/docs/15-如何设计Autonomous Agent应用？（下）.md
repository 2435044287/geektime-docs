你好，我是李锟。

设计构建自主型智能体是一个很大的话题，上节课我只讲了一半，这节课我来继续讲解。我上节课介绍过，自主型智能体是自主型 AI 应用的一个子集。因此设计自主型智能体，我们需要同时掌握两种应用的设计方法，一种是 **AI 应用**的设计方法，另一种是**复杂业务应用**的设计方法。

![图片](https://static001.geekbang.org/resource/image/64/6c/64fc12826d7f0e732ffc365504ba226c.png?wh=562x342)

如图所示，对于复杂的自主型智能体，我们可以大致划分为两部分：一部分是真正与 AI 直接相关的部分，包括与 LM 交互的部分，还包括一些 AI 相关的算法实现部分；另一部分是不与 AI 直接相关的部分，属于普通的业务逻辑，不涉及复杂的算法。

接下来我分别介绍这两部分会用到的设计方法和技术。

## 提示词工程——挖掘 LLM 潜力的关键技术

自主型智能体是由 LLM 驱动的，而**提示词工程**是与 LLM 交互的核心，我们人类可以使用很随意的口语化语言与 LLM 交流，然而想要高效地与 LLM 交流，快速达到我们的目的，我们需要精心编辑自己的提示词。虽然已经有了 DSPy 这样的自动提示词工程开发框架，但仍然无法完全取代手工提示词工程。

高效提示词最基本的要求是必须结构化。将提示词结构化，可以采用以下两种常见结构：

- 划分为角色-上下文-任务（role-context-task）三段。
- 划分为指令-上下文-输入数据-输出格式要求（instruction-context-input data-output indicator，ICDO）四段。