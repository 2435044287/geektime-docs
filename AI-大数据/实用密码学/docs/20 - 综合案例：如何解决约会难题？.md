你好，我是范学雷。

今天是我们正式篇的最后一讲了，我们这场密码学之旅就要暂时结束了。还记得我们第一次的讨论吗？那时候，我们讨论了牛郎织女约会会碰到的困难，详细地分析了每一个障碍。

当时，我们说密码学可以解决牛郎织女的约会难题。这一路走来，每多学习一点知识，我都会再提一次这个难题，不知道你对这个问题，是不是有了很多新的认识和想法？

现在，我们已经学习了对称密码系统的基本框架了，一切有终有始，我们是时候回头看看，能不能使用我们学到的知识，来帮助牛郎织女解决好他们的约会问题了。

## 回顾一下约会难题

我们先来看一看第一次讨论时，我们罗列出来的问题。牛郎和织女需要考虑的问题主要有五点：

- 问题一：怎么证明双方的身份？
- 问题二：怎么能使消息不泄露？
- 问题三：怎么防止内容被篡改？
- 问题四：怎么确保信件能收到？
- 问题五：怎么防止翻脸不认账？

然后，我们通过这五个问题，分析出来了信息安全的六个需求：

- 需求一：识别身份，确定牛郎就是牛郎；
- 需求二：认证身份，验证牛郎就是牛郎；
- 需求三：管理特权，授予织女看信权利；
- 需求四：信息保密，没有权限不能看信；
- 需求五：信息完整，保护内容不被篡改；
- 需求六：信息可用，保持信息获取能力。

我们还提到，一般地，对称密码技术可以通过加密、解密，解决“机密性”的问题；单向散列函数可以解决“完整性”问题；非对称密码技术可以解决授权和认证的问题。
<div><strong>精选留言（11）</strong></div><ul>
<li><img src="" width="30px"><span>草帽寒风</span> 👍（2） 💬（2）<div>用对称密钥实现不可抵赖性感觉还是不太行，还是得用非对称加密，不然织女可以利用共同知识伪造信息，说是牛郎发来的。</div>2021-11-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg" width="30px"><span>qinsi</span> 👍（1） 💬（1）<div>王母娘娘的对策：

* 把指向织女住所的路标改成指向别的地方
* 发现是飞往织女住所的喜鹊一律请去喝茶
* 发现有些地方在偷偷给织女转发二次打包的信件，于是规定收信的单位必须先报备，不报备不允许收信
* 发现运送采用未知加密手段的信件的喜鹊一律请去喝茶，宁可错杀不可放过
</div>2021-01-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/89/5b/d8f78c1e.jpg" width="30px"><span>孜孜</span> 👍（1） 💬（1）<div>让喜鹊带一封回执信回去。但是如果织女收到信后把喜鹊关起来，那就没办法了。</div>2021-01-08</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIuUYcwKWUuib5mpdIbTwQzTGNWBmk0ktZSwm2vteUXf4TxWF2aVCv7Hvshcq0OaG7JRLj6rJyPLicA/132" width="30px"><span>godliness</span> 👍（0） 💬（1）<div>这其实就是 TLS 要解决的问题。综合使用非对称、对称加密算法协商出用于数据加密的会话密钥。过程中关键的第三个随机数 pre-master 必须保证其机密性。
私钥签名实现身份认证和不可否认；对称加密实现机密性、AEAD&#47;HMAC 同时实现完整性校验。数字证书解决公钥信任问题。</div>2023-10-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg" width="30px"><span>qinsi</span> 👍（0） 💬（1）<div>PBKDF2只迭代一次是认真的吗...</div>2021-01-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/be/03/404edf37.jpg" width="30px"><span>小动物</span> 👍（0） 💬（2）<div>通过回执来回确认来判断是否都收到了信息。但这会有鸡生蛋蛋生鸡的问题，我怎么知道对方知道我知道了。所以要多次确认。但具体几次确认才能完全确认有些绕迷糊了。
若真的无限循环了，那就可以通过概率来确认，每次消息发送时附带上时间戳，目的是让双方都知道每次消息传输的耗时。然后通过耗时来估计最后一条消息是否在预定时间前送达了。</div>2021-01-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/08/17/e63e50f3.jpg" width="30px"><span>彩色的沙漠</span> 👍（2） 💬（0）<div>在实际应用不可抵赖性更多是发送方发的信息不可抵赖，也就是说发送方A把信息发送给接收方B了，那么A是不可抵赖的，AEAD的话就是我们具有共同的秘密，非对称加密的私钥只有发送方有可以确认身份不可抵赖的。但对于接收方是否收到信息不可抵赖在实际场景很少涉及。在网络里面会选中是否可靠的通信协议来保证通信的质量。</div>2021-01-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>一般地，对称密码技术可以通过加密、解密，解决“机密性”的问题；单向散列函数可以解决“完整性”问题；非对称密码技术可以解决授权和认证的问题。--记下来</div>2022-11-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>学习打卡</div>2022-11-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/45/4c/cdf337ac.jpg" width="30px"><span>Pure White</span> 👍（0） 💬（1）<div>感觉仍然没办法传递，中间人直接截获信件，重新写一封信给织女就完事了</div>2021-06-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/21/3a/2d8b765a.jpg" width="30px"><span>John</span> 👍（0） 💬（0）<div>&gt; 牛郎和织女有没有共同的秘密呢？这个我们当然无法知晓，
&gt; 但是，我们就假设他们有共同的秘密，比如两个孩子的生辰八字。
&gt; 一般来说，一个人的生辰八字是敏感信息，是需要保密的。
能知道孩子生辰八字(出生时间)的人可能会很多，除了其父母，还可能有稳婆，邻居，亲戚，朋友，甚至是一直监视牛郎织女的王母娘娘的手下...
也许可以在附加信息中提示对方以某年月日说过的某句不同寻常的对话作为共同秘密。

这个情况似乎也正说明要事先维护一个共同的秘密比较困难。
与现实应用比，牛郎和织女就是没有(也不可能有)CA帮助他们确认彼此的身份。</div>2021-01-11</li><br/>
</ul>