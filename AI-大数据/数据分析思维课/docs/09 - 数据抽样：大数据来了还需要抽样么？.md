数据给你一双看透本质的眼睛，这里是《数据分析思维课》，我是郭炜。

今天我们来聊聊数据抽样。无论在小数据时代还是大数据时代里，数据抽样都是非常常见的数据分析手段。人口普查、调查问卷、人工智能训练的过采样等等都是抽样的方式。我们之前学到的随机对照分布、直方图，散点图等等内容，它们数据的来源其实大部分也都是来自抽样数据形成的数据。

用好了数据抽样，你就不必大费周章去拿到每一个人的数据，可以“四两拨千斤”，在非常复杂的数据环境里面找到合适的数据结论。所以我把数据抽样称作数据分析方法的“涡轮加速器”，用好它你可以快速地收集到你想要的数据，从而更好地指导你的工作和生活。

## 小数据下的抽样

数据抽样其实可以分成小数据抽样和大数据抽样，我们先从最常见的小数据抽样入手。小数据抽样有4种比较常见的方式，它们分别是简单随机抽样、系统抽样、分层抽样和整群抽样。为了便于你理解，我把这四种抽样放在一个情景下来给你讲解。

大情景是这样子的：印度的新冠肺炎疫情现在很严重，我们想知道大概印度新冠肺炎疫情发病率是多少。

![](https://static001.geekbang.org/resource/image/c0/fe/c0257f6a45a1b6116ca743a8f9de99fe.png?wh=592x353)

这件事情我们该怎么做呢？让所有印度人都做一遍新冠测试是不太可能的，我们只能选取其中一小部分人来做测试。具体涉及选哪部分人的问题上，我们可以有四种不同的方式去选择：
<div><strong>精选留言（19）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/19/69/18/74c57d42.jpg" width="30px"><span>80分</span> 👍（8） 💬（4）<div>过采样只是简单的复制数据，并没有增加新的信息，可能会导致模型过拟合；而欠采样又有可能造成数据缺失。</div>2021-09-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2a/4b/93/57845502.jpg" width="30px"><span>敏🌸</span> 👍（3） 💬（1）<div>哈哈哈越来越难，留言越来越少，看的越来越有意思，能看懂的越来越少</div>2021-11-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/cb/81/14dd3bab.jpg" width="30px"><span>不求</span> 👍（2） 💬（1）<div>计算机编程语言的随机如果和自然世界的随机是相同的话，那么是不是就是预言家了？</div>2021-12-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/7b/bd/ccb37425.jpg" width="30px"><span>进化菌</span> 👍（2） 💬（1）<div>没想到，小数据下的抽样还分基本的随机抽样、系统抽样、分层抽样和整群抽样。大数据下的抽样有蓄水池抽样，欠采样和过采样。

抽样，其实用的挺广的吧，比如疫情下局部核酸的检测，比如过年全国回家人数的抽样，比如城市里单身人数的抽样……</div>2021-08-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2a/dd/07/2a969ace.jpg" width="30px"><span>geigei</span> 👍（1） 💬（1）<div>有多少人工就有多少智能 哈哈 人工智能就是个小娃娃 长成啥样就看背后的人教他什么了</div>2021-10-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/9a/c9/08852337.jpg" width="30px"><span>Haoz</span> 👍（1） 💬（1）<div>长见识了，想到一个跟最近疫情比较相关的抽样例子，最近几次做的核酸检测都是 10 个人的样本放在同一根试管中，然后进行检测，可以极大提升检测的速度以及降低成本</div>2021-10-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/6c/39/8b9d989e.jpg" width="30px"><span>Geek9578</span> 👍（0） 💬（1）<div>过采样和欠采样很有用。请问过采样的缺点有哪些？</div>2021-12-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/9e/fd/e0aa6a4d.jpg" width="30px"><span>lijia_toby</span> 👍（0） 💬（1）<div>老师把采样讲的真清楚，我在工作中确实用到了蓄水池算法。但我们的额外需求是要将池子里的数据去重，而且是分布式的蓄水池抽样。我没想清楚如何在分布式的环境下保存当前已经抽取的数量n，不知道老师有更优雅的实现代码吗？想学习一下</div>2021-08-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/0c/52/f25c3636.jpg" width="30px"><span>长脖子树</span> 👍（0） 💬（1）<div>代码里咋写了  前面K个印度人直接进入水池
我怀疑这是歧视 [手动狗头]</div>2021-08-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg" width="30px"><span>那时刻</span> 👍（0） 💬（4）<div>大数据的采样方法，蓄水池算法以及过采样欠采样，是需要先了解数据分布之后，才能判断采用哪种采样方法？这样理解，对不？

另外，在大数据场景下，是否有重复采样的情况呢？</div>2021-08-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/29/8a/83/1e283bf9.jpg" width="30px"><span>Jane</span> 👍（0） 💬（2）<div>大数据同理也可以用小数据的几类抽样方法吗？（依据不同的数据特征而定）</div>2021-08-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2d/28/97/4de10282.jpg" width="30px"><span>奥斯卡小飞人</span> 👍（3） 💬（1）<div>其中一处说到了大数据思维“要效率不要精准”我个人觉得有失偏颇，大数据思维应该是这三点：从样本数据到全量数据、从精准结果到概率结果、从因果关系到相关性关系。</div>2022-03-31</li><br/><li><img src="" width="30px"><span>Geek_4d2fb8</span> 👍（0） 💬（0）<div>蓄水池算法：无论一共有多少人进来，他都有一定概率挤进游泳池里或者被挤出去，游泳池里最后留下来的人，就是我们要的随机的n个人，这些就是我们的抽样结果；好抽象，老样子，先记住结论吧</div>2024-07-09</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/SAzVOPToVGWyQGjRqvzCXp4qibnQWBxicPokgfDrRgdibnYfuLv3784vgzH3QbEhw8ROhJZ5XBI1JAdAiaKsibKZ6XA/132" width="30px"><span>Joey</span> 👍（0） 💬（0）<div>有个比较实际的问题，使用抽样后如何保证数据的置信；以及抽样对于数据的分布是有要求的，对于分布不均匀的数据，可能要一定量级才能覆盖整体的情况，这个抽样数量如何考虑呢</div>2023-11-28</li><br/><li><img src="" width="30px"><span>Geek_0632fe</span> 👍（0） 💬（0）<div>原來抽樣還有這麼多分類簡單隨機抽樣、系統抽樣、分層抽樣、整體抽樣，了解所需的精準度和場景，決定要用哪一種方法，大數據抽樣還分有蓄水池抽樣、欠樣法和過樣法，這篇說明大致可以理解</div>2023-03-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/24/2d/98af966e.jpg" width="30px"><span>王鹏程</span> 👍（0） 💬（0）<div>老师，小数据抽样方法中每种方法样本数量占总量的多少比较合理呢？</div>2023-01-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/b7/1c/b5c9456b.jpg" width="30px"><span>Jeff</span> 👍（0） 💬（0）<div>大数据时代需要抽样可能还有风险控制的考量，比如在推荐算法上线时往往先抽5%左右的小流量来做实验，这背后的考虑是如果算法在真实环境中不是很理想，产生的负面影响（成本）不至于太大。</div>2022-04-15</li><br/><li><img src="" width="30px"><span>罗伊斯</span> 👍（0） 💬（0）<div>过采样和欠采样 只是数据的复制和减少，保障两边数据的样本数基本一致，机器学习里我记得有个算法插值的方法能降低这种只是简单复制的方式</div>2021-12-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/f5/72/8cbc5cb3.jpg" width="30px"><span>好困啊</span> 👍（0） 💬（0）<div>大数据也需要抽样，小数据也需要结合具体场景合理使用对应方法，我想起了我大学毕业论文用的调查问卷，老师问我问卷有随机性嘛，我当时以为自己随机发放，就是随机，其实对基本的统计学概念理解的太浅</div>2021-11-23</li><br/>
</ul>