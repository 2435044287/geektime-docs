你好，我是徐文浩。

上节课里，我们一起学习了2010年Facebook的数据仓库的整体架构。我们看到，Facebook是采用了 **容错+分层+优化** 这样的三重手段，来搭建自己的数据仓库体系。他们部署了多个不同职责的Hadoop集群，这些集群分工明确、各司其职，让数据分析师的Adhoc任务，重要但又不那么重要的生产任务，以及有着严格的完成时间的生产任务，共同运转在自己的数据仓库上。

不过，只有这强大的基础设施还是不够的。对于大数据系统的构建来说，还有两个重要的问题值得关注。

- 对于海量的数据表，我们如何让内部用户能够快速把我们的数据用起来？
- 对于这样一个数据系统，我们如何来判断那么多用户到底遇到了什么问题和困扰？

那么今天这节课，我就带你来看看Facebook是如何回答这两个问题的。回答了这两个问题之后，整个Facebook数据仓库体系也就完整地呈现在你面前了。

## 基于“事实”数据的协同方式

虽然在开发Hive这个系统的时候，Facebook其实已经考虑了如何让用户能够把数据用起来。所以，在我们研读 [Hive的论文](https://time.geekbang.org/column/article/429844)的时候，就聊过Hive相比于Pig的一大优势，就是有着**良好的元数据管理**。而我们在看Twitter的大数据整体架构的时候，也看到他们是通过 [HCatalog](https://time.geekbang.org/column/article/480036) 来补上Pig缺失的这一环的。
<div><strong>精选留言（3）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/4d/fe/abb7bfe3.jpg" width="30px"><span>bd7xzz</span> 👍（3） 💬（0）<div>1.数据密集型应用系统设计
2.mysql到底是怎样运行的
这两本书都非常值得多次阅读。读完了会对数据存储，计算，涉及到的分布式问题，有自己的认识和思考。
tidb的论文也非常值得一读，有很多惊奇的思路</div>2022-08-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/95/52/66c86cf8.jpg" width="30px"><span>clpsz</span> 👍（2） 💬（0）<div>当然是推荐《数据密集型应用系统设计》</div>2022-03-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/22/f4/9fd6f8f0.jpg" width="30px"><span>核桃</span> 👍（0） 💬（0）<div>关于元数据管理这个问题，目前在数仓中，血缘关系管理是一个很重要的东西，但是如何做好很难，说白了也是把不同表之间的来龙去脉搞清楚。另外为了解决调度和各种任务的定时运行这些，目前阿里云开源的EMR系统,也就是E-MapReduce系统，这个就是把airflow和spark那些封装起来了。

当然更进一步的发展，目前也有了图形化的拖拉拽传统机器学习的工具，以前也给运营商做过一套，简单来说就是封装了spark的mllib库那些，然后把一些算法，如抽样，决策树等封装成一个个图标，接着从hive中导入不同的表等，每一个组件(图表)之间使用连线链接起来，类似今天的阿里云的pi 。</div>2022-03-23</li><br/>
</ul>