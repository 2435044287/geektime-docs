你好，我是徐文浩。

在上节课里，我们一起学习了Borg的整体架构。从架构层面来看，Borg和其他的Master-Slave系统，其实都是类似的。其中比较大的一个挑战，是Borg需要管理万级别的机器。虽然Borg的Master集群，仍然是一个会选举出master的Paxos实现。但是除了master之外的其他副本，也需要去承担和Borglet通信的职责，而不仅仅是一个同步数据的副本。不过除此之外，在整体架构上，Borg就没有太多的特殊之处了。

而对于Borg来说，真正的挑战还是在对于一个个Task的调度上。Borg需要回答三个问题：

- 第一个问题是，当一个Job被发给Master的时候，我们究竟应该把它的Tasks调度到集群的哪一台机器上去？
- 第二个问题是，如果用户提交的Job，Task里实际消耗的资源和它申明的资源差异很大怎么办？
- 第三个问题是，在不同的Task之间互相竞争CPU资源的情况下，虽然看似CPU的利用率很高，会不会所有的资源都用在了上下文的切换上，而不是实际的Task的运算上？

那么今天这节课，就是要来回答这三个问题，理解了这三个问题，对于我们理解设计系统的工程实践会很有帮助。

我们设计的系统，不只能停留在自己的理论思考之中，还需要考虑实际用户会如何使用我们的系统，把“人”的因素一并考虑进来，才能设计出经得起时间考验的大型系统。
<div><strong>精选留言（1）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/ba/ce/fd45714f.jpg" width="30px"><span>bearlu</span> 👍（1） 💬（0）<div>老师，Task 使用的资源可能是动态变化的，是用什么技术动态实现？</div>2022-01-10</li><br/>
</ul>