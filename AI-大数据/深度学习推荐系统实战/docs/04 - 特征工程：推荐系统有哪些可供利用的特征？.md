你好，我是王喆。基础架构篇我们已经讲完了，你掌握得怎么样？希望你已经对深度学习推荐系统有了一个初步的认识。

从这节课开始，我们将会开启一个新的模块，特征工程篇。

如果说整个推荐系统是一个饭馆，那么特征工程就是负责配料和食材的厨师，推荐模型这个大厨做的菜好不好吃，大厨的厨艺肯定很重要，但配料和食材作为美食的基础也同样重要。而且只有充分了解配料和食材的特点，我们才能把它们的作用发挥到极致。

今天，我们就先来讲讲特征工程，说说到底**什么是特征工程，构建特征工程的基本原则是什么，以及推荐系统中常用的特征有哪些。**相信通过这节课的学习，能让你更好地利用起推荐系统相关的数据提升推荐的效果。

## 什么是特征工程

在[第一讲](https://time.geekbang.org/column/article/288917)中我们学习过，推荐系统就是利用“用户信息”“物品信息”“场景信息”这三大部分有价值数据，通过构建推荐模型得出推荐列表的工程系统。

![](https://static001.geekbang.org/resource/image/8d/7a/8d5c1c9dc5ca3a55057981b7418d907a.jpeg?wh=1812%2A847 "图1 特征工程部分在推荐系统中的位置")

在这个系统之中，**特征工程就是利用工程手段从“用户信息”“物品信息”“场景信息”中提取特征的过程。**这个过程说起来容易，但实际做起来其实困难重重。

比如说，一个网站或者App每天收集起来的用户日志，采集来的站外信息，自己公司员工编辑添加的结构化数据那么多，那么庞杂，怎么才能挑出那些对推荐有用的特征呢？
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/87/6b/0b6cd39a.jpg" width="30px"><span>朱月俊</span> 👍（106） 💬（3）<div>选择音乐，哪些因素是我关注的？
我经常会听五类歌曲：
1.听网络流行歌曲（听大家听的）；
2.听一些我喜欢的风格的歌曲（励志类，空灵类，感伤类）；
3.听一些我喜欢的歌手唱的歌，比如汪峰等；
4.听我看过的电视剧，电影，动漫中的背景音乐；
5.听一些朋友推荐的歌曲；

如果我是音乐app特征提取工程师的话，我会提取哪些特征？
首先将特征分为文中提及的五类吧。
1.用户行为数据
用户在音乐app上的行为，包括浏览，收藏，评论，点击，播放，时长，次数等。
2.用户关系数据
用户的关系数据。
3.属性，标签类数据
歌曲的多维特征，用户的多维特征。
4.内容类数据
对音乐进行语音识别，提取关键特征。
5.场景信息（上下文信息）
跟小作文几要素差不多。
时间，地点，人物，情节。</div>2020-10-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/21/b2/cb/9c6c7bf7.jpg" width="30px"><span>张弛 Conor</span> 👍（44） 💬（2）<div>我在选歌的时候，信息重要性从高到低依次是：
1.听歌的目的。比如是为了放松，冥想，学习还是运动。目的决定了歌曲是安静还是激昂，舒缓还是节奏感强烈。
2.歌曲或歌单是否受欢迎。定下基调后，我一般会选择收藏或播放量较多的歌曲。这样一般不容易采坑。
3.歌曲的旋律与当下状态的匹配度。当下的状态可能是心情，情绪或身体的疲劳程度，而旋律与状态的匹配也很重要。
如果我是一名音乐 APP 工程师，
1.用户听歌的目的很难准确预测，但是可以通过“隐性”数据去推测，比如搜索关键词等。
2.歌曲或歌单是否受欢迎，则可以通过歌曲或歌单的播放量、收藏量去建立特征，而具体到人和歌曲的关系时，还可以进一步具体到单曲循环的次数等来细化特定用户对特定歌曲的喜好程度。
3.当下的状态也很难显性的获得，则可以根据历史听歌记录去推测用户的生理节律，例如夜晚会愿意听舒缓的歌曲，运动会愿意听节奏感强烈的歌曲等等。</div>2020-10-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/b0/b0/8c0e3236.jpg" width="30px"><span>逆流向善的阿鱼</span> 👍（22） 💬（1）<div>音乐App
1.影响我做决定的关键信息：
A. 个人主观角度
  a.不同时间段【起床刷牙、工作时间、跑步时间、洗漱时间、睡前时间】 喜欢的类型不同
  b.地理位置【寝室、办公室、室外、健身房】， 对应不同的状态
  c. 心情&#47; 情绪状态 【 不同情绪状态 会 持续 听 不同类型 的歌曲】
B. 客观角度
  a. 最近热议的 新歌 【流行度】
  b. 最近热议的电影 的主题曲 【流行度】
  c. 朋友最近在听的歌曲【用户关系】
  d. 热门歌曲【我自己个人对这类歌曲喜好度偏低】
  e. 所在地区大部分人都喜欢的歌曲

作为音乐App工程师的角度的特征
A. 易被工程化：
   a. 不同时间段 喜欢的 音乐
   b. 不同地理位置 喜欢的音乐
   c. 热门歌曲【当地热门，全球热门，中国地区热门】
   e. 基于社交网络的歌曲推荐【基于用户的协同过滤、基于好友关系的推荐】
B. 不易被工程化：
  心情&#47;情绪【或许可以尝试短期内在听歌曲类型去提取？】

特征方面：
用户交互特征: 点击、收藏、点赞、踩、评分、评论【好&#47;坏】、转发、播放完成度、浏览评论时长
用户属性特征：年龄、性别、职业、收入范围、所在地区、地理位置、不同时间段对各音乐类型的偏好度、不同地理位置对音乐类型的偏好度
用户关系特征：好友关系、亲密好友关系、有相同爱好的人群【基于用户协同过滤top K得出】
场景特征：用户当前所处位置、用户当前状态【用户自行设置？】、当前时间段、是否工作日、是否周末、是否节假日、
音乐特征：是否优质音乐【评分】、音乐风格、音乐时长、歌手、专辑、发行年月、所属标签、流行度、被重复播放的中位数

思考：
特征的更新频率：
用户：分为长中短期用户画像、仅保存三个月内活跃过的用户的画像以减少存储？
音乐：流行度需要按日期更新、热门程度也可能需要跟节假日相关【圣诞节=》圣诞结】</div>2021-04-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/21/b2/cb/9c6c7bf7.jpg" width="30px"><span>张弛 Conor</span> 👍（20） 💬（1）<div>老师，想请问一下为什么在用户行为数据中，将评论数据作为隐性反馈行为呢？因为我的理解，显性反馈行为就是用户对物品的直接评价(评分，赞等)，但是评论也算是用户对物品的直接评价，所以我很好奇为什么评论会是隐性反馈呢？（我个人的解释是，在某些场景下，用户的评论并不一定是对物品的评价，比如对于新闻来说，评论可能是对于内容本身的讨论，而不是用户是否喜欢该新闻，但是对于电商类网站，对于物品的评论则可以看做是显性反馈行为，不知道这样理解是否正确呢？）</div>2020-10-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/23/a8/28/99a49dd9.jpg" width="30px"><span>Crystal-clear</span> 👍（15） 💬（2）<div>选择音乐我关注的点，理性总结来说分为三个方向：
1.歌本身：歌名，歌手，歌曲风格，歌词语言，歌曲发布时间，是否约束vip等
2.个人：心情，在做什么，好友推荐等
3.其他：所处环境，歌在APP内的位置，歌的播放量，评论数等
作为一名音乐推荐工程师，在关注用户历史行为信息的同时，现在更应该在乎用户新的行为变化。这是我自己的经验，我一直喜欢听比较宁静一点的歌，但是有一天我突然想听欢快很多的歌，我面临了很多问题，第一我怎么去搜索，第二搜索结果那么多，我怎么选择，第三在搜索结果中随意选择一首总会让自己失望，第四下一次我又该怎么办呢等等，同时你的搜索结果中依旧会出现原来风格的歌曲，这让自己局限在一个风格的“茧房”里面，很难受很无语。所以用户新行为是在推荐系统已经盛行的时代里面更应该关注的地方！</div>2020-12-01</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/qw7rRHUPRzhibxXWLG7kc3zkhZwBn4JZaryzko2eWOjSxDlRvUathHugrIVKhcCqxhtsANUTq0140AlbDkLZmcw/132" width="30px"><span>shenhuaze</span> 👍（12） 💬（5）<div>王老师，在线预测的时候，模型所需的特征是直接从数据库读取，还是在线实时组装？我在想如果只是用户或者物品自身的特征的话，可以从数据库读取，但如果是用户和物品的交叉特征的话，是不是必须实时组装？</div>2020-10-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8e/5d/562e90d6.jpg" width="30px"><span>金鹏</span> 👍（10） 💬（1）<div>音乐产品更加依赖场景性和心情，在工作、学习、跑步、睡眠、开车、高兴、优伤等等，希望听到的音乐是不同的。所以市面上的音乐目前主要以歌单的形式来推，可以更好的让用户快速找到符合自己当下场景的音乐，感觉更是个强搜索型的产品，音乐的推荐策略更像是一种补充。

针对我个人而言，听音乐时所处的场景或心情、喜欢的音乐类型、喜欢的音乐明星、音乐新热榜、收藏过的歌单
音乐所处的场景  | 用户位置POI数据、历史时段听音乐歌单 | POI数据与音乐匹配度
心情 | 可以通过近几次搜索数据对推荐做干预 | 搜索关键词语义分析
感兴趣的音乐 | 播放历史 | 音乐相似度（可以是音乐Tag、旋律，现在可以基于旋律做歌曲的归类）
喜欢的音乐明星 | 明星收藏、历史播放、点赞、购买等行为 | 
音乐新热榜 | 新内容池、热度内容池 |  多样性探索、新鲜度、热度数据
收藏过的歌单 | 收藏数据 | 收藏相似度</div>2020-10-09</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erUKWZy1fBBcJncWRNh9M3TkjThqgsIIpmGOTCyg2IN80IDf3COkeWyTLHliczAppIkfBgCJTsUn1g/132" width="30px"><span>马龙流</span> 👍（9） 💬（6）<div>像多模态或者是通过其它预训练方法得到的向量，直接加到推荐排序模型作为特征的话，感觉都没有效果。不知道你这边有没有碰到类似问题呢。我理解是预训练学习的目标和排序学习目标并不一致，不知道大佬怎么看这个问题</div>2020-10-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg" width="30px"><span>pedro</span> 👍（5） 💬（1）<div>回答课后问题，按照电影的套路，关联的信息大概有:歌是谁唱的？(比如我的idol)，歌的风格是什么？(比如我超喜欢r&amp;b)，歌的时长(太长的一律跳过)，至少点击过或者单曲循环过？至少听过类似的或者听过该歌手的？
歌的内容即歌词，旋律，副歌？等等
难以被工程化的是歌词内容，毕竟大家都不是专业音乐人，flow和verse这种东西没法去很好的量化，因此特征提取的关键是该特征是否能被量化，如果可以，那可定是可以用来提取特征的，比如说歌的作者和种类，是否单曲循环等。</div>2020-10-09</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK6mh3xlaMoGtWjmVJh2LutdLcQcPbKNjRlVru3bx8ynPhgwuGhhdzTkwEMoXbvBtgkcDSfom1kZg/132" width="30px"><span>夜雨声烦</span> 👍（4） 💬（2）<div>影响因素：当时的心情，时间，天气，歌名，歌手，歌曲类型，播放量，是否top，好友中有人听过；
工程师角度：
当时的心情(无法获取)、时间(24小时划分成十个时间段表示)、天气(晴、阴、雨)、歌名(Embedding)、歌手(Embedding)、歌曲类型(onehot)、播放量、是否top(onehot)、好友中有人听过(onehot).</div>2020-10-09</li><br/><li><img src="" width="30px"><span>李@君</span> 👍（4） 💬（3）<div>我在选歌的时候主要是听前几十秒，如果觉得好听就会继续，如果不好听，就跳过。这个也是很难被量化的吧。</div>2020-10-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/d0/8c/d058d6c3.jpg" width="30px"><span>loode_</span> 👍（3） 💬（1）<div>懒人笔记：
特征无非三个方面：
  （1）用户特征，主要是用户画像属性特征，如性别年龄，爱好，收入等；
  （2）物品特征，可以是物品的标签，内容主题或者所属类型等；
  （3）用户与物品的交互特征，如点击、分享、观看、购买、收藏等，且对于不同的行为可以赋予不同权重，另一个方向是根据时间来给不同的行为赋予权重，如越近的越能反映用户当前兴趣；此外，交互也可以按显性和隐性反馈来赋予不同的权重。

对于用户属性特征，一般是进行onehot处理，物品特征则可以multi-hot，也通过交互行为来进行word2vec类似的embedding向量化表示。
而交互行为，除了可以word2vec 然后进行pooling处理外，常见的做法是Attention（din）和利用序列化模型来进行模拟（dien中的gru）。</div>2021-03-24</li><br/><li><img src="" width="30px"><span>Geek_0d974b</span> 👍（3） 💬（2）<div>请教实际工作中的一个问题，模型训练好上线之后，发现遗漏了一些特征，这个时候除了retraining 还有别的选择吗？</div>2021-02-18</li><br/><li><img src="" width="30px"><span>粪进</span> 👍（1） 💬（1）<div>王老师好，请教一个实际问题，我当前在做信息流中的广告点击率转化率预测。我们当前选取了n天的转化率作为特征，是一个连续值，我们现在用的是等距分桶方法将其离散化。
①有没有评价分桶结果的方法呢？比如尽量均匀？还是正态分布？
②有资料说等频比等距好，这也是一定场景下吧？
③实际工程中老师有什么推荐尝试分桶的方法吗？
谢谢。</div>2021-07-08</li><br/><li><img src="" width="30px"><span>Geek_60d933</span> 👍（1） 💬（1）<div>请问王老师是否可以从特征实时性角度聊聊，哪些特征对实时性有更高的要求？以及在线特征，离线特征的业界使用方法？</div>2021-06-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/22/8e/67/afb412fb.jpg" width="30px"><span>Sam</span> 👍（1） 💬（2）<div>老师好！~

如果我是一名音乐 App 的用户，我在选歌的时候，以下6个关键信息影响着选择：
1.歌手是谁？
2.音乐的旋律是否我喜欢？
3.是抖音热门歌曲吗？
4.歌曲类型是否我喜欢？
5.我是否听过？
6.我当时心情怎么样？

可以被用来提取特征的有：第1 到 5 个特征信息。
很难被工程化的有：第6个特征信息。

作为音乐 App 推荐工程师，我尝试着分析 可以被用来提取特征的 数据该如何表示：
1.歌手是谁？
该特征可以利用的数据有：歌曲中的歌手，作曲人，作词人等元数据 和 我的历史听歌记录。
特征表示为：元数据标签类特征 和 感兴趣标签的相似度。

2.音乐的旋律是否我喜欢？
该特征可以利用的数据有：该歌曲的音乐数据 和 我的历史听歌记录
（音乐的旋律 需要通过自然语言处理、计算机视觉等技术手段提取关键内容特征，一旦这些特征被提取出来，就跟处理属性、标签类特征的方法一样，通过 Multi-hot 编码，Embedding 等方式输入推荐系统进行训练。）
特征表示为：旋律标签特征 和 我感兴趣的旋律标签的相似度。

3.是抖音热门歌曲吗？
该特征可以利用的数据有：歌曲在抖音流行热度分数
特征表示为：歌曲流行度特征

4.歌曲类型是否我喜欢？
该特征可以利用的数据有：当前歌曲的类型 和 我的历史听歌记录。
特征表示为：歌曲类型 和 我的兴趣的相似度。

5.我是否听过？
该特征可以利用的数据有：我的历史听歌记录。
特征表示为：是否听过这首歌（boolean型）

6.我当时的心情怎么样？
该特征可以利用的数据有：无法抽取
特征表示为：无
（个人分析：这个可能要获取GPS和具体时间，他当时听什么歌，什么天气，才可以侧面判断他当时的心情，这些获取难度大，而且判断不一定准确）

分析好了，但是具体落地还不知道怎么做...

分析的不对的地方，请老师斧正~</div>2021-06-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/a6/f7/e434c375.jpg" width="30px"><span>Sean</span> 👍（1） 💬（1）<div>分享自己选歌时的参考依据
1. 歌手、旋律
2. 是否为某部电影、戏剧的配乐或主题曲
3. 歌曲类型(抒情、摇滚等等)
4. 热门歌曲

若要工程化萃取特徵可以
1. 用户行为数据
对歌曲的播放时间、播放次数、收藏、分享、搜寻
观察用户不同时段喜欢听的音乐类型有无不同

2. 用户关系数据
可以在音乐APP建立社交机制，观察使用者的好友都听了哪些音乐，或是使用者都在关注哪类音乐

3. 属性、标签类数据
用户：年龄、性别、职业、出生地、现居地、家庭状况、学历等
音乐：歌手、歌名、出于哪个电影、长度、评分、出版时间等

4. 内容类数据
将歌词透过语意理解转换为embedding当作特徵
或是也可以关注这一首音乐的哪一段被重複聆听的时间最长？（比如某些歌取的副歌特别好听，大家会重複聆听），将这个资讯也纳入特徵，搭配注意力机制来去做embedding
若以旋律做考量，可以透过声纹embedding来产生特徵

5. 场景信息（上下文信息）
目前位置、目前时间（週末、上下班通勤、特殊节日）
或是针对用户最近常听的音乐类型当成上下文信息</div>2021-04-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/65/7a/14f820bc.jpg" width="30px"><span>波</span> 👍（1） 💬（2）<div>影响因素
1.歌曲风格
2.歌曲发布时间
3.歌手标签(流行，摇滚，轻音乐)
4.听歌时间(工作日，节假日，白天，晚上)
5.听歌地点(旅行，办公，家里)
6.好友在听的歌

作为工程师可以提取的特征
播放歌曲维度
1.歌曲风格，所属歌手，是否第一次播放，历史播放次数，是否快进，当前播放和用户收藏歌曲的风格系数相关性，热门歌曲，
2.人维度，播放地点，播放时间，最近一层登录时间，上一次登录且完整听完或者重复播放的歌曲id向量</div>2020-10-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/df/e6/96fd11cd.jpg" width="30px"><span>该喜或悲</span> 👍（0） 💬（1）<div>请问老师我的代码在安装spark后就出现了报错是什么原因，之前还运行的好好的</div>2021-06-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/27/f1/e4fc57a3.jpg" width="30px"><span>无隅</span> 👍（0） 💬（1）<div>王老师，如果一个特征是多值离散特征，要如何编码？比如用户的兴趣标签“美妆，影视”，里面含有多个值，要如何编码输入nn模型和树模型呢？
在nn模型我有查到一些方案，比如分别获取美妆和影视的embedding，然后相加或者取avg等。但对这个特征如何输入编码，然后输入树模型不是很清楚。</div>2021-06-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/54/3d/366462d0.jpg" width="30px"><span>Yvonne</span> 👍（0） 💬（1）<div>我是一个有较长听歌历史，较少用推荐系统的用户…分享一个自己的数据点哈哈

#1， 
如果你是一名音乐 App 的用户，你觉得在选歌的时候，有哪些信息是影响你做决定的关键信息？

#A, 我习惯循环播放，所以一般会播自己习惯当背景音的音乐。一般都会在喜欢的歌手里面挑作品
#B, 接触新音乐除了靠喜欢的歌手，还有喜欢的影视作品，其他社交平台&#47;场合上听到别人用的歌&#47;引用的歌词（这里泛称BGM哈哈，在喜欢的场景里面被用过的歌）
#C, 关注的用户（或音乐KOL）推荐的歌（不限于平台本身，还有其他例如豆瓣等）
#D, 然后才到推荐系统给我推荐的相同风格的歌。在决定是否收听的时候，还会关注专辑封面，下面的用户评论，评论的用户质量…
#E, 听的歌风格比较杂，具体听哪种取决于场景：工作还是娱乐还是运动


#2，
那如果再站在音乐 App 工程师的角度，你觉得有哪些关键信息是可以被用来提取特征的，哪些是很难被工程化的？

#A, 用户行为数据
- 用户是否喜欢循环播放？是喜欢听推荐的还是总是自己搜索听？ 
    - 若喜欢循环播放且多自己搜搜，可以多重复推荐？（Youtube给我重复推荐，我一般都会点，还觉得很方便）
    - 若不喜欢循环播放&#47;喜欢点推荐，尽量不重复推荐？
- 用户过往歌曲的收听历史（隐性：播放时长、评论，显形：喜欢）
#B, 用户关系数据
- 关注用户的听歌行为，被关注用户的听歌行为（显性）
- 相似用户的听歌行为（隐性）— 这里的相似或许不止是收听历史、地区? 一直在想有没有办法衡量用户“气质”…例如头像、简介风格？可能能在排序时有所帮助？
#C, 属性、标签类数据
- 收听历史里的歌曲标签（例如风格，歌手，作词作曲等）、用户标签
#D, 内容类数据
- 歌曲音轨，歌曲封面，评论等内容本身unstructured data总结出来的
#E, 场景信息（上下文信息）
- 登录地区，日期，天气等文中提到的
</div>2021-04-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/20/d0/90/ed5c264f.jpg" width="30px"><span>北极熊</span> 👍（0） 💬（1）<div>王老师，我有一个问题，在实际应用场景中我们得到的数据特征往往是不对齐的，具体来讲，用户A会有场景的信息，用户B就不一定会有，对于缺失特征标签的数据我们是不加入到模型训练还是做一个标签的补全？面对新用户我们又如何根据较少的历史信息（特征）来实现最好的推荐？谢谢！</div>2021-04-08</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/lzAy0nicKxwq3pUJqcu2DFViaDKl1icRqXYTRCc9OA1M2tPnibDssTSH0MIlsxPtDnDMOKABq2upPyXWZnARbUNLDw/132" width="30px"><span>樊蔼</span> 👍（0） 💬（2）<div>喆哥，你好！我想请教一个问题：在内容推荐场景，如知乎，用户行为数据（收藏、评论、转发、点赞、分享）一般是用到召回阶段还是排序阶段，那具体会怎么使用呢？</div>2021-03-13</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ3q0LkadjOv4zicr7xQufgXyh8o1Usno8RZdeBPOqzsoH8DRiaMdYjs0OyEuTknHwHxfQ4AnBHdBCA/132" width="30px"><span>Geek_f676f3</span> 👍（0） 💬（1）<div>上述作者都回答非常好，从用户的行为（长短期）、偏好标签；歌手、歌曲本身特征，及上下文信息。但我觉得比较难的还是在于部分用户喜欢某位歌手或者某只歌曲 有时很难说清楚，数据很难抓取，比如某首歌，其实我是因为前面的某个鼓点或者吉他弹唱而喜欢，这些隐藏因素</div>2021-03-08</li><br/><li><img src="" width="30px"><span>Sanders</span> 👍（0） 💬（1）<div>在进行特征处理时，是尽可能多地输入用户、物品、行为及上下文特训练Embedding还是有选择性地选择一部分用户&#47;物品属性及行为进行Embedding训练？如果是后者，通常用什么方式来进行特征选择？如果是全部输入，加入一些“无用的”属性&#47;行为是否会影响的学习到Embedding中“有用”特征的权重？</div>2021-02-03</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/QVHwIz4ibF6Szgc3ArMM85dSQM7eVuGP89M9kvS2CnFB7W959xhpGCImrx2kcvyptJITBFthwn6M5x6tmzdzeog/132" width="30px"><span>Geek_dcd33f</span> 👍（0） 💬（1）<div>对我来说听音乐时做决定的关键因素：
1. 歌手
2. 歌曲类型(需要符合当时的心境，比如学习时喜欢轻音乐，兴奋时候喜欢电音等歌曲)
3.歌曲受欢迎程度
4.歌曲是否是某个喜爱的影视作品、游戏作品的曲子

音乐APP工程师的角度：
1. 对用户的历史行为数据的分析，例如对用户对歌曲的点赞、点踩、评论和收听的历史序列进行分析。其中收听历史中又可以分为收听时间(不足一次收听和多次收听)，为了平衡不同歌曲的时间，可能需要在这里利用歌曲总时间和用户收听时间进行一个处理。
2. 用户历史对歌单的点击、点赞等操作也可以考虑为历史序列，歌单某种程度上可以理解为不同歌曲某种相似特征的聚类，具有良好的先验信息，不知道能否帮助我们进行进一步的效果优化。
3. 用户关系数据：我个人听音乐过程中，不是很关注APP的社交功能。但是根据喜欢统一歌曲的用户建立隐形关系，来帮助推荐应该也是能达到效果的。
4. 在推荐时考虑音乐流行度的影响。
5. 最近用户的在音乐APP中搜索关键词可以通过分析猜测用户的近期的关注点。

</div>2021-01-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/25/88/339a8e89.jpg" width="30px"><span>流年</span> 👍（0） 💬（1）<div>关注的信息
1.音乐的风格
2.音乐的语种
3.歌手
4.歌词的含义，文采
5.听歌的环境
6.听歌的时间点
7.评论量
8.音乐中所使用的主打乐器
提取的特征：
行为类：播放次数，点赞、收藏、评论、分享，听歌的通常时间段
关系类：好友，关注歌手
标签属性类：用户包括性别，年龄，学历，音乐偏好，听歌时长；音乐包括音乐风格、音乐主题，歌手，流行程度；
内容数据：题目歌词中抽取实体，抽取歌曲的风格，使用的乐器，音乐的质量；
场景信息：播放时间、地点、天气、心率数据、移动的速度；</div>2021-01-27</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erUKWZy1fBBcJncWRNh9M3TkjThqgsIIpmGOTCyg2IN80IDf3COkeWyTLHliczAppIkfBgCJTsUn1g/132" width="30px"><span>马龙流</span> 👍（0） 💬（5）<div>老师怎么看人工交叉特征这块，我在我这边业务做了大量人工交叉特征，效果还不错，但是需要耗很大精力。有没有比较好点人工特征挑选线下指标，我基本都是靠业务理解进行交叉，然后看auc。</div>2020-10-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/21/84/fb/b656405c.jpg" width="30px"><span>kim</span> 👍（0） 💬（4）<div>老师您在提到了业界最近的做法是将标签类数据和与描述的主体，并结合graph Embedding，再输入推荐模型，现在业界有比较成熟的开源代码么？</div>2020-10-27</li><br/><li><img src="" width="30px"><span>Geek_8a732a</span> 👍（3） 💬（0）<div>如果我是用户的话
1、歌手（不仅限于唱歌的人，还有作曲人、作词人等）和专辑
2、歌曲类型、曲风、词风，比如是治愈的，还是其他
3、影视剧主题曲
4、别人推荐的
5、当下的心情，或者正在干什么事情

如果我是工程师的话
1、用户行为数据
用户的点赞、分享、评论、收藏、播放时长等数据
2、用户关系数据
3、属性、标签类数据
歌曲的歌手、制作人、专辑、发行年份、曲风等信息，用户的年龄、偏好等信息
4、内容类数据
用户的评论数据、音乐中更细致的信息，如使用的乐器等等
5、场景信息
比如一天中的什么时候，天气等
用户都在什么时候听这些歌曲，找到规律，可以在特定时间，为用户推送同类型（比如同曲风、同歌手等）的歌曲
比如猜测用户是在工作还是在休息等等</div>2021-08-05</li><br/>
</ul>