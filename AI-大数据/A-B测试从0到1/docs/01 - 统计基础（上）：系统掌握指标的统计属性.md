你好，我是博伟。

在学习、解决技术问题的时候，我们都知道有这么一句话“知其然知其所以然”。那么，A/B测试的“所以然”是什么呢？在我看来，就是A/B测试背后的计算原理，知道A/B测试为什么要这么设计，最佳实践中为什么要选择这样的指标、那样的检验方法。

那说到A/B测试背后的计算原理，我们首先得知道，A/B测试的理论基础是假设检验（Hypothesis Testing）。可以说，假设检验，贯穿了A/B测试从实验设计到分析测试结果的整个流程。

如果要一句话解释“假设检验”的话，就是选取一种合适的检验方法，去验证在A/B测试中我们提出的假设是否正确。现在，你只要知道“假设检验”中，最重要也最核心的是“检验”就可以了，因为选取哪种检验方法，取决于指标的统计属性。

也就是说，理解指标的统计属性，是我们掌握假设检验和A/B测试的前提，也是“知其所以然”的第一步。

而至于深入理解并用好“假设检验”的任务，我们就留着下一讲去完成吧。

## 指标的统计属性，指的是什么？

在实际业务中，我们常用的指标其实就是两类：

- **均值类的指标**，比如用户的平均使用时长、平均购买金额、平均购买频率，等等。
- **概率类的指标**，比如用户点击的概率（点击率）、转化的概率（转化率）、购买的概率（购买率），等等。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/11/26/24/6386a52b.jpg" width="30px"><span>启</span> 👍（14） 💬（1）<div>老师，如果一个AB实验的评价指标为用户日均app使用时长，AB两组各1w个用户，实验时长一个月。
假设检验的目的是验证AB两组最终的差异delta是实验本身带来的差异，而不是抽样造成的差异。基于这个场景，我有两个问题：
1. 两组的差异delta理论上有可能来源于3个地方：用户抽样误差（只抽取了1w个用户，而没有抽取无限多用户）；实验本身带来的差异；实验日期抽样误差（只实验了30天，而没有实验无限多天）。一般的AB实验中我们只考虑了前两个因素，那么对于实验日期抽样误差这个因素应该如何考虑？
2. 假设我把全国所有的用户分成AB两组做实验，是否可以将一组内所有用户一天的平均值当作一个样本进行检验？也就是说，如果实验持续30天，那么最终A组有30个样本，B组有30个样本</div>2021-02-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/55/c9/3df70927.jpg" width="30px"><span>Kaye</span> 👍（10） 💬（1）<div>希望老师推荐一些AB测试的论文</div>2020-12-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/a7/20/8aaf5960.jpg" width="30px"><span>何涛(Louis)</span> 👍（5） 💬（1）<div>想问问张老师有没有推荐的参考读物或者网站？多谢！</div>2020-12-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/45/af/e7b17926.jpg" width="30px"><span>牛奶</span> 👍（4） 💬（1）<div>这其实是均值类变量的特性：当样本量足够大时，均值类变量会趋近于正态分布。这背后的理论基础，就是中心极限定理———这个“样本量”足够大的标准是30个，如果用上面的那个例子，一万个用户一个月内每日的平均使用app时长，这个30指的是要有一万个用户（抽样超过30个）还是说每个用户的数据要超过30个（一个月每天的使用时长，刚好30个）？</div>2021-05-18</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIFpbHmJ5A1uv6YEujUAJgJREfpxPrRmL75pbHDSKcXHO8uwicnx3bPN2t9DWepArJiajNVRyghwLEw/132" width="30px"><span>Geek_8c33f8</span> 👍（4） 💬（1）<div>老师好，
关于“概率类指标，能否使用t检验？”这个问题，
如果核心指标是比例，能都用这个比例指标（A除以B计算后的指标值）再去计算整体的均值？这样理解是不是概率类&#47;比例类指标是不是也可以使用T检验呢</div>2021-03-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg" width="30px"><span>蚂蚁内推+v</span> 👍（3） 💬（1）<div>老师，直观理解，下载率不应该是一个连续型随机变量吗？为什么会服从二项分布？</div>2020-12-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/23/f4/40/1638bbed.jpg" width="30px"><span>Jabin</span> 👍（3） 💬（1）<div>老师，之后的实战课程是会把源数据及代码贴出来的吧</div>2020-12-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/25/27/cb/59893484.jpg" width="30px"><span>Tasty Joy</span> 👍（2） 💬（2）<div>在案例中，NP=样本大小*百分之10，为什么是10%呢？案例中哪里可以看出来。P不是代表概率的平均值吗？那么概率的平均值怎么算？</div>2021-02-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/3e/cf/375ca6bd.jpg" width="30px"><span>贤者时间</span> 👍（2） 💬（6）<div>请问老师：
均值类指标服从正态分布的例子是不是有点问题呢？
“我们再用一个社交 App 业务指标的例子，来强化下对正态分布的理解。现在有一个社交 App，我们想要了解用户日均使用时间 t 的概率分布。”
按照我对中心极限定理的理解，这个例子似乎应该这么解释：该APP的全量用户的平均日均使用时长是t，当对全量用户抽样出N个用户，再求其均值T，这个T才符合正态分布，其均值是t。
根据我的经验，app的用户使用时长通常来说不可能是正态分布，通常是幂律分布。。所以想跟老师探讨一下，这个例子的阐述是不是有些问题呢？</div>2020-12-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/45/af/e7b17926.jpg" width="30px"><span>牛奶</span> 👍（1） 💬（1）<div>通过数据分析发现，每分钟平均有 10 个人会看到广告，下载率集中分布在 0-30% 之间。-----这部分内容有些没有明白。虽然说“单个二元事件的结果，只能是发生或者不发生”，然后为了分析需要把数据进行一定程度的聚合，这次分析选择按分钟聚合；然后实际拥有“一个月的用户及下载数据，一个月一共有 43200 分钟，所以一共有 43200 个数据点”，是如何计算出来“每分钟平均有 10 个人会看到广告，下载率集中分布在 0-30% 之间”？尤其是集中在0-30%？不是很懂，希望老师可以辛苦解答</div>2021-05-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/29/d1/4b/68d0c8a7.jpg" width="30px"><span>何晓虎</span> 👍（0） 💬（1）<div>那个点击率的测试，样本量如果是10的话，那么43200这个数字的意义是什么？</div>2021-08-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/cd/62/4b0ba917.jpg" width="30px"><span>Td</span> 👍（0） 💬（1）<div>老师请问“概率在某种程度上也是平均值”这个应该怎么去理解呢？</div>2021-07-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/29/23/fd/d0fd4ad3.jpg" width="30px"><span>Leung-鱼蛋</span> 👍（0） 💬（1）<div>大学学习的概率课程已经还给老师了😂</div>2021-07-12</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132" width="30px"><span>梦倚栏杆</span> 👍（0） 💬（1）<div>看着每一个熟悉有陌生的名词：好像还有珀松分布吧，大学时代的统计学全还给老师了，坦白说理论基础还是没看懂。</div>2021-06-22</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLNMoXfvZA04UwRkznn7kcMwZ4jUppW05km02bicicysfdGPqZaib2QDj0OBicAQEKw4grjic4lLaB7NVg/132" width="30px"><span>Geek_30a04e</span> 👍（0） 💬（1）<div>老师，怎么没有视频教学呢，语音对我这种基础性较差的不是很友好</div>2021-05-21</li><br/><li><img src="" width="30px"><span>Geek_a7b45f</span> 👍（0） 💬（1）<div>老师，您好！有一个疑问咨询下您：是不是样本量大于30就可以做A&#47;B测试了吗？比如每分钟看到广告有30个人，但是有时候下载为0，有时候为10。下载数量有要求吗？</div>2020-12-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/22/ed/5a/a7687583.jpg" width="30px"><span>皓昊</span> 👍（0） 💬（1）<div>老师,
1.在上面每分钟的下载率例子中,总体,个体,样本分别是什么?
2.</div>2020-12-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/71/e3/5c17b81a.jpg" width="30px"><span>花灰</span> 👍（0） 💬（4）<div>求问老师,a&#47;b 测试一般是产品主导还是测试主导呢?因为测试很难及时的获取到一些数据指标,并且也很难制定指标标准,但是产品又不太了解技术实现.</div>2020-12-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg" width="30px"><span>那时刻</span> 👍（0） 💬（1）<div>不知老师可不可以把文中提到的app一个月的用户及下载数据，脱敏后提供一下？这样方便我们通过数据以及公式看文中的图</div>2020-12-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/3f/03/74b7c10e.jpg" width="30px"><span>Geek_6e25ac</span> 👍（0） 💬（1）<div>作为没有数学基础的学渣，完全听不懂。各种公式听得一脸蒙。有适合产品经理学习的深入浅出的课吗？</div>2020-12-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/f5/97/9a7ee7b3.jpg" width="30px"><span>Geek4329</span> 👍（0） 💬（0）<div>老师，卡方检验的应用场景是怎样的？率指标是否可以使用？</div>2024-01-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/39/d8/ad/ce05ae3a.jpg" width="30px"><span>WS</span> 👍（0） 💬（0）<div>老师你好，中心极限定理其中例子的图没有理解。【我们有一个月的用户及下载数据，一个月一共有 43200 分钟（60*24*30），因为我们关注的是每分钟的下载率，所以一共有 43200 个数据点。通过数据分析发现，每分钟平均有 10 个人会看到广告，下载率集中分布在 0-30% 之间】每分钟下载率的概率分布这里，y轴代理具体什么的频率呢，条形图和折线图代表什么，这一个图是指一分钟的下载情况还是一个月43200数据的？</div>2024-01-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/38/e9/ce/cd0d0efa.jpg" width="30px"><span>skSprint</span> 👍（0） 💬（0）<div>老师，想问下，在点击率的实验中，比如实验执行了15天，做分析的时候是用15天各实验组的 （15天总点击量人数）&#47;总访问人数；还是（每天的总点击率之和）&#47;15 来计算对比；
如果是按15天的总点击率，那各个实验组就只有一个点击率指标，只有一个点击率指标无法构建正态分布呀</div>2023-10-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/36/3d/86/1df02f3c.jpg" width="30px"><span>Adam twe</span> 👍（0） 💬（0）<div>老师请问t分布那个图纵轴的频率是啥意思</div>2023-03-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/0e/60/9b9e28f8.jpg" width="30px"><span>really_z</span> 👍（0） 💬（0）<div>老师，想知道app下载量的例子中，为什么np中的p是10%？</div>2022-12-07</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIApW1VCiciaNiaGcqK2Rzq2QNziae5u2fs3Lcx8uIwp9HTcyPUOoIMibpGicjpJGniaNJN3V42YhqicV8FEg/132" width="30px"><span>泰迪熊</span> 👍（0） 💬（1）<div>复制了Python代码到Pycharm CE中没出现图表呢</div>2022-08-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2a/dc/71/727efae1.jpg" width="30px"><span>约瀚哥（John）</span> 👍（0） 💬（0）<div>老师，我是刚学A&#47;B测试的菜鸡，请问画正态分布图，二项分布图，用什么软件？thank u</div>2022-05-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2d/b9/4d/9bb8b8ea.jpg" width="30px"><span>Dried_mango_slices</span> 👍（0） 💬（0）<div>有一个问题：下载率那个例子为什么它从理论上是服从二项分布而不是泊松分布呢？</div>2022-05-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/2f/71/f3d6616c.jpg" width="30px"><span>寒夜微暖</span> 👍（0） 💬（0）<div>根据课程知识结合业务场景，我得出一个结论麻烦老师看下是否正确：
针对离线精准营销业务（如短信、push推送），观察指标为打开率，此时设置对照组用于观察策略的有效性（比如标签或算法排序），那么对照组的容量设置：首先可以依照某种随机策略对对照组分组成至少30个，其次，这些小的分组，每组样本量需满足min(np,n(1-p))&gt;=5。
假设根据以往的业务经验认为p=5%，那么n至少为100，则总样本至少3000个。</div>2022-04-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/8a/1c/ba0e8083.jpg" width="30px"><span>Ziwei_GUAN</span> 👍（0） 💬（0）<div>您好，您给出的正态分布的\mu和\sigma的公式，都是它们的样本估计吧？ </div>2022-02-14</li><br/>
</ul>