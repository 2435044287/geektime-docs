你好，我是博伟。这节课，我们继续来学习A/B测试中的常见误区和解决方法。

今天我们要解决的问题，是辛普森悖论和实验/对照组的独立性。这两个问题在A/B测试的实践中也是常客。

对于辛普森悖论呢，由于遇到的次数太多，以至于我每次做A/B测试结果的细分分析时，都要先检查该细分领域在两组的比例是否符合两组整体的比例，来确保实验结果的准确。

对于实验/对照组独立性被破坏这个问题，我在早期做营销预算固定的A/B测试时也经常遇到，但是它的表现形式其实非常多变，各个业务类型中都有它的身影，所以就需要有针对性地进行分析。

听了我的经历，你可能还是不太明白这两个问题到底是什么，它们对A/B测试有什么影响，不用担心，今天我就会为你深度剖析，带你在实践中去识别它们，并解决它们！

## **辛普森悖论**

听到“辛普森悖论”这个概念，你可能会有点迷茫，不知道它具体说的是什么问题。所以我还是先用音乐App来举个例子，告诉你辛普森悖论是什么，以及它在A/B测试中到底指的是什么。

一款音乐App优化了新用户的注册流程，并且希望通过A/B测试在北京、上海这两个主要的市场来验证优化注册后的转化率是否有所提升。

- 实验组：使用优化后的注册流程。
- 对照组：使用原有的注册流程。
<div><strong>精选留言（9）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/16/3e/cf/375ca6bd.jpg" width="30px"><span>贤者时间</span> 👍（10） 💬（1）<div>听完这节，我想引申一下：辛普森悖论其实是理论上无法避免的，因为我们永远不知道哪些维度&#47;特征也在发挥作用，而这些维度或许没被觉察到，或许没有被数据采集到。这大概是研究人类行为的社会科学和自然科学的最大差异吧。</div>2020-12-31</li><br/><li><img src="" width="30px"><span>LeoSeattle</span> 👍（2） 💬（1）<div>老师好. 我们在临床试验领域内, 也会出现 Simpson 悖论. 常用的方法都是 通过 inverse probability weight 来 调整 加权平均 从而 估计 因果效应.   请问 这种方法 在互联网领域 有应用吗?</div>2021-04-29</li><br/><li><img src="" width="30px"><span>fh@fb</span> 👍（2） 💬（1）<div>能否分享一下按时间分隔的实验方法资料，想多了解下，谢谢</div>2020-12-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/24/43/6b/11d8b8f5.jpg" width="30px"><span>安和</span> 👍（0） 💬（1）<div>对于时间分隔的情况，对同一组用户先给实验组策略再给对照组策略，若用户从实验组策略变为对照组策略后，在对照组中的行为也会受到实验组策略的影响，这种情况下也会破坏独立性吧？</div>2021-01-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg" width="30px"><span>那时刻</span> 👍（0） 💬（3）<div>请问老师，采用时间的方法来保持两组的独立性。因为是对于同一组人做ab测试，如果先进行对照组实验十天，然后进行试验组十天，如何处理在实验组时候，由于用户流失导致用户数量减少呢？</div>2020-12-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/d0/26/504d99ad.jpg" width="30px"><span>always with me</span> 👍（1） 💬（1）<div>&quot;当然如果时间比较紧迫，没有时间重新跑实验和检查问题的原因，那么就以细分领域的结果为准，因为总体结果出现了辛普森悖论会变得不准确。&quot; 
这里难道不是细分组里面分布不均吗？为什么说要以细分领域的结果为准？</div>2022-04-21</li><br/><li><img src="" width="30px"><span>Dan</span> 👍（1） 💬（1）<div>老師您好，除了您上述所說的方法來確立独立性，統計上，會使用什麽檢定來檢驗實驗組和對照組的独立性？</div>2021-05-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/0b/91/5eb62cfb.jpg" width="30px"><span>Ai叼虫小姬</span> 👍（0） 💬（0）<div>老师，AB分流前要做同质性校验，如果特征指标少只有1-2个，且没有实验前历史数据，该怎么做同质性校验？</div>2023-12-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/29/44/3c/8bb9e8b4.jpg" width="30px"><span>Mr.Tree</span> 👍（0） 💬（0）<div>出现这些问题的原因归根结底可以说成是，影响ab测试的因素不仅仅是一个变量，而且另外的变量中的某个或者多个同时作用于测试并且产生了影响测试结果的影响</div>2023-06-20</li><br/>
</ul>