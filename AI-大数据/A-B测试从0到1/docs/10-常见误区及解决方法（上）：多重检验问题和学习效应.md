你好，我是博伟。

上节课，我们讲了一个在做A/B测试时普遍存在的一个问题，那么接下来，我就根据自己这些年做A/B测试的经验，精选了一些在实际业务中会经常遭遇的误区，主要是多重检验问题、学习效应、辛普森悖论和实验/对照组的独立性这四大误区。

这四个误区，其实也可以被看作在实际业务中经常出现的几个问题。不过我在题目中之所以强调说这是误区，是因为你很可能会在这些问题的理解上产生一些偏差。

所以接下来我在讲这两节课时，会按照“问题阐述—问题解析—总结引申—课后思考”的范式来给你讲。也就是说，我会先带你深入剖析问题的成因，然后再举例分析这些问题在实践中的表现形式，最后给出对应的解决方法。

毕竟，在搞清楚问题原理的前提下，再学习问题的表现形式和解决方法，不仅你的学习效果会事半功倍，而且在实际应用时，你也能根据变化多端的业务场景，随机应变，灵活运用。

## **多重检验问题（Multiple Testing Problem）**

多重检验问题，又叫多重测试问题或多重比较问题（Multiple Comparison Problem），指的是当同时比较多个检验时，第一类错误率α就会增大，而结果的准确性就会受到影响这个问题。我在基础篇讲A/B测试流程时就多次提到过它，比如[第4节课](https://time.geekbang.org/column/article/321007)讲OEC的好处时，还有[第7节课](https://time.geekbang.org/column/article/323696)讲什么时间才能查看测试结果时。
<div><strong>精选留言（12）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/1b/6b/4b/4a622bdf.jpg" width="30px"><span>四月.  🕊</span> 👍（4） 💬（5）<div>“第四种形式，当 A&#47;B 测试在进行过程中，你不断去查看实验结果时。”
对于第四种形式的多重检验错误，在日常实现的时候我们会每天给出昨天测试结果，累加到之前的结果上进行计算，这样p值的不准确是只是因为现在没到样本量导致的现在这个p值不准，还是会影响到最后达到样本量的p值也不准确呢？</div>2021-01-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/24/43/6b/11d8b8f5.jpg" width="30px"><span>安和</span> 👍（2） 💬（1）<div>请问对于A&#47;B&#47;n 测试类的多重检验问题，若每个实验组都有个单独的对照组的情况和共用对照组的情况，都有相同的多重检验问题吗？</div>2021-01-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/23/e3/71/a2a46a9b.jpg" width="30px"><span>西西</span> 👍（1） 💬（1）<div>同样对多重检验问题有疑问，希望能够增加一些案例帮助说明。
开头的举例：至少出现一个第一类错误的概率是 64% &gt;&gt; 5%，所以多重检验问题的关键是：至少出现一次第一类错误就得到整体是**显著差异**的结论？
如果多次比较，每一次比较的结果都单独判断；或者如果样本量没到，没到之前只是看看，但并不影响得到最终结论，是不是就不是多重检验问题了？</div>2021-08-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/3e/cf/375ca6bd.jpg" width="30px"><span>贤者时间</span> 👍（1） 💬（2）<div>关于多重检验我有两个观点想跟老师交流一下：
1. 只要进行了多个AB测试（而不论是不是由文中提到的四种产生形式）就必然产生多重检验的问题，因为计算FWER的公式同样适用。举个例子，当公司有20个AB测试场景（对应着20个目标&#47;假设），其中出现错误的概率就很大了。而文中提到的解决办法事实上针对的是同一个目标或者同一个对照组的情景。
2. 基于1，我想到一个解决思路：条件允许的话，可以做相同的AB测试，每个测试犯弃真错误的概率是α，N个相同测试犯错的概率就是α的N次方了。可以极大减小犯错概率。而且适用于任何场景。不知老师怎么看？</div>2020-12-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg" width="30px"><span>那时刻</span> 👍（1） 💬（1）<div>老师提到的误区，感觉我们都曾遇到过，看着很有感触。

多重检验里，我们想要看 A&#47;B 测试中的变化对于各个国家的具体影响时，就会以国家为维度来做细分的分析。如果采用调整α的方法Bonferroni 校正，那么n的取值是什么？我的理解是，一般取top n的国家来看数据，n是top n的值。另外一种BH方法，设置不同的p值，是按照国家设置吗？</div>2020-12-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/1c/a6/e79bd1e3.jpg" width="30px"><span>李哲</span> 👍（0） 💬（2）<div>多重检验错误的发生情况还是没有搞清楚。如果ab测试有多个实验组测试不同的指标，那么最终结果我只取某个指标对应的实验组和对照组进行分析，那还会存在多重检验的问题嘛</div>2021-07-30</li><br/><li><img src="" width="30px"><span>Geek_2ef9a5</span> 👍（1） 💬（0）<div>老师您好，关于多个指标的话也需要做p值的调整吗？比如我们主要研究转化率有没有因为某个改变而导致两组差异，次要要评价了比如点击率有没有差异。很多时候我都是直接使用0.05，去评价每个指标</div>2021-09-06</li><br/><li><img src="" width="30px"><span>Geek_7d7659</span> 👍（0） 💬（0）<div>比如7个实验组1个对照组，也是用T检验或者Z检验方法检验指标的显著性？</div>2025-02-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/30/7f/08/329f94d9.jpg" width="30px"><span>崇世轩人</span> 👍（0） 💬（0）<div>真正消除学习效应，延长多长时间怎么判断</div>2022-09-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/23/f2/14/839d75db.jpg" width="30px"><span>9</span> 👍（0） 💬（1）<div>老师，如果我的ab测试会看总体的显著性，还会在多个维度上看显著性，比如在手机系统（ios android）分别看显著性，还会分别看TOP5国家的显著性情况。如果这样就会引起多重检验的问题了。 我想用Bonferroni 校正。 调整α时我的n，是考虑一共做了多少个实验（我一共做了8次显著性检验（总体一次，手机系统2次，国家5次），n=8），还是按照维度考虑呢，也就是做总体的显著性检验时 就用α；做手机系统的检验时 n=2； 做国家的检验时，n=5。</div>2022-07-12</li><br/><li><img src="" width="30px"><span>Geek_559df4</span> 👍（0） 💬（0）<div>老师，多重检验当样本量不够时，采用流量正交的方式有没有相关参考资料</div>2021-12-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/18/99/f27997e1.jpg" width="30px"><span>志林</span> 👍（0） 💬（0）<div>为什么要去改变P值呢，不能通过置信区间，同正同负判断吗，这样就能知道 在95% 置信水平下，实验组优于还是劣于 base。</div>2021-09-11</li><br/>
</ul>