用训练数据集拟合出备选模型的参数，再用验证数据集选出最优模型后，接下来就到了是骡子是马牵出来溜溜，也就是模型评估的阶段了。模型评估中使用的是测试数据集，通过衡量模型在从未出现过的数据上的性能来估计模型的泛化特性。为简便起见，我将以二分类任务为例来说明度量模型性能的不同指标。

二分类任务是最重要也最基础的机器学习任务，其最直观的性能度量指标就是**分类的准确率**。给定一组训练数据，算法不可能完全正确地划分所有实例，而是会将一部分正例误判为反例，也会将一部分反例误判为正例。**分类正确的样本占样本总数的比例是精度（accuracy），分类错误的样本占样本总数的比例是错误率（error rate），两者之和等于1**。

在现实生活中，二分类任务的一个实际应用就是疾病的诊断。你可以回忆一下在“贝叶斯视角下的机器学习”中提到的例子：“Jo去进行某种疾病的检查。已知检查的准确率是95%，也就是此病患者的检查结果95%会出现阳性，非此病患者的检查结果95%会出现阴性，同时在Jo的类似人群中，此病的发病率是1%。如果Jo的检查结果呈阳性，那么她患病的概率是多大呢？”

这个例子就是一个典型的二分类问题。根据之前的分析结果，即使Jo的检查结果呈现阳性，她患病的概率也只有16%，如果一个庸医完全按照检查结果判定的话，每6个病人里他就要误诊5个！（这又是频率主义直观的看法）但是需要注意的是，错误的分类不仅包括假阳性这一种情况，假阴性也要考虑在内——也就是确实生病的患者没有被检查出来的情形，假阳性和假阴性共同构成所有的误分类结果。
<div><strong>精选留言（12）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/27/94/f620a3a9.jpg" width="30px"><span>冬瓜</span> 👍（32） 💬（3）<div>我的经验是，正负样本比例不平衡时，不能通过ROC曲线来评估模型，可能会出现ROC很好看，但业务上无法使用的情况。

具体来说就是，roc很高，但是PR很低，查准率和查全率都无法满足使用要求。

举个例子，正负样本比例为1:100，有10100个样本，100个正的，10000个负的。
假设TPR为0.9时，FPR为0.1，这时候ROC曲线应该算是不错的（auc 大于0.81，可能超过0.9）
但是，此时真正例为 100*0.9 = 90 ， 假正例为 10000* 0.1 = 1000 ， 所以查准率为 90&#47;1090 =8.3%
这个准确率，可不一定符合业务使用需要。。</div>2018-10-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/c1/a7/5e66d331.jpg" width="30px"><span>林彦</span> 👍（7） 💬（1）<div>ROC曲线中的TPR的分子和分母里的TP，FN都来自正例，FPR的分子，分母里的FP，TN都来自负例。PR曲线中的Precision的分母里的TP和FP则会同时受到正例和负例的影响。

当样本的正负例比例发生较大变化时，原来同一类型的样本点在PR曲线受到的影响由于Precision值的明显变化，会比ROC曲线要大。这只是我的粗浅推测。怎么推导还是不明白。</div>2018-06-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/f5/52/f3ccb099.jpg" width="30px"><span>KingZone</span> 👍（5） 💬（1）<div>正样本10000个，负样本3个，那么查全率（即召回率）是不是很低？！</div>2018-07-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/d7/7c/d6efa9aa.jpg" width="30px"><span>TranQ</span> 👍（4） 💬（1）<div>老师，除了分类模型之外，其他模型也可以用精度，ROC曲线等这类工具进行评估吗？例如回归模型。如果可以，那么大致思路是什么呢？</div>2019-04-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/9a/68/92caeed6.jpg" width="30px"><span>Shine</span> 👍（1） 💬（1）<div>对这几个概念和对应的计算公式很难有一个直觉的把握。需要在实际项目上练出这种直觉吗？</div>2019-01-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/cb/07/e2df01d8.jpg" width="30px"><span>liuyu5337</span> 👍（1） 💬（1）<div>机器学习课程只通过语音讲授，效果不太好。好多东西很难解释的很清楚。</div>2018-06-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/3c/1f/3948a3c6.jpg" width="30px"><span>paradox</span> 👍（0） 💬（2）<div>老师，您好
文中：
此时最优模型的精度是多少呢？就是交点所在直线的截距，也就是和 TPR轴的交点。
 
精度的数值是不是应该是 截距*pos?

</div>2018-08-09</li><br/><li><img src="" width="30px"><span>王亚雄</span> 👍（2） 💬（0）<div>老师最后找最优模型的方式是对的，但是最优精度并不是直接等于y轴截距，文中最后的说法是错的，等精度线和roc曲线相交之后，精度应该是pos*y轴截距+（1-pos）</div>2021-07-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（1） 💬（0）<div>学习打卡</div>2023-05-29</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/g1icQRbcv1QvJ5U8Cqk0ZqMH5PcMTXcZ8TpS5utE4SUzHcnJA3FYGelHykpzTfDh55ehE8JO9Zg9VGSJW7Wxibxw/132" width="30px"><span>杨家荣</span> 👍（1） 💬（0）<div>极客时间
21天打卡行动 46&#47;21
&lt;&lt;机器学习40讲&#47;08&gt;&gt;模型的评估指标
今日所学:
1,ROC 曲线,P-R 曲线
2,分类正确的样本占样本总数的比例是精度（accuracy），分类错误的样本占样本总数的比例是错误率（error rate），两者之和等于 1。
3,机器学习采用了混淆矩阵（confusion matrix），也叫列联表（contingency table）来对不同的划分结果加以区分。
4,在混淆矩阵中，所有测试样例被分为真正例（true positive, TP）、假正例（false positive, FP）、假反例（false negative, FN）、真反例（true negative, TN）四大类;
5,查准率 P 也叫正例预测值（positive predictive value），表示的是真正例占所有预测结果为正例的样例的比值，也就是模型预测结果的准确程度;
6,查全率 R 也叫真正例率（true positive rate, TPR），表示的是真正例占所有真实情况为正例的样例的比值，也就是模型对真实正例的判断能力;
7,将查准率和查全率画在同一个平面直角坐标系内，得到的就是 P-R 曲线，它表示了模型可以同时达到的查准率和查全率;
8,受试者工作特征曲线简称 ROC 曲线;判断雷达接收到的信号到底是敌机还是干扰;
9,ROC 曲线描述的是真正例率和假正例率之间的关系，也就是收益（真正例）与代价（假正例）之间的关系。
10,完美的模型体现在 ROC 空间上的 (0, 1) 点：FPR = 0 意味着没有假正例，没有负例被掺入;
11,ROC 曲线下面积（Area Under ROC Curve）简称 AUC。
重点:
 在二分类任务中，模型性能度量的基本指标是精度和错误率，两者之和为 1；
混淆矩阵是个 2 \times 2 的性能度量矩阵，其元素分别是真正例、假正例、假反例和真反例的数目；
P-R 曲线表示的是查准率和查全率之间的关系，曲线在点 (1, 1) 上达到最优性能；
ROC 曲线表示的是真正例率和假正例率之间的关系，曲线在点 (0, 1) 上达到最优性能。</div>2020-02-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/56/cf/acc09afd.jpg" width="30px"><span>水能载舟，亦可赛艇</span> 👍（0） 💬（0）<div>问一下下，个人感觉无识别率线的意思并不是按0.5概率将样本判为正例，比如（0.1，0.1）就在无识别率线线上，而这个点表示以0.1的概率将样本判为正例。个人理解无识别率线的意思是不考虑样本的任何特征，无脑的以x%的概率将其判为正例（比如对于任何样本都猜其为正例，则（1，1）；或者对任何样本都以20%概率猜其为正例，则（0.2，0.2）；这些点都在无识别率线上，都算瞎猜，但未必就是以0.5概率判正例）</div>2021-05-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg" width="30px"><span>建强</span> 👍（0） 💬（0）<div>思考题：
        是不是可以这样来理解，正例和负例的比例发生变化，但如果模型的预测能力不变，可以认为在正例样本中预测正例的正确率仍然不变，在负例样本中预测负例的正确率也不变，如果可以这样理解，
那就相当于TPR（正例样本中预测正例的准确率）不变，1-FPR（负例样本中预测负例的准确率）也不变，这样，不管正例和负例的比率如何变化，TPR和FPR这两个指标始终不变，也即ROC曲线不会有变化；
      而P-R曲线中，R=TPR，也不会发生变化，P=TP&#47;(TP+FP)，这个指标依赖模型输出TP的数量和预测正例的数量，当样本的正例和负例的数量比例发生变化时，TP可能会增大或减小，因此P指标会有变化，从而导致P-R曲线发生变化。
      以上是个人的一点肤浅理解，不知道对不对，请老师指教。</div>2020-12-14</li><br/>
</ul>