> 本门课程为精品小课，不标配音频

你好，我是王吕。今天我们讲一下极客时间是如何给文章增加思维导图功能的。

极客时间给文章添加思维导图功能的初衷，是想让用户打开文章的第一眼就可以看到整篇文章的结构，用最短的时间对文章有一个整体上的了解，这样在阅读的过程中，就可以随时知道自己当前阅读到了什么进度，以及所处的主题是什么。

![图片](https://static001.geekbang.org/resource/image/0d/40/0d34100b5738bc22f68ec14c882dfa40.jpeg?wh=1910x590)

整个思维导图是基于 markmap 格式，使用 LLM 按照层级提炼总结文章的要点，形成类似目录的结构，结构层级使用多个 # 表示，这点和 markdown 一样。前端拿到这个文本之后使用 markmap-js 插件直接可以解析成思维导图。

极客时间的稿件都是兼容 markdown 格式的文本，那么如何提取一篇长文的要点呢？

## 提炼文章要点

受限于 LLM 的 token 长度限制，第一步还是切割文本，切割文本的几种方法我在[第02讲](https://time.geekbang.org/column/article/805476)提到过，不过这里还有需要考虑的不同之处。

1. 在使用文章片段的时候，每次可能只引用一段或很少内容进行提炼总结，而且输出的文本长度很短，长度基本可控，所以切割片段可以较长。
2. 更加关注某一个段落的完整性，也就是在理想状态下，正好切割的每个片段都是一个独立的完整主题要点，使用LLM对这个片段就可以提炼出一个要点，多个片段组合在一起，就可以得到文章的思维结构。当然，这是理想情况。