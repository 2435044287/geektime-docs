你好，我是方远。

通过前面两节课，我们已经对PyTorch有了初步的了解，你是不是迫不及待想要动手玩转PyTorch了？先别着急，我们有必要先品尝一道“前菜”，它就是NumPy。

为什么我们要先拿下NumPy呢？我相信，无论你正在从事或打算入门机器学习，不接触NumPy几乎不可能。现在的主流深度学习框架PyTorch与TensorFlow中最基本的计算单元Tensor，都与NumPy数组有着类似的计算逻辑，可以说掌握了NumPy对学习这两种框架都有很大帮助。

另外，NumPy还被广泛用在Pandas，SciPy等其他数据科学与科学计算的Python模块中。而我们日常用得越来越多的人脸识别技术（属于计算机视觉领域），其原理本质上就是先把图片转换成NumPy的数组，然后再进行一系列处理。

为了让你真正吃透NumPy，我会用两节课的内容讲解NumPy。这节课，我们先介绍NumPy的数组、数组的关键属性以及非常重要的轴的概念。

## 什么是NumPy

NumPy是用于Python中科学计算的一个基础包。它提供了一个多维度的数组对象（稍后展开），以及针对数组对象的各种快速操作，例如排序、变换，选择等。NumPy的安装方式非常简单，可以使用Conda安装，命令如下：
<div><strong>精选留言（26）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/19/09/f2/6ed195f4.jpg" width="30px"><span>于小咸</span> 👍（7） 💬（2）<div>之前一直没搞清楚轴的概念，听方老师讲解以后终于明白了，轴的方向就是行序号或者列序号增长的方向</div>2021-10-19</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKyEJx6dG2dMuMz6swdfjNuw3HMoEAbtxprfdBUAyRpLFayxmwEiaYLs224LuAdwWu55ENLgsI8U4w/132" width="30px"><span>lwg0452</span> 👍（20） 💬（2）<div>思考题
np.average(interest_score, axis=1)</div>2021-10-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/5a/56/115c6433.jpg" width="30px"><span>jssfy</span> 👍（13） 💬（2）<div>pytorch哪些场景必须或者强烈建议用np? 不用python数组的原因是什么?可否举个例子?</div>2021-10-13</li><br/><li><img src="" width="30px"><span>AstrHan</span> 👍（3） 💬（1）<div>数组轴的这个例子好记！老师是自行车爱好者啊，每张头图都是，，</div>2021-10-13</li><br/><li><img src="" width="30px"><span>qifeng.wang</span> 👍（2） 💬（2）<div>作者没有介绍四维轴的概念，三轴的可以理解，就是长方体，X(0),Y(1),Z(2), axis=0就按照这个方向 做投影转换成 二维（Y,Z），四维的有点理解不出来，麻烦解读一下。</div>2022-06-23</li><br/><li><img src="" width="30px"><span>人间失格</span> 👍（2） 💬（1）<div>给老师点赞，老师轴抽象的很好，比我初次看更具体，希望后面网络结构和优化也能这样。请问numpy快和并行的原因是因为底层storage方式吗？</div>2021-10-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/3f/2c/ae8a5968.jpg" width="30px"><span>芜风</span> 👍（1） 💬（1）<div>老师的专栏又简洁又有重点，真的很好！</div>2022-05-07</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/I6hWU7cqyOrz8COhkU4ibib3PlUkm3wse56dKuRbiaeWlVE6ZrxEHv6u1eOVxNK3icPiauiaibDl98ibdq671iav1lTgNxQ/132" width="30px"><span>Geek_Frank</span> 👍（1） 💬（2）<div>被一个问题困扰了，想请教方老师。
tensor和numpy的ndarray数据结构上究竟有何不同？
或者说它们在内存中存在形式、结构有哪些本质区别？
为何二者要转换而不能混用？转换的过程中到底改变了啥？</div>2022-01-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/02/2a/90e38b94.jpg" width="30px"><span>John(易筋)</span> 👍（0） 💬（1）<div>```
mean_1 = np.mean(interest_score, axis=1)
print(mean_1)
```</div>2022-07-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/66/4d/b24a3f3b.jpg" width="30px"><span>starwonder</span> 👍（0） 💬（1）<div>数据降维的本质就是按照某（几）个轴的方向进行聚合吧？</div>2022-07-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg" width="30px"><span>亚林</span> 👍（0） 💬（1）<div>np.average(interest_score, axis=0)</div>2022-05-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg" width="30px"><span>亚林</span> 👍（0） 💬（1）<div>这里的轴就是维度的概念吧</div>2022-05-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/ee/4d/11c14e57.jpg" width="30px"><span>海阔天空</span> 👍（0） 💬（1）<div>讲得好</div>2022-03-16</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/I6hWU7cqyOrz8COhkU4ibib3PlUkm3wse56dKuRbiaeWlVE6ZrxEHv6u1eOVxNK3icPiauiaibDl98ibdq671iav1lTgNxQ/132" width="30px"><span>Geek_Frank</span> 👍（0） 💬（1）<div>方远老师喜欢骑行？</div>2022-01-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2a/db/78/8bcd5492.jpg" width="30px"><span>与子成说＆亦我所欲</span> 👍（0） 💬（1）<div>思考题：np.average(scores,axis=1)</div>2022-01-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/63/cb/7c004188.jpg" width="30px"><span>和你一起搬砖的胡大爷</span> 👍（0） 💬（1）<div>老师把axis解释的真好，axis要是没人教几年都搞不明白……</div>2021-10-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2a/df/7f/2e797a8d.jpg" width="30px"><span>木木</span> 👍（0） 💬（1）<div>老师好。老师讲的最后一个三维的数组聚合，我看的不是特别明白。聚合是求最大值吗？</div>2021-10-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/9f/8a/89523bb7.jpg" width="30px"><span>大大大大大大黄同学</span> 👍（0） 💬（2）<div>方老师，您好。请问按照‘F’对numpy数组变形为(3,2)是否可以理解为：先对原始数组arr进行转置得到arr_T，按照‘C‘对arr_T变形为(2,3)，再转置回来。</div>2021-10-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/4b/f3/8b9df836.jpg" width="30px"><span>jimmy</span> 👍（0） 💬（0）<div>pprint.pprint(dir(np))
help(np.average)
得到：average(a, axis=None, weights=None, returned=False, *, keepdims=&lt;no value&gt;)</div>2024-09-12</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ery1aDI7QI7MEJmeftF5T9icFEUP9UFvmibj99Jrw96T5o1Z3a2lKokbIFvWa9ibrKyRFsPFJia2MYsnw/132" width="30px"><span>Geek_2089f2</span> 👍（0） 💬（0）<div>np.average(interest_score, axis=0)</div>2024-08-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/7e/5a/da39f489.jpg" width="30px"><span>Ethan New</span> 👍（0） 💬（0）<div>学习打卡，“1 个 float64 相当于 2 个 int32，所以原有的 4 个 float32，会变为 8 个 int32，然后直接输出这个 8 个 int32。”，应该是原有的 4 个 float64吧？</div>2023-12-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>学习打卡</div>2023-11-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/61/b1/1261c177.jpg" width="30px"><span>胖胖虎</span> 👍（0） 💬（0）<div>每个用户平均分计算应该是按行计算mean
interest_score = np.random.randint(10, size=(4, 3))
print(interest_score.mean(axis=1))</div>2023-04-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/61/b1/1261c177.jpg" width="30px"><span>胖胖虎</span> 👍（0） 💬（0）<div>reshape 的本质其实是将一个数组的下标进行重编码，以上的例子里面的数据（0,1,2,3,4,5）如果以Order=C的方式resharp为（2,3）数组，那么这6个数字所在的编号就是( (0,0), (0,1), (0,2), (1, 0), (1, 1), (1, 2))出来的就是（ (0, 1, 2),  (3, 4, 5) )，如果以Order=F的方式进行编号就变成了( (0,0), (1,0), (0, 1), (1, 1), (0, 2), (1, 2)) 结果就是((0, 2, 4), (1, 3, 5))</div>2023-04-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/a4/12/e52cbb79.jpg" width="30px"><span>牛狼_</span> 👍（0） 💬（0）<div>&gt;&gt;&gt;np.around(np.average(interest_score, axis=1), decimals=2)  # 保留两位小数</div>2022-09-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/91/80/bc38f890.jpg" width="30px"><span>珍妮•玛仕多</span> 👍（0） 💬（0）<div>写的真叼</div>2022-04-15</li><br/>
</ul>