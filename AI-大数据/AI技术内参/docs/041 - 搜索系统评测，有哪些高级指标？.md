周一我们介绍了基于“二元相关”原理的线下评测指标。可以说，从1950年开始，这种方法就主导了文档检索系统的研发工作。然而，“二元相关”原理从根本上不支持排序的评测，这就成了开发更加准确排序算法的一道障碍。于是，研究人员就开发出了基于“多程度相关”原理的评测标准。今天我就重点来介绍一下这方面的内容。

## 基于多程度相关原理的评测

从“二元相关”出发，自然就是给相关度更加灵活的定义。在一篇发表于NIPS 2007的文章中（参考文献\[1]），雅虎的科学家介绍了雅虎基于五分标准的相关评价体系，从最相关到最不相关。而在同一年的SIGIR上，谷歌的科学家也发表了一篇文章（参考文献\[2]），介绍了他们的“多程度”相关打分机制。至此之后，基于“多程度相关”原理的评价标准慢慢被各种搜索系统的研发者们所接受。

在这样的趋势下，基于“二元相关”的“精度”（Precision）和“召回”（Recall）都变得不适用了。我们需要新的、基于“多程度相关”的评价指标。

芬兰的科学家在2000年的SIGIR上（参考文献\[3]）发表了一种计算相关度评测的方法。这种方法被广泛应用到了“多程度相关”的场景中。那么，芬兰科学家发明的方法是怎样的呢？

这种方法被称作是“**折扣化的累积获得**”（Discounted Cumulative Gain），简称“DCG”。 在介绍DCG之前，我们首先假定，位置1是排位最高的位置，也就是顶端的文档，而位置数随着排位降低而增高，位置10就是第一页最后的文档。

DCG的思想是这样的。
<div><strong>精选留言（3）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/f3/dd/47092c93.jpg" width="30px"><span>侯永胜</span> 👍（1） 💬（0）<div>请大师也讲讲推荐系统相关的内容哈 谢谢啦</div>2018-01-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/29/72/76838c57.jpg" width="30px"><span>白杨</span> 👍（0） 💬（0）<div>另外一直有个问题，烦请老师解答一下：
为什么这些高级评价指标都是不可微的呢？直观上体现在哪里？数学形式上又体现在哪里？</div>2018-05-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/29/72/76838c57.jpg" width="30px"><span>白杨</span> 👍（0） 💬（0）<div>我的想法是，用文档出现的频率来代替位置的角色，然后来打折扣，这样应该在某些场景下可行。</div>2018-05-16</li><br/>
</ul>