广告是很多互联网公司的重要收入来源，比如Google、Facebook、微软、阿里巴巴、百度、腾讯等。以Facebook为例，它的2017年第一季度财报显示，公司总营收为78.4亿美元，这其中98%的收入来自广告。同样，在这些公司内部，都有着完善的广告系统来支撑其广告业务。

当然，大型广告系统的成功需要依靠很多相互协调的子系统和组件。今天我要和你聊的是广告系统里最基础的一个子系统，也是整个广告系统的核心功能之一——**点击率预估系统**。点击率预估，顾名思义就是根据环境和广告的类型，来估计用户有多大的可能性点击当前的广告。这个预估值会用于广告系统的其他组件，比如对广告主（投放广告的客户）的计费模块。因此，点击率预估的准确性和实时性就变得十分重要。

今天和你分享一篇广告点击率预估文献史上非常重要的论文，它来自Google广告团队，标题是《工程实践视角下的广告点击率预估》（“Ad Click Prediction: a View from the Trenches”）。

## 论文背景

这篇论文发表于KDD 2013年的工业论文组，在短短几年时间里就获得了近200次的文章引用数，不少公司争相研究其中的内容，希望能够复制类似的算法和技术。

这篇文章的作者群多达16人，他们都是来自Google西雅图、匹兹堡、硅谷以及剑桥等地办公室的研究人员和工程师，文章的致谢部分也有9人。可见整个论文以及里面的技术的确是团队协作的结果。

这里面有两位作者值得介绍一下。第一位是论文的第一作者布兰登（H. Brendan McMahan）。布兰登早年在卡内基梅隆大学计算机系获得博士学位。他的博士生导师是戈登（Geoff Gordon）以及布卢姆（Avrim Blum），这两位都是卡内基梅隆大学机器学习界的权威教授。布兰登本人长期对优化算法有深入的研究，这篇论文的重要核心算法就来自于他的研究成果。

文章的另外一位作者斯卡利（D. Sculley）从塔夫茨大学（Tufts University）博士毕业之后，一直在Google的匹兹堡分部工作，并着手研究大规模机器学习系统，其中重要的代表性研究成果是如何把回归问题和排序问题结合起来（发表于KDD 2010年）。斯卡利曾经是一个著名的开源大规模机器学习软件包sofia-ml的作者，里面实现了一个大规模版本的RankSVM，一度受到关注。

## 在线逻辑回归（Logistic Regression）

文章首先讲解的是点击率预估的核心算法。因为Google要处理的数据集非常庞大，不管是样本数量还是样本的特征数都是百亿级别的，所以选用什么样的算法至关重要。2013年，也就是这篇论文发表的时候，当时大规模深度学习的环境还没有完全成熟起来，Google的科学家和工程师选择了**逻辑回归**，这是一个非常传统但也非常强大的线性分类工具。

我们这里简单回顾一下逻辑回归模型。
<div><strong>精选留言（6）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/6a/a1/6270eeb7.jpg" width="30px"><span>极客星星</span> 👍（3） 💬（1）<div>关于什么时候用ftrl 个人认为 如果数据量相对小 使用开源的LR库可以解决问题 就不需要用ftrl 否则 应该采用ftrl 因为它支持增量更新 有稀疏性 是在工业界得到充分验证的技术。此外 有个问题想咨询下洪老师 有没有什么论文讲工业界搜索广告特征工程方面的文章  或者洪老师能否介绍下经验  选取什么特征比较有效  谢谢</div>2017-12-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7a/51/6cd07440.jpg" width="30px"><span>Momo</span> 👍（5） 💬（0）<div>百亿特征是多大量文本特征onehot变换而来，从而导致大量特征值都是0，也就是稀疏问题</div>2017-11-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/25/25/fb2ba003.jpg" width="30px"><span>Duo An</span> 👍（3） 💬（0）<div>百亿特征是大部分都是onehot出来的吧，原始特征其实没那么多。</div>2018-11-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/35/df/67f91c36.jpg" width="30px"><span>帅帅</span> 👍（2） 💬（1）<div>模型真的是繁多；
不过坚信一个道理，模型容量越大，需要越多的数据、计算能力、架构能力；

从LR到GBDT+LR，到GBDT+FM、到WIDE&amp;DEEP，现在又出现了FTRL，要学习的真的很多；

然而在统一需求下，比如CTR预估，这些都能实现；怎么选择模型也是一个需要细致探讨的问题；</div>2018-10-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/34/5b/88af6b4c.jpg" width="30px"><span>Keno Tu</span> 👍（0） 💬（0）<div>论文路径能提供下吗？</div>2018-08-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/6d/cd/b51aabf3.jpg" width="30px"><span>Xuan</span> 👍（0） 💬（1）<div>百亿特征？这么多特征是怎么来的？
还有模型稀疏，这个怎么理解？</div>2017-10-24</li><br/>
</ul>