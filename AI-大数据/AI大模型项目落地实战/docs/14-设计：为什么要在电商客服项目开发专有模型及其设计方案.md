你好，我是金伟。

通过之前的课程，相信你已经对AI智能体应用开发有了一定的认识，从这节课开始，我们深入学习**大模型微调**这项技术，从一个具体的项目需求出发，一步步把**大模型微调**和**专有模型**开发应用到项目里。

说起**大模型微调，很多同学容易出现拿着锤子找钉子的情况，认为什么问题都要通过大模型微调**来解决。需要注意的是，并不是一切问题都需要大模型微调。

以本节课的电商客服项目为例，我会通过对比之前的智能客服方案，说明大模型微调到底是什么，适合什么场景，以及为什么最终会在电商客服的项目里用微调训练的技术。

## 电商客服项目的特点

目前已有的传统智能客服方案往往采用的是规则化的方法。它的核心就是总结人工坐席遇到的客服场景，形成固定规则的客服回复，帮坐席节省大量的时间。

比如一个虚拟产品，自动发货，客户下单后可能会着急询问，问出的内容各不相同，那我们可以总结类似的问题，一一匹配问题和回答。

```plain
##客户下单后可能马上提问：
1. 付款已完成
2. 已购买三件
3. 我已经下单了
4. 没有收到网址和卡密，我已下单2份
6. 订单已提交，购买完成
7. 购买完成
8. 请发货
9. 已下单，麻烦安排发货


##规则匹配实现的伪代码
import re


class OrderShippingRequestHandler:
    def __init__(self):
        self.rules = [
            (re.compile(r'^(付款已完成|我已经付款了|您好，我已支付)$'), "您好，感谢您的购买！您的订单我们已经收到，3-5分钟内会为您安排发货，请您稍等片刻。感谢您的耐心等待，如有任何问题，请随时联系我哦！"),
            (re.compile(r'^(已购买|已购买三件|购买完成)$'), "您好，感谢您的购买！您的订单我们已经收到，3-5分钟内会为您安排发货，请您稍等片刻。感谢您的耐心等待，如有任何问题，请随时联系我哦！"),
            (re.compile(r'^(我已经下单了|你好，我已经下单了|订单已提交，购买完成|已下单|已下单，麻烦安排发货)$'), "您好，感谢您的购买！您的订单我们已经收到，3-5分钟内会为您安排发货，请您稍等片刻。感谢您的耐心等待，如有任何问题，请随时联系我哦！"),
            (re.compile(r'^没有收到网址和卡密，我已下单\d+份$'), "您好，感谢您的购买！您的订单我们已经收到，3-5分钟内会为您安排发货，请您稍等片刻。感谢您的耐心等待，如有任何问题，请随时联系我哦！"),
            (re.compile(r'^(请发货|可以安排发货了吗？|请问可以发货了吗？|订单已提交，麻烦发货，谢谢~|你好，订单已提交，请发货)$'), "您好，感谢您的购买！您的订单我们已经收到，3-5分钟内会为您安排发货，请您稍等片刻。感谢您的耐心等待，如有任何问题，请随时联系我哦！")
        ]


    def respond(self, user_message):
        for pattern, response in self.rules:
            if pattern.search(user_message):
                return response
        return False


```
<div><strong>精选留言（3）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/3c/4d/e6/13b19797.jpg" width="30px"><span>Joe</span> 👍（2） 💬（1）<div>老师，最近看了你课后开始尝试dify.ai, 有问题想请教下：
在dify.ai流程中，上下文的对话如何传入到流程中去？在我看来，每次提问，都是重新开始的一次提问，并没有上下文。</div>2024-09-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/5a/15/5435eb7d.jpg" width="30px"><span>篮球馆主</span> 👍（0） 💬（0）<div>落地过程中发现一个问题：dify的工作流套了 3 个左右的大模型，每个大模型回复时长 2s左右，整体的响应时长为 7s。
1：上面的问题如何优化？
2：微调可能合并多个大模型，从而缩短回复时长？
3：网络如何优化，怎么提升响应速度。只能切换成国内的大模型？
 </div>2024-12-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/5a/15/5435eb7d.jpg" width="30px"><span>篮球馆主</span> 👍（0） 💬（0）<div>为什么客服场景光靠提示词不行</div>2024-12-24</li><br/>
</ul>