你好，我是郑晔。

在前面两讲，我给你讲了开发过程的自动化，将我们的程序打成发布包；然后讲了部署过程的自动化，通过各种工具将发布包部署起来。

有了这些基础，我们就可以考虑在每次开发完之后，将程序打包部署到环境中。开发完就自动打包，然后自动部署，听起来很像持续集成是不是？

关于持续集成，我在专栏里已经讲过两次，分别讨论了“[为什么要做持续集成](http://time.geekbang.org/column/article/75977)”和“[怎么做好持续集成](http://time.geekbang.org/column/article/83461)”。但持续集成的讨论只停留在开发环节。

有了前面两讲的准备，我们就可以把这个过程再进一步延伸。聪明的你或许已经听出来了，这次我要讲的主题是持续交付。

## 持续交付

让持续交付这个概念广为人知的是一本书，Jez Humble 和 Dave Farley 的《[持续交付](http://book.douban.com/subject/6862062/)》（Continuous Delivery）。

前面讲持续集成的发展历史时，我提到了 CruiseControl，它是持续集成服务器的鼻祖。因为持续集成的不断发展，2007年，我的老东家 ThoughtWorks 公司有意以 CruiseControl 为基础，提供企业级服务，于是成立了一个团队，打造一个更好的持续集成服务器，Jez Humble 就是在这个团队中工作的。

同样在这个团队工作的还有一个人，乔梁，他是《持续交付》这本书的中文版译者，而且在这本书出版近十年后，他自己写了《[持续交付 2.0](http://book.douban.com/subject/30419555/)》，把自己多年来关于持续交付的新理解整理了进去。
<div><strong>精选留言（22）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/13/37/3b/495e2ce6.jpg" width="30px"><span>陈斯佳</span> 👍（20） 💬（1）<div>对了老师，问您一个题外的问题，就是您觉得运维监控这是一个可以单独发展的职业方向吗？比如像ELK等监控日志分析应用的使用</div>2019-06-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/48/ee/96a7d638.jpg" width="30px"><span>西西弗与卡夫卡</span> 👍（14） 💬（1）<div>持续交付，就是持续向用户交付价值，即刻获得反馈，即时调整，再次交付。再进一步说，持续交付可以是持续交付最大价值，那范围就不仅限于软件，还可以进一步延伸到运营，比如说结合ABTest，自动选择最有效的运营策略，为用户交付最大价值。脑洞一下，终极目标甚至可以是C2C，即Code to Customer</div>2019-03-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg" width="30px"><span>Jxin</span> 👍（11） 💬（1）<div>分而治之是解决复杂问题的一大利器。持续交互就像重构中小步快走（每次微调后运行测试代码验证），都能保证大工程的稳步前进。同时由于单元小了，所以也灵活了，持续交互可以结合最小产品的理念，以小成本做test，收集数据后，即使调整产品发展方向。</div>2019-03-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/3b/36/2d61e080.jpg" width="30px"><span>行者</span> 👍（7） 💬（1）<div>我理解的持续交付，是可以快速向用户交付价值；传统的开发方式下，开发、测试、上线，需要较长的流程以及时间，交付是间隔的，用户需要去等待；而通过持续集成，开发有了持续交付的能力，可以今天开发、今天上线，不敢想象。</div>2019-03-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg" width="30px"><span>helloworld</span> 👍（4） 💬（1）<div>请教老师一个问题：那是不是可以这么理解，现在的开发人员一定要具备进行持续部署时所涉及的技术，例如docker，k8s等？</div>2019-05-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg" width="30px"><span>hua168</span> 👍（4） 💬（1）<div>老师我问个很low的问题，什么是集成，包括那些环节？😂，它是包括”代码编写--&gt;提交--&gt;构建--&gt;测试--&gt;显示结果”吗，还是文章中提到的CI框中只包括“构建--&gt;测试--&gt;结果”？</div>2019-03-26</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoOGZ6lbHiboIZMN9USbeutnmCWBahVLtSlKlIENKvrZQCUQzpzeZQOxTntIkBUeDk6qZUPdqmfKrQ/132" width="30px"><span>宝宝太喜欢极客时间了</span> 👍（4） 💬（1）<div>持续交付，我的理解就是快速将想法变为实现的能力，结合敏捷开发，提升企业的交付能力。老师，我对持续交付跟DevOps这两个概念一直很模糊，感觉就是一个东西，他们的区别在哪里？</div>2019-03-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/4f/a5/71358d7b.jpg" width="30px"><span>J.M.Liu</span> 👍（3） 💬（1）<div>可不可以说DevOps是为满足持续交付的需求而诞生的啊。</div>2019-04-18</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/o6nMqThLaHtMUv7pOejZxGwdE3fibrCh64nBcjuC3N35kettCEeJ44CRA2j83OU5s5zr30mlKNWUPpfV0VG7xLw/132" width="30px"><span>程序员讲道理</span> 👍（2） 💬（1）<div>BDD跟单元测试的关系是怎样的？我了解到一些 ruby 团队只使用 rspec同时做验收测试和单元测试</div>2020-06-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/37/3b/495e2ce6.jpg" width="30px"><span>陈斯佳</span> 👍（2） 💬（1）<div>终于理解了持续集成、持续交付和持续部署的区别…… 目前公司还处在持续集成和持续交付的混合阶段，离持续部署还有很大一段距离。不过因为公司比较大，部门众多，管理生产环境的有专门的Unix团队，估计这个持续部署还很难做到</div>2019-06-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/f2/f2/2a9a6e9a.jpg" width="30px"><span>行与修</span> 👍（1） 💬（1）<div>交付作为集成的后续，为达到有效交付的目标，用户能够尽早参与我觉得也是比较重要的一环。文中插图从程序员视角出发，从生产环境获得结果，是否可再做扩展，将用户也作为一个独立节点？形成更加全面的闭环，架起人与人之间互动的桥梁。在公司内部讨论中，谈到过在交付物中引入用户体验收集的模块，提供用户常用反馈功能如图文，这样程序员除了功能、数据等验证外，也第一时间知道用户关注优先解决，原因是发现程序员和用户的关注有时相去甚远，而且在现场没有实施人员时也能很大提高沟通效率，降低编解码误差。</div>2019-03-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/40/ca/ddd10df2.jpg" width="30px"><span>rottenmu</span> 👍（0） 💬（1）<div>老是，如果有些项目反复推倒重来怎么办呢</div>2021-03-15</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132" width="30px"><span>Stephen</span> 👍（0） 💬（1）<div>现在做客户端的产品，都没有用到持续集成和持续交付的东西。一般都是开发做好后，交给测试去测，通过测试后直接就打包交出去了。不知道是客户端开发都这样，还是公司没有引入更合适的流程呢？</div>2020-12-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/46/f9/c9f8c63e.jpg" width="30px"><span>阿星爱美酒</span> 👍（0） 💬（1）<div>感觉只有把持续集成做得很好。才能够有持续交付的可能性。持续集成感觉就是质量的一个基础保障，以及持续交付的根基。</div>2020-03-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg" width="30px"><span>hua168</span> 👍（0） 💬（1）<div>持续集成不是不断集成的意思吗？在极限编程里，不断集成不就是持续集成吗？持续集成不是不断重复集成的环节吗？问题是我连集成是什么，包括什么环节都不懂😰，所以先搞懂什么是集成。
</div>2019-03-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/43/2d/af86d73f.jpg" width="30px"><span>enjoylearning</span> 👍（0） 💬（1）<div>是的，如果要做AB测试，这个持续交付又将怎么做呢，构建pipeline是什么样的。另外持续集成中如果前后端分离是要分两个agent跑，还是就用一个agent比较合适，我好像是倒序看作者的专栏，也不知前面有否讲过，只是看到这篇文章后有此困惑</div>2019-03-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>学习打卡</div>2024-08-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/fd/58/1af629c7.jpg" width="30px"><span>6点无痛早起学习的和尚</span> 👍（0） 💬（0）<div>我理解：持续交付的工具一般就是各个公司的 devops，进行打包、编译、部署到不同环境的工具，
因为一直在大厂，发现这块大厂自动化就做的很好，研发都无感知这背后的原理和这个行为背后的理念，比如叫持续交付等等</div>2023-06-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/3f/0d/1e8dbb2c.jpg" width="30px"><span>怀揣梦想的学渣</span> 👍（0） 💬（0）<div>文中提到的gocd工具，我在一些央企内部见到过，自有的研发部门，非外包。</div>2023-05-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>持续交付要验证发布包和生成环境。</div>2022-04-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/3e/fb/51f8dfe7.jpg" width="30px"><span>like_jun</span> 👍（0） 💬（0）<div>按需来的。</div>2019-03-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/ef/09/209cb7ff.jpg" width="30px"><span>智超</span> 👍（0） 💬（0）<div>早！坚持✊</div>2019-03-25</li><br/>
</ul>