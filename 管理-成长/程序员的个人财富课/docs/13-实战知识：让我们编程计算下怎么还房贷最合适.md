你好，我是王喆。

上一讲，我详细讲解了买房的决策链条。但是我知道，还房贷这个问题还困扰着很多想买房的同学。那么今天，我们就来个实战环节，带你编程算一算到底怎么还房贷比较好。

提到还房贷，你可能会有一堆细节问题：

- 首付多点好，还是少点好？
- 贷款30年好，还是15年好？
- 是提前还款合适，还是按计划还完合适？
- ……

确实，一套商品房的贷款动不动就一两百万，如果处理不好，会直接影响到我们未来的现金流和生活质量。但你可别忘了，我在[开篇词](https://time.geekbang.org/column/article/394241)里就讲过，我们程序员在财富管理上是有三大优势的。今天，我就利用我们独有的“程序员优势”，编程验证一下各种房贷方案的优缺点，帮你彻底解决关于还房贷方式的疑问。

## 影响房贷的因素有哪些？

作为一个程序员，当我们着手解决问题的时候，要做的第一件事情是什么？我想你对此肯定不会陌生。我们首先要做的，就是**清晰地定义出这个问题**。

“怎么还房贷比较好”，这个问题的表述显然是非常模糊的。那我就来帮你翻译翻译，看看怎么更清晰地定义它。

这个问题应该是：如何确定房贷的**首付金额**和**还款年限**，让我们的**家庭财富**在一个**目标期限**上最大化？

现在我相信你已经明白了，我们其实是在解决一个最优化问题。要确定的变量很简单，只有两个，就是首付金额和还款年限；优化的目标也很简单，就是指定一个目标期限，比如30年，让我们的家庭财富在这个期限内积累得最多。
<div><strong>精选留言（22）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/1c/fb/ab/c0c29cda.jpg" width="30px"><span>王世艺</span> 👍（51） 💬（10）<div>问题1 
有两种：
保守的买个老家强省会房子，进可攻退可守。
激进的可以参考 深房理 那种证券化玩法（很危险）。还会坐牢。只是可以看看涨涨见识。 

问题2 
通货 是要适当考虑。但是现在有点妖魔化了，人们有点过度焦虑。
记得我投资老师跟我说的，大部分人不是死在通货膨胀下的，而都是死在害怕通货膨胀而导致的胡乱投资上的。
还有一句话对我影响特深，就是在讲 股市长线法宝 和 投资组合理论 两本书的时候，一个结论：股市短期波动大，但长期收益最大并且风险最小，是唯一能战胜通货膨胀的资产。现金 和 债券 都是短期波动小，但长期收益跑不过通货。这种短期风险比和长期风险比的错配，是股市反人性的一大特点。
最后分享个 投资中的不可能三角模型。一种投资品，不可能兼顾 收益 风险 流动性 三个优点。比如股市：长线价值投资 就是 放弃流动性 追求 收益和风险。短线 就是 保证 流动性和收益，追求控制风险（止损）。房子就是 放弃流动性 追求 收益和风险。 货币基金就是 放弃收益，追求流动性和 风险为0.
当拿到一种新投资品时候一定要想清楚 他舍弃什么 追求什么。比如p2p,及保证流动性 又保证无风险，还保证10%以上的高收益，就要小心，他一定是隐藏了什么，其实就是隐藏了极大的风险。那数字货币了？其实也可以思考下。

</div>2021-08-09</li><br/><li><img src="" width="30px"><span>会飞的牛</span> 👍（8） 💬（1）<div>Q1：每月节余不管是多是少，两个方向：
a. 投资理财定投指数基金和少量股票，越早越好。
b. 每月准备20%备用金，以备风险如失业，大环境等不可控因素。

Q2：通货膨胀具google结果每年大约是有5%~10%左右，房子是要买的，良好的通货膨胀可以减轻后续还款压力。

困惑：
请教一下老师，由于我现在没结婚，经济靠自己但预算有限，想在坐标成都买二手房，两个选择：
a. 选择城中心老破小套1室 
b. 选择郊区套二室或套三室
做为计划长期在城市发展，不知道哪个选择会在相对解会优些？

</div>2021-08-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/7b/bd/ccb37425.jpg" width="30px"><span>进化菌</span> 👍（6） 💬（1）<div>说白了，就是房贷需要根据自己的理财能力来确定首付和年限，尽可能的让自己财富效益更高。

手头紧，又要买房，感觉很多人的选择是找亲人找朋友借钱。这样的选择我认为不是好选择，谈钱伤感情；当然有人不记利益给借钱的话，那自然很好了。
我还是会选择保守路线，多少钱干多少事吧~

程序思维处理生活难题，这是我们的优势，用起来，哈哈哈</div>2021-08-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/ac/62/37912d51.jpg" width="30px"><span>东方奇骥</span> 👍（6） 💬（2）<div>其实还得看区位。比如成都、重庆这样的城市，地很多。房子15年、20年后想要连续升值，除非有区位或者学区的加持。特别像那些密度高的小区，肯定会遇到很多业主十多年后不愿意出钱维护，贬值的可能性都很大。另一方面，国人普遍缺乏理财知识，大多数人只知道投资房产，对于基金股票等嗤之以鼻。刚需买房需趁早，但在当前限购政策和房地产去杠杆化的大背景下，一定要买自己长期所能承受的房，否则就是一颗定时炸弹。</div>2021-08-09</li><br/><li><img src="" width="30px"><span>Geek_748ce8</span> 👍（3） 💬（1）<div>对于理财经验没那么多的人来说，是不是最低首付，最长期限配合之前讲的永久组合会是最优的选择呢？</div>2021-08-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/12/f4/1bf8568e.jpg" width="30px"><span>学要有所用</span> 👍（2） 💬（1）<div>如果手头的钱只够付最低首付，且每月还完贷款后没有多余的闲钱的话，那么最好还是尽量凑多一些的首付，以防后续贷款产生的不菲费用带来的压力，然后在还贷期间，尽量升职加薪，余点闲钱用来理财，业余时间尝试扩展副业，总之，这段时间，应尽量扩宽财富渠道，使财富值超过房贷利率，考虑到房产最令人头疼的是其高昂的房贷利率，而理财又有风险，在手头紧的情况下，还是尽量多点首付，少点还贷年限吧。虽说理想情况是少付首付，延长还款年限，用节省下来的钱，以稳健的理财方式超过房贷利率，但是手头紧的人一般心性不稳，缺钱的情况下容易产生赌博心理，所以保险起见，还是多付点首付，以自己的主业为主，努力升职加薪，扩展副业，用结余的钱再来理财，一点点增加财富值，这才是最稳健的手头紧的情况下来买房的方式。

通货膨胀是会影响房贷决策的，在通货膨胀期间，物价上涨，收益缩水，钱不值钱，房价可能从一万每平米，涨到两万每平米，金钱价值足足降低一半，这个时候如果要买房，就要花费成倍的代价，对消费者而言是极其不划算的，但如果用这每平米高出的一万块进行投资就不一样了，受通货膨胀的影响，以前投资一万块能赚一千，这时候可能就只能赚五百了，少赚一半，但少赚归少赚，起码是有收益的，总比将这一万块投到首付里不产生任何收益好得多，更何况通货膨胀期间，如果按原先计划好的付款比例付首付，会多花不少不产生任何收益的资金，这么多资金不产生收益，无疑是一种损失，因此通货膨胀期间，还是尽量少付些首付，多些贷款年限，用结余下来的部分资金理财，以较少或抵消通货膨胀带来的收益损失。其实房贷决策本身并未改变，改变的只是房贷本身的细节，都是通过少付首付，多些贷款年限，来让理财收益大过房贷利率的一种方案。不过通货膨胀期间，房价太高，不宜购买，那时候可能要花比在正常经济环境下高的多的价格，就算理财能力很强，也要好些年才能赚回来。但是房子还是一种很好的应对通货膨胀的投资品，如果在通货膨胀前以较低的价格买入，那么通货膨胀时能产生不菲的收益，也许可以抵消来自通货膨胀的不良影响。
</div>2021-08-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/34/aa/431de942.jpg" width="30px"><span>dbtiger</span> 👍（1） 💬（1）<div>思考题：
1.如果自己的理财能力，年化收益小于商贷的6%，就选择首付多付，贷款年限更短合适。
2.通货膨胀不影响我的房贷决策，因为我认为优质房产有能力消化通货膨胀。

疑问：
等额本息，贷款本金40w，30年还清，想提前还款，请问第几年还清比较合适(理财能力一般偏保守)？</div>2021-08-30</li><br/><li><img src="https://wx.qlogo.cn/mmopen/vi_32/ywSuwVNMKNjRLPMjZmpQOQHWW2usAu8RwRIOlBHaVVU6J3xHdtibgO6FVzYkRIkV50vCr62ia4OwJp07giabiazUGA/132" width="30px"><span>ripple</span> 👍（1） 💬（2）<div>其实，对大部分人来说，贷款年限应该越长越好。通货膨胀率每年大概率就超过房贷利率了</div>2021-08-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/50/2b/2344cdaa.jpg" width="30px"><span>第一装甲集群司令克莱斯特</span> 👍（0） 💬（2）<div>王老师，业界流传，尽量不要全款，要使用贷款因为钱越来越不值钱，分个3 50年还款，自己有充裕的现金做他用。</div>2021-08-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/8a/df/b1577245.jpg" width="30px"><span>Q</span> 👍（0） 💬（2）<div>思考题回答
1.钱只够付最低的首付，还款压力特别大这种情况，我觉得已经选择了最低比例首付+最长年限还款的房贷计划的（如果不是那就还有优化空间）。在这种情况下，我一般会有两种选择，降低预算和推迟买房。
降低预算，显而易见可以很直观的解决问题。但是带来的却是比之前预期低的方方面面，这点要考虑清楚能否接受。
推迟买房，就是把问题留给以后了。随着时间的推移自己手中的财富必然会越来越多。然后再选择时机再次考虑买房即可。</div>2021-08-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/dc/90/c980113a.jpg" width="30px"><span>行问</span> 👍（10） 💬（2）<div>本人1991年的，珠三角地区（老家亦是粤），刚需首套，组合贷，公积金3.25%，商贷5.4%。2019年11月上车，在上车买房之前，在2019年9月份就开始构建一个自己的投资组合，目前年化是 12.6%，投资理财一定是非常反人性的，在2020年2月份开盘后跌停，我压上我全部身家（留有3个月的流动资金和家里领导的有稳定的单位上班）。非常赞同老师说的一定要利用程序员的思维，很多人都是胸口写个“勇”字就杀进去，无非就是当炮灰。程序员就是这个行业赋予我们“持续学习”特性，我是按照自己的规划来进行的，因为我从2015年就开始观察、学习，从黄金、基金、定期报告、各自投资经典书籍，到真金白银实打实的试探、观察仓，而不是当小白什么都要靠问别人。真正入市是在2019年。</div>2022-01-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/3c/52/5951ffb4.jpg" width="30px"><span>Sinvi</span> 👍（5） 💬（0）<div>推荐B站的纪录片，房东到家</div>2021-08-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg" width="30px"><span>lesserror</span> 👍（2） 💬（0）<div>这一讲的内容值得我们每个人好好深思一下。</div>2021-08-09</li><br/><li><img src="" width="30px"><span>Geek_Linh</span> 👍（1） 💬（0）<div>王老师好，我有一个疑问是个人的稳定理财利率怎么理解？这个是否也会随着经验、见识的增长而变化？现在房贷的利率是比较稳定好预估的，但是个人的理财能力是会有变化的。“稳定”的理财利率如何去量化？希望能够得到您的解答，谢谢。</div>2022-03-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/25/3e/90/c86ec4ca.jpg" width="30px"><span>Chengfei.Xu</span> 👍（0） 💬（0）<div>Q1: 我会首先考量目前的经济形势、职业发展来决定是否买房、什么时候买房，目前来看的话最好还是买一套房，。还贷压力太大的话，会接连摧毁你的其余生活与追求，我一开始就会认清自己，不要有差的看不上、好的买不起，咬咬牙也能上车这种思想，而是首套房会量力而行，尽早买入，也可以作为资深资产配置中对冲风险的一环。

Q2: 一定程度上会影响，我的工资年均涨幅、通货膨胀、房贷利率，这是最关键的计算因子。</div>2023-12-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/02/65/ddb6460e.jpg" width="30px"><span>柯里</span> 👍（0） 💬（0）<div>膨胀和什么买房方式没有关系，一线城市如果买房都抵御不了膨胀的话，那就不要住房了</div>2023-09-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/9b/ed/e633460a.jpg" width="30px"><span>Geek_225244</span> 👍（0） 💬（0）<div>a股，赔钱的是多数</div>2022-10-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg" width="30px"><span>追风筝的人</span> 👍（0） 💬（0）<div>用一句话总结就是，如果你的稳定理财利率能够高于房贷贷款利率，那么首付少付、还款年限长合适；反之，如果你的稳定理财利率低于房贷贷款利率，那么首付多付、还款年限短合适。</div>2022-06-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/21/03/c5/600fd645.jpg" width="30px"><span>tianbingJ</span> 👍（0） 💬（0）<div>其实就是贷款利率和理财收益率做个对比；如果有能力我借钱理财也行，跟房子其实没什么关系</div>2022-04-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/70/fd/0e1655d1.jpg" width="30px"><span>Allanxl</span> 👍（0） 💬（0）<div>“如果你的稳定理财利率能够高于房贷贷款利率，那么首付少付、还款年限长合适”

这句话有点问题。因为房贷是单利（不会利滚利），投资是复利（收益继续产生收益），所以理财利率略低于房贷贷款利率时，仍然最终收益更大；并且还款年限越长，复利和单利差越大。</div>2022-01-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/04/81/622a1a4e.jpg" width="30px"><span>充电中</span> 👍（0） 💬（0）<div>老师，房价程序里面求每月还款金额数的代码没理解，可以解释下吗？
源代码里是
monthly_repayment = float(mortgage) * mortgage_monthly_rate * ((1 + mortgage_monthly_rate) ** (12 * mortgage_years)) &#47; ((1 + mortgage_monthly_rate) ** (12 * mortgage_years) - 1)
我理解是用最终需还款金额&#47;月份得到每月需还款金额数，也就是
monthly_repayment = float(mortgage) *  ((1 + mortgage_monthly_rate) ** (12 * mortgage_years)) &#47; (12 * mortgage_years)，
求老师解释下，或者指点下我哪里思考错了，感谢</div>2021-12-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/23/25/68/c9beb06b.jpg" width="30px"><span>loading ...</span> 👍（0） 💬（0）<div>如果你的稳定理财利率能够高于房贷贷款利率，那么首付少、还款年限长合适；反之，如果你的稳定理财利率低于房贷贷款利率，那么首付多、还款年限短合适。</div>2021-10-26</li><br/>
</ul>