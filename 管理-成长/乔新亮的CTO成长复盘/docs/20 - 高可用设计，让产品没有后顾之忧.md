你好，我是乔新亮。这一讲，我想和你聊聊，关于高可用设计的那些事儿。

一提起高可用设计，很多同学立刻就会想到“冗余设计”、“故障转移”等关键词。确实，在大部分与高可用相关的分享里，这两个词往往会被重点强调。

所谓“冗余设计”，是指要通过集群来替代单点服务，做好冗余备份。单点架构是高可用的大敌，“把鸡蛋放在不同的篮子里”是高可用最朴实、最有效的设计思路之一；“故障转移”则是为了缩短故障时间，保证故障发生时，业务可以快速恢复。

如果你对高可用设计了解得更多，可能还会给出如 “CAP 理论”、“异地多活”、“双机架构”一样的更多概念，并且详细解释应用方法。

像这样面对问题，能立刻在大脑知识地图中检索并给出应对举措或方案，是一个优秀的特质，能帮助你通过许多高难度面试。但不知你有没有想过，**为何自己在面试中对答如流，在实际工作中却仍然会遇见许多高可用难题呢？为什么还是无法主导一家大型企业整体架构的高可用设计呢？**

问题或许是多方面的，比如企业现阶段的发展状况特殊，缺乏实战机会，导致个人资历不够；或者相关部门不太配合，组织人员能力差，代码 Bug 太多，让你一想就气不打一处来……

以上原因都有可能，也都客观存在于很多公司。但我认为，最重要的原因是，缺乏对高可用设计自顶向下的、比较通透的理解和认知，因而在实践中常常迷失在技术细节里，难以窥见架构的全貌。
<div><strong>精选留言（18）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/11/e3/f8/dccce84a.jpg" width="30px"><span>huaxiaofeng</span> 👍（37） 💬（2）<div>人体就是一个高可用的系统，人的很多器官有两个及以上(冗余设计)，少了一个，人体还能够正常的工作，还能继续生活，每个器官也有不同的等级，就好比服务治理中的，核心服务，和非核心服务，核心服务不能挂，挂了就会影响到整个业务，就好比人的心脏，如果停止工作，那整个人就挂了，但是断了一只手，人还是能够生活(服务降级)，架构设计可以参考生物学中的很多概念。</div>2020-12-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/eb/ef/fc2d102c.jpg" width="30px"><span>老张</span> 👍（19） 💬（1）<div>限流降级熔断，应用高可用的三板斧。
缓存升配扩容，应用高性能的三板斧。
多机异地灾备，机器高可用的三板斧。</div>2021-02-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/50/5f/d10a39c4.jpg" width="30px"><span>glutton</span> 👍（8） 💬（2）<div>每天上班的例子，真是太好了，贴切又联系生活，很好理解。

高可用不等于高可靠。
高可用的本质是冗余设计，实例级、机房级、城市级等等；代码逻辑的bug，通过灰度、沙箱、预发布等多环境验证；如果是稳定元素突发事件，那就认命，接纳自己，这个认知也是无比的正确啊。
学以致用，知行合一，方能化为己用。

认知！认知！认知！整个课程，也在反复讲认知，正确的认知，不单单是对技术工作有帮助，也是我们世界观的基础，希望后续还是多讲认知相关的内容，平时也看书啥的，但是没有乔老师讲的这么精辟。

目前公司就是业务连续性高于一切，对于业务连续性，我的一点思考是，业务连续性指：线上业务不间断提供服务；并持续交付新业务。

最后，我看彩食鲜在招人，也有base北京的，去面的话，可能聊到您不？</div>2020-12-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/75/9b/611e74ab.jpg" width="30px"><span>技术修行者</span> 👍（3） 💬（1）<div>非常同意下面的观点：
1. 高可用就是保证业务连续性。
2. 高可用不等于高可靠，高可用会有很多trade-off。
3. 高可用的实现，需要架构自顶向下的进行思考，只单独考虑某个功能或者模块的高可用，并不能保证整个业务链路的高可用。
4. Design for failure很重要，不能服务降级或者熔断的服务风险太大了。</div>2020-12-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/96/ab/f158460e.jpg" width="30px"><span>Geek_4c2596</span> 👍（1） 💬（1）<div>乔老师将高并发，高可用，高扩展做了非常深刻而精炼的提炼，直达问题本质。这些本质的认知就如同内功心法，必须得融汇贯通才不至于落入了解一大堆方法，工具但还是做不好架构设计；也不是熟读内功心法就能无招胜有招，而是经过不断的实践，练习之后的闲手拈来不着痕迹。</div>2021-01-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg" width="30px"><span>Demon.Lee</span> 👍（1） 💬（1）<div>重点：学以致用，学以致用，否则学了也是白学。从小学到大学，没用过的是不是都还给老师了？太真实。</div>2020-12-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/df/bf/f90caa79.jpg" width="30px"><span>椿</span> 👍（1） 💬（1）<div>讲的非常好，超值的课程！</div>2020-12-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/5a/cd/8710ed11.jpg" width="30px"><span>大师兄</span> 👍（0） 💬（1）<div>非常有价值的课，多次刷，结合项目开展起来。</div>2021-05-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/25/35/a9/5f309b81.jpg" width="30px"><span>ubuntuMax</span> 👍（0） 💬（1）<div>高可用必须要保证业务可用，这点是全文关键点。其次，对于不完美去接受，然后持续改进，这种态度也值得学习。
最后是真的感觉到做技术管理非常不容易，前路漫漫。</div>2021-03-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/d0/4d/2116c1a4.jpg" width="30px"><span>Bravery168</span> 👍（0） 💬（1）<div>这章对高可用的解读很赞，有深度。</div>2021-03-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/73/a0/7dcc9212.jpg" width="30px"><span>adang</span> 👍（0） 💬（1）<div>这节内容我第一时间想到了&quot;风险意识&quot;，吴军老师在得到专栏里有一节专门讲了风险意识，生活中风险意识薄弱小到可能经济受损大到可能危及生命，做系统设计也一样，有了风险意识才会思考防御手段和措施。</div>2021-02-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/7c/25/70134099.jpg" width="30px"><span>许凯</span> 👍（0） 💬（1）<div>利用可监控、要素的存量和连接关系中的调节回路提高系统的可用性。</div>2021-02-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/c4/03/f753fda7.jpg" width="30px"><span>JianXu</span> 👍（0） 💬（1）<div>乔老师，我说一下我的体会吧，这么多年下来我觉得除非形成文化，不然真的要把一件事情最好需要一把手的持续关注，高可用也是如此，不然一把手嘴上说高可用实际不停的逼新功能开发，最后也很难落地。还有您说的慢就是快，我是吃了苦头才有深刻体会的，不少项目我们事后修bug , 更消耗精力的修复bug 产生的脏数据，这些后期投入已经超过我们先期省下来的强化系统的时间了。最后，我想分享一下我今年年初的时候总结的两篇有关高可用，高性能，高可靠的博客，是我对自己在云计算这么多年出了那么多事故的一个总结：

上篇： https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;bnhXGD7UhwTxL8fpddzAuw

下篇：https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;Xyvfx9mLKqquulnrhFi42Q

我最近还在思考一个问题，就是早年学开车的时候看过一个叫防御性驾驶的视频，那是一个保命视频。于是我就在想在我们的编码阶段，是不是也要搞一个“防御性编程”，用来兜底。这个我还在整理中，我希望自己能在2021年上半年完成相关系统事故的整理和定稿。
</div>2020-12-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg" width="30px"><span>剑八</span> 👍（0） 💬（1）<div>高可用就是出现异常时业务能不中断
可能是备案</div>2020-12-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/09/fb/52a662b2.jpg" width="30px"><span>spark</span> 👍（0） 💬（1）<div>高可用是系统弹性能力和余量问题。系统有弹性和余量才能抗风险。人和系统一样，有时候比的是谁有弹性和余量，单讲具体能力大家都差不多。</div>2020-12-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/78/53/b0d15502.jpg" width="30px"><span>Geek_bknz8c</span> 👍（3） 💬（1）<div>家离公司6公里，每天早上步行1小时上班，路上正好听乔老师两节课。获益匪浅，去年第一次听，还是一名研发工程师，半年多过去，成为一线研发团队管理者，再回来听，又有了很多新的体会。感谢乔老师！</div>2021-10-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/88/cc/e80845d5.jpg" width="30px"><span>xiaochao321</span> 👍（0） 💬（0）<div>高可用的系统就要保证每一个相关服务做到高可用，即使在某一个服务出现问题的情况下，也不能影响到其它服务的正常响应，对用户来说，就是系统24小时online的状态，除此之外，还要捋清楚系统的整个调用链路情况，保证每一个节点都是高可用才行</div>2022-10-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/fc/cb/9e7f075c.jpg" width="30px"><span>一滴水的波浪</span> 👍（0） 💬（0）<div>乔老师，服务降级的方法有哪些？也就是如何替换到备用的服务上？</div>2022-08-09</li><br/>
</ul>