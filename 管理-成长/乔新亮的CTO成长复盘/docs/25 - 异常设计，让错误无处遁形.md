你好，我是乔新亮。

今天，我想和你聊聊有关异常设计的话题。

如果你认真听了前面的内容，那么对你来说，异常设计应该不是一个新鲜概念了。在高可用设计、监控体系建设部分，我们都聊到了对异常的管理。

那么，为什么今天我们又要单独聊异常设计呢？因为异常管理虽然属于监控体系的一部分，但并不完全依赖于监控体系或高可用设计。**在企业的监控体系建设完成前，异常设计一般就可以独立发挥作用，达到快速见效的目的。**

异常管理可以提升 IT 团队快速定位问题的能力、降低生产系统异常出现的频次和数量，更重要的是，它是让 IT 团队从面向技术，转为面向产品、面向用户的关键步骤，所以我们这里独立出来讲。

那么，在开始之前，我们有必要明确一下，究竟何为异常？

你可能会想，导致系统不能正常工作的问题就是异常呗。

说得对，但不全对。有些异常，可能当下未必会对生产环境产生影响，但不代表未来也不会；有些异常，可能在流量压力小时未必会出问题，但不代表流量压力大时也不会。

就像在平时，每位同学都会打印 Log，有 Warning，有 Error。大部分同学关注 Error，而不关注 Warning ，甚至有时 Error 也是选择性忽略的。反正打印这些，也不一定会导致线上服务受影响，看看就得了。
<div><strong>精选留言（17）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/17/d0/fc/f7a5e223.jpg" width="30px"><span>狐狸糊涂</span> 👍（12） 💬（3）<div>感谢乔老师，每到周一三五就迫不及待的查看您更新的课程。有时可能在上班路上，有时可能是上班休息的时候。
乔老师，可以分享下您是怎么做知识储备的？或者可以分享您觉得不错的书籍吗？</div>2020-12-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/da/e8/d49dfa94.jpg" width="30px"><span>Weehua</span> 👍（8） 💬（2）<div>异常设计，这个概念还真是第一次听说，挺新鲜的。文中学习到了，如果能这样对待异常，系统化的管理异常，治理异常，我相信产品的质量和用户体验一定非常棒！</div>2020-12-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/2f/c5/55832856.jpg" width="30px"><span>Edison Zhou</span> 👍（3） 💬（2）<div>这节课的内容让我联想到了我们团队的迭代回顾会议（Restrospective），我们在这个会议上都会一起回忆这个迭代做的好 和 做的不好 的场景和事件，对于做的好的就继续保持，对于做的不好的（往往是多个点）就投票从中选择一个点，然后通过5 Why等方法对其进行分析根本原因，然后针对根本原因探讨一个解决方案，然后将解决方案作为一个规则 或 嵌入研发流程 或 嵌入CI&#47;CD流程等，确保指定负责人或所有人必须按流程执行，以保证后续迭代不再犯同样的错误，让团队持续改进。现在看来，这些做的不好的，影响团队协作效率的点，其实就算是团队层面的一个异常，它导致了我们团队可能有潜在无法满足用户契约的可能性，于是我们通过回顾会议对其进行了异常的统计、分析 和 处理（按优先级，正如不是所有异常都要被处理），对于团队一致认为需要在后续迭代处理的，就严格定义规则嵌入研发流程保证执行。团队的异常不断减少（但始终无法完全消灭完），能够持续的进化，就是对用户契约精神的遵循，对企业长期主义的践行。</div>2021-03-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/ed/e9/f667649e.jpg" width="30px"><span>yxw</span> 👍（2） 💬（1）<div>乔老师说的太对了，契约精神是做好工作的原动力，所有工作都要以终为始，通过闭环体系化管理，有道也有术，受教了！</div>2021-03-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/50/5f/d10a39c4.jpg" width="30px"><span>glutton</span> 👍（2） 💬（1）<div>乔老师好，认知又得到了提升
&quot;异常，是导致不能履行契约的所有问题&quot;
请教一个工程层面的问题，写代码时，如果当前已经捕获异常，有两种处理方式
1.在下层处理一下，包装成返回码；
2.直接抛出异常，由出口统一处理
您偏向那种方式?</div>2020-12-21</li><br/><li><img src="" width="30px"><span>海</span> 👍（1） 💬（1）<div>乔总再三强调“契约精神”，我的理解就是做一个靠谱的工程师。</div>2020-12-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg" width="30px"><span>leslie</span> 👍（0） 💬（1）<div>风险管理和应急处理、事后复盘；说起来容易，可是真正做到确实不易。</div>2021-03-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/73/a0/7dcc9212.jpg" width="30px"><span>adang</span> 👍（0） 💬（1）<div>学完这节课内容我的思考是，这节课讲到的异常设计和前面几讲里的内容就像系统里的基础组件，可以类比为房子的地基，地基打的越牢固上面的房子越稳固。可正是因为他们是地基在底层，平时不显山不露水只有当发生问题引发灾难时才被人想起，所以很多人对他们没有意识，或者将他们一直放在重要不紧急的任务列表里，一直处于等待状态，这样企业就缺少了契约精神和持续进化能力。

有了这样的意识后要把他们坚持落地困难还是挺大的，昨天在部门会议上提到团队目前监控设计还有很多事情要做，生产环境出现问题后直接在生产环境调试解决 Bug，即便回滚也不能完全回滚到未变化前版本，团队 Leader 对此并不在意，并指出&quot;规定不能在生产环境调试 Bug&quot; 太叫针儿。改变不了别人，只能改变自己，努力学习提升认知，即使现在不能实践至少知道什么是对的。</div>2021-02-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/39/8c/ff48ece3.jpg" width="30px"><span>小乙哥</span> 👍（0） 💬（1）<div>异常体系化的管理，确实还是第一次听说，很有启发意义！这里的异常，更多还是业务层面的异常，具有业务含义的。体系化解决异常，让我想到了项目管理的办法。异常要拆解到位(异常注册)，责任到人，长期持续推进，这其实就是项目管理的思路。</div>2021-02-20</li><br/><li><img src="" width="30px"><span>Geek_8633d9</span> 👍（0） 💬（1）<div>老师，你好！像我们中小公司，之前自己开发过一个系统，推广不太顺利。后面想，是不是利用sentry来管理日志？异常，更多的认识是日志的级别和处理。总而言之，我们不能自己去开发一个系统，也一下子找不到开源系统。</div>2021-01-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/c4/03/f753fda7.jpg" width="30px"><span>JianXu</span> 👍（0） 💬（1）<div>我们公司有一个专门的叫Problem management 的部门来管理事故。但是我觉得整个流程缺少最重要的一环，就是复现错误并验证所有采取的措施已经达到预想效果。</div>2020-12-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg" width="30px"><span>夜空中最亮的星</span> 👍（0） 💬（1）<div>课程已经倒计时了啊</div>2020-12-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/5c/a6/a225f2d3.jpg" width="30px"><span>wst</span> 👍（0） 💬（1）<div>最重要的是，在企业层面，我们可以实现用户体验驱动内部经营完善的经营逻辑。这一点学习到了，让技术同学从技术视角转变为用户视角，进阶必备。</div>2020-12-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/09/fb/52a662b2.jpg" width="30px"><span>spark</span> 👍（0） 💬（1）<div>异常设计是产品和研发微观能力的体现。乔老师分享说当访问规模和并发很大时，影响很大，把我吓到很难过。
产品经理如果把微观细节设计不好，开发兄弟们100%做不好异常设计开发，反正我以前的经历都是这样过来的。
团队中其他开发兄弟给我最大的压力就是这个异常设计问题，很多弟兄们技术比我好，但在异常出现时用户体验、业务流程如何闭环方面做不好，往往把用户带到了死胡同，用户不知道如何进行下一步操作。
我现在都不愿意管其他研发兄弟们，心里很累。辛亏以前用户每日PV数量不超过6000万，并发量1000左右。
对用户操作的理解，业务流程的理解，技术方面对数据一致性、锁冲突等因素的理解决定着异常设计和处理的水平。
</div>2020-12-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/bf/3e/cdc36608.jpg" width="30px"><span>子夜枯灯</span> 👍（0） 💬（1）<div>一恍惚到了课程的结尾期了，感谢老乔一个多月的陪伴。如果您再开新的专栏我还会购买，记得要打折哦，(●ˇ∀ˇ●)。请教老乔一个问题，如何将自己碎片话的知识整理成体系？我再试图建立，但没有很好的技巧。期待您的回复。</div>2020-12-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/d3/a3/8d8a1117.jpg" width="30px"><span>rere</span> 👍（5） 💬（3）<div>不知不觉跟着乔老师来到了课程尾声，想趁着课程还没结束给乔老师留个言。

在试读乔老师第一课“五年上一个台阶”，就把那节课微信转给了十几个同事、甚至不同行业的朋友，也经常跟女朋友一起听、一起讨论。真的是发自内心的认可和分享，认为这一门课可以为在“业务导向型公司”的技术人员解困，找到真正可以努力的方向。

随着听的章节越来越多，也逐渐意识到：技术人员并非只有技术能力维度；以前领导的做法是有道理的，自己在对领导的某些处理上是不正确的，一味的以技术视人、视环境会让自己走进误区、耽误的是自己的成长；作为一个客户端出身的技术人员，不懂的东西实在很多，向往架构、cto的方向走，要补的东西很多，所以最近也在结合其他课程，看看后端各种架构设计；也意识到思想、认知非常重要，同样用一个现有的流行的框架，有思想和没思想的感受是完全不一样的，就是观大象全貌和盲人摸象的区别。

我认为乔老师的课、观点，给了我很多启发和信心，这只是一个开始，感谢您给了我这个开始。</div>2020-12-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/bc/02/3f7a7197.jpg" width="30px"><span>跨江大桥</span> 👍（0） 💬（0）<div>老师这篇高屋建瓴，讲的非常好。不过还是想问下各位同学，现在有成熟的异常治理方案吗？现在工作中的异常太混乱了，存在很多问题。有没有成熟的方案能借鉴下？</div>2023-07-19</li><br/>
</ul>