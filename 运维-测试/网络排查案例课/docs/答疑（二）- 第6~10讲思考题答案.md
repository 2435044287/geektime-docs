你好，我是胜辉。

在上一节答疑课里，我们回顾了第1到第5讲的思考题，分析了每道题目的解题思路，当然更重要的是对这五节课的知识点做了一次复习和补充。你看完了这些解答后的感觉如何呢？跟之前你自己的思考过程和结论相比，又有哪些相同和不同之处呢？相信通过再一次的思考，你对知识的掌握将会更加深刻。

那么这节课，我们就继续讲解这些课后的思考题。先从第6讲开始。

## 06讲的答疑

### 思考题

这节课，我给你介绍了利用防火墙的TTL跟原先的正常报文的TTL不一致的特点，从而识别出防火墙的方法。那么，假设有一天，防火墙公司把这个特性也完善了，我们再也不能仅凭TTL的突变而发现防火墙了，你觉得还有什么办法可以识别出防火墙吗？

### 答案

这是一个开放式的问题，其实并没有标准答案。不过，通过对这个问题的思考，我们可以对网络的理解更进一步。我们先参考下面这张图，复习一下用TTL判断防火墙的原理：

![](https://static001.geekbang.org/resource/image/f6/56/f6a1206ea604d7f3dd88981e39366256.jpg?wh=1694x562)

> 补充：上图是一个例子，假设防火墙是路径上的第5跳，那么防火墙自己发出的报文的TTL就比真正的发送端的TTL多了5。

然后想一想，我们之所以能通过TTL定位防火墙，本质原因是什么呢？实际上，本质原因就是这个IP报文是防火墙自己构造的，而**在构造时TTL被设置为了初始值**。
<div><strong>精选留言（3）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/20/81/02/59f5f168.jpg" width="30px"><span>小白debug</span> 👍（4） 💬（2）<div>看了“数据滞留”现象的那部分，有些疑惑，表述看起来像是在说，应用层收了300b之后，才会ack300。但实际上ack的行为跟应用层是否收这个数据无关才对。我理解 应该是t3时B发 ack=1000 + 1，win=0，window full，此时A会发现对方接收窗口满了，过一阵A再发一次窗口探测，此时B的缓冲区被应用层收走了300b，所以此时B回复给A的是ack=1000 + 1， win=300.   求老师帮助解惑。</div>2022-07-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg" width="30px"><span>那时刻</span> 👍（3） 💬（1）<div>请问老师例子中在途字节数是 700 字节，是因服务器window full直接丢弃？还是有可能服务器把缓冲区数据被应用程序处理后再次接收呢？</div>2022-03-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/fe/b0/260f41f0.jpg" width="30px"><span>loris</span> 👍（0） 💬（1）<div>老师，最近排查一个数据库查询结果返回的问题，根据ID查询返回一个大文本字段，整体结果20分钟才返回，如果立即中断查询，查询结果立即返回
抓包分析发现有很多Tcp zero window 报文 ，老师能不能对Tcp zero window补充讲解一下</div>2022-11-09</li><br/>
</ul>