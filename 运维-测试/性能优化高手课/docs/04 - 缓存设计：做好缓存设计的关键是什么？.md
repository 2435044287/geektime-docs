你好，我是尉刚强，今天我们来聊聊基于性能的缓存设计。

缓存就是一个临时储存数据的地方。当用户查询数据时，首先会在缓存中查找，如果找到了就直接使用；如果找不到，就再到数据的原始位置去寻找。所以，缓存本质上是一种用空间换时间的技术，通过数据在空间上的重复，来提升数据的访问速度。

不过，随着分布式和云计算技术的发展，数据存储技术也发生了翻天覆地的变化，而且不同存储技术在价格和性能上都存在很大的差异，所以在针对性能进行软件设计时，如果我们没有做好多层级的缓存设计，不仅可能浪费钱，而且获取的性能收益可能也不够理想。

所以在今天的课程上，我会结合互联网应用与服务场景，给你讲解如何做好缓存设计，并会剖析典型的缓存使用案例，帮助你建立起缓存技术原理的系统认识，以此指导你在产品的软件设计中，可以正确使用缓存来提升系统的性能。

## 缓存设计的通关之路

那么首先，我想从两个问题开始，来带你了解下缓存设计要在什么时候做，以及通过不同数据类型的特性对比分析，来跟你一起探讨如何才能做好缓存设计。

好，第一个问题：**在互联网应用服务中，使用缓存技术的目的就只是为了提升访问速度吗？**

其实我认为，并不是所有的缓存都只是为了提升速度，因为**在分布式系统中，缓存机制实际上是系统级性能设计的一个重要权衡手段。**比如当某个数据库的负载比较高，接近系统瓶颈时，我们就可以使用缓存技术，把负荷分担到其他数据库中，那么这里使用缓存的目的，主要就是负载均衡，而不是提升访问速度。
<div><strong>精选留言（5）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/11/42/3e/edb93e8c.jpg" width="30px"><span>青山</span> 👍（1） 💬（1）<div>可以使用,比如作者所说的静态资源但是这就会引出例外一个问题:内存资源消耗 ,因为需要保证每个微服务中的内存cache必需都有,有点得不偿失.</div>2021-06-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/3a/6a/2a5b0711.jpg" width="30px"><span>落叶之葉</span> 👍（0） 💬（1）<div>我们做一个商品价格展示，影响价格的维度有很多，地区，人员类型，批次，等等，目前数据写入到solr库来，最大的问题就是数据库数据提取到solr中</div>2021-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/af/69/347c213b.jpg" width="30px"><span>Ming☀</span> 👍（0） 💬（1）<div>内存cache只在当前进程下可使用，分布式多实例无法共享</div>2021-05-27</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtlEYuHnR8VdRkNPcmkIqTM9DKahpcpicDdBvcmBWMIAAhBrd0QNWvl09slqrzB5TibryVcIfPmb7Q/132" width="30px"><span>raisecomer</span> 👍（0） 💬（3）<div>&quot;在分布式系统中，缓存机制实际上是系统级性能设计的一个重要权衡手段........可以使用缓存技术，把负荷分担到其他数据库中&quot;，缓存技术是如何把负荷分担到其它数据库的呢？</div>2021-05-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/0f/70/cdef7a3d.jpg" width="30px"><span>Joe Black</span> 👍（0） 💬（0）<div>一个折中的办法是多个微服务实例基于缓存对象的hash进行缓存，就是一个对象一定只在特定实例上缓存，更新读取都通过它。不过这对服务的水平扩展有一定不便吧。</div>2022-09-11</li><br/>
</ul>