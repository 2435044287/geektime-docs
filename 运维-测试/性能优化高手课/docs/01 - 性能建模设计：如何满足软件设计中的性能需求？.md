你好，我是尉刚强。今天是课程的第一讲，我想先和你一起来学习下基于性能的建模设计方法。

基于性能对软件进行建模和设计的目的呢，其实是为了保证软件产品最终交付的性能，跟一开始的设计预期相匹配。然而，在实际的软件建模和设计过程中，很多人其实都忽视了性能的评估分析，导致生成的软件性能差，被客户频繁投诉，甚至有可能导致产品失败，给公司带来严重的后果。

所以这节课，我们就来看看如何在软件设计阶段做好性能的评估分析，通过一定的方法提前识别出软件设计中潜在的性能问题，并指导优化设计，从而更好地满足软件设计中的性能需求。

学会了这个方法之后，你不仅可以提前获取产品的性能预估表现，还可以用它来指导软硬件资源的选型设计，甚至在一些场景下，如果客户对产品要求的性能目标不合理，你也可以利用这个方法来推动他调整性能目标。

那么具体是什么方法呢？答案就是**软件执行模型**和**系统执行模型**这两种对系统建模的方法思路。

软件执行模型是一种静态分析模型，一般不需要考虑多用户和资源竞争等动态情况，我们可以用它来分析评估系统的理想响应时间；而系统执行模型则是需要重点考虑多用户、资源竞争等情况的动态分析模型，我们可以利用它来分析和评估系统吞吐量。虽然这两个模型的关注点不同，但我们可以借此识别出软件设计中存在的一些性能问题。
<div><strong>精选留言（12）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/e5/f0/fad6bf9e.jpg" width="30px"><span>tongzh</span> 👍（3） 💬（1）<div>思考题分析：从文中的QNM分析可以看出，系统的响应时间是和负荷成正比的，在系统负荷超过一定门限（如80%）的时候，响应时间就有可能已经大到不可被用户接受，所以要提前触发扩容，避免用户体验受影响</div>2021-06-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/38/c9/63ea8fe6.jpg" width="30px"><span>Arthur</span> 👍（2） 💬（1）<div>用QNM模型来进行系统性能的预估，真是学到了👍</div>2021-05-28</li><br/><li><img src="" width="30px"><span>黄福超</span> 👍（2） 💬（1）<div>思考题：为什么CPU超过一定的门限，就会触发弹性扩容。
我的思考：弹性扩容本身就需要一定的CPU资源，所以需要设置一定的门限，不然CPU100%也没有资源进行弹性的扩容了，简单的例子就是将杯子里面的热水装满了，就不好倒水了，容易烫手，所以将水壶装80%是最好将水倒到另外一个杯子里面。</div>2021-05-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/0a/51/6ed34a93.jpg" width="30px"><span>王博</span> 👍（2） 💬（1）<div>讲的不错，有收获，赞！</div>2021-05-17</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Tv582LZNnz6cbaBZEhicmibNBMeXLwL1ssZAcYSBru114SRU2vFLOlNENIlNDf4a0mm84uvh4CJRCp7xxIkAPhog/132" width="30px"><span>没想好</span> 👍（1） 💬（1）<div>扩容本身也需要时间，满负荷触发扩容会导致扩容这段时间的数据丢失，所以往前调一点，哪怕在扩容时新来的数据也有地方放</div>2021-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/3a/6a/2a5b0711.jpg" width="30px"><span>落叶之葉</span> 👍（0） 💬（1）<div>CPU负荷 在多核心情况下，是平均超80%，还是单核超80%就扩容呢？？</div>2021-05-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/25/02/d4/1e0bb504.jpg" width="30px"><span>Peter</span> 👍（1） 💬（0）<div>想问下这个执行图的 是用什么工具话的，实际在进行性能优化的时候 是不是最好也像你这种做法 先把图画出来，进行一个优化工作的评估</div>2021-08-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/0d/c0/c4f5dc05.jpg" width="30px"><span>白开水</span> 👍（0） 💬（0）<div>这个软件执行图是通用的图吗，怎么画图软件里都找不到</div>2023-08-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/31/55/8f/3bc4d1e9.jpg" width="30px"><span>Survivor</span> 👍（0） 💬（0）<div>上面软件执行模型中的 服务时间0.125s，是各个节点的综合值，那各个节点的综合值是预估的还是可以通过工具验证的？</div>2023-01-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2d/04/04/c9e1fba7.jpg" width="30px"><span>黄永盼</span> 👍（0） 💬（0）<div>提一个小错误嘿嘿，CPU核数为1时的利用率U数值不正确，应该是0.625</div>2022-03-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/13/51/99c88021.jpg" width="30px"><span>成为祝福</span> 👍（0） 💬（0）<div>老师讲解的真棒！受益匪浅！请教老师几个问题好吗？

1. 除了先通过软件执行模型得到一个大致的开销数值，然后再用系统执行模型分析有拥塞时的开销数值之外，这两个模型之间还有别的关联吗？
2. 老师说到流程图中的各阶段的开销可以用执行时长、数据库操作次数、磁盘操作次数等。请问，如果用不同的指标，如何统一衡量呢？还是说必须要用单一指标呢？
3. 各阶段的开销数值一直在不断的估算，这样的话，在稍微复杂一点的系统下，这种估算还有多大的意义呢？
4. 老师说到 “系统执行模型所做的性能评估分析，通常只能分析系统处于稳态情况下的性能表现”， 请教怎么定义“稳定”呢？是低负载、还是高负载还是？
5. 老师说到“增加CPU核数后，响应时间的提升速度明显大于并发提升的速度”， 当不断的增加cores，响应时间会逐步的变得不实际；那么，停在哪个数值范围上会是最有意义的呢？
6. 老师的流程图是用什么软件画的呢？

谢谢！</div>2021-09-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/3a/6a/2a5b0711.jpg" width="30px"><span>落叶之葉</span> 👍（0） 💬（0）<div>学习了</div>2021-05-26</li><br/>
</ul>