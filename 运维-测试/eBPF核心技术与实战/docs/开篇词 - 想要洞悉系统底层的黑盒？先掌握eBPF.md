你好，我是倪朋飞，一名云计算从业者。

自从十年前参加工作以来，我一直都在云计算领域工作，特别专注于包括虚拟化、软件定义网络、容器等在内的云计算基础设施领域。

我其实是极客时间的老朋友了，曾在几年前开过[《Linux 性能优化实战》](https://time.geekbang.org/column/intro/100020901?tab=catalog)专栏。这门课聚焦于 Linux 性能优化技术，从系统底层原理、性能指标再到实际工作的优化技巧，带你准确分析和优化 Linux 性能问题。

这门课上线后，同学们的交流热情完全出乎我的意料，也激励着我把专栏的篇幅延长了10多篇。同时，我也注意到，很多同学在学习涉及系统底层知识较多的模块时掉了队，特别是面对系统内核的原理时有些畏惧的心理。

所以，今天我又给你带来了一门全新的课程。这门课的主要目标就是带你利用 eBPF 去洞悉内核的运行状态，并去解决性能优化、网络观测、安全控制等实际生产环境中的问题。在 eBPF 的助力下，你并不需要成为内核开发者，也可以掌控内核的运行状态。

## 为什么要学习 eBPF？

其实，我与 eBPF 的“初次接触”，还要从最流行的网络抓包和分析工具 tcpdump 开始说起。

我相信你和我一样，在一开始学习 TCP/IP 网络原理时，大量借助了 tcpdump 来了解网络协议的工作原理。而在实际的工作中，大多数网络问题的排查也是借助了 tcpdump 才能了解到网络层面上到底发生了什么事情。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/5e/96/a03175bc.jpg" width="30px"><span>莫名</span> 👍（23） 💬（3）<div>首先给『技术雷达篇』的更新模式点个赞，对于 BPF 这种变更频繁的技术尤其适用。

然后抛出两个问题：
1、『内核中运行了一个虚拟机』，这个说法觉得有一些误导性。虚拟机通常会有一个中间层，BPF 程序经过 JIT 编译后可以直接在 CPU 上执行，称为 BPF 执行引擎可能更恰当一些。
2、BPF 虽然不要求具备内核开发经验，但也有相对较高的门槛。探针虽好用，但仍需对症下针。BPF 技术学习起来挺简单，想用好却有一定难度的，需要对操作系统原理、内核主要模块的源码有一定程度的了解。</div>2022-01-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/50/4d/db91e218.jpg" width="30px"><span>sam700000</span> 👍（8） 💬（1）<div>支持支持，之前的linux课程真的受益匪浅</div>2022-01-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/8c/2f/68045a83.jpg" width="30px"><span>麟</span> 👍（8） 💬（1）<div>我是上一个专栏的读者。
而本专栏直接命中本人需求。
已经购买支持。ヾ(✿ﾟ▽ﾟ)ノ</div>2022-01-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/47/a8/ec330e70.jpg" width="30px"><span>Liu</span> 👍（5） 💬（1）<div>真赞，跟着倪大，学好ebpf</div>2022-01-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/9f/a1/d75219ee.jpg" width="30px"><span>po</span> 👍（4） 💬（1）<div>老师才工作十年？</div>2022-01-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/88/58/3e19586a.jpg" width="30px"><span>晓双</span> 👍（3） 💬（2）<div>有java相关的实践嘛？</div>2022-01-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/cd/7b/7e3e97dc.jpg" width="30px"><span>燕鑫</span> 👍（3） 💬（1）<div>原本是摸不着头脑的自己摸索，这下好了！感恩！</div>2022-01-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/24/99/89/d3f9cf62.jpg" width="30px"><span>Br</span> 👍（2） 💬（1）<div>作者你好，我最近有个需求，需要自动化梳理系统的api资产，获取到api的主机，地址，请求参数和响应数据，我想用ebpf开发一个探针实现这个需求，但是对ebpf不了解，ebpf可以实现这个需求吗</div>2022-01-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/22/9a/52/93416b65.jpg" width="30px"><span>不明真相的群众</span> 👍（2） 💬（1）<div>朋友推荐过来的，希望跟着博主，day day up~</div>2022-01-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg" width="30px"><span>夜空中最亮的星</span> 👍（1） 💬（1）<div>我又订阅啦，老师</div>2022-01-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/e6/ee/8fdbd5db.jpg" width="30px"><span>Damoncui</span> 👍（1） 💬（1）<div>上一篇LINUX性能优化专栏读后感是相见恨晚，学一专栏抵我工作三年的知识库积累，本片更是如此，ebpf非常能解决我作为软硬结合优化工程师的性能痛点～ 加油！一起学习！</div>2022-01-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/e6/ee/8fdbd5db.jpg" width="30px"><span>Damoncui</span> 👍（1） 💬（1）<div>哈哈哈～ 等这门课等了好久！</div>2022-01-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/24/59/e9867100.jpg" width="30px"><span>Unknown</span> 👍（1） 💬（1）<div>就算是超级会员也要永久买啊</div>2022-01-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/23/3b/1d/cbfbd93e.jpg" width="30px"><span>小印_zoe</span> 👍（0） 💬（1）<div>初学eBPF，请问一下这个有eBPF的交流群么？</div>2023-02-06</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erLKlSIdiadmBR0awVgQcTGbsnd1dp1uaDcdfgyFNmREXNEANjMVSDKV3yYD2AKQEicibvKY35RVpmmg/132" width="30px"><span>novoer</span> 👍（0） 💬（1）<div>“eBPF 需要运行在内核中，并且还涉及到一些内核的编程开发时，心里有点打退堂鼓”  说到心坎里去了，另一个“技术雷达篇”的更新模式 真的很用心开这个专栏</div>2022-12-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/22/f5/d8/121e4b68.jpg" width="30px"><span>Woa 🤞</span> 👍（0） 💬（1）<div>刚看完上个 Linux 专栏！立刻赶来学eBPF！期待老师的精彩讲解！之前也接触过eBPF，但都不是很深入很系统，这下好好充充电！</div>2022-03-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/c4/35/2cc10d43.jpg" width="30px"><span>Wade_阿伟</span> 👍（0） 💬（1）<div>2年前学习了老师的Linux性能优化实战，受益匪浅，至今在工作中常常运用，为业务团队赋能。最近看到老师出品的eBPF课程，果断购买，跟着老师好好学。</div>2022-02-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/44/a3/9bb7e012.jpg" width="30px"><span>90437A5FBD6DB133™</span> 👍（0） 💬（1）<div>Ebpf囫囵吞枣的看完了，结合大佬的课程消化消化</div>2022-02-13</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epBV3x04t9IOXZLO1PNwkUCYkCOrzHgUfoDvkG2cfrSht5icoPUpXOQTYiaraEnZEpGXyTwO9lWC9JA/132" width="30px"><span>zjycff</span> 👍（0） 💬（1）<div>终于等到你你，买起来</div>2022-01-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/41/38/4f89095b.jpg" width="30px"><span>写点啥呢</span> 👍（0） 💬（1）<div>从Brendan Gregg的书了解到这个工具，希望自己能坚持完成课程有所收获</div>2022-01-26</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/11u3ODpW1UxBA5XQ58rRibZoUMYQBplIG4sgOBYsl4EKmEf1XicDsk0ap7SiatpibDpZjLOl6zIstGhPR9f60C76tQ/132" width="30px"><span>刘仟离</span> 👍（0） 💬（1）<div>看到倪老师开课，先买了再说，</div>2022-01-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg" width="30px"><span>明翼</span> 👍（0） 💬（1）<div>继续跟着老师学习，前来打卡</div>2022-01-21</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKwGurTWOiaZ2O2oCdxK9kbF4PcwGg0ALqsWhNq87hWvwPy8ZU9cxRzmcGOgdIeJkTOoKfbxgEKqrg/132" width="30px"><span>ZR2021</span> 👍（0） 💬（2）<div>买了本bpf 之巅，看了十分之一就看不下去了……期待老师的课程！！！</div>2022-01-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/e6/31/5b8800fb.jpg" width="30px"><span>微扰理论</span> 👍（0） 💬（1）<div>厉害厉害！ 赶紧学起来~</div>2022-01-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/5d/51/87fc7ef9.jpg" width="30px"><span>Issac慜</span> 👍（0） 💬（1）<div>入门还是需要大佬带呀</div>2022-01-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/97/a5/e52d10bb.jpg" width="30px"><span>。。。不知道起啥名字</span> 👍（0） 💬（1）<div>大佬出新课了，linux性能优化课嘎嘎牛皮！！！</div>2022-01-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/69/62/b874af21.jpg" width="30px"><span>颛顼</span> 👍（0） 💬（1）<div>平时在工作中也用到了ebpf进行一些观测，现阶段遇到最大的问题是，怎么能将观测到的一些耗时跟一次请求关联起来，譬如trace中的trace id，这个不知道有什么思路能指导下</div>2022-01-18</li><br/><li><img src="" width="30px"><span>springXu</span> 👍（0） 💬（1）<div>老师又开新课啦！前来报道</div>2022-01-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/8f/b5/7bc42adc.jpg" width="30px"><span>百行吴书</span> 👍（0） 💬（1）<div>终于等到开课了</div>2022-01-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/3f/0d/1e8dbb2c.jpg" width="30px"><span>怀揣梦想的学渣</span> 👍（5） 💬（0）<div>我是Linux性能优化的买家，新用户白嫖课程时，我无意发现了作者的Linux性能优化课，看完第一遍，我就果断开了全费会员，再看了一遍作者的课，并且推荐给了同行， 后来还看到华为内部有买这门课给内部员工看，我对ebpf这课程同样充满期待，希望可以收获不亚于Linux性能优化课的知识。</div>2022-08-16</li><br/>
</ul>