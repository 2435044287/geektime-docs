你好，我是白园。

在我们日常变更的时候需要对指标进行判断和检查，往往会面临两个问题。

第一个问题就是指标众多，数量庞大，一个核心系统的变更检查的指标包括业务指标、系统指标、基础指标，可能多达数百个，如果一个指标检查需要10s，一次检查可能需要几分钟或者几十分钟，这无疑增加了检查的复杂性，并且会大大增长变更成本和时长。

其次，工程师在分析系统性能的时候，往往难以全面顾及到上下游服务的依赖关系及其健康状况。在进行性能检查的时候，可能会忽略对下游服务的影响，很多时候都是因为忽略上下游的指标的波动而造成严重的故障。

我们既要追求发布的成本和效率，更要注重检查的全面性和准确性，单靠人的力量和精力是远远不够的。

因此，为了实现迅速而精确地分析，我们需要借助一款得力的工具。我给出了一张示意图，你可以看一下，图里展示了在分阶段发布过程中，如何迅速对各阶段的关键指标进行检测与分析，确保系统稳定性。这节课我会重点介绍一款名为智能checker的工具，这是百度为解决变更过程中对大量指标进行快速检查而首创的工具。

![图片](https://static001.geekbang.org/resource/image/95/d0/956970c8d61de9ec8a9fe528c9b7cbd0.png?wh=1920x1052)

## 智能checker

我们要解决三个层面的监控指标的判断：一是变更服务本身的监控指标，比如自身的错误日志，错误码；二是调用关系的监控指标，比如请求数，延迟，P99等等；三是上下游服务的自身监控指标的检查，比如机房的变更也是需要关注业务大盘指标的变化的。