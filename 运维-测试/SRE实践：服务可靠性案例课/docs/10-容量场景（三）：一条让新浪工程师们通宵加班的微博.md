你好，我是白园。

今天，我们来看容量部分的第三个案例，在之前两个案例中我跟你分享了流量控制、服务上云、雪崩、热点等场景。资源通常是有限的，因此不可能对所有服务进行扩容。我们应优先将资源扩容到那些最需要资源的关键链路。如果扩容速度不够快，未能在流量高峰到来之前完成，可能会导致系统故障或业务损失。

这节课我们就来探讨一下，在资源有限的条件下，如何做快速精准地扩容。

![图片](https://static001.geekbang.org/resource/image/d6/26/d62ccb00ddf2f8cc5c899ae28e4bba26.png?wh=1952x1116)

我们先看一个案例。时间回到2017年10月8日的这一天，也是国庆与中秋长假的尾声。在这个特别的日子里，一个事件吸引了近7000万人的目光，那就是鹿晗公开了他和关晓彤的恋情。这一消息的公布，迅速引起了公众的广泛关注，也因此导致了微博平台的短暂瘫痪。因为其访问量激增，超出了服务器的承载能力。新浪工程师们通过通宵的努力，最终才把这个问题解决。

## 难点分析

面对微博热点事件，最直接的应对策略是系统扩容，以适应突发的流量高峰，但是微博相关的服务扩容是非常困难的事情，扩容难点如下：

**难点一：不可预测性。**与抢票事件相比，微博热点事件往往伴随着许多不确定因素，因为公众人物发布新闻的时间和内容是无法控制的。

**难点二：层次复杂性。**系统架构中存在多个层次，包括网络入口层、四层（传输层）和七层（应用层）的网络协议处理、服务层的业务逻辑处理以及数据层的存储管理。不同系统层次的扩容难易度和维持高冗余度的成本存在显著差异。接入层维持高冗余的成本相对比较低。相比之下，服务层由于服务器规模庞大，维持高冗余度的成本比较高。
<div><strong>精选留言（1）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/f7/76/c3404ae2.jpg" width="30px"><span>Ferris</span> 👍（0） 💬（0）<div>是2016年吧</div>2024-09-04</li><br/>
</ul>