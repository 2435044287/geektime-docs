你好，我是白园。今天我们就正式开启服务可靠性保障之旅。

可靠性建设是一项系统性的工程，其中包括六个关键组成部分，分别是监控、容量、变更、预案、备份，还有机制。首先，监控为可靠性提供信息支撑，是一切保障手段的基础。所以这节课，我们就来聊一下监控，**带你从业务视角出发，建立完善的监控体系**。

为什么我们选择业务视角去添加监控呢？因为可靠性的最终落脚点，就是为用户提供可靠、稳定的服务，**业务视角是最贴近用户体验的视角**。这就是我们选择业务视角添加监控的原因。

接下来我们看一下具体怎么做。我会结合我的经历，把我最有感触的经验、教训分享给你。

## 在故障中完善监控系统

在开篇的时候我就提到过，我在百度负责的就是网盘可靠性维护的工作。在刚开始接手的时候，线索很多，无从下手，而监控也就成了当时我工作的一个重要抓手。所以这里我就以我当时所做的事情为例来说说如何为业务添加监控。

这第一步就是整合信息，完善监控。当时我看了很多业务相关的文档，我发现很大的问题就是，监控的数据都是来自不同的渠道/团队，比如A同学有自己的一部分，B同学有自己的一部分，缺乏一个全局视角，获取信息以及收集信息很不方便。所以我建立了一个信息门户，把团队手中的监控数据和相关信息汇总了起来，极大提升了监控信息获取的效率。同时在整理的过程中，我发现了很多遗漏的监控点和报警设置，我们迅速行动，把遗漏的监控点进行了完善。
<div><strong>精选留言（6）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/19/6a/6e/38738a57.jpg" width="30px"><span>the outsider</span> 👍（2） 💬（2）<div>老师，我们目前有个几个问题，
1、监控数据有多个开源，格式多样，比如有些监控数据来自时序库，有些来自日志，有些来自云监控等等，请问下你们是怎么聚拢的呢？请问下，你们是自研采集器吗？还是？
2、因为数据多样，制作统一监控面板存在很大工作量，和个性化。比如我们用grafana作为统一面板，面对不同数据源很痛苦，某个项目，举例，部分用的阿里云资源，部分用的腾讯。请问下你们是自研的面板工具吗？还是？
3、告警聚拢，方便定位故障。告警事件中心是自研的吗？还是用的开源组件呢？如果是自研，有没有想过文档可以分享一下，谢谢老师。目前我们用了arms告警中心，有些功能满足不了，想要自研</div>2024-07-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/9b/23/442f149d.jpg" width="30px"><span>xd</span> 👍（0） 💬（2）<div>保障监控的召回率指的是什么？</div>2024-08-21</li><br/><li><img src="" width="30px"><span>Geek9469</span> 👍（0） 💬（1）<div>我们也经常遇到某些地区被封禁的问题，请教一下老师，你们具体是如何做到：细化了关键指标，把监控拆分到了各个子领域
能否举个实际案例？</div>2024-07-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/0c/86/8e52afb8.jpg" width="30px"><span>花花大脸猫</span> 👍（0） 💬（0）<div>老师，咨询一个问题，我们现在的做法可能还是有些偏精细化，有老师你说的主链路的监控，主要是针对业务异常的快速反馈，但是因为微服务的组件是由各个团队进行管理的，快速反馈的异常，其实本质还是发现问题变快了，能知道底层是由哪个组件出现的异常；但是整体来讲定位还有解决问题没有多大的改善，因为会涉及到团队的沟通协作，虽然有临时成立一个各团队人员组成的虚拟团队，但是整体效率来讲也没高多少，请问老师有什么好的解决方式的？</div>2025-01-14</li><br/><li><img src="" width="30px"><span>Geek_784f15</span> 👍（0） 💬（0）<div>老师，针对快速定位问题有没有什么好的时间方式呢</div>2024-10-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/1c/cd/8d552516.jpg" width="30px"><span>Gojustforfun</span> 👍（0） 💬（0）<div>比如我给出的示意图，请求从客户端到 LVS 到 nginx，再到应用服务 A1-&gt;B1-&gt;C1，是主要节点和主要链路，B2、B3 等是支路。

示意图在哪里？</div>2024-09-09</li><br/>
</ul>