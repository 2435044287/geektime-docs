你好，我是静远。

前面几讲，我们基本上都是在谈Serverless的“好处”或者如何“用好”Serverless。那么Serverless有没有不完美的地方呢？

带着这个问题，我今天就来跟你聊聊它的一个瑕疵——“冷启动（Code Start）”。这个问题比较重要，为什么呢？因为不论是面对私有化企业还是公有云上的客户，大家首先问到的，通常都是和冷启动相关的函数性能问题。冷启动关乎到服务的时延等稳定性问题，进而会影响到用户使用服务的体验。在“即时时代”的今天，这是一个不可忽视的问题。

这节课，我将通过分析冷启动存在的原因、冷启动的过程，从平台和开发者的角度，带你了解如何加速函数的启动，掌握这里面的优化手段。

## 冷启动是什么？

在前面的课程中，我们知道，当请求被调度到函数实例上时，如果这个函数实例在上一次执行完代码后没有被回收，那么接收到请求后只需要复用这个实例进行代码的执行即可，这个过程被称为热启动过程。

如果服务是首次请求，或者是容器实例在服务请求后被回收了，就会触发冷启动。那么，冷启动具体是怎么工作的呢？

### 冷启动都有哪些步骤？

业界中，云厂商或者开源项目因为优化手段的不同，导致冷启动耗时或多或少会有些不一样，但基本的原理是差不多的。我们看一下冷启动都有哪些步骤。
<div><strong>精选留言（3）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/30/68/a8/3c6ccec0.jpg" width="30px"><span>小垚</span> 👍（5） 💬（1）<div>老师，我还想到一种方法，比如将关系不是很紧密的业务逻辑，拆解成多个函数是不是也可以？</div>2022-09-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/2f/c5/aaacb98f.jpg" width="30px"><span>yungoo</span> 👍（0） 💬（1）<div>有没有从开发框架层面设计和优化的例子？</div>2022-09-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/fd/d0/e8d8fe44.jpg" width="30px"><span>静远</span> 👍（3） 💬（0）<div>同步业界最新的研究成果，华为云提出的基于进程级快照的冷启动加速方案，其核心技术依托于 CRIU，并基于Restore Hook 的机制来确保三方组件的刷新（如消息队列、数据库、分布式缓存等）的状态链接，感兴趣的可以通过华为云的函数计算平台进行体验，并进一步了解调研其核心技术的做法。</div>2023-01-16</li><br/>
</ul>