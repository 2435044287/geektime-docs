前面几期文章我们介绍了混合云模式，以及面向应用层的云架构解决方案的Spring Cloud。接下来，我们就以蘑菇街的两个具体案例，来分享一下基于混合云模式的具体实践。

今天，我们先一起看一下我们最为熟悉的CDN和云存储建设。

## CDN和云存储

我们之前提到，CDN应该算是最早期、最典型的公有云服务，如果我们在业务上用到了CDN服务，其实就已经算是在实践混合云模式了。

蘑菇街作为ToC的电商业务，自然会有大量的图片访问需求，其中尤以商品图片为最。为了保证用户体验，我们的产品在2011年上线之初，就应用了CDN技术，当时我们合作的都是专业的CDN厂商。

当然，大量的图片访问需求会带来大量的图片存储需求，且随着业务高速发展，这个需求量必然会极速增长。

图片的访问需求量往往会以几百万、几千万、几亿到几十亿、上百亿的增长态势呈现。而它所占用的存储空间也会从G扩展到T，到几十T、几百T，再到后来的P级别。

所以，起初我们在业务量不大的时候，还可以把图片存在自己的硬件设备上。再往后可以利用HDFS这样的对象存储技术来实现，CDN回源的请求全部回到我们自己的机房里。

但是再往后，我们在这方面的专业性就不够了。这也是我在[《为什么蘑菇街会选择上云？是被动选择还是主动出击？》](http://time.geekbang.org/column/article/3633)一文中介绍到的：**随着体量的增加，CDN对于专业技术深度的要求就越来越高，技术层面的投入也会越来越大，这个就与我们的业务发展诉求不一致了。**

因为对于蘑菇街来说，我们还是期望能够把更多的人力和物力应用到业务技术层面，而不是一味耗费在专业技术研究上。

在2013年左右，业界开始出现专业的云存储厂商。在专业技术层面要比我们精深很多，而且他们聚拢了一大批业界专业人才，积累了各类海量存储场景的实践经验，所以他们在产品研发和服务支持上也是能够持续深入的。

基于此，我们后来就选择了将海量的图片放到专业性更强的云存储之上。

到这个阶段，我们的图片访问和图片存储就近乎完全依赖外部第三方的服务，同时也形成了CDN回源访问云存储这样的云应用模式。

再往后发展，随着国内两大公有云巨头腾讯云和阿里云相继杀入CDN市场，这对传统的CDN厂商和新兴的云存储业务造成了很大的冲击。但究其主要原因，我认为还是由于云生态的规模优势发挥了作用。
<div><strong>精选留言（4）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/55/1f/c9e48ae7.jpg" width="30px"><span>徐桂林@FIT2CLOUD</span> 👍（2） 💬（1）<div>这种趋势短时间基本确立，很难改变，除非专业技术公司能有革命性变革，进入下一轮产业周期。但是我相信这种变革不会等太久就会发生。大卖场和专卖店模式应该会共存才能形成好的技术和市场生态</div>2018-02-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/4b/08/52954cd7.jpg" width="30px"><span>丁乐洪</span> 👍（0） 💬（3）<div>老师好，我们现在碰到国外上传文件超时问题，文件是保存到我们服务器上。这个用阿里云或腾讯云能解决问题吗？</div>2020-03-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/99/f4/e0484cac.jpg" width="30px"><span>崔伟协</span> 👍（1） 💬（0）<div>hdfs不能叫对象存储的</div>2018-12-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/12/ce/a8c8b5e8.jpg" width="30px"><span>Jason</span> 👍（1） 💬（0）<div>这篇写的系统。赞</div>2018-10-25</li><br/>
</ul>