我们前面讲了应用是整个微服务架构体系下运维的核心，而CMDB又是整个运维平台的基石。今天我就讲讲在CMDB中如何落地应用这个核心概念，以及如何建立应用集群分组的思路。

## 如何有效组织和管理应用

微服务架构下会有很多应用产生出来，少则十几、几十个，多则上百甚至上千个。这时我们面临的第一个问题就是如何有效地组织和管理这些应用，而不是让它们在各处散乱，命名方式和层次结构可能还不统一。

你可能接触过“**服务树**”的概念，这个提法是小米在早期互联网运维实践的分享中传播出来的。我第一次听到这个概念是在13年阿里技术嘉年华大会上听小米运维的分享。再往前，这个概念应该是从百度的运维体系中借鉴出来的。

这里的服务实际对应的就是我们前面提到的应用这个概念。据我了解，在阿里和腾讯都是叫作应用，现在业界比较通用的叫法也是应用。其实叫什么并不重要，关键还是要学习到对这个概念的管理方式。

从服务树这个名字中，我们就可以了解到，有效组织和管理应用的方式，就是把它组织成一个树形的层次结构。这种管理模式，无论是在BAT，还是在其它的互联网公司，基本都是一样的思路和模式，所以叫法虽然不同，但是思路上却是相通的，可谓异曲同工。

**基于业务维度的拆分，对应产生了我们的应用拆分原则**。比如对于电商公司，大的维度会有电商、支付、广告、流量和搜索等业务领域；进一步，电商业务领域里最典型的会有用户、会员、商品、交易、商家、店铺以及物流等；这里面还可以再进一步细分，比如商品会有详情、SKU、SPU、库存、评价、标签等。

讲到这里，我们再看一下技术团队的组织架构，基本上是对应着整个业务技术架构的拆分的。也就是**业务架构决定了技术架构，而技术架构又决定了一个研发团队的组织架构**，这个组织架构中不同的团队单元分别承担着对应业务的需求开发和实现职责。

上面这个组织架构建设的逻辑和思路，也是我们在组建团队和职责划分时可以参考的。
<div><strong>精选留言（13）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/47/a4/6076bd5f.jpg" width="30px"><span>赵成</span> 👍（3） 💬（0）<div>本文重点，应用集群如何管理？怎么分组？以及组织架构如何与技术架构相匹配？

欢迎大家讨论。</div>2018-01-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/b0/57/a84d633e.jpg" width="30px"><span>圣诞使者</span> 👍（2） 💬（2）<div>我想问下，cmdb需要体现应用的依赖关系吗？</div>2018-01-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/bf/03/9e5c2259.jpg" width="30px"><span>宵伯特</span> 👍（2） 💬（1）<div>对于小的开发团队或者初创的开发团队可能在基础设施架构的管理上并没有过多的资源，而更偏向于使用云端的设施或架构，甚至如serverless之类的计算服务。这方面的运维管理会有较大的差异或者模式上的差别吗？</div>2018-01-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8b/d1/915f7aa6.jpg" width="30px"><span>刘斌</span> 👍（1） 💬（1）<div>之前看过您的文章提过“应用层的CMDB”，我感觉基础设施层CMDB不会涉及应用，还是以服务器为中心。应用所在的机器（及依赖的缓存、队列等），是在应用层的CMDB？</div>2018-01-24</li><br/><li><img src="" width="30px"><span>天舟</span> 👍（1） 💬（1）<div>框架已经搭好，接下来就期待博主能讨论一个具体的实施方法了，比如说是纯粹基于name还是引入了tag，比如相关的组策略等等</div>2018-01-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/02/78/23c56bce.jpg" width="30px"><span>james</span> 👍（0） 💬（1）<div>应用所在容器不固定如何处理关系呢，比如弹性扩容所容以及应用down了重新启动一个docker镜像</div>2018-03-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4f/7e/6639cdd4.jpg" width="30px"><span>casper2dd</span> 👍（0） 💬（1）<div>cmdb提供API或者命令 用来查询应用 资源的信息 当cmdb信息有变化的时候 其他平台通过API或者命令 同步最新的信息 </div>2018-01-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/75/9b/611e74ab.jpg" width="30px"><span>技术修行者</span> 👍（3） 💬（0）<div>CMDB在整个系统中的作用，它需要和其他支撑系统进行集成，包括：
1.  应用发布系统
2. 系统监控平台
3. 应用治理平台

完整的配置管理=资源配置管理 + 应用配置管理。资源配置管理主要是对数据中心的管理，包括主机、网络等，应用配置管理主要针对应用运行所需要环境的配置管理。在微服务体系下，应用配置管理会变得更加复杂和重要。</div>2020-05-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ca/07/22dd76bf.jpg" width="30px"><span>kobe</span> 👍（0） 💬（0）<div>你好 我想问下这个服务树的结构需要怎么设计实现呢 就是可能每个层次的结构都不一样 比如 组织架构下有项目 项目下有应用和中间件等 这个树状结构要怎么实现呢</div>2023-08-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/3f/0d/1e8dbb2c.jpg" width="30px"><span>怀揣梦想的学渣</span> 👍（0） 💬（0）<div>作者有想推荐分享的服务树相关的资料吗</div>2022-02-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/74/ea/10661bdc.jpg" width="30px"><span>kevinsu</span> 👍（0） 💬（0）<div>如果业务大多是在云上呢？是否只是需要针对公司的特定需求来做即可？比如代码发布系统等等小系统，而不是去整合成一个大的系统？</div>2019-05-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/9b/78/36d5e7fe.jpg" width="30px"><span>老牛</span> 👍（0） 💬（0）<div>云环境下，因为存在弹性的扩容缩容，这样应用对应的资源（物理设备）是不是不固定的？那么怎么保持这种对应关系呢？</div>2018-12-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/36/96/408f0600.jpg" width="30px"><span>张sir</span> 👍（0） 💬（0）<div>你好，文中提到 “应用-集群服务分组-资源”，请问下你们做服务化，应用是最小的服务单元吗？还是应用下的集群分组？这样做有何用意及价值？
我们这边是 “模块-应用-资源”，模块是一个独立的子系统，应用是最新单元，资源就是这个应用所有环境的机器了，比如测试，预发，线上。整体都是基于服务树的理念</div>2018-06-26</li><br/>
</ul>