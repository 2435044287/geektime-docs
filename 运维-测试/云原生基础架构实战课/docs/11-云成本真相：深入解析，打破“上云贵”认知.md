你好，我是潘野。

上一章我们学习了基础架构的自动化，这对于提高运维效率具有重要意义。但从资源生命周期的角度来看，自动化只是第一步。对于基础架构来说，在满足业务需求的前提下，实现资源的高效利用，尽可能减少资源的浪费，这是更重要的目标。今天我们进入新的一个章节，来谈一谈如何高效使用基础架构的资源。

这几年，降本增效这个词频繁出现在我们的视野中，各个公司都在努力降低IT成本，提升IT资源的使用效率，从而提高企业的竞争力。在降本增效的过程中，我们探索了很多的做法，比如尽可能使用开源软件，降低商业软件授权费用，还有通过优化软件架构提升资源使用率等等。

去年有[一篇文章](https://world.hey.com/dhh/x-celebrates-60-savings-from-cloud-exit-7cc26895)在网上广为流传，某家公司从公有云上退到自建机房之后，在IT基础设施上节约了60%的费用，不过到底如何计算费用可能你并没有深入思考过。今天这一讲，我们就来聊聊如何科学评估上云和自建机房方案的成本。

学完今天的内容，相信你就能从容回答“上云究竟贵不贵”这个问题了。

## 公有云的成本构成

首先，我们先看公有云部分。公有云成本主要包括以下几个方面：

- **计算资源：**虚拟机（VM） 是公有云中最常见的计算资源，其成本取决于 VM 的类型、CPU、内存、存储和网络配置。
- **存储资源：**公有云提供各种存储类型，比如对象存储、块存储和文件存储，每种类型的成本都不同。
- **网络资源：**公有云网络流量会产生一定的费用，具体取决于数据传输量和出口带宽。
- **其他服务：**公有云还提供各种其他服务，如数据库、负载均衡、安全和管理工具，这些服务也会产生一定的费用。
<div><strong>精选留言（2）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/1a/cc/e1/5f82ab4d.jpg" width="30px"><span>小雪微信xiaoxueit</span> 👍（0） 💬（2）<div>上文举的例子，需求是 1000 个 CPU、3T 内存、50T 磁盘 ，其中硬盘50TB 应该是总存储需求不是每台VM 50TB吧？估算EBS按50TB * 65台估算得出成本$313000，估算S3时却是用50TB估算得出1300+，两者数据量本身就不对等，如果S3按50TB*65算，成本应该是$70000左右才对，而不是1300+</div>2024-04-28</li><br/><li><img src="" width="30px"><span>Geek_45a572</span> 👍（0） 💬（1）<div>结合eks用fargate混部成本是不是能降一些</div>2024-04-17</li><br/>
</ul>