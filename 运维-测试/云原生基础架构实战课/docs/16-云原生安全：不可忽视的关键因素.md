你好，我是潘野。

从今天开始我们进入安全章节，很多同学可能有点疑惑，我们不是讲基础架构自动化的吗？这与安全有多少关联呢？

其实关联还是挺高的，因为在云原生体系中，安全就像盖房子时的地基，如果地基不牢固，房子就很容易倒塌。所以，我们需要格外地重视安全。学完今天的内容，相信你会对云原生的安全体系建立更深刻的认识。

## 云原生安全的特点

我们先来分析一下云原生的安全问题有什么特点。

首先，云原生应用的攻击面更大。传统的应用通常位于一个数据中心内，以往我们做好单数据中心的安全措施基本可以抵挡住90%的攻击。而云原生应用可能分布在多个数据中心甚至多个云上，那么攻击者自然更容易找到攻击目标，所以这就提升了我们防护的难度。

其次，云原生应用的组件通常是动态创建和销毁的，这使得传统的、基于静态配置的安全防护措施难以跟上。

然后，云原生应用通常使用容器和微服务等技术。这些技术虽然带来了很多好处，但也带来了新的安全挑战。传统的应用通常是一个整体，攻击者需要找到应用的入口才能进行攻击。而云原生应用，攻击者甚至可能从容器的漏洞发起攻击。

## 云原生安全的 4 个 C

下面我们来看看云原生安全防护的思路。

Kubernetes官方文档里曾经提出4个C安全防护的思路，分别是Cloud、Cluster、Container和Code。下图来自Kubernetes官方文档，图里很好地解释了这四个C的层级是由外到内、分层来解决安全问题的。
<div><strong>精选留言（2）</strong></div><ul>
<li><img src="" width="30px"><span>Geek_45a572</span> 👍（0） 💬（1）<div>Apiserver不暴露公网，放在私有子网中，pod中通过nat网关出去。 再加上node和lb的安全组。集群应该就很安全吧。  加这么多审核的组件性能也有损耗。</div>2024-05-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8f/92/b66381e4.jpg" width="30px"><span>meta-algorithmX</span> 👍（5） 💬（0）<div>集群：
 1. 使用CIS Benchmarks审查组件安全配置（常见软件 kube-Bench）
 2. 宿主机Node 操作系统内核安全增强工具（AppAmor， seccomp）

容器：
 1. 容器镜像安全扫描（Clair， Trivy）
 2. 容器运行时runtimeClass安全（Kata， gVisor）
 3. 静态分析工作负载（kubernetes 资源及docker file） （kubesec）
 4. 容器内syscall行为监控（Strace， Falco）

 当然以上只是常见的第三方软件工具，kubernetes自身也有许多保证安全的组件和机制，比如RBAC，PodSecurityPolicy，Audit Logging，利用OPA及admission机制保证供应链安全等等。
</div>2024-04-29</li><br/>
</ul>