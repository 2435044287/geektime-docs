你好，我是郑晔！

到这里，我已经给你介绍了在真实项目中做好测试需要的基础知识。写测试远远不是用 xUnit 框架写代码就能做好的一件事，只有在工作方式、软件设计、编写代码、测试理念等方方面面都做好，我们才能做好测试。不过随之而来的是，我们有了一个强大的测试基础，这可以让我们放心大胆地不断向前，因为我们已经进入到编写高质量代码的正向循环之中。越写测试越安心，越安心也就越有时间编写高质量的代码。

有了这些基础，应对日常工作已经绰绰有余。不过在行业里总有人在探索着更好的做法，所以在最后的扩展篇，我将给你介绍 TDD 和 BDD 两项实践。在你学有余力的情况下，可以挑战一下，让自己再向前走一步。这一讲，我们先来说说 TDD，也就是测试驱动开发（Test Drvien Development）。

## TDD 的节奏

或许你已经迫不及待地要举手了：“TDD 我知道，就是先写测试，后写代码。”但真的是这样吗？严格地说，“先写测试、后写代码”的做法叫测试先行开发（Test First Development），而不是测试驱动开发。

测试驱动开发不也是先写测试后写代码吗？二者之间有什么区别呢？

要回答这个问题，我们需要知道 TDD 的一个关键要素，**TDD 的节奏：红-绿-重构**。
<div><strong>精选留言（10）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/16/4a/e1/2a498473.jpg" width="30px"><span>李威</span> 👍（33） 💬（1）<div>TDD是两头驱动：向前驱动出任务分解，软件设计，整洁架构；向后驱动出代码重构，整洁代码。</div>2021-09-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/4f/bf/6584bdeb.jpg" width="30px"><span>阿姆斯壮</span> 👍（4） 💬（2）<div>早上下单购买了《修改代码的艺术》。看到了遗留代码的定义。才知道原来这些年自己写的代码，或者是项目中其他“大神”写的代码都是遗留代码。下定决心，为自己以后能高效工作。单元测试代码不能少。沉下心来，学好程序员必备的测试技能。</div>2021-09-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/21/1b/ed/34d56ff4.jpg" width="30px"><span>CV</span> 👍（1） 💬（2）<div>希望老师可以用一个简单的demo，来展示tdd的落地是如何进行的。理论非常动人，但是我个人觉得落地比较困难</div>2021-09-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8c/95/4544d905.jpg" width="30px"><span>sylan215</span> 👍（6） 💬（1）<div>不知道开发同学能不能理解，我说一个测试角度的例子。

我面试时，会问一个简单的编码题，就是写一个函数，接收三个参数，分别是 2 个运算数和 1 个运算符，这个函数就把他们做个简单的运算，输出运算结果，其中，运算符只支持加减乘除四则运算。

大部分人写完后，我会继续让他写一下针对这个函数的测试点（测试用例的一句话版本）。

很简单吧？

但是会发现一个现象，比如大部分人设计用例时，都会有一条是「验证输入非法运算符时，输出提示错误」，但是他们的代码里面明明没有对这个逻辑的处理。

这我理解就是没有 TDD 的思想，TDD 除了想着功能要如何实现，还需要考虑会从哪方面「测试」，从而在编码时就可以考虑&#47;设计的很完善。</div>2021-09-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg" width="30px"><span>aoe</span> 👍（1） 💬（0）<div>今天入门了TDD，第一次接触极限编程，感觉离大佬近了点</div>2021-11-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/72/93/46895883.jpg" width="30px"><span>terryking</span> 👍（0） 💬（0）<div>所以测试驱动开发，首先要有设计，然后再有任务分解，然后才有测试代码，然后再驱动前面的设计，向后驱动具体的实现，保证红绿闭环</div>2022-11-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>从测试的视角出发看待代码。--记下来</div>2022-06-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>以前不会也从来没写过测试，看了老师的专栏后，我已经在平时会刻意写一些单元测试了。</div>2022-06-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/0c/86/8e52afb8.jpg" width="30px"><span>花花大脸猫</span> 👍（0） 💬（0）<div>虽然没有系统的学习过tdd，但是目前写单元测试的流程就是按老师所说。对于其中的任务分解其实还是认知不够明确，目前只能按照自己对于业务的理解主观的拆分，但是对于粒度的把握没有明确的概念，这块希望老师能解答下？</div>2022-04-14</li><br/><li><img src="" width="30px"><span>linfei</span> 👍（0） 💬（0）<div>为了写好单元测试，我们需要解决的是代码设计中的依赖耦合问题。而TDD的重构环节，我们要解决的是代码的坏味道。坏味道就多种多样了，用代码扫描工具可以扫出很多来。那么是否有哪些类型的坏味道是需要重点关注的，会造成较大影响的，从而需要优先重构的呢？</div>2022-04-13</li><br/>
</ul>