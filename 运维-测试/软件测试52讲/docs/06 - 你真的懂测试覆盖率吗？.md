在上一篇文章中，我为你介绍了软件测试各个阶段的自动化技术，在前面的文章中我也提到了测试覆盖率的概念，你当时可能有点不明白，那么今天我就和你详细聊聊测试覆盖率这个主题。

测试覆盖率通常被用来衡量测试的充分性和完整性，从广义的角度来讲，测试覆盖率主要分为两大类，一类是面向项目的需求覆盖率，另一类是更偏向技术的代码覆盖率。

## 需求覆盖率

**需求覆盖率是指测试对需求的覆盖程度，通常的做法是将每一条分解后的软件需求和对应的测试建立一对多的映射关系，最终目标是保证测试可以覆盖每个需求，以保证软件产品的质量。**

我们通常采用ALM，Doors和TestLink等需求管理工具来建立需求和测试的对应关系，并以此计算测试覆盖率。

需求覆盖率统计方法属于传统瀑布模型下的软件工程实践，传统瀑布模型追求自上而下地制定计划、分析需求、设计软件、编写代码、测试和运维等，在流程上是重量级的，已经很难适应当今互联网时代下的敏捷开发实践。

所以，互联网测试项目中很少直接基于需求来衡量测试覆盖率，而是将软件需求转换成测试需求，然后基于测试需求再来设计测试点。

因此，现在人们口中的测试覆盖率，通常默认指代码覆盖率，而不是需求覆盖率。

## 代码覆盖率

**简单来说，代码覆盖率是指，至少被执行了一次的条目数占整个条目数的百分比。**
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/11/c8/34/fb871b2c.jpg" width="30px"><span>海罗沃德</span> 👍（30） 💬（1）<div>实际项目中，无论覆盖率多高，没有根据需求正确的写assert其实也是无法利用测试用例发现bug，提高代码质量，在实际的测试用例中，正向的case一般比较容易写，难得是测试error handling和模拟各种异常情况下的代码行为</div>2018-07-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c1/9a/40b3a0e5.jpg" width="30px"><span>Nic辉少</span> 👍（18） 💬（1）<div>目前还没有接触过单元测试和代码方面的测试，每天努力坚持学一点，思考一点，吸收一点。</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c9/b6/9d742b5a.jpg" width="30px"><span>lucky_ziyie</span> 👍（13） 💬（3）<div>安全产品嵌入式Ｃ的单元测试对覆盖率要求很高，语句，分支，MCDC都要达到100%的覆盖率要求，单元测试工具一般会有统计要求，比如RTRT能统计一部分覆盖率，但MCDC没法统计；遇到的问题其实还是一个业界普遍的问题，就是覆盖率达到了，问题却发现的少，没有代码走查发现的多，但为完成覆盖率却耗时很多，所以包括公司领导在内的很多同事都认为覆盖率意义不大，觉得单元测试没有意义。这种局面貌似国内普遍现象，老师是否有一些指导建议？</div>2018-07-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c1/be/255c3b74.jpg" width="30px"><span>仡</span> 👍（10） 💬（1）<div>听到这一期，很多技术都是JAVA相关的～目前正在学习Python，Python自动化框架有什么好的建议么？谢谢～</div>2018-07-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/d1/37/e087a4ee.jpg" width="30px"><span>丹</span> 👍（6） 💬（1）<div>你好，我想请教一些问题，我们公司属于迭代开发，更新比较快，没有技术文档，这种情况下感觉测试用例不能覆盖全面，这种情况应该怎么去写测试用例</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/cd/43/ca4044f0.jpg" width="30px"><span>秋荣</span> 👍（5） 💬（1）<div>不知道多少的代码覆盖率才算是达标的？团队转型ASE，经理制定指标80%，很多时候就是在为了达标而补测试。老师讲的很对，不要只看数字，要透过现象看本质，需要去看看每个测试覆盖率的情况，增加相应的测试</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/52/12/e0460331.jpg" width="30px"><span>Rachel_fang</span> 👍（5） 💬（1）<div>jacoco大多用于自动化测试得到覆盖率，但如果想知道单条case（手工or自动化）的覆盖率不知道有啥好的方法吗？</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/2f/70/c6387cd0.jpg" width="30px"><span>lalio</span> 👍（4） 💬（2）<div>最近在研究go语言的代码覆盖率工具集成到公司的CI，尝试用的go test 的cover，不过了解下来发现这款官方出的工具只统计到了语句覆盖，用了godoc实现（本人英文水平有限，目前还没吃透原理），没有jacoco这款覆盖的种类全，统计报告也比较单一，想在cover的统计数据基础上做一些优化，老师有没有好的建议</div>2018-07-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/f8/f4/27222fc7.jpg" width="30px"><span>宸浩</span> 👍（4） 💬（1）<div>老师，我想问下测试接口的话，怎么能保证覆盖完全呢，敏捷项目中涉及到的接口覆盖率，麻烦普及一下呗</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c2/e3/df7447ff.jpg" width="30px"><span>008</span> 👍（3） 💬（1）<div>.Net的使用NUnit+ReSharper，从来没想过单元测试的代码覆盖率会提供给测试人员，都是开发内部自行消化。也许是因为刚开始推行，整体的覆盖率还太低，也因为测试人员完全黑盒式的测试，不过让测试人员针对性对未覆盖代码进行用例设计的确符合未来自动化测试中对测试人员的要求，更多的进行自动化测试中涉及不到的场景</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/cd/ec/0d1c052e.jpg" width="30px"><span>FamilyLi</span> 👍（3） 💬（1）<div>对于安卓智能手机的代码覆盖率有什么测试或者工具</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/72/4c/4d636a23.jpg" width="30px"><span>在路上</span> 👍（2） 💬（1）<div>测试中几乎没接触过这类的代码级别的覆盖率，若都是由开发来完成，那对测试要求应该没这么高吧？</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c2/a7/c4de1048.jpg" width="30px"><span>涅槃Ls</span> 👍（2） 💬（1）<div>打卡06</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/68/01/abb7bfe3.jpg" width="30px"><span>向着光亮那方</span> 👍（1） 💬（1）<div>想问下，对于Android写的SDK，功能测试怎么统计覆盖率呢？</div>2018-11-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/2f/f4/2dede51a.jpg" width="30px"><span>小老鼠</span> 👍（1） 💬（1）<div>用插桩会不会影响程序牲能。</div>2018-10-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/dc/4d/aa8adb94.jpg" width="30px"><span>90后糊涂宝妈</span> 👍（1） 💬（1）<div>需求覆盖率在敏捷开发阶段具体怎么实行呢？感觉一直在说代码覆盖率。</div>2018-07-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/d9/3b/8c0134be.jpg" width="30px"><span>丹丹兒🍥</span> 👍（1） 💬（1）<div>公司前端在考虑做单元测试，想让没有什么开发经验的测试人员来做这块，是不是很不合理？
但是其实我也是想参与的，所以想听听前端的单元测试的一些经验，jest的snapshot应该怎么用才合理？</div>2018-07-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c0/19/6e84275d.jpg" width="30px"><span>Leo`2018</span> 👍（1） 💬（1）<div>对于拿不到源代码的测试来说代码覆盖率基本没什么用，没有办法查看到哪些部分没有覆盖到？是这么理解吗？</div>2018-07-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/74/25/9d976034.jpg" width="30px"><span>yiluo</span> 👍（1） 💬（1）<div>单元测试只是托底的测试，并无法保证质量。这点特别赞成。尤其是无法保证你的设计和实现是正确的。而且，单元测试也不宜过长过大，否则代码提交过程就太长了。不过覆盖率工具如果结合一个靠谱的功能测试以及其他专项测试，在探测漏测方面觉得还是很好的。不知道jacoco是不是可以在手工测试的时候，探测到覆盖率？</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/0b/35/2c56c29c.jpg" width="30px"><span>arthur</span> 👍（1） 💬（1）<div>我们前端用的jest，会有覆盖率报告，原理不详</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c2/86/21eeedb3.jpg" width="30px"><span>Cherry</span> 👍（1） 💬（1）<div>测试覆盖率和测试通过标准有什么区别呢？
通常情况下，迭代快的项目中，测试覆盖率还是以需求为标准的吧？
</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ce/e5/66f38361.jpg" width="30px"><span>Geek_84a77e</span> 👍（1） 💬（1）<div>代码覆盖率是指针对rd提测的代码，采用工具进行代码检测，我们拿到这个检测结果可以知道哪块代码没有跑，这样我们针对没有跑到的代码补充一些测试用例？我理解的对吗？</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/eb/0b/6022512d.jpg" width="30px"><span>wangq</span> 👍（1） 💬（1）<div>不知道理解的对不对，不管是哪种覆盖率都很难去判断用例的覆盖情况，从需求覆盖率来说，风险点很多是在反面案例和关联场景，从代码覆盖率来说，存在未实现代码的风险，所以案例的覆盖更多依靠人员的个人经验和能力。</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c1/43/01b69b03.jpg" width="30px"><span>Tomandy</span> 👍（1） 💬（1）<div>久闻Jacoco大名，有机会尝试一把！</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c6/4f/0c215abf.jpg" width="30px"><span>红娟</span> 👍（1） 💬（1）<div>关键词 代码覆盖率  需求覆盖率
文中代码覆盖率篇幅比较大😊</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c2/b8/ec758482.jpg" width="30px"><span>Cynthia🌸</span> 👍（1） 💬（2）<div>很赞，对于代码覆盖率又有了更深一步的认识。由于没有亲力亲为做过单元测试，所以之前的概念还是停留在开发给出的单元测试结果里，那个百分比上，至于细节并没有深究。
看了这篇文章，觉得自己还是有必要多了解一些，知己知彼百战不殆！</div>2018-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/af/3d/28b61e6b.jpg" width="30px"><span>假装乐</span> 👍（1） 💬（1）<div>jococo是哪年出的？当初因为没有找到合适的，把cobertura改成了agent模式的</div>2018-07-11</li><br/><li><img src="" width="30px"><span>第1周-吕斌</span> 👍（43） 💬（8）<div>手动功能测试从业者看的好艰难</div>2020-02-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/63/dc/94512cff.jpg" width="30px"><span>Jia</span> 👍（7） 💬（0）<div>还有一个很重要的覆盖率，Mutation测试覆盖率。主要是用来测试Test case的质量，而不是代码本身的质量。一个Test case suite质量高的话，对于代码出现的人为变异（可以理解为错误代码）都能很好的检测出来。</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8c/95/4544d905.jpg" width="30px"><span>sylan215</span> 👍（6） 💬（2）<div>1.我们目前的业务主要是 C++ 代码，曾经有测试开发调研过一些代码覆盖率工具，但是由于代码量庞大，且和目前业务场景不符，导致没有后续；
2.非常同意茹老师说的「高的代码覆盖率不一定能保证软件的质量，但是低的代码覆盖率一定不能保证软件的质量」，所以我们一直坚持的理念是，注重效果，能够保证质量的手段就是好手段；
3.针对 2 我们目前的做法是代码红线 + 关键代码人工走读相结合的形式，一定程度上去加强代码层面的覆盖率；
4.相对全量代码覆盖率，个人感觉差异代码覆盖率的实用性更好；

以上，欢迎沟通交流。</div>2019-02-12</li><br/>
</ul>