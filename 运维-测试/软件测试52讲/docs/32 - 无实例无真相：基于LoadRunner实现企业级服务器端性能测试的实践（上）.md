你好，我是茹炳晟。今天我和你分享的主题是：无实例无真相之基于LoadRunner实现企业级服务器端性能测试的实践（上）。

从今天开始的两篇文章，我将介绍如何基于LoadRunner实际开展企业级服务器端的性能测试。分享这个主题时，我会从最开始的性能需求获取开始讲起，带你完整地经历一个实际服务器端性能测试项目。通过这个过程，我希望可以帮助你快速建立服务器端性能测试的全局观，并了解各主要步骤的关键技术细节。

听到这里，你可能就有些困惑了。我在分享[《工欲善其事必先利其器：后端性能测试工具原理与行业常用工具简介》](https://time.geekbang.org/column/article/16589)这个主题时，曾经说到：LoadRunner比较适合于传统软件企业开展性能测试，而JMeter更适用于互联网企业的软件性能测试。那么，为什么我没有选择以JMeter为例来展开后端性能测试呢？

我选择LoadRunner，是经过深思熟虑的，主要原因包括：

1. **JMeter的官方文档对其使用方法介绍得很详细，而且其操作基本属于“傻瓜式”的**。JMeter使用的难点在于：如何支持海量并发，以及实现更好的load控制，解决这个问题你可以参考LoadRunner的实现方式，然后从你所在企业的实际业务场景出发，进行二次开发。
2. **互联网企业和传统软件企业的软件产品的后端性能测试，在原理以及基本方法上是基本一致的，区别较大的只是全链路压测**。所以，我以传统企业的软件产品为例展开分享，你因此学到的原理以及测试方法将同样适用于互联网软件产品的性能测试。
3. **关于互联网软件产品的全链路压测，由于需要实现海量并发以及流量隔离等操作，所以目前只有一些大型企业在做，比如饿了么、淘宝、ebay、美团等超级大的网站**。但是，如果你也想了解全链路压测的话，我也会准备一篇“加餐”文章，和你分享开展全链路压测的难点，以及应对方案。我会更新完性能测试这个系列以后，为你准备这篇“加餐”文章。
<div><strong>精选留言（18）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/12/bc/0a/2ac3417a.jpg" width="30px"><span>伪专家</span> 👍（14） 💬（2）<div>在测试道路上践行渐远……目前的情况及行业趋势看，测试去转开发了…原因有以下方面：1:通过拉钩和Boss测试的工资越来越少，没有优势
2:大企业Api，Ui，全连路压测，ui兼容性，稳定性，健壮性都已成性，线上copy，防用户测试都已成型…招聘职位中什么都要有,但是实际业务及公司组织架构的影响，测试的优势更受局限……</div>2018-09-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/4d/dd/912b52ed.jpg" width="30px"><span>李奋斗</span> 👍（7） 💬（1）<div>图里的测试协调员，DJ打碟的既视感！😂</div>2018-09-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/43/f9/555d7aa0.jpg" width="30px"><span>人心向善</span> 👍（0） 💬（1）<div>loadrunner中有个说法是说并发和在线的关系大约是1:10，也就是说1个用户并发相当于10个用户同时在线，但是后来网上查了查确实是有这个并发关系，但比例不是1:10，而是在20%范围内浮动，我想向老师问下，这个是否是有依据的？谢谢！</div>2018-11-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/2f/f4/2dede51a.jpg" width="30px"><span>小老鼠</span> 👍（3） 💬（0）<div>我们的性能是否通过的检查点为：
1，系统中没有内存泄漏、磁盘、CPU、网络故障
2，本版本获得的并发用户、容量的拐点&gt;=上次版本对应拐点的95%以内（含95%)</div>2018-10-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/04/ca/618d8b6e.jpg" width="30px"><span>jinjin</span> 👍（2） 💬（0）<div>最近第一次上手性能测试，就遇到了需求不明确的情况。和老师举的体检中心的例子比较相似，我得到的需求是看一下我们的系统index完10万篇（每篇2M）的文档的性能。对于并发用户数量到底该选取多少，ramp up时间设置多少合适以及需不需要加think time都很茫然。现在只能摸着石头过河，不知道老师有什么好的建议吗？</div>2018-09-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c2/b8/ec758482.jpg" width="30px"><span>Cynthia🌸</span> 👍（2） 💬（0）<div>性能测试一直做的不多，所以最近看的也晕晕的，感觉还是要多实践呀！
不过呢，读了文章之后感觉更有方向了，比如为什么用这个工具，工具中的哪个模块是有怎样的用处，尤其是人肉测试那段类比，作者真的是好会写文章！</div>2018-09-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c2/a7/c4de1048.jpg" width="30px"><span>涅槃Ls</span> 👍（1） 💬（0）<div>打卡32、准备虚拟机 安装LR 学习LR</div>2018-09-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/3e/ab/81f04c41.jpg" width="30px"><span>Aaron🎶 팽홍쟁</span> 👍（0） 💬（0）<div> 在浅谈全链路压测篇中，老师是这么说的：由于全链路压测需要发起的海量并发，通常会超过每秒 1000 万次以上请求的压力量级，所以传统的性能测试工具 LoadRunner 已经很难满足要求了。但是在本篇章中却是这么说的：JMeter 使用的难点在于：如何支持海量并发，以及实现更好的 load 控制，解决这个问题你可以参考 LoadRunner 的实现方式，然后从你所在企业的实际业务场景出发，进行二次开发。请问茹老师如何理解？海量并发用户模拟到底哪个工具更合适呢</div>2022-11-14</li><br/><li><img src="" width="30px"><span>Geek_dc1862</span> 👍（0） 💬（0）<div>按照我的理解不应该是先制定测试场景，然后再按照测试场景去开发脚本吗？</div>2022-08-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/7a/7f/4bce9aff.jpg" width="30px"><span>东方不败之鸭梨</span> 👍（0） 💬（0）<div>实战，实战</div>2022-04-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/3f/39/a4c2154b.jpg" width="30px"><span>小昭</span> 👍（0） 💬（0）<div>哈哈哈，人肉协调员的例子好形象~</div>2022-02-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/a3/9c/836d7bb3.jpg" width="30px"><span>11月的萧邦</span> 👍（0） 💬（0）<div>请问个操作层面的问题： 设置不同业务操作场景的比例是通过设置并发数来实现的么？ 比如10%的登录操作  70%的订单操作  20%的搜索操作 就将上述3个操作脚本分别设置为10、70、20个并发数  这样做么？   </div>2021-06-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/90/d4/1fec25d2.jpg" width="30px"><span>Geek_sst</span> 👍（0） 💬（0）<div>到这一步学习。感觉明朗了。方向有了</div>2020-10-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/dc/33/a68c6b26.jpg" width="30px"><span>捷后愚生</span> 👍（0） 💬（0）<div>通过人肉进行性能测试的举例，很形象地说清楚性能测试工具的几大模块，赞！

收获：
获取这些测试需求时性能测试中最难的两个工作之一。因为绝大多数情况下没人会明确告诉你具体的性能需求。
性能测试需求的定义与计划非常复杂，牵涉到项目的方方面面，不可能通过阅读一两篇文章就快速掌握这一技能，需要不断地沉淀在实战中获得的经验。

虽然没有做性能测试，但是日后做性能测试的话，要找老师这篇文章再看看的。</div>2020-07-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/22/ba/424be2c8.jpg" width="30px"><span>Geek_p79wqo</span> 👍（0） 💬（0）<div>工具罢了 懂得原理能满足需求就成</div>2019-10-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/b5/ca/bba4d696.jpg" width="30px"><span>牺牲</span> 👍（0） 💬（0）<div>对性能测试有了更深的理解</div>2019-08-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/55/26/154f9578.jpg" width="30px"><span>口水窝</span> 👍（0） 💬（0）<div>以前做性能测试难点就是不知道为什么要并发用户数分为多个行为去操作，顺着茹老师的课程，知其然，知道怎么去分解，剖析，点赞，坚持打卡！</div>2019-04-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/d7/39/d7703fc1.jpg" width="30px"><span>annie</span> 👍（0） 💬（0）<div>我们的产品类似WAF，可以应用在不同行业，但每个行业的应用场景不一样，在大版本发布前测试了TPS，吞吐量，新建连接，并发连接四个指标。后续版本测试只关注了TPS，将TPS与之前版本做对比，只要波动范围不低于10%就通过
但如何将测试结果的TPS指导不同行业客户部署上线，还没有找到好的方法，老师有没有思路可以指导一下呢？谢谢</div>2018-09-16</li><br/>
</ul>