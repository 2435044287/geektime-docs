你好，我是茹炳晟，今天我和你分享的主题是“从小工到专家：聊聊测试执行环境的架构设计（上）”。

在上一篇文章中，我介绍了Selenium Grid的基础知识，以及如何搭建Selenium Grid。现在，你已经非常清楚，Selenium Grid的作用主要是承担了测试执行机器的角色，被用来执行实际的测试工作。但是，实际工程中的测试执行环境往往更复杂，而测试执行机器也只是其中的一个重要部分。

因此，我们还需要控制发起测试的Jenkins，并管理测试用例执行和结果显示的系统。同时，为了更方便地与CI/CD流水线集成，我们还希望不同类型的测试发起过程可以有统一的接口。

那么，从今天开始的两篇文章，我将由浅入深地和你聊聊测试执行环境中的基本概念，以及架构设计的思路。

## 什么是测试执行环境？

测试执行环境的定义有广义和狭义之分：

- 狭义的测试执行环境，单单指测试执行的机器或者集群。比如，我在上一篇文章[《从小作坊到工厂：什么是Selenium Grid？如何搭建Selenium Grid？》](https://time.geekbang.org/column/article/40468)中介绍的Selenium Grid就是一个最经典的测试执行集群环境。
- 广义的测试执行环境，除了包含具体执行测试的测试执行机以外，还包括测试执行的机器或者集群的创建与维护、测试执行集群的容量规划、测试发起的控制、测试用例的组织以及测试用例的版本控制等等。
<div><strong>精选留言（13）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/5e/2d/99b4675c.jpg" width="30px"><span>元让</span> 👍（2） 💬（2）<div>没有，selenium  grid 除了分布式执行外没有更多优势，而且技术太老了</div>2018-09-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c7/c6/35cc7c7c.jpg" width="30px"><span>Robert小七</span> 👍（2） 💬（1）<div>我们还在使用早期的方案，测试机器都是在本地</div>2018-09-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/53/1e/7d098b33.jpg" width="30px"><span>年轻人的瞎折腾^.</span> 👍（0） 💬（1）<div>我们现在用的就是docker技术~但是具体的原理并不是很熟悉，可以听老师讲了~</div>2019-01-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/e1/b7/21665459.jpg" width="30px"><span>yingjin</span> 👍（0） 💬（1）<div>您好，我们公司也还在使用早期的方案，听了您的讲座对Selenium Grid很感兴趣。但是我们公司使用的UI自动化测试框架是微软的CodedUI，想问一下自动化框架使用的不是Selenium，还能使用Selenium Grid吗？</div>2018-11-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/b6/97/93e82345.jpg" width="30px"><span>陆培尔</span> 👍（3） 💬（0）<div>selenium grid之类的技术我理解都是k8没出来之前的产物，现在主流的流水线比如jenkins或者gitlab-ci，都支持和k8直接对接，每个job都会拉起一个pod进行构建或者测试，由k8进行整个集群的资源调度，测试任务不需要关心基础资源的情况</div>2021-03-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/55/26/154f9578.jpg" width="30px"><span>口水窝</span> 👍（3） 💬（0）<div>大概loadrunner出现的初期，有控制机、执行机的概念，这个就相当于Selenium Grid的雏形。但是Selenium Grid还没实践过，现在的公司小，就我一个测试，还没兼顾到这个地位，加油，需要学习的更多。</div>2019-05-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/3f/39/a4c2154b.jpg" width="30px"><span>小昭</span> 👍（0） 💬（0）<div>没用过Selenium Grid，打卡学习～</div>2022-03-06</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/5GQZCecntmOibVjWkMWVnibqXEZhAYnFiaRkgfAUGdrQBWzfXjqsYteLee6afDEjvBLBVa5uvtWYTTicwO2jKia0zOw/132" width="30px"><span>Geek_a4cca6</span> 👍（0） 💬（0）<div>我目前使用的是二台node机器在跑，后面运行一段时间后，发现多线程去跑，不太稳定，后面就改成了还是一台机器跑，我用的是pytesT多并发的方式，目的就是想平分测试用例到测试机，缩短运行时间，不知道是不是pytest的原因？</div>2020-09-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/dc/33/a68c6b26.jpg" width="30px"><span>捷后愚生</span> 👍（0） 💬（1）<div>知道现在所在的公司有搭建了自动化测试平台，但是之前是不了解其整体架构和原理的，通过学习这篇文章，我想这些平台的基本架构跟老师文章所说的应该是差不多的，可能会有一些不同。</div>2020-08-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c5/b2/31ddddd0.jpg" width="30px"><span> Ella</span> 👍（0） 💬（0）<div>selenium测试用例并发执行可以简单讲一下怎么实现吗？谢谢</div>2020-03-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/c5/b2/31ddddd0.jpg" width="30px"><span> Ella</span> 👍（0） 💬（1）<div>想了解为什么不用多进程实现并发测试，而是用Jenkins job并行？</div>2020-03-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/15/4b/dc4fb21c.jpg" width="30px"><span>Geek_bd7eb1</span> 👍（0） 💬（0）<div>上一个公司就是用的早期的方案</div>2020-03-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/b5/ca/bba4d696.jpg" width="30px"><span>牺牲</span> 👍（0） 💬（0）<div>目前团队还未开展自动化测试，自动化仍在摸索中。</div>2019-09-19</li><br/>
</ul>