你好，我是高楼。

性能方案在性能项目中是非常重要的文档之一，它指导着整个项目的执行过程，同时也约束着项目的边界，定义相关人员的职能。但令人痛心的是，如今它变得“微不足道”。

在很多常见的性能项目中，性能方案就是一个文档，并且是一个静态的文档。里面写的东西是什么，项目后续会不会按这个内容去做，基本上没有人关心。它就成了一个形式，只有在评审方案的时候才会被拿出来看看。甚至在一些第三方测试项目中，我看到有些甲方连方案的内容都不看，直接问有没有。如果有就过去了。你看，一个必需的交付物却无人关心。

**在我的性能工程理念中，性能方案是一个重量级的文档。**在性能项目中，它被叫成是“性能测试方案”。在我这里，我要把“测试”二字拿掉。为什么要拿掉？因为这取决于我在前面课程中提到的性能工程理念，我希望把整个项目的过程都描述在方案中。

我讲的性能方案和那些常见的性能方案究竟有什么区别呢？我们不妨先来看看，后者普遍都是什么样的。

这些目录相信你并不陌生，我们经常能看到有这样目录的性能测试方案。

![](https://static001.geekbang.org/resource/image/72/80/724a358cc2fyy85e6e80168baceec180.jpg?wh=3759%2A6222)

这里我就不一一列举了，再看更多的目录，其实也是类似的。这样的目录大纲，在我看来分为这么几个部分。

- **常规项目信息**：比如说测试背景、测试范围、测试准则、测试环境、实施准备、组织结构、项目风险、里程碑。
- **性能实施信息**：比如说测试模型、测试策略、监控策略。
- **项目输出**：比如说测试脚本、测试用例/测试场景、监控采集数据，测试报告、调优报告。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/14/13/7b/f1220e26.jpg" width="30px"><span>米儿</span> 👍（8） 💬（3）<div>高老师，一直都有个困惑，例如打开商品详情页，会有10多个请求，这些请求有些是并行加载的，有的是延迟加载的，每个请求又对应后端不同的接口，这种情况下，站在用户角度，压测脚本该怎么样模拟真实的用户操作呢？</div>2021-03-31</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELPbuPriaqYkRIoPn9SUWFepwprpZJsLReQKYfHz0liamBnxMpibrN6qvoUyq3JzVO9G2QeJrBiciaSibcQ/132" width="30px"><span>Geek_f9f78f</span> 👍（5） 💬（1）<div>记得我在之前的一个项目中，客户方要求做到支持 1000 万人在线，项目不算小，开发团队有 300 人左右。到那里后，我一看只有两个性能测试人员，而且其中一个还是刚毕业，还处于打野练级的状态。于是，我就过去找他们科技部的老大说，这个项目我做不了。因为根据这个目标和这样的人员配置，我清楚这个坑根本不是我能填得上的，所以得赶紧认怂。后来，那个科技部的老大问，需要什么样的资源才能做下去呢？于是我提了几个必需的条件，直到这些条件都满足了，我才敢接这个项目。


我想问一下后来提的什么条件，可以细说吗？</div>2022-09-23</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJL0JbAgWUIbAzZ18WMsAicr4KRdY1OTWRjmuzpBtIxjdx85nPsmzG2H2YsHZjnEmup2xOuyRr5dRw/132" width="30px"><span>Geek_829b0b</span> 👍（4） 💬（1）<div>啊。。。。有一种在等待小说更新的赶脚，希望后面的课程 ，快快出来，好着急呀</div>2021-03-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/15/09/bc24c82b.jpg" width="30px"><span>王晓磊</span> 👍（3） 💬（1）<div>如何精确模拟业务模型？
直接从生产获取业务比例真实模拟生产场景。

为什么我们要强调系统架构图的重要性？
系统架构图包含了技术栈、业务逻辑架构和部署架构，通过系统架构图可以呈现整个系统的全貌，能够整理出关键参数列表，可以通过梳理业务路径完成响应时间的拆分，在容量测试环节对系统所能承载的压力峰值做出准确预估。</div>2021-08-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/58/3b/22dbe7c3.jpg" width="30px"><span>LQQ</span> 👍（2） 💬（1）<div>老师  看到你有提到二分法确定线程数  能具体说说吗</div>2021-04-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/dd/b0/69bbb118.jpg" width="30px"><span>BLUE</span> 👍（2） 💬（2）<div>假如一个接口按照某个key写入的redis缓存，当查询一次后存入了缓存，那我用五千个用户请求和一个用户请求差别不大吧，五千个甚至更多用户进行第二次请求还是会走缓存。理论上只能用无限个用户去发起请求，或者让开发去掉缓存。这样理解对吗</div>2021-04-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/e4/e1/d1bf83c9.jpg" width="30px"><span>公瑾</span> 👍（2） 💬（1）<div>老师，文章中的业务有11个...请问下要怎么组合这11个业务进行基准场景的测试？</div>2021-04-01</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Nv7iaxevWVukvxaZf6TjbcNicgatCUpUcp7hTah0JQxvr7ZjMlLbopEaveichKRLQJjKXR6geB5LBntf7XCP8F4kQ/132" width="30px"><span>Geek_a55bf0</span> 👍（1） 💬（1）<div>高老师好。请教一个问题：要测试当前线上系统的容量，但不能直接在线上环境测，只能搭建测试环境。为了节约成本，测试环境可以缩配吗？可以的话，缩配的准则是什么？</div>2023-03-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/29/79/98/fb1bf6c7.jpg" width="30px"><span>颜颜</span> 👍（1） 💬（1）<div>老师，我没明白，参数化这里，为啥用同样的参数做压力，对后端的压力不一样，只要这个数据没有唯一性校验，那用同样的数据压测对服务器不是效果一样的吗</div>2021-08-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/4b/75/71845744.jpg" width="30px"><span>VeryYoung</span> 👍（1） 💬（1）<div>请问高老师，怎么讲结果转换成：当前系统可支持 XXX 并发用户数，XXX 在线用户数”这样的结论？</div>2021-07-03</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqrjtEZ1CQe5ge85lwjPZUC7peeAM1u8HPbmmHelJ9tvBXaLsIhzSG2qxpqQfyibooqxZm5hUdVSMg/132" width="30px"><span>wwwricky</span> 👍（1） 💬（1）<div>高老师，请教一下：基准测试中，连续递增50个线程数达到最大TPS，还有没有必要继续加线程数吗。到达多少线程数才不加。（需求没有线程数的要求）</div>2021-04-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/22/39/b9/536952a2.jpg" width="30px"><span>Beyond</span> 👍（1） 💬（1）<div>老师，问一下
1. 那个根据系统部署架构图，咋就能知道支持多少容量上限的呢？有啥评判方法吗
 2. 系统部署架构图是不是就是系统各个层用了那些东西，这些是不是都要知道，就是它的概念意思不是很理解。
3. 看到那个老师的物理机器2它的available才几百M，这会不会影响压测，要不要调大一点在压测，看老师上个专栏说要看这个值。。不是很理解了。</div>2021-04-25</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKrQa8ICRkaiblQlRU1iaiaoRkFdJB82E3sQC4FmXTcHTtMU1l58OXd0A2rwN7UkOQ6eh7J5sChVmdibA/132" width="30px"><span>niithxl</span> 👍（1） 💬（3）<div>老师，你这次的开源项目有源码地址吗，想搭建看看</div>2021-04-19</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/MHUoh5fxqRiacWziafAe43fKGcJXKa5gYWHuic9WkoIncApibXq3mmuicgRjhtvkSsaibicW4MDzAWu1abr85ibX6BhbDQ/132" width="30px"><span>Geek_435bc9</span> 👍（1） 💬（1）<div>1.生产流量分析，然后分析到具体的业务再细化到接口的配比。
2.系统架构提供了系统蓝图，是做分析的宏观入口</div>2021-04-10</li><br/><li><img src="" width="30px"><span>Geek_bbe4c8</span> 👍（1） 💬（1）<div>老师，请教下
“一直以来，很多人都在使用少量数据做大压力，这种逻辑是完全不对的。”是指比如用同样的请求body去压测某个接口吗？为什么完全不对？
另外“用基础数据来做参数化”是什么意思，什么是参数化数据？</div>2021-04-08</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/KhQRc8hIxHHyPV3Og2Fc5l8w2y7ibGwGn6odmzl3wTt6fPrNv589uHmia1rgiaZhRiaLVHv9ibhzkxFx1zo42uNIS9A/132" width="30px"><span>道长</span> 👍（1） 💬（2）<div>业务模型:我们一般由项目组提供生产上的业务报表，根据业务报表查看业务频繁的交易进行按比例设计测试模型
架构图的重要性:我个人理解是方便测试人员根据架构判断是否存在隐患以及问题排除</div>2021-04-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/f8/92/eaafff96.jpg" width="30px"><span>Amos</span> 👍（0） 💬（1）<div>高老师您好，确定基础数据和生产一致或按模型缩放。
搭建的压测环境是无法按正式环境的配置来的（成本太高），所以压测环境的铺底数据该准备多少是怎么算出来的呢？</div>2023-08-05</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKWIocrBkZPNKBiaeZqUfPeon4tdCTIZFkbO31j5oK3NglwzfnibzNWOQRF7lVcfgbhZ7sEgDX5ZXqw/132" width="30px"><span>郑鹏</span> 👍（0） 💬（1）<div>使用 JMeter 的 backend Listener 把数据直接发到 InfluxDB，相同接口跟通过命令行压测方式对比了一下
1、influxdb服务器配置不高，dashboard中有断层出现。
2、两种方式统计数据的结果存在一定的偏差，但偏差范围不大。</div>2023-05-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/7a/7f/4bce9aff.jpg" width="30px"><span>东方不败之鸭梨</span> 👍（0） 💬（1）<div>这一篇太精彩了！</div>2023-05-03</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Nv7iaxevWVukvxaZf6TjbcNicgatCUpUcp7hTah0JQxvr7ZjMlLbopEaveichKRLQJjKXR6geB5LBntf7XCP8F4kQ/132" width="30px"><span>Geek_a55bf0</span> 👍（0） 💬（1）<div>&quot;我们不使用 JMeter 的分布式执行功能或本地收集数据的功能，因为这样会消耗本地的 IO。&quot;请问老师两个问题：1.单台施压机压力不够，不使用分布式应该怎么做。   2.减少本地数据收集除了降低日志等级，还有什么需要做的吗</div>2023-03-16</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/t1aR8h117KxusZQHQ9urp0NYSDjsXsuLO0wuykOGlXhAmKkic5xQ4pBxGemMvJmia8ezwyL5CoG6ds5muIuyJMvg/132" width="30px"><span>Geek_e249d1</span> 👍（0） 💬（1）<div>业务模型中，业务比例是什么意思 不太理解这个名字。而且如5% 20% 30% 代表什么意思呢？</div>2023-02-10</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELPbuPriaqYkRIoPn9SUWFepwprpZJsLReQKYfHz0liamBnxMpibrN6qvoUyq3JzVO9G2QeJrBiciaSibcQ/132" width="30px"><span>Geek_f9f78f</span> 👍（0） 💬（2）<div>运维周期内，有 1 亿笔业务容量。根据上面容量场景中的测试结果，假设最大稳定 TPS 是 500，那稳定性场景的执行时长就是。。。。。

这个运维周期怎么确定  ？高老师</div>2022-09-23</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELPbuPriaqYkRIoPn9SUWFepwprpZJsLReQKYfHz0liamBnxMpibrN6qvoUyq3JzVO9G2QeJrBiciaSibcQ/132" width="30px"><span>Geek_f9f78f</span> 👍（0） 💬（1）<div>高楼老师你好，请教您一个问题，就是视频直播类的系统要做性能测试如何下手，比较类类似于腾讯课堂这种项目。在线听课的学员有1000人左右 。</div>2022-09-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ee/f7/76f2e97b.jpg" width="30px"><span>莉</span> 👍（0） 💬（1）<div>老师 秒杀场景的性能方案该如何设计</div>2022-08-26</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/aCVlj0fom8geRoXFkO34Jbpf9oia79QxdbwDuyyLqL1WAVC7iaViaE4YNUvcatEwwUF6102MeH6kBxo5CwLibrCiajg/132" width="30px"><span>Geek_9e9d56</span> 👍（0） 💬（1）<div>老师，你好：请问有没有区块链产品的压测方法及推荐的工具呢？</div>2022-04-15</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKsYRmTSDl6eewz8AcD4bVMeIj00ictLkldpicVgKiccOtmb4kbkdI4JhAKricdlMp4zuhOibianTBgnGhA/132" width="30px"><span>Geek_47cce6</span> 👍（0） 💬（1）<div>高老师，请你有word版本的性能测试方案模板和性能报告的模板吗？</div>2022-02-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2a/29/3d/e633bdf9.jpg" width="30px"><span>將</span> 👍（0） 💬（2）<div>混合场景测试指的是分别执行不同业务比例的业务流程吗</div>2021-09-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2a/29/3d/e633bdf9.jpg" width="30px"><span>將</span> 👍（0） 💬（2）<div>性能目标
根据经典的电商下单流程，测试当前系统的单接口最大容量。
根据业务比例设计容量场景，充分利用当前资源，找到当前系统的性能瓶颈，并优化，以达到系统的最佳运行状态。   根据业务比例设计容量场景，这个业务比例指的是 业务流程中的每个步骤的比例，还是整个业务流程的比例</div>2021-09-12</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJ6G2xZvNRmhyXBjmGbI5G8icGCCMPupr6yxZ1IcURwp7GTRHcpWGWpg9A0fLlyicmVdDwzqZqwiaOQ/132" width="30px"><span>jy</span> 👍（0） 💬（1）<div>老师，请教下：如何根据测试数据算方差是否达到目标？数据在prometheus里面，展示在grafana上。</div>2021-09-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/4e/a3/d76ab5a0.jpg" width="30px"><span>。小妖</span> 👍（0） 💬（2）<div>当前性能测试场景是：使用jmeter的GUI模式，1分钟起500&#47;2000线程，并发运行5分钟，领导的意思是时间太少，只能模拟极限情况去压；目前遇到的问题是测试过程中CPU及load average较高，观察过软中断、上下文切换，看着变化不大，jstack堆栈信息倒是有锁、等待较多；想问问老师这属于正常现象不</div>2021-06-30</li><br/>
</ul>