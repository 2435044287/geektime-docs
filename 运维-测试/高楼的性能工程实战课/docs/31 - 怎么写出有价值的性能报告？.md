你好，我是高楼。

在性能项目中，有三个文档在我看来是最为重要的，分别是性能方案、性能报告和调优报告。在[第5讲](https://time.geekbang.org/column/article/357539)中，我们已经给出了性能方案的完整内容。而调优报告，其实我已经不用写了，因为我们前面对每个场景的分析全都是调优的内容。

今天这节课我们来看看性能报告。性能报告在项目中一般被称为“性能测试报告”。不过，接下来我会弱化“测试”这两个字，因为我会将整个性能项目各方面的内容都包含在内。

性能报告是一个性能项目的总结，是性能价值的最终体现，所以性能报告是非常重要的。就像我们减肥的时候经常会说“三分运动七分吃”，性能报告也一样，我们也可以说它是“三分干活七分报告”，也就是说干活的辛苦都是留给自己体会的，报告如果做得不好，你再累、再辛苦，所有的付出都会付诸东流。

但是，我看到在当前性能市场中，很多性能报告都写得非常潦草，要么是数据收集得不完整，要么就是结论描写得不合理，让本来做得很好的性能项目没有体现出价值。

那怎么写出有价值的性能报告呢？今天我们一起来看看。

## 性能报告要给出明确的结论

在性能报告中，有一个环节应该是大部分人的恶梦，那就是**给出明确的结论**。

什么是明确的结论呢？我先给你列举几个常见的结论描述。

- 容量场景结论：
<div><strong>精选留言（9）</strong></div><ul>
<li><img src="" width="30px"><span>Geek_648160</span> 👍（3） 💬（1）<div>老师，我看下面评论这个单用户级TPS是100 &#47; 54 ≈ 1.85，其中54是模型中占比最高的100*54%得来的，那如果所有的请求占比都一样呢，都是25，那单用户级TPS就是100 &#47; 25 ≈ 0.25，是这样吗？</div>2021-08-28</li><br/><li><img src="" width="30px"><span>byyy</span> 👍（1） 💬（1）<div>&quot;100 个 TPS（一个 T 对应着一次接口请求）可以支持 54 个并发用户&quot;
问题1：老师，对于这句话，以下理解对吗？
业务操作级别的事务T的比例：
1.打开首页（11%）
2.用户登录（5%）
3.用户信息查询（5%）
4.商品查询（54%）
5.商品加入购物车（5%）
6.查询购物车信息（3%）
7.购物车信息确定订单（3%）
8.生成订单信息（3%）
9.支付前查询订单列表（3%）
10.支付订单信息（3%）
11.支付后查询订单详情（5%）
对其进行业务拆分，得到4个完整的业务流操作（用户级别事务T），它们的比例：
业务流1（包含11个业务操作：1-11）:5.6%
业务流2（包含6个业务操作：1-5 、11）：3.7%
业务流3（包含2个业务操作：1、4）：11.1%
业务流4（包含1个业务操作：4）：79.6%
所以100TPS（这个T是业务操作级别的事务T）可以换算成54TPS（这个T是用户级别的事务T）
根据并发的定义：并发是在单位时间内完成的事务（T）的个数。如果这个事务（T）是用户的操作，那么T的数量就是并发的用户了。
所以说100TPS是由54个并发用户产生的，而且，这个54并不是线程数，而是所有线程迭代次数之和，其实也就是用户级别事务T的数量。（一个压力线程在单位时间里迭代了几次就是几个并发用户。）


&quot;通过容量场景的结论可知，系统最大 TPS 为 1700，系统可支撑最大 918 并发用户&quot;
问题2：对于这句话，以下理解对吗？
其实54个并发用户并不等价于54个真实用户，因为业务流3和业务流4中并不包含用户登录业务操作，而真实用户是需要登录的，所以真实的用户数应该小于54。
所以,文章中接下来说的这句话中的最大应该这样理解：
&quot;通过容量场景的结论可知，系统最大 TPS 为 1700，系统可支撑最大 918 并发用户&quot;
这句话等价于：
&quot;通过容量场景的结论可知，系统最大 TPS 为 1700，系统可支撑大约 918 个用户级别的事务T，最大可支撑918真实的并发用户&quot;</div>2021-08-30</li><br/><li><img src="" width="30px"><span>Geek_648160</span> 👍（1） 💬（1）<div>老师，第一个问题单用户级TPS是100 &#47; 54 ≈ 1.85，而第8讲单用户级TPS是 1(用户)×1(用户级)÷6(秒)≈0.17(TPS)，这里为啥不用0.17呢；第二个问题就是这里的100，是比例之和还是所有请求数呢，我看文档写的是100 个 TPS（一个 T 对应着一次接口请求）？</div>2021-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/3a/01/13/13ab9761.jpg" width="30px"><span>xu</span> 👍（0） 💬（1）<div>假如访问首页需要请求10个接口，压测整个首页的接口发现吞吐量120，120&#47;10=12，也就是说每秒可以并发12个用户对吗？并发度怎么计算呢？</div>2023-12-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/21/59/44/9b52bdcc.jpg" width="30px"><span>飞彼易驭心</span> 👍（0） 💬（1）<div>用户级TPS，需要的是完整业务数，也就是说从登录、搜索、加车、下单等一系列操作共11个业务；脚本中的TPS = 1700相当于业务级别的TPS ，需要换算成用户级的TPS ;

如何换算呢？
假设 一个有4个业务比例 分别是 25% 25% 25% 25%， 如果是100个TPS ，相当于100 * 25 % = 25，也就是100TPS相当于25个用户
假设一个业务有6个业务分别是 5% 25% 25% 20% 5% 20%， 如果是100个TPS，相当于100 * 25 % =25，也就是100个TPS最大相当于25个用户，如果是使用5%，那么100个TPS，相当于最小5个用户

所以课程中的最大的业务比例是商品搜索的54%，
即最大并发用户数 = max(最大业务比例) * 业务级TPS = 1700 * 54% = 918

老师，不知道这样理解对不对？</div>2022-03-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/af/a0/617e4144.jpg" width="30px"><span>天狼</span> 👍（0） 💬（1）<div>老师可以给一下课程中的脚本吗</div>2022-01-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/db/67/24d4bce6.jpg" width="30px"><span>Alisa</span> 👍（0） 💬（1）<div>老师，对于“第5讲中有一个业务模型表格，里面的比例之和是100%，如果所有的比例都覆盖一遍就是100个TPS，也即是54个用户”中54个用户不太明白，这个54是模型中占比最高的100*54%得来的吗？谢谢</div>2021-06-17</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er9ay1I6KWdnn0MX1JSfic0xdmWLcD1Jh1Fx2AP67d6Kicr71HH5jOKHrUZbTmfsLTQDNTTroCbcTzA/132" width="30px"><span>sky_you</span> 👍（0） 💬（2）<div>老师，其实我也挺绕的。
【第5讲中有一个业务模型表格，里面的比例之和是100%，如果所有的比例都覆盖一遍就是100个TPS，也即是54个用户。】
</div>2021-06-09</li><br/><li><img src="" width="30px"><span>wfw123</span> 👍（0） 💬（5）<div>文中说根据第5讲 可以得出100tps支持54并发用户，我没有太明白怎么计算出来的</div>2021-06-02</li><br/>
</ul>