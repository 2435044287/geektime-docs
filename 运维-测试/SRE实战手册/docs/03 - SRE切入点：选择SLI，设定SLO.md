你好，我是赵成，欢迎回来。

还是先来复习下上节课讲的“系统可用性”的两种计算方式，一种是从故障角度出发，以时长维度对系统进行稳定性评估；另一种是从成功请求占比角度出发，以请求维度对系统进行稳定性评估。同时，我们还讲到，在SRE实践中，通常会选择第二种，也就是根据成功请求的比例来衡量稳定性：

**Availability = Successful request / Total request**

SRE强调的稳定性，一般不是看单次请求的成功与否，而是看整体情况，所以我们会把成功请求的占比设定为一个可以接受的目标，也就是我们常说的“3个9”或“4个9”这样的可量化的数字。

那么，这个“确定成功请求条件，设定达成占比目标”的过程，在SRE中就是**设定稳定性衡量标准的SLI和SLO的过程**。

具体来看下这两个概念。SLI，Service Level Indicator，服务等级指标，其实就是我们选择哪些指标来衡量我们的稳定性。而SLO，Service Level Objective，服务等级目标，指的就是我们设定的稳定性目标，比如“几个9”这样的目标。

SLI和SLO这两个概念你一定要牢牢记住，接下来我们会反复讲到它们，因为落地SRE的第一步其实就是“**选择合适的SLI，设定对应的SLO**”。
<div><strong>精选留言（27）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/05/62/0a4e5831.jpg" width="30px"><span>soong</span> 👍（6） 💬（1）<div>关于SLI和SLO，分析得很清楚！理念上帮助理解，同时还有实践的指引，极具深度！</div>2020-03-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/97/d7/02bbaba5.jpg" width="30px"><span>飞鸿无痕</span> 👍（8） 💬（1）<div>关于SLI和SLO的选择和制定写得很好，人工点赞。请教一个践行SRE过程中关于SLI选择的疑惑。对于现在的微服务架构，会有非常多的服务，而且其中包含有很多关键服务模块，比如订单、购物车、商品等等，我们在选择SLI的时候，各个服务都会有对应的错误率和访问延迟，但是反应系统稳定性又是一个综合的体现。请教赵成老师，在微服务架构下，应该如何合理的地选择SLI来反应系统的整体稳定性？</div>2020-03-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/50/33/43833f7c.jpg" width="30px"><span>Nick</span> 👍（3） 💬（1）<div>通过SLI和SLO, 是不是只能判断在一个时间范围内是否都达标. 但没法做到像前面的那个时间纬度那样的3条9和4条9这样的表. SaaS的服务承诺好像是用类似时间维度那样的3条9, 4条9这样的故障时间评判表. </div>2020-03-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg" width="30px"><span>leslie</span> 👍（3） 💬（1）<div>老师分享的标准要翻墙、、、我就基于课程内容谈谈吧，觉得课程中的东西结合之前运维体系课程可以理解缘由。
“SLO 是 SLI 要达成的目标。”一个是等级一个是分数；就如同“Availability = SLO1 &amp; SLO2 &amp; SLO3”公式一样；这就如同行业等级测评一样，到达某个等级必须多项条件都只要达到一个分数。
浅谈一下DatabaseSystem这块的吧：这块云服务中其实蛮多的，简单谈一下，这个其实是一段时间爱你观察的一个积累吧；
失败请求的次数、CPU使用率、内存使用率、IO使用率、数据的增长率，对应的标准其实各个行业有各自的特性，云服务一概而论的评级评分个人一直觉得有不少错，当然这也就是人为监控的价值。
如果没有特性，估计去年大会所谓的10%的专业运维都不用了，2-5%-特性创造价值。
</div>2020-03-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/46/5b/07858c33.jpg" width="30px"><span>Pixar</span> 👍（1） 💬（1）<div>关于SLO计算系统可用性有个疑问，希望老师可以帮助解答一下。 我们的可用性目标最终设定在几个9上,比如每天的可用性是99.9 %, 通过第一种计算方式(根据成功的定义)可以很方便的计算: (1天内的成功请求数)&#47;(一天内的请求总数).  但是通过SLO1 &amp;SLO2 &amp; SLO3 这种计算方式如何计算出该系统在一天内的可用性呢？ </div>2020-05-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/23/bb/a1a61f7c.jpg" width="30px"><span>GAC·DU</span> 👍（1） 💬（3）<div>老师人工介入是2票，错误率是2.4%，那么可用率99.3%是怎么算的呢</div>2020-03-27</li><br/><li><img src="" width="30px"><span>oci</span> 👍（1） 💬（1）<div>分析得清楚sli和slo</div>2020-03-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/b0/8a/3ecf6853.jpg" width="30px"><span>Browser</span> 👍（0） 💬（1）<div>量化的很好，有收获</div>2020-10-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/97/d7/02bbaba5.jpg" width="30px"><span>飞鸿无痕</span> 👍（0） 💬（1）<div>在指定SLO的时候，可用性比较好评估，还有一个指标是服务的RT，一个服务一般会提供多个接口，对于其中某一个或者某几个接口RT比较长的常见(比如：一个服务80%的接口返回都在30ms，但是有几个接口返回是300ms左右，针对RT的SLO要怎么设置才比较合理?)，这种应该如何来确定SLO呢？</div>2020-10-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/a6/c0/ee6ea3a9.jpg" width="30px"><span>James-东方</span> 👍（0） 💬（1）<div>真的太棒了！内容我感觉就是SRE的BIBLE</div>2020-09-14</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKagLyKbgMsyKTrLplWu3iauiaGh97dhwFbfQ7RSoCx1SYiaL3icV3UsA5njaUVIYV01a1d2gBzf4CCbQ/132" width="30px"><span>海格</span> 👍（0） 💬（1）<div>看完这篇，我就知道如何设定SLI和SLO了，干货满满，接着来就是自己动手实践了，</div>2020-04-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/2b/02/7ef138a0.jpg" width="30px"><span>润豪</span> 👍（1） 💬（0）<div>Availability = SLO1 &amp; SLO2 &amp; SLO3, 每个 SLO 的监控最后汇总成一个监控吗? 一般用什么系统进行监控呢?</div>2022-03-31</li><br/><li><img src="" width="30px"><span>Geek_91c9b9</span> 👍（1） 💬（0）<div>关于Tickets- 人工介入，对于电商网站，“故障恢复”(指的是真实发生了故障)绝不大部分都是需要人工介入和排查的，故障很难自愈，现在的服务也很少能够在故障时自愈，这个方式对于制定指标是不是作用不大？</div>2022-03-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/d5/12/ba7214ce.jpg" width="30px"><span>Zachary</span> 👍（1） 💬（0）<div>系统整体可用性的两种计算方式其实就是: 前者一个粒度教粗, 后者可以将每个粒度细分

不过&quot;系统整体可用性&quot;的说法好难理解啊, 感觉再说整体稳定目标是否达成, 是在做二元判断, 没法量化.

感觉能给个可用性的百分值会更好点, 是不是可以对slo可用性加权平均或者相乘下.
</div>2020-09-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/c1/14/d1927303.jpg" width="30px"><span>rolin</span> 👍（0） 💬（0）<div>在 SRE 实践中，我们用 SLI 和 SLO 来描述。“状态码为非 5xx 的比例”就是 SLI，“大于等于 99.95%”就是 SLO。说得更直接一点，SLO 是 SLI 要达成的目标。  这句话有点儿问题把</div>2024-12-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/54/21/0bac2254.jpg" width="30px"><span>橙汁</span> 👍（0） 💬（0）<div>嗯，不要着急。我怎么能不着急 课这么好得接着学啊</div>2024-12-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/2a/ff/a9d72102.jpg" width="30px"><span>BertGeek</span> 👍（0） 💬（0）<div>可以优先选择用户或使用者能感受到的体验类指标，比如时延、可用性、错误率等。</div>2022-11-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/d0/4d/2116c1a4.jpg" width="30px"><span>Bravery168</span> 👍（0） 💬（0）<div>指标分层，上下层指标之间往往有联系，如何结合起来分析呢</div>2022-09-09</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKOY9SiaunzWSuMvOGA17WzzxFXo5tLtRPI8vV01UCbO38RAOkAhBRTicDS6eJhA5zuWkt1gIRf8ZDA/132" width="30px"><span>大都督陈</span> 👍（0） 💬（0）<div>老师，文章中的链接打不开，请问怎么操作了，谢谢~</div>2022-08-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/11/4b/fa64f061.jpg" width="30px"><span>xfan</span> 👍（0） 💬（0）<div>老师，请问如果我在一段时间里，去压测，去故意破坏，比如我重启一台服务器，那这个时候，我怎么来制定SLI呢，是不是可以定义为 在对外侧没有影响服务就行吗，因为CPU，LOAD，内存使用率在这个时候都没有什么意义</div>2021-03-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/de/15/a12e71a4.jpg" width="30px"><span>MrKuma</span> 👍（0） 💬（0）<div>第二种计算方法SLO1&amp;SLO2&amp;SLO3 这是按位与计算还是什么意思？</div>2021-02-16</li><br/><li><img src="" width="30px"><span>思维决定未来</span> 👍（0） 💬（1）<div>有个问题，在计算SLO的时候，时间怎么选择？是每天计算一次，还是每小时，或者每秒？</div>2020-08-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/f1/43/bd24ec72.jpg" width="30px"><span>小子</span> 👍（0） 💬（2）<div>可用性这块，有点没理解，还请老师指点，Availablity（可用性）代表服务是否正常，这句话，我只能理解，服务负载不高，能正常接收请求，即使4xx也归结为正常，但是在延伸点，400能代表这个服务正常么？最近就碰到开发上线导致400了，就是有点纠结这个定义，应当怎样正确理解呢？</div>2020-07-07</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqnwc76trn2r4YtKYNgydJ9GrtvjEvfJa7jUHpGUCu8sXxUvC1Z4c0JoxxiaRGXxk6JY9AjmtSuM9w/132" width="30px"><span>Geek_齐迹</span> 👍（0） 💬（0）<div>接上一个问题，我们也考虑过直接通过应用最终可用性来衡量数据库的可用性，但是往往数据库的一些小问题并不会在业务上有很明显的感知，一出问题都是大问题，所以希望通过设定一些过程管理slo来防止这种雪崩发生。</div>2020-06-05</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqnwc76trn2r4YtKYNgydJ9GrtvjEvfJa7jUHpGUCu8sXxUvC1Z4c0JoxxiaRGXxk6JY9AjmtSuM9w/132" width="30px"><span>Geek_齐迹</span> 👍（0） 💬（0）<div>请问一下老师，对于数据库而言有哪些比较好的sli呢？比如主从延迟时长，慢SQL数量这些适合作为sli吗？还有别的指标可以比较客观的反应数据库的可用性。希望可以听到老师的解答和经验分享。</div>2020-06-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg" width="30px"><span>mickey</span> 👍（0） 💬（0）<div>多数情况下各层的SLO是由关联关系的，将需要将SLO检测的指标联动、统一来看，从而更快定位问题，更快解决问题，更快缩短MTTR时间。</div>2020-05-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/c3/48/3a739da6.jpg" width="30px"><span>天草二十六</span> 👍（0） 💬（0）<div>自己看书总是很慢，音频结合文字看看还是更好</div>2020-04-05</li><br/>
</ul>