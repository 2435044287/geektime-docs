你好，我是DS Hunter，反爬虫专家。又见面了。

前面我们已经详细讲完了反爬虫几乎全部的理论基础，现在我们进入实战看看如何应对真正的爬虫。

由于前面进行了大量的烧脑学习，相信你已经有些疲惫了，我们实战首先找一个轻松的话题：如何快速下线反爬虫系统？

## 反爬虫需求分析

有同学可能会说：老师你是不是讲错了，我们是来学习如何上线一个反爬虫系统的，为什么这里你说的是下线？

没错，这里我们要讨论的就是如何下线反爬虫系统。原因其实很简单，你可以先想一想，反爬虫需求是永远存在的吗？

很明显，不是的。反爬虫需求来源于爬虫，而爬虫来源于竞对，你有竞对，才有反爬虫需求。

但是，竞对是永远存在的吗？并不是，竞对随时可能消失，甚至被收购。到时候，你的反爬系统将成为系统的累赘，等你离职之后，永远也没有人能把他剥离出去，永远影响着公司的业务。此外，当你变更了规则之后，新的规则如果不适用之前的代码，这些代码还删得掉吗？

因此，**降低反爬虫系统的入侵性，减少与业务代码的耦合，是反爬虫代码的重中之重。**而如果你只知道如何上线，不知道如何下线，那么你的反爬虫项目很可能走不远，后人也无法接手。

既然现在确定了反爬虫系统需要随时被摘除，那么它的设计就可以主要考虑如下两种方式：**依赖注入**和**代理**。我们看一个常规的网络请求：
<div><strong>精选留言（3）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg" width="30px"><span>neohope</span> 👍（0） 💬（1）<div>代理在一定意义上，可以让业务开发团队无感，上线下线都方便。但一旦有问题，就不会是小问题。而且对SLB服务器会增加部分负载，灵活程度也会。
SDK注入方式，需要与业务开发团队更紧密的配合，需要投入业务开发资源，上线下线很多时候要和业务团队配合，人员压力大时容易被Diss。服务端负载不会明显增加，灵活程度高一些。</div>2022-03-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg" width="30px"><span>leslie</span> 👍（0） 💬（1）<div>代理最大的好处就是下线快和上线方便，注入在&quot;快&quot;和方便这层确实确实有差距；注入的效果可能好些，但是便捷性不如代理，尤其如果Boss是个不懂技术的-代理相对更靠谱；这就回答了第一个问题-万一拦截了Boss的请求怎么办。</div>2022-03-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg" width="30px"><span>peter</span> 👍（0） 💬（0）<div>请教老师几个问题：
Q1：应用层和业务层不是一回事吗？怎么划分成了两层，有什么区别？
Q2：&quot;反爬虫SDK&quot;的图中，感觉SDK和其他三部分是包含关系，
       SDK怎么会包含“规则模块”？
Q3：反爬虫系统应该是一个独立的系统吧。
       这个系统的规模一般多大？比如二十台服务器的规模？
Q4：数据采集怎么是高并发？
       数据采集、信息统计是程序自己控制的，不是外部来的，主要是量大，
       怎么变成了高并发？（高并发是请求同时到来啊）
Q5：客户端请求主要应该是http请求吧。
     文中有一句“客户端请求无非就是走 Ajax”，Ajax是有，但
     更多的请求是直接走http吧。</div>2022-03-05</li><br/>
</ul>