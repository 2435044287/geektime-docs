你好，我是王昊天。

我们在生活中，经常会访问各种网页来获取信息。你有没有想过，我们除了可以获得网页上展示给我们的信息，还能获得它原本不打算展示给我们的信息，甚至可以在网页的服务器上运行我们想要执行的代码来搞一些破坏呢，这种行为就是命令注入。

相信你已经对命令注入有了极大的兴趣，这节课让我们一起来学习这个神奇的攻击方式。

## 命令注入

命令注入，就是在仅仅需要输入数据的场合，攻击者构造数据的同时输入了恶意命令代码，而系统并未过滤掉恶意命令，使得恶意命令代码一并执行，最终导致信息泄露或者正常数据遭到破坏。

在命令注入中，最常见的是**操作系统命令注入**，攻击者可以使用这种注入攻击对服务器执行操作系统命令。例如攻击者可以执行命令`rm -f`，来删除一些重要的文件。这是服务器的管理人员非常不想看到的，下面让我们一起来学习这个可怕的攻击方式吧。

### 操作系统命令注入

当一个Web应用，没有正确清理用户可控输入信息，那么它就有可能会受到此漏洞的影响。

如果这个漏洞存在，那么攻击者就具有执行操作系统命令的能力，就可以上传攻击程序，甚至获得密码信息。这对应用所在服务器会造成很严重的影响。

为了加深你的理解，我们一起来看一个有趣的示例。

有一个网页应用，它包含许多文件，我们可以通过网络访问到。当访问`Doc1.pdf`文件时，我们可以通过`Burp Suite`获取到如下`HTTP POST`请求。
<div><strong>精选留言（3）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/13/de/9a/bf7634a3.jpg" width="30px"><span>E-N</span> 👍（2） 💬（0）<div>两种注入最主要的区别的话，我想应该是面向的对象不同，一个是针对操作系统，一个是针对数据库，因此最终能实现的效果也不尽相同。</div>2022-02-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/72/65/c60bf5ed.jpg" width="30px"><span>TG</span> 👍（1） 💬（0）<div>cmd1 || cmd2 
这种方式应该是 cmd1 执行为真的情况下 cmd2是不会被执行的 
</div>2022-04-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>学习了打卡</div>2023-03-16</li><br/>
</ul>