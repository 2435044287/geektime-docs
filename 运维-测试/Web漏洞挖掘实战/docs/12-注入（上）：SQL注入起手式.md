你好，我是王昊天。

从这节课开始，我们就进入了排名第三的风险种类——注入。

这是在上一份OWASP TOP 10榜单中排名第一的风险种类，同时也是在过去十年中最具威慑力的漏洞类型之一，关于这类安全风险出现了许多重大的漏洞，同时也有众多著名的安全工具致力于解决这类问题，其中最著名的安全工具之一就是sqlmap，作为SQL注入领域优秀的自动化检测工具，我们也会在之后的课程中深入探究。

那么什么是注入呢？

在著名的西游世界，就有许多次战斗生动地诠释了注入的威力，而这位善用注入的战斗大师就是我们勇敢机智的齐天大圣——孙悟空。在《西游记》中，孙悟空一共六次通过钻入敌人肚子的方式取得战斗的胜利。

## 注入

孙悟空的行为堪称注入攻击的典范，那么安全领域的注入攻击又是什么呢？

从抽象定义来说，注入攻击的本质是**数据段与指令段的混淆**，攻击者在原本应该作为数据段的输入中插入了恶意指令，同时将该恶意指令作为代码执行。正如孙悟空的战斗一般，妖怪肚子原本是消化食物用的，但却让孙悟空潜入其中，并且大显神威。

事实上，注入包含很多种类型，比如SQL注入、命令注入、XSS、资源注入等，其中SQL注入是最具代表性也是极为危险的一类漏洞，这一讲我们就从SQL注入入手来展开探讨。
<div><strong>精选留言（4）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg" width="30px"><span>leslie</span> 👍（2） 💬（0）<div>where条件的sql注入应当属于典型，目前应当主要是加hash或md5，而且有时不一定是数据库本身的问题，sql注入的问题到现在十多年了，简单的易防，可是如果真正有人恶意去探测其实有点坑。</div>2022-01-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/24/7e/73/a5d76036.jpg" width="30px"><span>DoHer4S</span> 👍（1） 💬（0）<div>其实在实际生产环境上，很多业务都需要联合查询 - 即 Union Select，这种经常容易携带额外信息的SQL语句，也是DVWA上经典的注入演示语句；

在生产环境部署WAF硬件设备时（我说的是物理硬件设备），如果WAF仅仅根据静态URL携带的参数进行判断是否SQL注入很容易引起误报，所以硬件WAF我认为最终会被很多嵌入到著名开源引擎的软件WAF所替代 - 如 ModSecurity 替代，甚至你自己使用Lua在Nginx就能实现自定义的功能，这也是我认为WAF必将走向没落的原因，一劳永逸的方法 - （购买安全厂商的硬件设备）永远不是解决方法，只能是临时抱佛脚；

</div>2022-01-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/24/db/58/a7a0a85b.jpg" width="30px"><span>二饼</span> 👍（0） 💬（0）<div>打卡👏👏</div>2024-04-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> 👍（0） 💬（0）<div>学习打卡</div>2023-03-11</li><br/>
</ul>