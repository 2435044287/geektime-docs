你好，我是张磊。我今天分享的主题是：小鲸鱼大事记之初出茅庐。

**如果我问你，现今最热门的服务器端技术是什么？想必你不假思索就能回答上来：当然是容器！可是，如果现在不是2018年而是2013年，你的回答还能这么斩钉截铁么？**

现在就让我们把时间拨回到五年前去看看吧。

2013年的后端技术领域，已经太久没有出现过令人兴奋的东西了。曾经被人们寄予厚望的云计算技术，也已经从当初虚无缥缈的概念蜕变成了实实在在的虚拟机和账单。而相比于如日中天的AWS和盛极一时的OpenStack，以Cloud Foundry为代表的开源PaaS项目，却成为了当时云计算技术中的一股清流。

这时，Cloud Foundry项目已经基本度过了最艰难的概念普及和用户教育阶段，吸引了包括百度、京东、华为、IBM等一大批国内外技术厂商，开启了以开源PaaS为核心构建平台层服务能力的变革。如果你有机会问问当时的云计算从业者们，他们十有八九都会告诉你：PaaS的时代就要来了！

这个说法其实一点儿没错，如果不是后来一个叫Docker的开源项目突然冒出来的话。

事实上，当时还名叫dotCloud的Docker公司，也是这股PaaS热潮中的一份子。只不过相比于Heroku、Pivotal、Red Hat等PaaS弄潮儿们，dotCloud公司实在是太微不足道了，而它的主打产品由于跟主流的Cloud Foundry社区脱节，长期以来也无人问津。眼看就要被如火如荼的PaaS风潮抛弃，dotCloud公司却做出了这样一个决定：开源自己的容器项目Docker。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/83/b3/45e71a7c.jpg" width="30px"><span>Focused</span> 👍（116） 💬（6）<div>引用原文：“docker项目给PaaS世界带来的“降维打击”，其实是提供了一种非常便利的打包机制。这种机制直接打包了应用运行所需要的整个操作系统，从而保证了本地环境和云端环境的高度一致”

既然打包了整个操作系统，如果一台机器上跑n个docker镜像，那意味着有n个操作系统运行在这台机器上，那每个docker所能获取到的资源是不是就很有限了，比如内存、cpu、文件描述符等等，请释惑。谢谢

</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/3d/a3/1d27f645.jpg" width="30px"><span>timmy</span> 👍（80） 💬（8）<div>一个弱智的问题：打包了系统镜像的应用会不会超级大？</div>2018-08-28</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/GDYkD2X7pXSKUSaUFC8u3TBPaakaibnOBV2NYDc2TNfb8Su9icFMwSod6iaQX5iaGU2gT6xkPuhXeWvY8KaVEZAYzg/132" width="30px"><span>extraterrestrial！！</span> 👍（69） 💬（4）<div>没经历过pass阶段, 既然打包这么重要，为啥后来的docker做了，cloud foundry自己没有做？有什么特别的难点吗？</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg" width="30px"><span>马若飞</span> 👍（21） 💬（5）<div>我个人理解用户还是需要Paas作为“云”，也就是载体，在之上运行这个“包”。这也就是AWS还是活的好好的原因。不知道对不对请老师指正。</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/d1/4b/802570e1.jpg" width="30px"><span>adoal</span> 👍（20） 💬（7）<div>如果打包不包括kernel，那么某个应用需要加载特定ko怎么办呢？</div>2018-09-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/96/7c/b1e6ea51.jpg" width="30px"><span>心情不错</span> 👍（12） 💬（1）<div>张小哥，我们现在用的是openvz7 目前领导和项目本身没有转变到微服务的动力</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/ae/e0/3e636955.jpg" width="30px"><span>李博越</span> 👍（12） 💬（1）<div>后面求加餐能讲讲cncf各个产品的overview以及关系</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/49/5a/fd7e818f.jpg" width="30px"><span>Joe姜</span> 👍（11） 💬（1）<div>已读。目前对于大部分公司而言，基本都用的阿里云或者腾讯云的云服务器，而不是物理机，机器资源配置都是动态通过pass这样的底层资源调度来管理的，容器作为更上一层的应用，又封装了一层，这样会不会降低容器中实际应用对物理计算资源的使用效能？如果是云服务器厂商，它们以后会直接给用户直接提供容器服务，而不再是虚拟机服务吗？</div>2018-11-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/2d/5a/d965c147.jpg" width="30px"><span>wangbo</span> 👍（11） 💬（1）<div>容器和阿里云这些服务器有什么关系吗？这个我一直没搞懂</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/99/17/f67e0d3a.jpg" width="30px"><span>阳雨杭</span> 👍（10） 💬（1）<div>请问完整的操作系统文件与目录，具体指的哪些文件和目录呢？会不会超级大，跟VMware的镜像文件相比，有什么区别呢？</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/a1/e6/50da1b2d.jpg" width="30px"><span>旭东(Frank)</span> 👍（10） 💬（1）<div>Devops和Docker的发展关系会有讲吗？微服务发展需求促成了Debops的发展，而Docker促进了微服务的Devops。
个人的理解不知对否</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/9e/f8/6b9037e9.jpg" width="30px"><span>风语者</span> 👍（8） 💬（1）<div>也有说法认为开发人员在Kubernetes的体验比较糟糕，毕竟通常Kubernetes被认为更像是“IaaS+”而不是一个“PaaS”。如果Kubernetes就是“IaaS+”而不是一个“PaaS”，那是不是可以将Cloud Foundry运行在Kubernetes之上？
目前Cloud Founfry已经支持了两种不同的运行时，参考:
Cloud Foundry gives you the choice: CF Container Runtime is built using Kubernetes and CF BOSH. You can also continue to use the Cloud Foundry cloud application platform — CF Application Runtime.

Kubernetes项目就是之前的Kubo项目发展而来。

Formerly known as Project Kubo, an incubating project within the Cloud Foundry Foundation initiated by engineers at Google and Pivotal, the Kubernetes-powered, Kubernetes-certified CF Container Runtime offers a uniform way to instantiate, deploy, and manage highly available Kubernetes clusters on a cloud platform using CF BOSH.

这样的整合看上去是取长补短的结合，把Cloud Foundry作为PaaS管理整个应用的云环境，包括k8s集群.
Kubernetes and CF BOSH together are a powerful combination. With CF BOSH managing the deployment and lifecycle of your environment, you can achieve high availability for Kubernetes clusters, as well as scaling, VM healing, and rolling upgrades.

因为我的工作中主要是基于Cloud Foundry的开发，但同时对k8s非常感兴趣，不知道这个整合的方向是否与以后的趋势相悖，望指点迷津。
谢谢！</div>2018-10-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/cf/f1/bf63fef6.jpg" width="30px"><span>洛子墟</span> 👍（5） 💬（1）<div>阿里开源的PouchContainer和现有的K8s 区别大吗?</div>2018-09-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/e9/af/3b12df8a.jpg" width="30px"><span>leon</span> 👍（5） 💬（1）<div>一直比较纠结，生产环境建议是二进制还是容器方式部署？</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/4c/20/ce900ac6.jpg" width="30px"><span>张应罗</span> 👍（4） 💬（1）<div>一直对YAML文件里的 list格式 理解的不深入，以及 selector 和label 关系等，后面会有涉及嘛？包括CICD的流程等</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/99/f9/528a73db.jpg" width="30px"><span>终身学习</span> 👍（4） 💬（2）<div>现在开发时多会使用图形界面的开发工具，docker怎么做开发环境呢？我觉得docker里放图形界面应该是不好的，发布的时候镜像会太大。不知现在业内的做法是什么样子的</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/8a/63/a5fda84d.jpg" width="30px"><span>烟火不坠</span> 👍（4） 💬（1）<div>之前一直想好好学习一下，正好公司准备上k8s，稳稳地🤔</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/8b/e8/7f09a744.jpg" width="30px"><span>Wings</span> 👍（3） 💬（1）<div>这个容器可以部署像tomcat那样的常规JAVA项目么？JAVA程序猿表示不理解docker技术的应用场景是否与JAVAWeb相关</div>2018-10-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/9a/60/006b6fe6.jpg" width="30px"><span>chen</span> 👍（3） 💬（1）<div>会有容器网络相关知识点吗？</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/97/2c/28f11cd9.jpg" width="30px"><span>岁月～静好</span> 👍（3） 💬（1）<div>作为菜鸟的我希望之后可以在自己工作中搭建应用起来Docker和k8s。</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg" width="30px"><span>escray</span> 👍（2） 💬（1）<div>还有一种应用场景，就是在离线的局域网环境下，不是一个 Kubernetes，然后把镜像发布在上面，不知道是否可行？

主要考虑易于调试和升级。</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/10/a8/a7aedb90.jpg" width="30px"><span>叶昊</span> 👍（0） 💬（1）<div>之前了解docker技术是看到了耗子叔的容器入门的几篇文章，现在要自己上手k8s应用，刚好有这个专栏，要好好学习一把，吃透docker+k8s！感谢作者～</div>2020-03-08</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo6TmyGF3wMIRLx3lPWOlBWusQCxyianFvZvWeW6hYCABLqEow3p7tGc6XgnqUPVvf6Cbj2KUYQIiag/132" width="30px"><span>孙健波</span> 👍（0） 💬（1）<div>想起来当时咱们实验室好多人在搞buildpack，还要支持windows .net😂</div>2018-09-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/e1/35/b8a38d0b.jpg" width="30px"><span>Ariel</span> 👍（0） 💬（1）<div>容器和阿里或者AWS的镜像有什么区别？</div>2018-08-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/7f/97/5acd3276.jpg" width="30px"><span>atompi</span> 👍（203） 💬（0）<div>重复打包，重复配置，换了运行环境，你就不得不再来一遍。我们创建了适用于一个应用的部署模式，但我们仅仅只是创建的它，并不能批量生产它。Docker的出现，好比告诉我们：“你应该用你的模板去快速的批量生产，而不是按照这个模板再‘创造’一个一样的模板”</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/20/1d/0c1a184c.jpg" width="30px"><span>罗辑思维</span> 👍（50） 💬（1）<div>早年Win98&#47;XP时代，系统大多数都是GHOST版本，安装软件经常提示缺少库文件什么。后来出现绿色软件，不需要安装，直接解压本地就可以使用。感觉有点类似DOCKER打包功能。</div>2019-06-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/4e/69/ce26c812.jpg" width="30px"><span>方志朋</span> 👍（45） 💬（3）<div>公司的paas系统从swarm转到了k8s，刚好看到了这个专栏，内心十分的激动，看了两篇，内容十分的精彩。</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/fa/27/8963dd17.jpg" width="30px"><span>@特</span> 👍（24） 💬（1）<div>在接触Docker以前主要是使用自动化脚本去做一系列重复的环境初始化工作，比如大名鼎鼎的LAMP就有公司专门为其打造了自动化安装的系统。后来就有了ansible这种神器。但是他们都不如Docker这么简洁粗暴。</div>2018-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/5e/ff/295bcf2c.jpg" width="30px"><span>vimfun</span> 👍（23） 💬（0）<div>原来以为 python 的 virtualenv 已经成为神器，后来也遇到过binary依赖库的坑，直到docker才真正的意识到从根目录“&#47;” 开始的静态化，不可变的“全面打包”方式才是真正的牛逼。

其根本上还是依赖的unix “一切皆是文件”[In UNIX Everything is a File](https:&#47;&#47;ph7spot.com&#47;musings&#47;in-unix-everything-is-a-file) 的思想。

根儿上牛逼，这是没有办法的事儿。哈哈哈哈🤣😂😍🥰</div>2019-08-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/96/6c/1367e6d7.jpg" width="30px"><span>聪灵果</span> 👍（16） 💬（0）<div>背景故事讲地很有意思嘛～</div>2018-08-28</li><br/>
</ul>