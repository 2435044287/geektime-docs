你好，我是张磊。今天我和你分享的主题是：Kubernetes一键部署利器之kubeadm。

通过前面几篇文章的内容，我其实阐述了这样一个思想：**要真正发挥容器技术的实力，你就不能仅仅局限于对Linux容器本身的钻研和使用。**

这些知识更适合作为你的技术储备，以便在需要的时候可以帮你更快地定位问题，并解决问题。

而更深入地学习容器技术的关键在于，**如何使用这些技术来“容器化”你的应用。**

比如，我们的应用既可能是Java Web和MySQL这样的组合，也可能是Cassandra这样的分布式系统。而要使用容器把后者运行起来，你单单通过Docker把一个Cassandra镜像跑起来是没用的。

要把Cassandra应用容器化的关键，在于如何处理好这些Cassandra容器之间的编排关系。比如，哪些Cassandra容器是主，哪些是从？主从容器如何区分？它们之间又如何进行自动发现和通信？Cassandra容器的持久化数据又如何保持，等等。

这也是为什么我们要反复强调Kubernetes项目的主要原因：这个项目体现出来的容器化“表达能力”，具有独有的先进性和完备性。这就使得它不仅能运行Java Web与MySQL这样的常规组合，还能够处理Cassandra容器集群等复杂编排问题。所以，对这种编排能力的剖析、解读和最佳实践，将是本专栏最重要的一部分内容。
<div><strong>精选留言（30）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/11/59/e5/17bb59ef.jpg" width="30px"><span>maojing</span> 👍（95） 💬（6）<div>楼主在这里有点鄙视swarm了，swarm在一定程度上可以解决很多问题。没有最好的，只有最合适的</div>2018-09-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/4c/20/ce900ac6.jpg" width="30px"><span>张应罗</span> 👍（93） 💬（5）<div>其实国内同学们用kubeadm安装集群最大的拦路虎在于有几个镜像没法下载，我建议大家先手动把镜像pull 下来，从阿里的镜像源上，然后tag成安装所需的镜像名称，这样你发现安装过程会异常顺利</div>2018-09-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/c2/e0/7188aa0a.jpg" width="30px"><span>blackpiglet</span> 👍（85） 💬（4）<div>1. Linux 下生成证书，主流的选择应该是 OpenSSL，还可以使用 GnuGPG，或者 keybase。
2. Kubernetes 组件之间的交互方式：HTTP&#47;HTTPS、gRPC、DNS、系统调用等。</div>2018-09-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/73/63/f008057a.jpg" width="30px"><span>alex</span> 👍（44） 💬（1）<div>对墙经验丰富的人来了，可以用下面这个镜像
https:&#47;&#47;github.com&#47;anjia0532&#47;gcr.io_mirror</div>2018-09-26</li><br/><li><img src="" width="30px"><span>包治结巴</span> 👍（43） 💬（1）<div>张老师，后面能讲讲怎么用二进制部署kubernetes吗？毕竟kubeadm不适用于生产环境，用二进制部署还是挺复杂的，恳请老师不吝讲解一下吧。</div>2018-09-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/76/f5/e3f5bd8d.jpg" width="30px"><span>宝仔</span> 👍（23） 💬（4）<div>etcd可以先部署，然后初始化的时候通过kubeadm.yaml指定已经部署好的etcd。高可用可以通过部署三个master节点来解决！现在有个问题，通过kubeadm部署生成的apiserver证书默认有效期是一年，官方是认为需要通过kubeadm upgrade 每年升级一次kubernetes，升级的时候也会更新证书，请问老师这个有解决方法吗？</div>2018-09-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/43/fa/b4324501.jpg" width="30px"><span>forever</span> 👍（20） 💬（1）<div>老师 minikuke和kubeadm有什么区别吗</div>2018-10-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/a0/30/5a7247eb.jpg" width="30px"><span>eden</span> 👍（18） 💬（2）<div>一周更新三章，有点迫不及待了。不过讲得确实不错，期待后面更精彩的内容。想请教一个问题，你怎么看待openstack和k8s的关系，哪个技术门槛更高，为什么现在公司更倾向于用k8s来实现自己的云，而openstack有被k8s取代的趋势。</div>2018-09-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4e/60/0d5aa340.jpg" width="30px"><span>gogo</span> 👍（17） 💬（1）<div>老师，您好，我现在对公有云、私有云、容器云之间的区别和联系不太清楚，网上查了些资料还上没搞清楚，能帮忙简单描述下吗</div>2018-09-14</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ercmNryEicqDS73icpUu7W0BnZ7ZIia6jR7kdVMIzH0q1d7L8EKAYWeTJcribibGcHnJzpsjRFxAe26egQ/132" width="30px"><span>pytimer</span> 👍（15） 💬（1）<div>制作证书的工具: cfssl openssl easyrsa</div>2018-09-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/64/bd/cbcdc4a6.jpg" width="30px"><span>rOMEo罗密欧</span> 👍（14） 💬（3）<div>请问一下在MacBook上安装部署k8s要怎么做？</div>2018-11-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/06/4a/e8519ff4.jpg" width="30px"><span>darling</span> 👍（12） 💬（1）<div>fabric8 不是Java API 操作K8s吗？ 大神不知道？？？？</div>2018-09-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/96/50/bde525b1.jpg" width="30px"><span>北卡</span> 👍（10） 💬（1）<div>kubeadm可以搭建高可用集群，实际上我们现在的生产环境就是使用kubeadm搭建的。
只是kubeadm搭建高可用集群如果完全按照官方文档来，它生成的的证书只有一年期限。所以需要自己提前做好证书。</div>2018-09-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/bd/07/bf8c31fb.jpg" width="30px"><span>周娄子</span> 👍（9） 💬（1）<div>kubeadm这个项目非常棒，简化kubernetes的安装，在我做整个运维流程的时候借鉴了很多他的做法。但是从运维角度来看，我们是从Creating a Custom Cluster from Scratch这个文档开始的，虽然比较麻烦，但是收益很大。</div>2018-09-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/49/68/a05fb728.jpg" width="30px"><span>韩大</span> 👍（7） 💬（1）<div>张老师我有个疑问，对于docker和k8s，感觉运维学更容易，也更合适，对于我们开发人员来说，还有那么大的必要去深入学习吗？docker对于开发意味着什么？望老师解惑！</div>2018-11-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/66/c4/038f9325.jpg" width="30px"><span>Jeff.W</span> 👍（7） 💬（1）<div>试用Rancher搭建过一个环境，感觉过程和kubeadm有些类似，主节点初始化生成token，其它节点通过token来进行join，而且是图形化。对于部署、运维能力都有限的中小企业来说，是否可以考虑这些非原生的部署方案？甚至是否可以考虑docker swarm呢？麻烦给个建议。</div>2018-09-16</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ercmNryEicqDS73icpUu7W0BnZ7ZIia6jR7kdVMIzH0q1d7L8EKAYWeTJcribibGcHnJzpsjRFxAe26egQ/132" width="30px"><span>pytimer</span> 👍（6） 💬（1）<div>Kubernetes文档上现在有关于使用kubeadm部署高可用集群的说明，是不是说明可以使用kubeadm结合saltstack、ansible进行生产上的部署？</div>2018-09-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/9a/ba/f5eb2a66.jpg" width="30px"><span>咕噜男爵-Tony</span> 👍（6） 💬（1）<div>专门讲了kubeadm，个人觉着rancher rke更合适用来搭建测试环境</div>2018-09-14</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/2CaTGljhcSJpSuc5UMrEwaBLjdnZic5vpseFicr1EnwpYzgzkzamkWQCUaZjWRt12kUVEkEBaoWiaIBiaA9YxCsaAA/132" width="30px"><span>余小坝</span> 👍（5） 💬（1）<div>请问老师，如果现在我的master节点的网段是172.18.196...，可以把一个网段为192.168.199..的节点加入都kubernetes集群中吗？</div>2018-09-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/96/50/bde525b1.jpg" width="30px"><span>北卡</span> 👍（4） 💬（1）<div>不能直接回复作者的回复吗?
“kubeadm 高可用部署还没有GA”
GA是什么意思?</div>2018-09-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/98/3b/5232b832.jpg" width="30px"><span>胖梁</span> 👍（4） 💬（1）<div>放弃的是docker swarm,  swarm mode还在持续，而且最新版也吸收了不少k8s的理念</div>2018-09-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/98/3b/5232b832.jpg" width="30px"><span>胖梁</span> 👍（3） 💬（1）<div>docker swarm, swarmkit, swarm mode, 三者傻傻分不清楚</div>2018-09-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/aa/19/fc2354bf.jpg" width="30px"><span>陈宇清</span> 👍（3） 💬（1）<div>join默认会变成worker节点。如何通过kubeadm添加多个master节点的HA模式呢？</div>2018-09-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/06/4a/e8519ff4.jpg" width="30px"><span>darling</span> 👍（3） 💬（1）<div>什么时候讲到fabric8啊？ 最近准备升级fabric8 4.xx 不知道有没有坑</div>2018-09-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/72/3e/534db55d.jpg" width="30px"><span>huan</span> 👍（3） 💬（1）<div>这篇实践起来困难很多了，主要是碰到各种墙，我是在阿里云中，在digitalocean 就顺畅很多</div>2018-09-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4e/60/0d5aa340.jpg" width="30px"><span>gogo</span> 👍（3） 💬（1）<div>kubeadm不是也支持高可用集群搭建的吗</div>2018-09-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/22/77/7431e82e.jpg" width="30px"><span>女生打</span> 👍（2） 💬（1）<div>個人目前使用 Rancher 2 來部署 K8s
但是 Rancher 的 kubelet 是容器化的
跟 kubeadm 不一樣
請問這兩個的效能跟侷限性 有比較過嗎？</div>2018-10-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/96/50/bde525b1.jpg" width="30px"><span>北卡</span> 👍（2） 💬（1）<div>额，指正式版没有发布吗？</div>2018-09-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/bf/02/7705d4ba.jpg" width="30px"><span>dragon</span> 👍（2） 💬（1）<div>Kubernetes 集群中的Aggregate APIServer 等特性，也需要用到专门的证书吗？还是直接拷贝kube-apiserver带证书就可以？通用吗。 证书这块有点不太懂</div>2018-09-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/b2/91/714c0f07.jpg" width="30px"><span>zero</span> 👍（1） 💬（1）<div>这章结合Kubernetes入门实战课的第17节看</div>2023-02-23</li><br/>
</ul>