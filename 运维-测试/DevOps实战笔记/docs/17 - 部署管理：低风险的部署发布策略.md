你好，我是石雪峰，今天我来跟你聊聊部署管理。

在DevOps年度状态报告中，有四个核心的结果指标，其中仅“部署”这一项就占了两个关键指标，分别是**部署频率**和**部署失败率**。顺便提一下，另外两个指标是**前置时长**和**平均故障修复时长**。

对DevOps来说，部署活动就相当于软件交付最后一公里的最后一百米冲刺。只有通过部署发布，软件真正交付到最终用户手中的时候，前面走过的路才真正创造了价值。

部署和发布这两个概念，经常会被混用，但严格来说，部署和发布代表两种不同的实践。**部署是一组技术实践，表示通过技术手段，将本次开发测试完成的功能实体**（比如代码、二进制包、配置文件、数据库等）**应用到指定环境的过程**，包括开发环境、预发布环境、生产环境等。部署的结果是对服务器进行变更，但是这个变更结果不一定对外可见。

发布，也就是Release，更偏向一种业务实践，也就是**将部署完成的功能正式生效，对用户可见和提供服务的过程**。发布的时机往往同业务需求密切相关。很多时候，部署和发布并不是同步进行的，比如，对于电商业务来说，要在0点上线新的活动，那么如果部署和发布不分离，就意味着要在0点的前1秒，完成所有服务器的变更，这显然是不现实的。

那么，我想请你思考这样一个问题：所谓的低风险发布，是不是要在发布之前确保本次变更的功能万无一失了，才会真正地执行发布动作呢？
<div><strong>精选留言（6）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg" width="30px"><span>leslie</span> 👍（11） 💬（2）<div>    其实老师解释的A&#47;B测试部署并非传统的A&#47;B测试部署：故而文中用暗部署，其实一定特性上结合了&quot;滚动（Ramped）部署“。其实可能目前大多数中小企业用灰度发布更多-主要是迅速，毕竟对于中小企业时间成本太宝贵了，能快点就不慢点。
    监控是最好的风险管理和问题的验证：可能不同的企业有不同种部署方式；同一套软件A企业部署的极其顺利的可能到了B企业就有问题，故而老师的&quot;监控就是一种全量的测试&quot;确实如此，不过个人觉得对于监控的重视程度和认识程度有时就是体现了一个企业技术管理者的风险意识。
     合理且合适的监控就能降低风险，完整的针对风险的处理方式；Anything is control。期待老师后续的精彩分享，谢谢。</div>2019-11-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/5f/81/1c614f4a.jpg" width="30px"><span>stg609</span> 👍（2） 💬（2）<div>老师，请教下，要是数据库有不兼容的改动呢？是不是蓝绿发布，灰度发布都用不了了？因为一旦变更，所有老的app肯定无法识别。那有什么好的策略吗？</div>2020-02-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/8a/dd/3e3ea5fe.jpg" width="30px"><span>🐱</span> 👍（2） 💬（9）<div>可以介绍下一些常用的企业级监控方案么？感觉很多时候监控不太全面。</div>2019-11-19</li><br/><li><img src="" width="30px"><span>Geek8292</span> 👍（2） 💬（1）<div>链接:https:&#47;&#47;pan.baidu.com&#47;s&#47;1-4Nth3h_kaLywHfoD0URhQ 密码:rb7o

链接已经过期了，能否再分享一下，谢谢</div>2021-09-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/fe/b3/7a21d1ee.jpg" width="30px"><span>arctec</span> 👍（2） 💬（3）<div>老师好，这个帖子的立体化监控内容能否再次提供下载学习的地址（之前地址已无法下载），
可以介绍下一些常用的企业级监控方案么？感觉很多时候监控不太全面。
作者回复: 你好，立体化监控是个大问题，我给你分享一个体系模型，可以参考一下。
链接:https:&#47;&#47;pan.baidu.com&#47;s&#47;1-4Nth3h_kaLywHfoD0URhQ 密码:rb7o</div>2020-07-12</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqdH1VzVC9fJ3ZrSicnCjPXyvicYRkC3LFzVWcsjhibnAPCHBicia8Wk7J6rJfEuGGLqLV9wuWnqWuxFFQ/132" width="30px"><span>Geek_0d99c9</span> 👍（1） 💬（1）<div>灰度产生的db的垃圾数据,怎么处理</div>2020-03-30</li><br/>
</ul>