你好，我是石雪峰。今天我来跟你聊聊CI。

之前，我曾应邀参加某公司的DevOps交流活动，他们质量团队的负责人分享了DevOps平台建设方面的经验，其中有一大半时间都在讲CI。刚开始还挺好的，可是后来，我越听越觉得奇怪，以至于在交流环节，我只想提一个问题：“你觉得CI是个啥意思？”后来，为了不被主办方鄙视，话到嘴边我又努力憋回去了。

回来的路上，我就一直在思考这个问题。很多时候，人们嘴上总是挂着CI，但是他们说的CI和我理解的CI好像并不是一回事。比如，有时候CI被用来指代负责内部工具平台建设的团队；有时候，CI类似一种技术实践，间接等同于软件的编译和打包；有时候，CI又成了一种职能和角色，指代负责版本的集成和发布的人。可见，CI的定义跟DevOps一样，每个人的理解都千差万别。

可问题是，如果不能理解CI原本的含义，怎么发挥CI真正的价值呢？以CI的名义打造的平台又怎么能不跑偏，并且解决真正的问题呢？

所以，今天，就让我们一起重新认识下这个“最熟悉的陌生人”。

CI是Continuous Integration的缩写，也就是我们熟悉的持续集成，顾名思义，这里面有两个关键的问题：集成什么东西？为什么要持续？要回答这两个问题，就得从CI诞生的历史说起了。
<div><strong>精选留言（23）</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/11/c7/c6/35cc7c7c.jpg" width="30px"><span>Robert小七</span> 👍（9） 💬（3）<div>对于老师问的三个问题，我们公司可以算是做到了！但对于每一次提交触发集成，想请教下是否意味着每次提交都会触发持续集成流水线？如果是这样，也就是说持续集成是包含持续部署的？因为构建只能运行单元测试，但是大量的自动化还是需要先部署服务的！再就是老师所说的每次提交集成触发这个机制，很想请教下老师，您推荐监控主线分支还是特性分支？或者说有专门的集成分支？如果是主线分支，按照特性分支策略，其实已经做过一轮测试了再提交到主干的，所以我很想知道您落地时思考的工作流程！也就是在实际工作中的整个流程！比如从拉分支，提交代码到远端分支，是否会触发持续集成服务，还是说只有集成到主干才会触发？</div>2019-11-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/4b/e7/430b4869.jpg" width="30px"><span>石子头</span> 👍（6） 💬（1）<div>老师，有什么相对权威的DevOps培训可以推荐吗？网上很多，比较难分辨真正好的，能指明个方向也行的，谢谢！</div>2019-11-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/52/44/de7f2b98.jpg" width="30px"><span>pines</span> 👍（5） 💬（1）<div>之前的公司，采用了gitlab+gerrit+jenkins组件了一条CI的流水线，做的也比较简单，每个人创建自己的分支进行提交，触发jenkins进行编译与自动化测试(测试没人写，只进行了简单的编译检查)。然后在gerrit上进行review，通过代码才能进master。现在的公司没有这套流水线，感觉特别low</div>2019-11-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/15/02/66f65388.jpg" width="30px"><span>雷霹雳的爸爸</span> 👍（3） 💬（3）<div>赶巧了我是12讲发出来才看的11讲，刚好一起看的，所以难免想起好像在哪儿有一个论调，翻了下笔记，https:&#47;&#47;www.continuousdeliveryconsulting.com&#47;blog&#47;organisation-pattern-trunk-based-development&#47;，这哥们提到Jez humble在 https:&#47;&#47;book.douban.com&#47;subject&#47;26702829&#47; 将TBD称为CI的synonymous

而对于老师的思考题，我的问题在于我好像连老师三连问的第一问好像都举不了手…</div>2019-11-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/75/4f/2edbb97e.jpg" width="30px"><span>陈文涛</span> 👍（2） 💬（1）<div>这句话说的很对-------根据 CI 变更，自动识别匹配对应的测试任务也是一个挑战。
老师，对于ci这块一个很现实的问题困扰着我，跟您请教。
对于ci大多数团队都是半路出家，在存在历史包袱的情况下如何践行ci呢，具体点来讲：
比如，我们在逐步建立代码静态扫描的平台和自动化业务的测试，这个如何能够跟代码的提交，版本的变更相衔接呢，如何能够针对变更进行“增量的CI”呢，有什么好的解决方法和实践么？</div>2019-11-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/37/3b/495e2ce6.jpg" width="30px"><span>陈斯佳</span> 👍（2） 💬（1）<div>老师，问一个问题下，您觉得自动化测试能算是运维技能树当中的一环吗？还是应该归测试组的职责？作为运维，需要了解到什么程度的自动化测试的知识呢？只要会配置就好吗？还是也要去了解如何编写测试案例？我们公司现在都是请大学生来做自动化测试这块，进展很慢，我很想帮忙，但是又不知道要怎么切入，值不值得花时间去学习…</div>2019-11-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg" width="30px"><span>Jxin</span> 👍（2） 💬（1）<div>ci是一套理念，随着它的推行会催生出工具平台和文化。工具平台的重心在于提高效率，也就是所有可以被自动化的操作最终都由自动化来解决，使得问题可以close，人力可以得到解放。文化则是倒逼着人们制定并执行ci的流程，同时开始切割集成工作，缩小每次集成的力度提高灵活性，规范每次提交的原子性提高版本管理和问题识别的精准度，以及核心流程单元测试的编写close风险。</div>2019-11-07</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/CV9kk5M26pdxvFhbrkicjZW8IPzZELdahmgPibia1iauBTdic34eObamicP45pTF5HIkhqAJvXtOoaDgiaUlVwI8cXaXA/132" width="30px"><span>Bun</span> 👍（2） 💬（2）<div>有什么好的自动化测试工具推荐下</div>2019-11-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/e2/d8/f0562ede.jpg" width="30px"><span>manatee</span> 👍（2） 💬（1）<div>请问老师前端项目在ci中的测试有什么好的联系吗</div>2019-11-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ad/24/c6b763b4.jpg" width="30px"><span>桃子-夏勇杰</span> 👍（1） 💬（1）<div>集成的问题在于需要集成，要是整个团队各自的模块互不影响，是不是集成就没有那么痛苦了？</div>2020-07-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/a9/88/8cfb565f.jpg" width="30px"><span>linda.zx</span> 👍（1） 💬（1）<div>老师，针对于紧急发布执行CI，由于时间紧迫，开发团队会跳过代码检查和自动化测试。理论上应该是不可以的～但是该如何平衡时间呢？</div>2019-12-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ad/24/c6b763b4.jpg" width="30px"><span>桃子-夏勇杰</span> 👍（1） 💬（1）<div>周六雷涛老师在我们公司做devops培训，果然也问了这3个问题，真的是灵魂拷问啊。</div>2019-11-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/7a/62/9b248708.jpg" width="30px"><span>阿硕</span> 👍（1） 💬（2）<div>石老师，您好，关于每次提交触发构建中的方式，应该如何选择呢？能否提供下最佳实践参考，谢谢。</div>2019-11-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/69/87/f2024d47.jpg" width="30px"><span>Erik_zhang</span> 👍（0） 💬（1）<div>老师您好，我想请问一个单元测试工具的问题。我现在所在项目中开发语言主要是java和sql。java的单元测试工具，我们是可以使用mock方法的，但是Oracle的存储过程，我们目前的工具不支持mock，当逻辑很复杂，多个方法连续调用，分支就会非常多，开发工作量很大。请问您知道什么单元测试工具可以实现数据库存储过程的方法mock？如果实在没有，我就准备自己去开发一个了</div>2020-07-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/7f/9f/ca7b20cd.jpg" width="30px"><span>Hunter Liu</span> 👍（0） 💬（1）<div>《持续交付：发布可靠软件的系统方法》，这节课和这本书里的很多观点不谋而合，不过在我的公司很难做到这点，欠的东西太多，版本发出后各种问题完成版本不可用，项目延期。</div>2019-11-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg" width="30px"><span>leslie</span> 👍（0） 💬（1）<div>     老师在文章中的&quot;工具是实践的载体，实践是工具的根基，单纯的工具建设仅仅是千里之行的一小步&quot;其实深有感悟，在此基础上简单的扩充一下&quot;方法&#47;理论是实践的载体，实践是工具的根基，单纯的方法&#47;理论建设仅仅是千里之行的一小步&quot;。
      落地性和实践性确实非常成问题：可能自己中小企业和大型企业的OPS的工作时间对半吧，期间其实碰过不少企业做自动化，可是2009就普遍使用的SVN其实很多时候都简单的在人工操作。其实人很多时候不愿意走出舒适和适合的环境：企业在某些方面同样如此，只有在被逼迫到不做不行的时候才会去做才会去反思XXX之前提出的好像不错是不是可以考虑一下。
      就像这次大会自己为何去听失败案例讲解：其实就感受到很多的不仅仅是存在而且是普遍现象；引发了大量的反思和自己的策划。通过广度去明白&#47;理解深度，从而在实践中修正深度。
      其实当我们确定去做的时候有些工作是可以提前做的：这个月就又学习了关于项目管理的，提前做和理解一些事情，这样可能会在真实操作时更好落地。谢谢老师今天的分享，期待下一次的教诲。</div>2019-11-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2c/45/44/8df79d3c.jpg" width="30px"><span>事已至此开始撤退</span> 👍（0） 💬（0）<div>很干货，非常干货。</div>2023-05-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/9e/9e/9a3ded97.jpg" width="30px"><span>彭耀</span> 👍（0） 💬（0）<div>以“道法术器”来类比DevOps，个人理解：实践是道，流程是法，实施是术、工具是器！</div>2022-02-20</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJDSY5xBJ2PH4lqNtWJqhe1HcYkP7S9ibAXChONgCBX5pJ2gaU3icXhltQgqhzDyML3EzFicxPeE4Tiag/132" width="30px"><span>Geek_0bb537</span> 👍（0） 💬（0）<div>老师你好，手游方面做e2e测试，有没有好的方案？</div>2022-02-01</li><br/><li><img src="" width="30px"><span>风大大</span> 👍（0） 💬（0）<div>老师我想问一下，前期我们CI上线的时候 自动化编译和测试运行出现了好多错误，每天都要排查很多问题，有没有自动化的工具能对错误分类，和半自动化的分析呢 谢谢</div>2022-01-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/2a/ff/a9d72102.jpg" width="30px"><span>BertGeek</span> 👍（0） 💬（0）<div>通过学习老师Devops 思想，对ci也有了广义的理解，非常感谢</div>2021-05-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/43/65/bf57c323.jpg" width="30px"><span>Pyel</span> 👍（0） 💬（0）<div>很受教，在工作中必须做好持续集成！</div>2020-03-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/d6/72/755e8e54.jpg" width="30px"><span>一只蜗牛在散步</span> 👍（0） 💬（0）<div>老师您好，对于流水线执行一次完整构建的时间，多长时间以内是比较好的呢？可以给个建议吗？</div>2020-03-11</li><br/>
</ul>